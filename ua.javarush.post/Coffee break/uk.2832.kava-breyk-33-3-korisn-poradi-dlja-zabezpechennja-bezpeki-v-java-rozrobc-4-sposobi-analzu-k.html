Кава-брейк #33. 3 корисні поради для забезпечення безпеки в Java-розробці. 4 способи аналізу коду, про які повинен знати кожен розробник
<p>----------------------------------------</p>
Джерело: Незважаючи на те, що Java існує з 1990-х років, це, як і раніше, один з найбільш затребуваних ЯП. Розробники використовують Java для ефективного вирішення багатьох проблем, у тому числі пов'язаних з іншими мовами. Крім того, за її 
<p>----------------------------------------</p>
<h2>3 корисні поради для забезпечення безпеки в Java-розробці</h2>Джерело: <a href="https://dzone.com/articles/top-tips-for-ensuring-security-during-java-develop" rel="nofollow" target="_blank">DZone</a> Незважаючи на те, що Java існує з 1990-х років, це, як і раніше, один з найбільш затребуваних ЯП. Розробники використовують Java для ефективного вирішення багатьох проблем, у тому числі пов'язаних з іншими мовами. Крім того, за її допомогою можна створювати рішення будь-якої складності. <img data-max-width="800" data-id="4b4af9dc-3f50-4d80-8f0c-1854bdf9e156" alt="Кава-брейк #33.  3 корисні поради для забезпечення безпеки в Java-розробці.  4 способи аналізу коду, про які повинен знати кожен розробник - 1" src="https://cdn.javarush.com/images/article/4b4af9dc-3f50-4d80-8f0c-1854bdf9e156/800.jpeg" style="width: 800px;">Ще одна перевага Java полягає в тому, що використовуючи цю мову можна досягти високого рівня безпеки. Звичайно, не варто сприймати це як належне. Забезпечити безпеку при створенні Java-програми - один з головних пріоритетів для розробників. Зневага до цього правила призведе до того, що ваша компанія зіткнеться з недовірою з боку споживачів. Щоб ви могли уникнути подібної ситуації, ми підготували кілька практичних порад, які могли б стати для вас корисними при розробці веб-застосунків на Java. 
<h3>Захист від використання SQL-коду</h3>Впровадження SQL-коду - одна з найсерйозніших вразливостей. З її допомогою зловмисники отримують доступ до конфіденційних даних. Проблема виникає, коли хакер перехоплює запити додатка до бази даних і використовує їх для отримання доступу до інформації про користувачів, а потім для будь-яких інших незаконних цілей. Зрозуміло, від цього можна захиститися. У ваших силах зробити так, щоб зловмисники не могли використовувати атаки з використанням SQL-коду у вашому додатку: наприклад, параметризуючи запити. Для цього необхідно використати підготовлений запит (prepared statement). В ідеалі, розробники повинні застосовувати тільки цей метод для створення запитів. Нижче наведено приклад Java-коду, який допоможе вам краще зрозуміти, як це робиться: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">prepStatmentExample</span><span class="token punctuation">(</span><span class="token class-name">String</span> parameter<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
   <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>DB_URL<span class="token punctuation">,</span> USER<span class="token punctuation">,</span> PASS<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">String</span> query <span class="token operator">=</span> <span class="token string">"SELECT * FROM USERS WHERE lastname = ?"</span><span class="token punctuation">;</span>
   <span class="token class-name">PreparedStatement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span>
   statement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> parameter<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>statement<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">ResultSet</span> result <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printResult</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<h3>Перевіряйте сторонні бібліотеки</h3>Це одна з найважливіших порад, якою повинна дотримуватися будь-яка команда Java-розробників. Важливим він є тим, що дозволяє ще раз переконатися, що код не містить вразливості. Нехтуючи перевіркою сторонніх бібліотек, ви просто зруйнуєте якість та репутацію своєї веб-додатки. Крім того, така перевірка допомагає краще виявляти помилки, проблеми з продуктивністю та багато іншого. 
<h3>Використовуйте дані з великою обережністю</h3>Кожна веб-програма зазвичай містить безліч конфіденційних даних, таких як банківські реквізити клієнтів тощо. Отже, програмістам важливо бути дуже обережними під час обробки такої інформації. Краще заздалегідь розрахувати, коли та які конфіденційні дані буде запитувати вашу програму. І не забудьте очистити методи toString() по суті предметної області. Розробка веб-додатків на Java, якщо вона враховує всі вимоги до безпеки, здатна допомогти не лише клієнтам, а й компаніям. Можете не сумніватися: завдяки безпеці вам буде набагато легше підняти свій бізнес на новий рівень. 
<h2>4 способи аналізу коду, про які повинен знати кожен розробник</h2>Джерело: <a href="https://techbeacon.com/app-dev-testing/4-types-code-analysis-every-developer-should-embrace" rel="nofollow" target="_blank">TechBeacon</a> Ви, напевно, чули термін «статичний аналіз». Найчастіше під ним мають на увазі якийсь один відомий інструмент або метод. Але насправді є кілька різновидів статичного аналізу, кожен з яких має певне значення при використанні. Найчастіше згадуваний аналіз коду називається SAST (Static Application Security Testing – статичне тестування захищеності додатків). Вважається, що це найкращий спосіб тестування. Але крім нього ви можете використовувати додаткові методи, адже кожен із них виявляє різні типи помилок. Ось чотири типи аналізу коду, які я раджу вам вивчити. Кожен з них має свої переваги. 
<h3>Продуктивність</h3>Інструменти статичного аналізу допомагають виявити шаблони кодингу, що знижують продуктивність. Наприклад, BoxedPrimitiveConstructor шукає шаблони, такі як New Boolean (true). У ранніх версіях Java він часто використовувався, але тепер є ефективніші методи. Використовуючи інструменти статичного аналізу для виявлення таких анти-шаблонів продуктивності, ви унеможливлюєте те, що вони потраплять у вашу базу коду. Ці інструменти корисні і в плані освіти: вони сигналізують досвідченим розробникам про те, що змінабося best practices кодингу і показують новачкам найкращий спосіб упоратися з поставленим завданням. 
<h3>Надійність</h3>Такі проблеми, як NullPointerException в Java або витік ресурсів в C зазвичай не впливають на безпеку. Але їх потрібно відстежувати та виправляти, оскільки ці проблеми можуть призвести до несподіваної поведінки або втрати часу через простої. Погодьтеся, ніхто не хоче о 3-й ранку отримати повідомлення або дзвінок про те, що ваш сервіс «лежить». Інструменти статичного аналізу, орієнтовані на надійність, можуть допомогти запобігти такому варіанту розвитку подій. Наприклад, інструмент <a href="https://fbinfer.com/" rel="nofollow" target="_blank">Infer від Facebook</a>здатний виявляти проблеми NullPointer, витоку пам'яті та проблеми безпеки/синхронізації потоків. Оскільки загальновідомо, що витоку пам'яті та проблеми з потоками важко знайти та налагодити, інструменти статичного аналізу особливо корисні для такого типу помилок: вони заощаджують час розробника та підвищують продуктивність у довгостроковій перспективі. 
<h3>Безпека</h3>Існує великий спектр проблем безпеки, якому відповідає ряд різних алгоритмів статичного аналізу, призначених для їх виявлення. Наприклад, методи, націлені на пошук вразливостей потоку інформації (№<a href="https://owasp.org/www-project-top-ten/OWASP_Top_Ten_2017/Top_10-2017_A1-Injection" rel="nofollow" target="_blank"> 1</a> , <a href="https://owasp.org/www-project-top-ten/OWASP_Top_Ten_2017/Top_10-2017_A3-Sensitive_Data_Exposure" rel="nofollow" target="_blank">3</a> та <a href="https://owasp.org/www-project-top-ten/OWASP_Top_Ten_2017/Top_10-2017_A7-Cross-Site_Scripting_(XSS)" rel="nofollow" target="_blank">7</a>з десятки критичних загроз безпеки веб-застосунків OWASP Top 10), не завжди хороші для виявлення проблем безпеки пам'яті (SANS 25 Issue #1). Це означає, що рекомендується використовувати кілька інструментів, навіть якщо ви насамперед дбаєте про безпеку. Зазначений інструмент Infer допомагає виявити вразливості потоку інформації, такі як атаки з впровадженням команд або невдалі спроби зашифрувати неактивні дані. Налаштування Infer для виведення на екран інформації про вашу програму та його інфраструктуру здатне виявити більше помилок і покращити співвідношення «сигнал/шум». Інструмент із відкритим вихідним кодом <a href="https://airbnb.io/projects/" rel="nofollow" target="_blank">FindSecBugs</a>виявляє проблеми з конфігурацією, використання погано захищеної криптографії та проблеми з використанням команд для конкретного фреймворку. Він працює з коробки - додаткові налаштування не знадобляться. 
<h3>Стиль</h3>Ще одна хороша практика – заохочувати розробників команди писати код у єдиному стилі. Не важливо вибрати конкретний стиль, як забезпечити умови, щоб розробники дотримувалися його. Як приклад можна навести<a href="https://airbnb.io/projects/" rel="nofollow" target="_blank"> посібники зі стилю</a>від компанії Airbnb. Є дві вагомі причини автоматизувати виявлення порушень стилю за допомогою статичного аналізу. По-перше, автоматизація допомагає підтримувати цілісність коду. По-друге, якщо розробник може помаботись, то інструмент цього ніколи не допустить — він завжди вкаже на порушення стилю. Ніхто не хоче бути рецензентом коду, який вказує іншим на проблеми із пробілами чи іменами змінних. Краще дозволити інструментам взяти на себе відповідальність за таку скрупульозність, щоб члени команди могли зосередитися на покращенні архітектури та інших високорівневих аспектах якості коду. 
<h3>Взаємопов'язаність</h3>З такою кількістю інструментів, необхідних для широкого охоплення різних типів помилок, інтеграція цих інструментів у процеси DevOps дуже важлива. Найголовніше тут – поставити правильну мету для процесу розробки. Наприклад, перевірку коду, оскільки платформа використовується декількома розробниками (на відміну від IDE, які зазвичай менш зв'язні) і часто керується централізовано. Якщо ви хочете розширити використання статичного аналізу, почніть із простих інструментів — <a href="https://find-sec-bugs.github.io/" rel="nofollow" target="_blank">FindSecBugs</a> та <a href="https://pmd.github.io/" rel="nofollow" target="_blank">PMD</a> , які заточені під пошук проблем з безпекою та стилем коду. <a href="https://fbinfer.com/" rel="nofollow" target="_blank">Infer</a> та <a href="https://errorprone.info/" rel="nofollow" target="_blank">ErrorProne</a>трохи складніше у роботі, оскільки вимагають інтеграції до системи складання, але вони забезпечують глибший аналіз. Враховуючи те, як вони підвищують продуктивність і впевненість, час, витрачений на впровадження таких інструментів у роботу виразно вартий того.