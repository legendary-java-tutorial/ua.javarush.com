Кава-брейк #87. Чому модульне тестування є важливим для розробників? 5 способів скопіювати масив у Java
<p>----------------------------------------</p>
Джерело: Давайте обговоримо, чому модульне тестування є важливим і цінним, а також як воно полегшує процес налагодження. Модульне тестування – потужний інструмент для підвищення якості програмного забезпечення. Модульні тести забезпечують ф
<p>----------------------------------------</p>
<h2 id="topic1">Чому модульне тестування є важливим для розробників?</h2>Джерело: <a href="https://searchsoftwarequality.techtarget.com/answer/Is-unit-testing-an-important-aspect-of-software-development" rel="nofollow" target="_blank">SearchSoftwareQuality</a> Давайте обговоримо, чому модульне тестування є важливим і цінним, а також як воно полегшує процес налагодження. Модульне тестування – потужний інструмент для підвищення якості програмного забезпечення. Модульні тести забезпечують фундаментальну перевірку того, що програма відповідає специфікаціям програмного забезпечення і поводиться так, як задумано. <img data-max-width="800" data-id="9f69650b-83b7-47a1-88a7-1d4bec1b692b" alt="Кава-брейк #87.  Чому модульне тестування є важливим для розробників?  5 способів скопіювати масив у Java - 1" src="https://cdn.javarush.com/images/article/9f69650b-83b7-47a1-88a7-1d4bec1b692b/800.jpeg" style="width: 800px;">Коли все зроблено добре, модульні тести:
<ul>
 <li>зменшують кількість дефектів та виявляють їх на ранніх етапах життєвого циклу розробки;</li>
 <li>покращують читаність коду;</li>
 <li>допускають повторне використання коду;</li>
 <li>підвищують швидкість розгортання.</li>
</ul>Давайте розберемося, чому модульне тестування є важливим, як виник цей тип тестування і які існують перешкоди на шляху його впровадження. 
<h3>Історія модульного тестування</h3>Помилка, виявлена ​​на ранній стадії, - це економія часу та зусиль. Протягом перших 50 років історії комп'ютерів модульне тестування та налагодження були по суті одним і тим самим. Але до 1990-х років код став настільки складним, що часто неможливо було розділити систему на дрібні частини для їх ізольованого запуску. У 1997 році програміст на ім'я Кент Бек створив JUnit - плагін середовища розробки для тестування невеликих фрагментів коду. Тестовий код, який оцінює вихідний код, назвали модульними тестами. Цей різновид модульного тестування став основним на довгі роки. Після того, як Бек створив JUnit, Мартін Фаулер написав книгу "Рефакторинг", в якій запропонував способи перетворення коду, щоб зробити його більш ізольованим та тестованим. Комбінація рефакторингу коду та модульного тестування призвела до розробки, заснована на тестуванні, де створення модульних тестів має важливе значення для процесу програмування. У ній код має бути тестованим ще до створення. Таким чином, програмування не завершується до запуску модульних тестів. Потім проект може стати стадії дослідження на системному чи людському рівні. 
<h3>Приклад модульного тестування</h3>Цей приклад показує важливість модульного тестування. Тут JUnit оцінює просту функцію, яка перетворює температуру з Фаренгейта на Цельсій. Формула перетворення: C = (F-32) * 5/9. Усього кілька рядків, включаючи сигнатуру функції та фігурні дужки, можна реалізувати у коді як бібліотечну функцію. Однак із функції не ясно, що це критерії. Ці параметри можуть включати округлення значень у більшу або меншу сторону, дійсні числа або верхній і нижній межі. Давайте створимо приклади модульних тестів для цієї функції перетворення температури на Perl, використовуючи модуль Test :: More. Перший рядок — це коментар, який повідомляє програмісту, чого чекати від коду, що залишився. 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"># is <span class="token punctuation">(</span>input<span class="token punctuation">,</span> expected result<span class="token punctuation">,</span> comment<span class="token punctuation">)</span>
<span class="token function">is</span><span class="token punctuation">(</span> <span class="token class-name">FtoC</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">'Freezing point is F32, C 0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">is</span><span class="token punctuation">(</span> <span class="token class-name">FtoC</span><span class="token punctuation">(</span><span class="token number">212</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token string">'Boiling point is F212, C 100'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">is</span><span class="token punctuation">(</span> <span class="token class-name">FtoC</span><span class="token punctuation">(</span><span class="token number">59038</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">32767</span><span class="token punctuation">,</span> <span class="token string">'Upper limit of C is 32767'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">is</span><span class="token punctuation">(</span> <span class="token class-name">FtoC</span><span class="token punctuation">(</span><span class="token number">59039</span><span class="token punctuation">)</span><span class="token punctuation">,</span>undefined<span class="token punctuation">,</span> <span class="token string">'One past upper limit is error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> Фреймворк JUnit спирається на об'єктно-орієнтовані системи та об'єкти тестування, але концепція аналогічна. 
<h3>Ізольовані модульні випробування</h3>Одна з переваг модульних тестів полягає в тому, що вони ізолюють функцію, клас або метод та тестують лише цей фрагмент коду. Більш якісні окремі компоненти забезпечують загальну стійкість до відмови системи. Таким чином виходить надійний код. Модульні випробування також змінюють характер процесу налагодження. Щоб спробувати виправити помилку, програмісти просто пишуть невдалий тест, а потім повторюють його, щоб він пройшов, не порушуючи попередні очікування. Цей процес виключає ручний цикл традиційного налагодження за допомогою налаштування, повторного створення, призупинення та перевірки. Для зміни коду, щоб зробити його придатним для модульного тестування, програмісти повинні змінити процес своєї роботи. Будь-які фрагменти коду, написані без модульних тестів, швидше за все, вважатимуться неперевіреними, принаймні, 
<h3>Адаптація модульних тестів</h3>Застаріле (Legacy) програмне забезпечення - це програма, яка працює протягом тривалого часу і, швидше за все, написана без модульних тестів. Legacy-код має цінність для компанії. Він стабільно працює довгі роки. Деякі програми, створені без використання модульних тестів, обробляють транзакції мільйон доларів на день. Але код, в якому немає модульних тестів, згодом перетворюється на велику грудку бруду, оскільки протягом багатьох років до нього торкалися багато програмістів, які займаються обслуговуванням коду. Рефакторинг дозволяє програмістам поступово вносити до системи зміни, щоб зробити її тестованою. Однак ці зміни потребують часу. Кілька років тому я обговорював зі своїм колегою Бобом Реселманом питання використання модульних тестів для застарілих додатків. Реселман стверджував, що впроваджувати модульне тестування до програм, створених без них, занадто дорого і навіть безглуздо. Натомість він рекомендував організації почати нову розробку з модульних тестів і залишити застарілі програми у спокої. Можливо, це вірно для COBOL, генераторів програм звітів та інших додатків, але я стверджую, що додатків, написаних сучасними мовами - C ++, C #, Java і Ruby - додавати модульні тести заднім числом досить просто. Замість того, щоб писати їх для всієї програми, просто додайте модульні тести до поточної зміни та виконуйте рефакторинг у міру просування. генераторів програм звітів та інших додатків, але я стверджую, що додатків, написаних сучасними мовами - C ++, C #, Java і Ruby - додавати модульні тести заднім числом досить просто. Замість того, щоб писати їх для всієї програми, просто додайте модульні тести до поточної зміни та виконуйте рефакторинг у міру просування. генераторів програм звітів та інших додатків, але я стверджую, що додатків, написаних сучасними мовами - C ++, C #, Java і Ruby - додавати модульні тести заднім числом досить просто. Замість того, щоб писати їх для всієї програми, просто додайте модульні тести до поточної зміни та виконуйте рефакторинг у міру просування. 
<h3>Підвищення швидкості, якості та тестованості</h3>Керівники проектів кажуть, що планування передбачає компроміс між якістю, обсягом виконаної роботи, ресурсами та часом. Щоб додати щось до однієї області, ви повинні відібрати щось від іншої. Ефективні модульні випробування порушують це правило. Ось чому модульне тестування є важливим і цінним для організацій. Хороші модульні тести створюють тестований код, який покращує якість. У цьому коді буде менше дефектів, а значить, менше виправлень помилок для швидшого завершення проекту. Коли у програмному забезпеченні виникають помилки, модульні тести прискорюють налагодження, виправлення та написання коду. І це відбувається таким чином, що ймовірність повторення дефекту значно знижується – одночасно покращується якість та швидкість коду. Хоча в розробці програмного забезпечення немає чарівної палички, 
<h2 id="topic2">5 способів скопіювати масив у Java</h2>Джерело: <a href="https://dev.to/imanuel/how-to-copy-array-in-java-56go" rel="nofollow" target="_blank">Dev.to</a> Отже, у вас є два масиви A і B і вам потрібно скопіювати елементи з A до B. Що ж, є різні способи зробити це на Java, і зараз я вам їх покажу. 
<h3>Метод перший: ForLoop</h3>Тут нам на допомогу приходить старий-добрий цикл <span class="code">for</span> : 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token class-name">A</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token class-name">B</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

 <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token class-name">A</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token class-name">B</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">A</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<h3>Метод другий: .clone()</h3>Метод клонування масиву також може допомогти досягти бажаного результату: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class=" language-java"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token class-name">A</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token class-name">B</span> <span class="token operator">=</span> <span class="token class-name">A</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//the clone method copies the content of A into B;</span></code></pre>
<h3>Метод третій: System.arraycopy()</h3>Наступний спосіб - використання методу <span class="code">System.arraycopy()</span> , який є у пакеті <span class="code">java.lang</span> . Перш ніж ми перейдемо до його застосування, обговоримо його підпис: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">arraycopy</span><span class="token punctuation">(</span>
    <span class="token class-name">Object</span> src<span class="token punctuation">,</span> <span class="token comment">//:source array, in this case A</span>
    <span class="token keyword">int</span> srcPos<span class="token punctuation">,</span> <span class="token comment">//:the start index for copy, typically 0</span>
    <span class="token class-name">Object</span> dest<span class="token punctuation">,</span> <span class="token comment">//:destination object in this case B.</span>
    <span class="token keyword">int</span> destPos<span class="token punctuation">,</span> <span class="token comment">//:the index to place the copied elements</span>
    <span class="token keyword">int</span> length <span class="token comment">//:the length of the contents to be copied</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> Застосування: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token class-name">A</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token class-name">B</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span><span class="token class-name">A</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name">B</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name">A</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3>Метод четвертий: Arrays.copyOf()</h3>Наступний варіант копіювання, який ми обговоримо, стосується класу <span class="code">Arrays</span> з пакету <span class="code">java.utils</span> . Зверніть увагу на його підпис: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">copyOf</span><span class="token punctuation">(</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> original<span class="token punctuation">,</span> <span class="token comment">// :source array in this case A</span>
    <span class="token keyword">int</span> newLength <span class="token comment">// :the length of the contents to be copied</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> Застосування: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class=" language-java"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token class-name">A</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token class-name">B</span> <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span><span class="token class-name">A</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3>Метод п'ятий: Arrays.copyOfRange()</h3>Отже, це буде останній варіант, на який ми звернемо увагу до цієї публікації. Він теж із класу <span class="code">Arrays</span> , що є у пакеті <span class="code">java.utils</span> . Ще раз подивимося його підпис: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> copyOfRange​<span class="token punctuation">(</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> original<span class="token punctuation">,</span> <span class="token comment">// :source array in this case A</span>
    <span class="token keyword">int</span> from<span class="token punctuation">,</span>  <span class="token comment">//:the start index for copy, typically 0</span>
    <span class="token keyword">int</span> <span class="token keyword">to</span> <span class="token comment">// the end index exclusive</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> Застосування: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class=" language-java"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token class-name">A</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token class-name">B</span> <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOfRange</span><span class="token punctuation">(</span><span class="token class-name">A</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name">A</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>