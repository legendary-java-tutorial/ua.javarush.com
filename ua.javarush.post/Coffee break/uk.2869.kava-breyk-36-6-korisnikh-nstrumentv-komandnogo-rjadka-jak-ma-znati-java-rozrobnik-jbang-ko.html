Кава-брейк #36. 6 корисних інструментів командного рядка, які має знати Java-розробник. Jbang: корисний інструмент для тестування бібліотек Java
<p>----------------------------------------</p>
Джерело: Java - одна з найбільш популярних мов програмування. Однією з причин такої уваги до цієї мови є те, що Java Runtime Environment дозволяє запускати Java-додатки на різних платформах. Запуск та компіляцію можна здійснювати, зокрема, 
<p>----------------------------------------</p>
<h2>6 корисних інструментів командного рядка, які повинен знати Java-розробник</h2>Джерело: <a href="https://www.technotification.com/2019/08/6-useful-command-line-tools-every-java-developer-should-know.html" rel="nofollow" target="_blank">Technotification</a> Java - одна з найбільш популярних мов програмування. Однією з причин такої уваги до цієї мови є те, що Java Runtime Environment дозволяє запускати Java-додатки на різних платформах. Запуск та компіляцію можна здійснювати, зокрема, з командного рядка. Використовуючи інструменти командного рядка, розробник може спростити процес створення програм та виконання багатьох інших завдань. <img data-max-width="800" data-id="7b4bae7d-e714-4113-bf34-184968ca9bf1" alt="Кава-брейк #36.  6 корисних інструментів командного рядка, які має знати Java-розробник.  Jbang - створення сценаріїв оболонки для Java - 1" src="https://cdn.javarush.com/images/article/7b4bae7d-e714-4113-bf34-184968ca9bf1/800.jpeg" style="width: 800px;">Сьогодні я розповім про шість корисних інструментів командного рядка, які повинен знати Java-розробник.
<h3><a href="https://docs.oracle.com/javase/9/tools/jstat.htm#JSWOR734" rel="nofollow" target="_blank">Агрегатор статистики Java (jstat)</a></h3>Агрегатор статистики Java або команду jstat використовують, коли виникає проблема зі швидкістю запуску програми. Це службовий інструмент, який відображає статистику продуктивності Java Virtual Machine (JVM). Використовуйте його, коли потрібно дізнатися розмір динамічної пам'яті або алгоритм автоматичного складання сміття JRE.
<h3><a href="https://docs.oracle.com/javase/9/tools/jdeps.htm#JSWOR690" rel="nofollow" target="_blank">Диспетчер залежностей Java (jdeps)</a></h3>Jdeps - це аналізатор залежностей класів Java, корисний швидкого визначення статичних залежностей додатків і бібліотек. Jdeps також пропонує варіанти новішої та кращої API, яку ви можете використовувати для заміни існуючої версії.
<h3><a href="https://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html" rel="nofollow" target="_blank">Компілятор Java (javac)</a></h3>Javac — один із найкорисніших інструментів командного рядка для розробників. Він входить до складу JDK з першої версії та включений у складання багатьох популярних IDE. Javac використовується для усунення будь-яких проблем, що виникають у процесі складання та розгортання проекту.
<h3><a href="https://docs.oracle.com/javase/7/docs/technotes/tools/windows/javap.html" rel="nofollow" target="_blank">Профілювальник Java (javap)</a></h3>Він скасовує компіляцію, розділяє файли класів і показує, що всередині них. Його також називають дизассемблером (Java Class File Disassembler). Ви можете використовувати Javap, щоб дізнатися, як працює конкретний оператор Java. Також за допомогою профілювання ви можете побачити методи, доступні в класі, якщо у вас немає доступу до коду.
<h3><a href="https://docs.oracle.com/javase/7/docs/technotes/tools/windows/jar.html" rel="nofollow" target="_blank">Утиліта архівування Java (jar)</a></h3>Утиліта Java Archive або jar використовується для створення стисненого архівного файлу. Це ще один корисний інструмент, яким регулярно користуються багато розробників. Jar також може стати в нагоді, коли ви хочете порівняти одну версію випуску коду з іншою або вказати точку входу для вбудованих JAR-файлів або інших виконуваних файлів.
<h3><a href="https://docs.oracle.com/javase/7/docs/technotes/tools/share/jps.html" rel="nofollow" target="_blank">Інструмент стану процесу JVM (jps)</a></h3>Цей інструмент працює незалежно від операційної системи та надає зручний спосіб визначення ідентифікатора процесу (PID). Припустимо, що ви запустабо програму і хочете зв'язати її з Java Memory-Map (jmap). Для того, щоб зробити це, потрібен PID, і саме тут на допомогу приходить jps. Найчастіше корисно використовувати комбінацію прапорів «-mlv». Вона друкує аргументи основного методу, аргументи повних імен пакетів, що передаються JVM.
<h3>Висновок</h3>Це лише кілька корисних інструментів командного рядка, які повинен знати кожен Java-розробник. Згодом майже всі інструменти, які застосовуються у створенні софту на Java, значно покращабося. Але багато розробників все ще покладаються на командний рядок для вирішення важливих завдань. Крім того, якщо ви новачок, завжди рекомендується мати хоча б базові уявлення про популярні інструменти командного рядка. Це допоможе вам не лише у навчанні, а й у кар'єрі.
<h2>Jbang: корисний інструмент для тестування бібліотек Java</h2>Джерело: <a href="https://dzone.com/articles/jbang-the-power-of-shell-scripting-for-java" rel="nofollow" target="_blank">DZone</a> Щоразу, коли виходить нова бібліотека Java, розробникам цікаво з нею ознайомитися. Але іноді це буває складно через проблеми з налаштуванням проекту в IDE або Maven. Звичайно, шляхи до класів можна прописати і в командному рядку, але для деяких лінивих розробників це дуже громіздко. І ось тут на допомогу приходить <a href="https://jbang.dev/" rel="nofollow" target="_blank">jbang</a> ! З ним зникнуть проблеми з налаштуванням проекту для тестування бібліотеки або запуском Java-файлу! <img data-max-width="800" data-id="e004199d-ceb9-476a-8284-a31bdbf7ec0e" alt="Кава-брейк #36.  6 корисних інструментів командного рядка, які має знати Java-розробник.  Jbang - створення сценаріїв оболонки для Java - 2" src="https://cdn.javarush.com/images/article/e004199d-ceb9-476a-8284-a31bdbf7ec0e/800.jpeg" style="width: 800px;">Зрозуміло, в Java є JShell, але jbang здається краще багато в чому. Jbang - це невеликий акуратний інструмент, написаний Максом Рідал Андерсен (maxandersen), який:
<ul>
 <li>дозволяє запускати java-файли як сценарій де завгодно - з Java 8 + або jshell;</li>
 <li>допомагає випробувати будь-яку Java API без необхідності встановлення, налаштування або конфігурації проекту для Maven, Gradle або будь-якої іншої системи збирання.</li>
</ul>Короткий перелік можливостей jbang:
<ul>
 <li>Підтримує Java 8 або вище, але рекомендується Java 11;</li>
 <li>Оголошення залежностей через <code class=" language-none">//DEPS group:artifact:version</code>або <code class=" language-none">@Grab</code>анотації;</li>
 <li>Параметри компіляції та виконання за допомогою та ;<code class=" language-none">//JAVAC_OPTIONS</code><code class=" language-none">//JAVA_OPTIONS</code></li>
 <li>Підтримує роботу у Windows, Linux та Mac;</li>
 <li>Запуск програми JavaFX на Java 8 і вище без необхідності перекодування;</li>
 <li>І багато іншого...</li>
</ul>Тепер давайте розберемося, у чому полягають переваги jbang. Для цього візьмемо хорошу бібліотеку - Soup. Це бібліотека Java, яка надає дуже зручні API для отримання URL-адреса, отримання та керування вмістом HTML за допомогою методів DOM і селекторів CSS або, простіше кажучи, JQuery-подібного синтаксису для роботи з DOM. Для початку нам потрібно буде запустити клас <code class=" language-none">jbang</code>, використовуючи <code class=" language-none">jbang init hellojsoup.java</code>. Це створить <code class=" language-none">hellojsoup.java</code>файл із <code class=" language-none">hellojsoup</code>класом та основним методом. У верхній частині файлу також є команди для <code class=" language-none">Unix !shebang</code>та <code class=" language-none">DEPS</code>оголошення. Це оголошення є коментарем, де ми вказуємо Gradle-подібні залежності від формату - <code class=" language-none">groupId:artifactId:version</code>. У нашому випадку це буде<code class=" language-none">org.jsoup:jsoup:1.13.1</code>. Ось код, який виконує простий виклик Вікіпедії та відображає заголовки у розділі новин. Це трохи змінена версія, що представлена ​​на сайті Soup. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token comment"><span class="token comment">//usr/bin/env jbang "$0" "$@" ; exit $?</span></span>
<span class="token comment"><span class="token comment">//DEPS org.jsoup:jsoup:1.13.1</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>lang<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>*<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>jsoup<span class="token punctuation"><span class="token punctuation">.</span></span>nodes<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Document</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>jsoup<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Jsoup</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>jsoup<span class="token punctuation"><span class="token punctuation">.</span></span>select<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Elements</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>jsoup<span class="token punctuation"><span class="token punctuation">.</span></span>nodes<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Element</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> hellojsoup <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">throws</span></span> <span class="token class-name"><span class="token class-name">Exception</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
              <span class="token class-name"><span class="token class-name">Document</span></span> doc <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Jsoup</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">connect</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"https://en.wikipedia.org/"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
              out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>doc<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">title</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
              <span class="token class-name"><span class="token class-name">Elements</span></span> newsHeadlines <span class="token operator"><span class="token operator">=</span></span> doc<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">select</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"#mp-itn b a"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
              <span class="token keyword"><span class="token keyword">for</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Element</span></span> headline <span class="token operator"><span class="token operator">:</span></span> newsHeadlines<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                    out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">format</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"%s\n\t%s"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> headline<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">attr</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"title"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>                     headline<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">absUrl</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"href"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
          <span class="token punctuation"><span class="token punctuation">}</span></span>
     <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Щоб запустити код, потрібно буде ввести наступну команду, де запуск є необов'язковою командою. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java">jbang run hellojsoup<span class="token punctuation"><span class="token punctuation">.</span></span>java</code></pre> Під час запуску цієї програми заголовки дня відображатимуться в розділі новин. На момент написання цієї статті отримано такі заголовки. Shell 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">Wikipedia</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> the free encyclopedia
<span class="token number"><span class="token number">2020</span></span> <span class="token class-name"><span class="token class-name">Twitter</span></span> bitcoin scam
https<span class="token operator"><span class="token operator">:</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token operator"><span class="token operator">/</span></span>en<span class="token punctuation"><span class="token punctuation">.</span></span>wikipedia<span class="token punctuation"><span class="token punctuation">.</span></span>org<span class="token operator"><span class="token operator">/</span></span>wiki<span class="token operator"><span class="token operator">/</span></span><span class="token number"><span class="token number">2020_</span></span>Twitter_bitcoin_scam
<span class="token number"><span class="token number">2020</span></span> <span class="token class-name"><span class="token class-name">Armenian</span></span><span class="token operator"><span class="token operator">?</span></span><span class="token class-name"><span class="token class-name">Azerbaijani</span></span> skirmishes
https<span class="token operator"><span class="token operator">:</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token operator"><span class="token operator">/</span></span>en<span class="token punctuation"><span class="token punctuation">.</span></span>wikipedia<span class="token punctuation"><span class="token punctuation">.</span></span>org<span class="token operator"><span class="token operator">/</span></span>wiki<span class="token operator"><span class="token operator">/</span></span><span class="token number"><span class="token number">2020_</span></span>Armenian<span class="token operator"><span class="token operator">%</span></span>E2<span class="token operator"><span class="token operator">%</span></span><span class="token number"><span class="token number">80</span></span><span class="token operator"><span class="token operator">%</span></span><span class="token number"><span class="token number">93</span></span>Azerbaijani_skirmishes
<span class="token class-name"><span class="token class-name">C</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token number"><span class="token number">2020</span></span> F3 <span class="token punctuation"><span class="token punctuation">(</span></span>NEOWISE<span class="token punctuation"><span class="token punctuation">)</span></span>
https<span class="token operator"><span class="token operator">:</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token operator"><span class="token operator">/</span></span>en<span class="token punctuation"><span class="token punctuation">.</span></span>wikipedia<span class="token punctuation"><span class="token punctuation">.</span></span>org<span class="token operator"><span class="token operator">/</span></span>wiki<span class="token operator"><span class="token operator">/</span></span><span class="token class-name"><span class="token class-name">C</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token function"><span class="token function">2020_F3_</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>NEOWISE<span class="token punctuation"><span class="token punctuation">)</span></span>
<span class="token class-name"><span class="token class-name">Portal</span></span><span class="token operator"><span class="token operator">:</span></span><span class="token class-name"><span class="token class-name">Current</span></span> events
https<span class="token operator"><span class="token operator">:</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token operator"><span class="token operator">/</span></span>en<span class="token punctuation"><span class="token punctuation">.</span></span>wikipedia<span class="token punctuation"><span class="token punctuation">.</span></span>org<span class="token operator"><span class="token operator">/</span></span>wiki<span class="token operator"><span class="token operator">/</span></span><span class="token class-name"><span class="token class-name">Portal</span></span><span class="token operator"><span class="token operator">:</span></span><span class="token class-name"><span class="token class-name">Current_events</span></span>
<span class="token class-name"><span class="token class-name">Deaths</span></span> in <span class="token number"><span class="token number">2020</span></span>
https<span class="token operator"><span class="token operator">:</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token operator"><span class="token operator">/</span></span>en<span class="token punctuation"><span class="token punctuation">.</span></span>wikipedia<span class="token punctuation"><span class="token punctuation">.</span></span>org<span class="token operator"><span class="token operator">/</span></span>wiki<span class="token operator"><span class="token operator">/</span></span><span class="token class-name"><span class="token class-name">Deaths_in_2020</span></span>
<span class="token class-name"><span class="token class-name">Wikipedia</span></span><span class="token operator"><span class="token operator">:</span></span><span class="token class-name"><span class="token class-name">In</span></span> the news<span class="token operator"><span class="token operator">/</span></span><span class="token class-name"><span class="token class-name">Candidates</span></span>
https<span class="token operator"><span class="token operator">:</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token operator"><span class="token operator">/</span></span>en<span class="token punctuation"><span class="token punctuation">.</span></span>wikipedia<span class="token punctuation"><span class="token punctuation">.</span></span>org<span class="token operator"><span class="token operator">/</span></span>wiki<span class="token operator"><span class="token operator">/</span></span><span class="token class-name"><span class="token class-name">Wikipedia</span></span><span class="token operator"><span class="token operator">:</span></span><span class="token class-name"><span class="token class-name">In_the_news</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token class-name"><span class="token class-name">Candidates</span></span></code></pre> Найпрекрасніше в jbang це те, наскільки він простий і легкий. Він потрібний не просто для тестування бібліотек, але і як інструмент, який у майбутньому буде широко використовуватися у виробничому середовищі, особливо в мікросервісах та безсерверних додатках. Ніякого складного налаштування сервера, тільки один-єдиний файл Java, який чудово справляється зі своїм завданням. Jbang підтримує роботу з vertx, undertow, JavaFX, resteasy, ratpack, з усіма основними IDE, включаючи IntelliJ IDEA, та багатьма іншими технологіями. Якщо ви хочете дізнатися більш детальну інформацію про jbang та ознайомитися з його документацією, відвідайте сторінку цього інструменту на <a href="https://github.com/jbangdev/jbang" rel="nofollow" target="_blank">GitHub</a> . Jbang виглядає дуже перспективно, тому я не здивуюсь, якщо в майбутньому він з'явиться у JDK!