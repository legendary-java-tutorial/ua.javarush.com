Тренди Java у 2022 році: JDK 18 та 19, Project Loom та Data mesh
<p>----------------------------------------</p>
Цього року очікуємо на вихід двох наступних версій JDK 18 (у березні) та JDK 19 (у вересні). З потенційно цікавого для більшості Java-розробників JDK 18 може бути: Що стосується JDK 19, вже є Early-Access Build, але ще немає офіційного спис
<p>----------------------------------------</p>
<em>Ну ось, 2022 рік почався. Поки у більшості ще новорічні канікули з шампанським та олів'є, ми говоритимемо про тренди у світі Java. Можливо, це допоможе вам проаналізувати свою кар'єру, вивчити нову технологію або придумати план розвитку на рік, що настав. <img data-max-width="800" data-id="0d5dbcf4-1816-4020-a7f5-7b2c290190f8" alt="Тренди Java у 2022 році: JDK 18 та 19, Project Loom та Data mesh - 1" src="https://cdn.javarush.com/images/article/0d5dbcf4-1816-4020-a7f5-7b2c290190f8/800.jpeg" style="width: 800px;">Спеціаліст з мови Java та лектор Андрій Родіонов, а також архітектор рішень у EPAM та голова програмного комітету Devoxx Ukraine Олег Цаль-Цалько розповіли про те, що чекає Java у 2022 році та найближчому майбутньому.</em>
<h2>Які перспективи Java у 2022 році?</h2><img data-max-width="1080" data-id="a63b48e1-bb7d-4be6-8acb-380fa530ca4f" alt="Тренди Java у 2022 році: JDK 18 та 19, Project Loom та Data mesh - 2" src="https://cdn.javarush.com/images/article/a63b48e1-bb7d-4be6-8acb-380fa530ca4f/1080.jpeg" style="width: 1080px;">Цього року очікуємо на вихід двох наступних версій JDK 18 (у березні) та JDK 19 (у вересні). З потенційно цікавого для більшості Java-розробників JDK 18 може бути:
<ul>
 <li>Вбудований Simple Web Server, без підтримки сервлет-контейнера, який можна буде використовувати для швидкого прототипування та тестування, за аналогією з аналогічними міні-серверами в Python, Ruby, PHP.</li>
 <li>Продовжуючий удосконалювати pattern matching.</li>
</ul>Що стосується JDK 19, вже є Early-Access Build, але ще немає офіційного списку, що в нього планується включити. Хочеться вірити, що в JDK 19 принаймні увійде перший стабільний прототип Project Loom, для якого нещодавно з'явабося проекти специфікацій і чия остання збірка базується на JDK 19. Про Project Loom ми ще поговоримо нижче. 
<h2>Для яких сфер Java залишається безальтернативним рішенням, де вона є кращою?</h2>
<h4>Андрій Родіонов:</h4>На щастя, не можна говорити про безальтернативність Java для будь-якої зі сфер, але можна говорити про Java як про якусь золоту середину для розробки enterprise додатків, бекенда та мікросервісів. Варто також відзначити збільшення різних дистрибутивів JDK від різних вендорів (крім Oracle): Amazon, Microsoft, Alibaba, Red Hat, Bellsoft (заснована вихідцями з Центру Розробок Oracle в Санкт-Петербурзі) та інші. Повний набір дистрибутивів доступний за <a href="https://sdkman.io/jdks" rel="nofollow" target="_blank">посиланням</a> . <img data-max-width="1080" data-id="637a665d-aead-4066-abf0-94cf4041488a" alt="Тренди Java у 2022 році: JDK 18 та 19, Project Loom та Data mesh - 3" src="https://cdn.javarush.com/images/article/637a665d-aead-4066-abf0-94cf4041488a/1080.jpeg" style="width: 1080px;">Альтернативи завжди є, але найбільше застосування Java знаходить на backend в enterprise розробці. Більшість великих компаній вибирають Java для своїх великих та складних систем. Причини ті самі: кількість розробників та експертизи на ринку, величезна екосистема і потужна JVM платформа. 
<h2>Які перспективи в інших jvm мов, зокрема, у Kotlin порівняно з Java?</h2>
<h4>Андрій Родіонов:</h4>Щоб зрозуміти які з JVM-мов популярні, достатньо відкрити документацію по Spring, Micronaut, Vert.x і подивитися, якими мовами наводяться приклади коду - загальними буде Java і Kotlin. Не можна сказати, що спостерігається масовий перехід проектів на Kotlin, але його популярність для бекенда продовжує зростати і безліч фреймворків намагається включити його в свою екосистему. Що стосується Scala, то виходять її нові версії, і вона далі активно використовується для ML, data processing і там, де зручнішою є функціональна парадигма програмування. 
<h4>Олег Цаль-Цалько:</h4>Інші JVM-мови є досить привабливими і в наш час цілком нормально, коли на проекті використовуються кілька мов програмування. Мені здається, причини того, чому новомодні JVM-мови не можуть потіснити Java, такі:
<ul>
 <li>Вони не настільки крутіші, щоб усі прямо взяли і перейшли на них.</li>
 <li>Вони використовують у тому сегменті, як і Java.</li>
 <li>Java потроху бере все краще від інших мов і стає кращим.</li>
</ul>
<h2>Чи буде падіння якості Java у зв'язку з коротшими міжрелізними інтервалами?</h2>
<h4>Олег Цаль-Цалько:</h4>Думаю що ні. Принаймні зараз я можу виділити більше позитиву від частих релізів. Ми бачимо, що нові кльові фічі з'являються набагато частіше. Тепер не слід чекати 5 років, щоб у мові з'явилося щось нове. Само собою тепер не варто чекати на такі грандіозні релізи, як Java 8, тому що фічі тепер з'являються маленькими ітераціями. 
<h2>Чи є фічі в нових версіях Java, які є особливо важливими для розробників?</h2>
<h4>Олег Цаль-Цалько:</h4>В останніх версіях Java з'явилося кілька цікавих фіч, таких як Pattern Matching, Sealed Classes та Records. Я рекомендував би подивитися на їхні можливості. Звичайно, найбільш серйозні та очікувані фічі плануються в рамках Project Loom та Project Valhalla, але я думаю, що фічі в рамках цих проектів теж будуть поступово релізуватися. 
<h2>Фреймворк Spring: чи буде він і надалі множити свою екосистему під різноманітні потреби?</h2>
<h4>Андрій Родіонов:</h4>Що стосується Spring Framework, то його розробка була зосереджена на підтримці різних можливостей Spring Cloud та можливості компіляції Spring Boot у нативні бінарні файли – проект Spring Native, який планується у майбутньому зробити частиною Spring Core. У цьому плані Spring відставав від Micronaut і Quarkus через активне використання reflection та динамічної кодогенерації. Що стосується Spring Framework 6, раджу переглянути доповідь <a href="https://www.youtube.com/watch?v=hZlOBmXmq5g" rel="nofollow" target="_blank">Spring 6 and Beyond Що нового в Spring Framework 6? </a>з конференції Joker (від Олега Докукі та Олексія Нестерова). З ключового – перехід на JDK 17, відмова від XML Configuration та Autowire через сеттери, подальший розвиток підтримки Kotlin та проекту Spring Fu. 
<h4>Олег Цаль-Цалько:</h4>Spring як найпопулярніший Java FW у наш час не хоче віддавати пальму першості. Я впевнений, що команда розробників докладатиме всіх зусиль до розвитку Spring. Spring заповнює все нові та нові ніші. Наприклад, Spring зробив дуже багато в області Reactive Streams/Reactive Programming зі своїм Project Reactor. Тепер вони просувають RSoket protocol, що теж виглядає багатообіцяюче.
<h2>Розкажіть про проект Loom: навіщо потрібен, які проблеми вирішує?</h2>
<h4>Андрій Родіонов:</h4>Project Loom – це, напевно, найцікавіша новація, яка може стати новим тектонічним зрушенням усієї JVM-платформи та всіх мов поверх JVM. Project Loom може не торкнеться так звичайних розробників, але точно вплине на всю екосистему, бібліотеки, фреймворки, інші JVM-мови, що використовують багатопоточність. Project Loom запроваджує нову абстракцію потоків – virtual threads (аналог корутин). Якщо раніше Java thread був безпосередньо прив'язаний до потоку операційної системи (ОС), і створення нового потоку в Java призводило до створення нового потоку ОС, то з virtual threads цей зв'язок один до одного розривається. При створенні нового віртуального потоку не буде створюватися новий потоку ОС, а для виконання безпосередніх обчислень перевикористовуватиметься один з так званих carrier thread (аналог пула потоків ОС). Таким чином, поверх одного потоку ОС може працювати кілька віртуальних потоків. Для обчислювальних завдань така модель віртуальних потоків не дає жодних переваг, і швидше уповільнює швидкість обчислень, але для блокуючих операцій, типу обробки HTTP-запитів, очікування відповідей від БД або мікросервісів дана модель буде істотним плюсом. Справа в тому, що при теперішній моделі потоків блокування/очікування Java thread призводило до простою потоку ОС, це було витрачанням ресурсів і вимагало створювати більше потоків ОС. У моделі з віртуальними потоками, блокування/очікування віртуального потоку призведе до звільнення carrier thread, поверх якого працював віртуальний потік, і на ньому запускатиметься інший віртуальний потік. Таким чином, потоки ОС будуть використовуватися більш оптимально, і знадобиться їх менше для виконання аналогічних завдань. Відповідно, виробники бібліотек, фреймворків та JVM-мов повинні адаптувати код під віртуальні потоки. Тому для них буде велике переписування :) Крім моделі віртуальних потоків, також планується привнести і новий API для спрощення оркестрації потоків - так званий structured concurrency. Зараз, наприклад, structured concurrency активно використовується в Kotlin-корутинах та Scala ZIO. На жаль, версія JDK і навіть рік виходу Project Loom поки що невідомі. На запитання про дату виходу головний архітектор Java-платформи Брайан Гетц відповідає філософською фразою: ”It will be ready”, when it will be ready”. Тому чекаємо і можемо пробувати фреймворків і JVM-мов повинні адаптувати код під віртуальні потоки. Тому для них буде велике переписування :) Крім моделі віртуальних потоків, також планується привнести і новий API для спрощення оркестрації потоків - так званий structured concurrency. Зараз, наприклад, structured concurrency активно використовується в Kotlin-корутинах та Scala ZIO. На жаль, версія JDK і навіть рік виходу Project Loom поки що невідомі. На запитання про дату виходу головний архітектор Java-платформи Брайан Гетц відповідає філософською фразою: ”It will be ready”, when it will be ready”. Тому чекаємо і можемо пробувати фреймворків і JVM-мов повинні адаптувати код під віртуальні потоки. Тому для них буде велике переписування :) Крім моделі віртуальних потоків, також планується привнести і новий API для спрощення оркестрації потоків - так званий structured concurrency. Зараз, наприклад, structured concurrency активно використовується в Kotlin-корутинах та Scala ZIO. На жаль, версія JDK і навіть рік виходу Project Loom поки що невідомі. На запитання про дату виходу головний архітектор Java-платформи Брайан Гетц відповідає філософською фразою: ”It will be ready”, when it will be ready”. Тому чекаємо і можемо пробувати structured concurrency активно використовується в Kotlin-корутинах та Scala ZIO. На жаль, версія JDK і навіть рік виходу Project Loom поки що невідомі. На запитання про дату виходу головний архітектор Java-платформи Брайан Гетц відповідає філософською фразою: ”It will be ready”, when it will be ready”. Тому чекаємо і можемо пробувати structured concurrency активно використовується в Kotlin-корутинах та Scala ZIO. На жаль, версія JDK і навіть рік виходу Project Loom поки що невідомі. На запитання про дату виходу головний архітектор Java-платформи Брайан Гетц відповідає філософською фразою: ”It will be ready”, when it will be ready”. Тому чекаємо і можемо пробувати<a href="https://inside.java/tag/loom" rel="nofollow" target="_blank">експериментальні зборки Project Loom</a> . 
<h4>Олег Цаль-Цалько:</h4>Loom – це великий umbrella project, в рамках якого команда OpenJDK та Oracle працює над Concurrency нововведеннями у Java та JVM: virtual threads, fibers та continuations. Швидше за все, реліз цих фіч буде поступовим. На даний момент є тільки Early Access builds для Virtual threads supports. Якщо говорити конкретно про virtual threads, його основна мета - спрощення багатопоточної моделі розробки в Java за допомогою використання мільйона легковажних потоків з тією ж семантикою, як і у стандартних платформних потоків. Під капотом ці потоки будуть змінюватися всередині ForkJoinPool та перевикористовувати платформні потоки. 
<h2>Які прогнози розвитку Java у світі глобальних трендів – мікросервісів, хмарної архітектури, блокчейну, ІІ?</h2>
<h4>Андрій Родіонов:</h4>Якщо говорити про глобальні тренди, то вони не дуже змінабося. Як і раніше, основним трендом продовжує залишатися Kubernetes та інфраструктура навколо нього у вигляді<a href="https://habr.com/ru/company/otus/blog/506916/" rel="nofollow" target="_blank"> Service mesh</a> . Набирає також популярність <a href="https://habr.com/ru/company/dododev/blog/475476/" rel="nofollow" target="_blank">Data mesh</a> як абстракція для управління розподіленими джерелами і сховищами даних.