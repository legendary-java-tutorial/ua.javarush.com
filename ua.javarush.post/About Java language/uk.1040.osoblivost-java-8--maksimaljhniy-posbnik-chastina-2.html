Особливості Java 8 – максимальний посібник (частина 2)
<p>----------------------------------------</p>
Друга частина перекладу статті . Перша частина (посилання може змінитися). У Java 8 додали багато нових класів і розширили існуючі з метою більш ефективної підтримки сучасного паралелізму, функціонального програмування, дати/часу та багато 
<p>----------------------------------------</p>
Друга частина перекладу статті <a href="http://www.javacodegeeks.com/2014/05/java-8-features-tutorial.html#repeating_annotations" rel="nofollow">Java 8 Features - The ULTIMATE Guide</a> . Перша частина <a href="https://codegym.cc/groups/posts/1037-osobennosti-java-8--maksimaljhnoe-rukovodstvo-chastjh-1">тут</a> (посилання може змінитися). <img data-id="e5a056c9-a4d8-459d-ab03-92b947e98d24" data-max-width="850" alt="Особливості Java 8 - максимальний посібник (частина 2) - 1" src="https://cdn.javarush.com/images/article/e5a056c9-a4d8-459d-ab03-92b947e98d24/800.jpeg" style="width: 850px;">
<h2>5. Нові можливості у бібліотеках Java 8</h2>У Java 8 додали багато нових класів і розширабо існуючі з метою більш ефективної підтримки сучасного паралелізму, функціонального програмування, дати/часу та багато іншого. 
<h3>5.1. Клас Optional</h3>Знаменитий <a href="https://examples.javacodegeeks.com/java-basics/exceptions/java-lang-nullpointerexception-how-to-handle-null-pointer-exception/" rel="nofollow">NullPointerException</a> на сьогоднішній день є найпопулярнішою причиною збоїв додатків Java. Давним давно прекрасний проект <a href="https://github.com/google/guava" rel="nofollow">Google Guava</a> представив <code class=" language-none">Optional</code>як рішення <code class=" language-none">NullPointerException</code>, тим самим перешкоджаючи забруднення коду перевірками на null, як наслідок заохочуючи написання чистішого коду. Натхненний Google Guava клас <code class=" language-none">Optional</code>зараз частина Java 8. <code class=" language-none">Optional</code>всього лише контейнер: він може містити <em>значення</em> або деякий тип <code class=" language-none">Т</code>або просто бути null. Він надає багато корисних методів, так що явні перевірки на null тепер не мають виправдань. Зверніться до <a href="http://docs.oracle.com/javase/8/docs/api/" rel="nofollow">офіційної документації</a> для більш детальної інформації. Давайте подивимося на два невеликі приклади використання<code class=" language-none">Optional</code>: з використанням null та без нього. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">Optional</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> fullName <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Optional</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">ofNullable</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token keyword"><span class="token keyword">null</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token string"><span class="token string">"Full Name is set? "</span></span> <span class="token operator"><span class="token operator">+</span></span> fullName<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">isPresent</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token string"><span class="token string">"Full Name: "</span></span> <span class="token operator"><span class="token operator">+</span></span> fullName<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">orElseGet</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">-&gt;</span></span> <span class="token string"><span class="token string">"[none]"</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> fullName<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">map</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> s <span class="token operator"><span class="token operator">-&gt;</span></span> <span class="token string"><span class="token string">"Hey "</span></span> <span class="token operator"><span class="token operator">+</span></span> s <span class="token operator"><span class="token operator">+</span></span> <span class="token string"><span class="token string">"!"</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">orElse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token string"><span class="token string">"Hey Stranger!"</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Метод <code class=" language-none">isPresent()</code>повертає <em>true</em> якщо екземпляр <code class=" language-none">Optional</code>містить не null значення і <em>false</em> інакше. Метод <code class=" language-none">orElseGet()</code>містить запасний механізм результату, якщо <code class=" language-none">Optional</code>містить null, приймаючи функції для генерації значення за замовчуванням. Метод <a href="https://codegym.cc/groups/posts/763-9-glavnihkh-voprosov-o-map-v-java" target="_blank">map</a> () перетворює поточне значення <code class=" language-none">Optional</code>та повертає новий екземпляр <code class=" language-none">Optional</code>. Метод <code class=" language-none">orElse()</code>схожий на <code class=" language-none">orElseGet()</code>, але замість функції він набуває значення за замовчуванням. Ось висновок цієї програми: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">Full</span></span> <span class="token class-name"><span class="token class-name">Name</span></span> is set<span class="token operator"><span class="token operator">?</span></span> <span class="token boolean"><span class="token boolean">false</span></span>
<span class="token class-name"><span class="token class-name">Full</span></span> <span class="token class-name"><span class="token class-name">Name</span></span><span class="token operator"><span class="token operator">:</span></span> <span class="token punctuation"><span class="token punctuation">[</span></span>none<span class="token punctuation"><span class="token punctuation">]</span></span>
<span class="token class-name"><span class="token class-name">Hey</span></span> <span class="token class-name"><span class="token class-name">Stranger</span></span><span class="token operator"><span class="token operator">!</span></span></code></pre> Давайте коротко розглянемо інший приклад: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">Optional</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> firstName <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Optional</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">of</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token string"><span class="token string">"Tom"</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token string"><span class="token string">"First Name is set? "</span></span> <span class="token operator"><span class="token operator">+</span></span> firstName<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">isPresent</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token string"><span class="token string">"First Name: "</span></span> <span class="token operator"><span class="token operator">+</span></span> firstName<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">orElseGet</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">-&gt;</span></span> <span class="token string"><span class="token string">"[none]"</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> firstName<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">map</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> s <span class="token operator"><span class="token operator">-&gt;</span></span> <span class="token string"><span class="token string">"Hey "</span></span> <span class="token operator"><span class="token operator">+</span></span> s <span class="token operator"><span class="token operator">+</span></span> <span class="token string"><span class="token string">"!"</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">orElse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token string"><span class="token string">"Hey Stranger!"</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Результат буде таким: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">First</span></span> <span class="token class-name"><span class="token class-name">Name</span></span> is set<span class="token operator"><span class="token operator">?</span></span> <span class="token boolean"><span class="token boolean">true</span></span>
<span class="token class-name"><span class="token class-name">First</span></span> <span class="token class-name"><span class="token class-name">Name</span></span><span class="token operator"><span class="token operator">:</span></span> <span class="token class-name"><span class="token class-name">Tom</span></span>
<span class="token class-name"><span class="token class-name">Hey</span></span> <span class="token class-name"><span class="token class-name">Tom</span></span><span class="token operator"><span class="token operator">!</span></span></code></pre> Для більш детальної інформації зверніться до <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html" rel="nofollow">офіційної документації</a> . 
<h3>5.2. Потоки</h3>Нещодавно <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html" rel="nofollow">доданий Stream API</a> ( <code class=" language-none">java.util.stream</code>) представляє реальне програмування у функціональному стилі Java. Це, безумовно, найбільш повне доповнення до бібліотеки Java, яке дозволяє розробникам Java бути значно ефективнішими, а також дає можливість створити ефективний, чистий і короткий код. Stream API значно полегшує обробку колекцій (але не обмежуючись тільки ними, як ми побачимо пізніше). Візьмемо для прикладу простий клас <code class=" language-none">Task</code>. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Streams</span></span>  <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">enum</span></span> <span class="token class-name"><span class="token class-name">Status</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        OPEN<span class="token punctuation"><span class="token punctuation">,</span></span> CLOSED
    <span class="token punctuation"><span class="token punctuation">}</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Task</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">Status</span></span> status<span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">Integer</span></span> points<span class="token punctuation"><span class="token punctuation">;</span></span>

        <span class="token class-name"><span class="token class-name">Task</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">Status</span></span> status<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">Integer</span></span> points <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>status <span class="token operator"><span class="token operator">=</span></span> status<span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>points <span class="token operator"><span class="token operator">=</span></span> points<span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span>

        <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Integer</span></span> <span class="token function"><span class="token function">getPoints</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            <span class="token keyword"><span class="token keyword">return</span></span> points<span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span>

        <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Status</span></span> <span class="token function"><span class="token function">getStatus</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            <span class="token keyword"><span class="token keyword">return</span></span> status<span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span>

        <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
        <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">String</span></span> <span class="token function"><span class="token function">toString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            <span class="token keyword"><span class="token keyword">return</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">format</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token string"><span class="token string">"[%s, %d]"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> status<span class="token punctuation"><span class="token punctuation">,</span></span> points <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Task має деяке уявлення про окуляри (або псевдо-складнощі) і може бути або <em>OPEN</em> або <em>CLOSE</em> . Давайте введемо невелику колекцію завдань, щоб грати з ними. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">Collection</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Task</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> tasks <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Arrays</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">asList</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>
    <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Task</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token class-name"><span class="token class-name">Status</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>OPEN<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">5</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
    <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Task</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token class-name"><span class="token class-name">Status</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>OPEN<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">13</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
    <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Task</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token class-name"><span class="token class-name">Status</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>CLOSED<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">8</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span>
<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Перше питання, яке ми маємо намір з'ясувати, скільки очок містять завдання зі статусом <em>OPEN</em> зараз? До Java 8 звичайним рішенням для цього було б використання ітератора <code class=" language-none">foreach</code>. Але в Java 8 відповідь у потоках: послідовність елементів, які підтримують послідовні та паралельні агрегатні операції. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token comment"><span class="token comment">// Подсчет общего количества очков всех активных задач с использованием sum()</span></span>
<span class="token keyword"><span class="token keyword">final</span></span> <span class="token keyword"><span class="token keyword">long</span></span> totalPointsOfOpenTasks <span class="token operator"><span class="token operator">=</span></span> tasks
    <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">stream</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">filter</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> task <span class="token operator"><span class="token operator">-&gt;</span></span> task<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getStatus</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">==</span></span> <span class="token class-name"><span class="token class-name">Status</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>OPEN <span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">mapToInt</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token class-name"><span class="token class-name">Task</span></span><span class="token operator"><span class="token operator">::</span></span><span class="token function"><span class="token function">getPoints</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">sum</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token string"><span class="token string">"Total points: "</span></span> <span class="token operator"><span class="token operator">+</span></span> totalPointsOfOpenTasks <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> І висновок на консоль виглядатиме як: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">Total</span></span> points<span class="token operator"><span class="token operator">:</span></span> <span class="token number"><span class="token number">18</span></span></code></pre> Розглянемо, що тут відбувається. По-перше, колекція завдань конвертується в потокове уявлення. Потім операція <code class=" language-none">filter</code>відфільтровує всі завдання зі статусом <em>CLOSED</em> . На наступному кроці операція <code class=" language-none">mapToInt</code>перетворює потік <code class=" language-none">Task</code>s на потік <code class=" language-none">Integer</code>s використовуючи метод <code class=" language-none">Task::getPoints</code>для кожного екземпляра <code class=" language-none">Task</code>. І нарешті, всі окуляри підсумовуються з використанням методу <code class=" language-none">sum</code>, який надає кінцевий результат. Перш ніж перейти до наступних прикладів, є деякі зауваження про потоки, які потрібно мати на увазі (детальніше <a href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#StreamOps" rel="nofollow">тут</a> ). Операції <code class=" language-none">stream</code>поділяються на <em>проміжні</em> та <em>кінцеві</em> операції. <em>Проміжні операції</em>повертають новий потік Вони завжди ліниві, при виконанні проміжних операцій, таких як <code class=" language-none">filter</code>, вони не виконують фільтрацію насправді, натомість створюється новий потік, який по завершенню формування містить елементи вихідного потоку, які відповідають заданому предикату. <em>Кінцеві операції</em> , такі як <code class=" language-none">forEach</code>і<code class=" language-none">sum</code>можуть пройти через потік для отримання результату або побічного ефекту. Після того, як кінцева операція виконується, потік вважається використаним і не може бути використаний. Практично у всіх випадках кінцеві операції прагнуть завершити своє проходження базовим джерелом даних. Інша цінна можливість потоків – це підтримка паралельних процесів із коробки. Давайте подивимося цей приклад, який знаходить суму очок всіх завдань. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token comment"><span class="token comment">// Calculate total points of all tasks</span></span>
<span class="token keyword"><span class="token keyword">final</span></span> <span class="token keyword"><span class="token keyword">double</span></span> totalPoints <span class="token operator"><span class="token operator">=</span></span> tasks
   <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">stream</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">parallel</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">map</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> task <span class="token operator"><span class="token operator">-&gt;</span></span> task<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getPoints</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token comment"><span class="token comment">// or map( Task::getPoints )</span></span>
   <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">reduce</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">Integer</span></span><span class="token operator"><span class="token operator">::</span></span><span class="token function"><span class="token function">sum</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token string"><span class="token string">"Total points (all tasks): "</span></span> <span class="token operator"><span class="token operator">+</span></span> totalPoints <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Це дуже схоже на перший приклад, за винятком того, що ми намагаємося обробити всі завдання <em>паралельно</em> та розрахувати кінцевий результат використовуючи метод <code class=" language-none">reduce</code>. Ось висновок у консоль: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">Total</span></span> points <span class="token punctuation"><span class="token punctuation">(</span></span>all tasks<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token operator"><span class="token operator">:</span></span> <span class="token number"><span class="token number">26.0</span></span></code></pre> Часто виникає потреба у групуванні елементів за певним критерієм. Приклад демонструє, як потоки можуть допомогти з цим. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token comment"><span class="token comment">// Группировка задач по их статусу</span></span>
<span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">Map</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Status</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Task</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> map <span class="token operator"><span class="token operator">=</span></span> tasks
    <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">stream</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">collect</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token class-name"><span class="token class-name">Collectors</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">groupingBy</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token class-name"><span class="token class-name">Task</span></span><span class="token operator"><span class="token operator">::</span></span><span class="token function"><span class="token function">getStatus</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> map <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Виведення в консоль буде наступним: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java"><span class="token punctuation"><span class="token punctuation">{</span></span>CLOSED<span class="token operator"><span class="token operator">=</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">[</span></span>CLOSED<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">8</span></span><span class="token punctuation"><span class="token punctuation">]</span></span><span class="token punctuation"><span class="token punctuation">]</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> OPEN<span class="token operator"><span class="token operator">=</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">[</span></span>OPEN<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">5</span></span><span class="token punctuation"><span class="token punctuation">]</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token punctuation"><span class="token punctuation">[</span></span>OPEN<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">13</span></span><span class="token punctuation"><span class="token punctuation">]</span></span><span class="token punctuation"><span class="token punctuation">]</span></span><span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Щоб закінчити з прикладами для завдань, давайте обчислимо загальний відсоток (або вага) кожного завдання в колекції, заснований на загальній кількості очок: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token comment"><span class="token comment">// Подсчет веса каждой задачи (як процент от общего количества очков)</span></span>
<span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">Collection</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> result <span class="token operator"><span class="token operator">=</span></span> tasks
    <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">stream</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>                                        <span class="token comment"><span class="token comment">// Stream&lt;String&gt;</span></span>
    <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">mapToInt</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token class-name"><span class="token class-name">Task</span></span><span class="token operator"><span class="token operator">::</span></span><span class="token function"><span class="token function">getPoints</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span>                     <span class="token comment"><span class="token comment">// IntStream</span></span>
    <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">asLongStream</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>                                  <span class="token comment"><span class="token comment">// LongStream</span></span>
    <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">mapToDouble</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> points <span class="token operator"><span class="token operator">-&gt;</span></span> points <span class="token operator"><span class="token operator">/</span></span> totalPoints <span class="token punctuation"><span class="token punctuation">)</span></span>   <span class="token comment"><span class="token comment">// DoubleStream</span></span>
    <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">boxed</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>                                         <span class="token comment"><span class="token comment">// Stream&lt;Double&gt;</span></span>
    <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">mapToLong</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> weigth <span class="token operator"><span class="token operator">-&gt;</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token keyword"><span class="token keyword">long</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> weigth <span class="token operator"><span class="token operator">*</span></span> <span class="token number"><span class="token number">100</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token comment"><span class="token comment">// LongStream</span></span>
    <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">mapToObj</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> percentage <span class="token operator"><span class="token operator">-&gt;</span></span> percentage <span class="token operator"><span class="token operator">+</span></span> <span class="token string"><span class="token string">"%"</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span>      <span class="token comment"><span class="token comment">// Stream&lt;String&gt;</span></span>
    <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">collect</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token class-name"><span class="token class-name">Collectors</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">toList</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>                 <span class="token comment"><span class="token comment">// List&lt;String&gt;</span></span>

<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> result <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Виведення в консоль буде таким: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java"><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token number"><span class="token number">19</span></span><span class="token operator"><span class="token operator">%</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">50</span></span><span class="token operator"><span class="token operator">%</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">30</span></span><span class="token operator"><span class="token operator">%</span></span><span class="token punctuation"><span class="token punctuation">]</span></span></code></pre> І нарешті, як ми зазначали раніше, Stream API призначено не лише для колекцій Java. Типова операція вводу-виводу, така як читання текстових файлів рядковим чином, є дуже хорошим кандидатом для використання потокової обробки. Ось невеликий приклад для підтвердження цього. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">Path</span></span> path <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">File</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> filename <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">toPath</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">try</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token class-name"><span class="token class-name">Stream</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> lines <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Files</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">lines</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> path<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">StandardCharsets</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>UTF_8 <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    lines<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">onClose</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">-&gt;</span></span> <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Done!"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">forEach</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token operator"><span class="token operator">::</span></span><span class="token function"><span class="token function">println</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Метод <code class=" language-none">onConsole</code>, який викликається в потоці, повертає еквівалентний потік із додатковим закритим обробником. Закритий обробник викликається, коли метод <code class=" language-none">close()</code>викликається в потоці. Stream API разом з <a href="https://www.javacodegeeks.com/2014/05/java-8-features-tutorial.html#lambdas_and_functional" rel="nofollow">лямбдами</a> та <a href="https://www.javacodegeeks.com/2014/05/java-8-features-tutorial.html#_Method_References" rel="nofollow">посилальними методами</a> в сукупності з методами за замовчуванням та статичними методами Java 8 є відповідями сучасним парадигмам у розробці програмного забезпечення. Для більш детальної інформації звертайтесь до <a href="https://docs.oracle.com/javase/tutorial/collections/streams/index.html" rel="nofollow">офіційної документації</a> . 
<h3>5.3. API для дати/часу (JSR 310)</h3>Java 8 дає новий погляд на керування датою та часом надаючи новий <a href="https://jcp.org/en/jsr/detail?id=310" rel="nofollow">API для дати та часу (JSR 310)</a> . Маніпуляції з датою та часом є однією з найгірших больових точок для Java розробників. Стандартний <code class=" language-none">java.util.Date</code>наступний загалом <code class=" language-none">java.util.Calendar</code>не покращив ситуацію (можливо, зробив її навіть більш заплутаною). Ось як народився <a href="https://www.joda.org/joda-time/" rel="nofollow">Joda-Time</a> : чудова альтернатива <a href="https://jcp.org/en/jsr/detail?id=310" rel="nofollow">API дати/часу для Java</a> . Новий API для дати/часу Java 8 (JSR 310) знаходиться під сильним впливом <a href="https://www.joda.org/joda-time/" rel="nofollow">Joda-Time</a> і взяв найкраще з неї. Новий пакет <code class=" language-none">java.time</code>містить <a href="https://www.javacodegeeks.com/2014/03/whats-new-in-java-8-date-api.html" rel="nofollow">усі класи для дати, часу, дати/часу, часових поясів, тривалостей та маніпуляцій з часом</a>. У дизайні API незмінність була врахована дуже серйозно: зміни не допускаються (жорсткий урок з <code class=" language-none">java.util.Calendar</code>). Якщо потрібна модифікація – буде повернено новий екземпляр відповідного класу. Давайте подивимося на основні класи та приклади їх використання. Перший клас <code class=" language-none">Clock</code>, який надає доступ до поточної миті, дати та часу, використовуючи часовий пояс. <code class=" language-none">Clock</code>може бути використаний замість <code class=" language-none">System.currentTimeMillis()</code>та <code class=" language-none">TimeZone.getDefault()</code>. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token comment"><span class="token comment">// Получить системное время як смещение UTC</span></span>
<span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">Clock</span></span> clock <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Clock</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">systemUTC</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> clock<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">instant</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> clock<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">millis</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Приклад виведення на консоль: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token number"><span class="token number">2014</span></span><span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">04</span></span><span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">12</span></span>T15<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">19</span></span><span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">29.282</span></span>Z
<span class="token number"><span class="token number">1397315969360</span></span></code></pre> Інші нові класи, які ми розглядатимемо – це <code class=" language-none">LocaleDate</code>і <code class=" language-none">LocalTime</code>. <code class=" language-none">LocaleDate</code>містить лише частину дати без часового поясу в системі календаря ISO-8601. Відповідно, <code class=" language-none">LocalTime</code>містить тільки частину часу code&gt;. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token comment"><span class="token comment">// получить местную дату и время время</span></span>
<span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">LocalDate</span></span> date <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">LocalDate</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">now</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">LocalDate</span></span> dateFromClock <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">LocalDate</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">now</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> clock <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> date <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> dateFromClock <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">// получить местную дату и время время</span></span>
<span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">LocalTime</span></span> time <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">LocalTime</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">now</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">LocalTime</span></span> timeFromClock <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">LocalTime</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">now</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> clock <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> time <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> timeFromClock <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Приклад виведення на консоль: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token number"><span class="token number">2014</span></span><span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">04</span></span><span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">12</span></span>
<span class="token number"><span class="token number">2014</span></span><span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">04</span></span><span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">12</span></span>
<span class="token number"><span class="token number">11</span></span><span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">25</span></span><span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">54.568</span></span>
<span class="token number"><span class="token number">15</span></span><span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">25</span></span><span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">54.568</span></span></code></pre><code class=" language-none">LocalDateTime</code>поєднує разом <code class=" language-none">LocaleDate</code>і <code class=" language-none">LocalTime</code>містить дату і час, але без часового поясу в календарній системі ISO-8601. Простий приклад наведено нижче. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token comment"><span class="token comment">// Get the local date/time</span></span>
<span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">LocalDateTime</span></span> datetime <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">LocalDateTime</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">now</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">LocalDateTime</span></span> datetimeFromClock <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">LocalDateTime</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">now</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> clock <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> datetime <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> datetimeFromClock <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Приклад виведення на консоль: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token number"><span class="token number">2014</span></span><span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">04</span></span><span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">12</span></span>T11<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">37</span></span><span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">52.309</span></span>
<span class="token number"><span class="token number">2014</span></span><span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">04</span></span><span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">12</span></span>T15<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">37</span></span><span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">52.309</span></span></code></pre> Якщо вам потрібна дата/час для конкретного часового поясу, вам допоможе <code class=" language-none">ZonedDateTime</code>. Він містить дату та час у календарній системі ISO-8601. Ось кілька прикладів для різних часових поясів. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token comment"><span class="token comment">// Получение даты/времени для временной зоны</span></span>
<span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">ZonedDateTime</span></span> zonedDatetime <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">ZonedDateTime</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">now</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">ZonedDateTime</span></span> zonedDatetimeFromClock <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">ZonedDateTime</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">now</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> clock <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">ZonedDateTime</span></span> zonedDatetimeFromZone <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">ZonedDateTime</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">now</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token class-name"><span class="token class-name">ZoneId</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">of</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token string"><span class="token string">"America/Los_Angeles"</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> zonedDatetime <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> zonedDatetimeFromClock <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> zonedDatetimeFromZone <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Приклад виведення на консоль: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class="  language-java"><span class="token number"><span class="token number">2014</span></span><span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">04</span></span><span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">12</span></span>T11<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">47</span></span><span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">01.017</span></span><span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">04</span></span><span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">00</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token class-name"><span class="token class-name">America</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token class-name"><span class="token class-name">New_York</span></span><span class="token punctuation"><span class="token punctuation">]</span></span>
<span class="token number"><span class="token number">2014</span></span><span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">04</span></span><span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">12</span></span>T15<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">47</span></span><span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">01.017</span></span>Z
<span class="token number"><span class="token number">2014</span></span><span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">04</span></span><span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">12</span></span>T08<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">47</span></span><span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">01.017</span></span><span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">07</span></span><span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">00</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token class-name"><span class="token class-name">America</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token class-name"><span class="token class-name">Los_Angeles</span></span><span class="token punctuation"><span class="token punctuation">]</span></span></code></pre> І, нарешті, погляньмо на клас <code class=" language-none">Duration</code>: проміжок часу в секундах і наносекундах. Це робить обчислення між двома датами дуже простим. Давайте подивимося як це зробити: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token comment"><span class="token comment">// Получаем разницу между двумя датами</span></span>
<span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">LocalDateTime</span></span> from <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">LocalDateTime</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">of</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token number"><span class="token number">2014</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">Month</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>APRIL<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">16</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">0</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">LocalDateTime</span></span> <span class="token keyword"><span class="token keyword">to</span></span> <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">LocalDateTime</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">of</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token number"><span class="token number">2015</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">Month</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>APRIL<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">16</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">23</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">59</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">59</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">Duration</span></span> duration <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Duration</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">between</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> from<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token keyword"><span class="token keyword">to</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token string"><span class="token string">"Duration in days: "</span></span> <span class="token operator"><span class="token operator">+</span></span> duration<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">toDays</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token string"><span class="token string">"Duration in hours: "</span></span> <span class="token operator"><span class="token operator">+</span></span> duration<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">toHours</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> У наведеному вище прикладі обчислюється тривалість (у днях та годинах) між двома датами, <em>16 квітня 2014 року</em> та <em>16 квітня 2015 року</em> . Ось приклад виведення на консоль: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">Duration</span></span> in days<span class="token operator"><span class="token operator">:</span></span> <span class="token number"><span class="token number">365</span></span>
<span class="token class-name"><span class="token class-name">Duration</span></span> in hours<span class="token operator"><span class="token operator">:</span></span> <span class="token number"><span class="token number">8783</span></span></code></pre> Загальне враження про нову дату/час у Java 8 дуже, дуже позитивне. Частково тому, що зміни ґрунтуються на перевіреному в боях фундаменті (Joda-Time), частково тому, що цього разу це питання переглядалося серйозно і голоси розробників були почуті. Для отримання деталей зверніться до <a href="https://docs.oracle.com/javase/tutorial/datetime/index.html" rel="nofollow">офіційної документації</a> . 
<h3>5.4. Двигун Nashorn JavaScript</h3><a href="https://www.javacodegeeks.com/2014/02/java-8-compiling-lambda-expressions-in-the-new-nashorn-js-engine.html" rel="nofollow">Java 8 поставляється з новим двигуном Nashorn JavaScript</a> , який дозволяє вести розробку та запуск певних видів додатків JavaScript на JVM. Двигун Nashorn JavaScript це просто ще одна реалізація javax.script.ScriptEngine, яка виконує той же набір правил для вирішення взаємодії Java та JavaScript. Ось невеликий приклад. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">ScriptEngineManager</span></span> manager <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ScriptEngineManager</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">ScriptEngine</span></span> engine <span class="token operator"><span class="token operator">=</span></span> manager<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getEngineByName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token string"><span class="token string">"JavaScript"</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> engine<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getClass</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token string"><span class="token string">"Result:"</span></span> <span class="token operator"><span class="token operator">+</span></span> engine<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">eval</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token string"><span class="token string">"function f() { return 1; }; f() + 1;"</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Приклад виведення на консоль: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">jdk<span class="token punctuation"><span class="token punctuation">.</span></span>nashorn<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>scripting<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>NashornScriptEngine</span></span>
<span class="token class-name"><span class="token class-name">Result</span></span><span class="token operator"><span class="token operator">:</span></span> <span class="token number"><span class="token number">2</span></span></code></pre>
<h3>5.5. Base64</h3>Нарешті, <a href="https://www.javacodegeeks.com/2014/04/base64-in-java-8-its-not-too-late-to-join-in-the-fun.html" rel="nofollow">підтримка кодування Base64</a> знайшла своє місце у стандартній бібліотеці Java з появою релізу Java 8. Це дуже просто у використанні, приклад демонструє це. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>javacodegeeks<span class="token punctuation"><span class="token punctuation">.</span></span>java8<span class="token punctuation"><span class="token punctuation">.</span></span>base64</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>nio<span class="token punctuation"><span class="token punctuation">.</span></span>charset<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">StandardCharsets</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Base64</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Base64s</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> text <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Base64 finally in Java 8!"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

        <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> encoded <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Base64</span></span>
            <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getEncoder</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
            <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">encodeToString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> text<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getBytes</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token class-name"><span class="token class-name">StandardCharsets</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>UTF_8 <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> encoded <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

        <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> decoded <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>
            <span class="token class-name"><span class="token class-name">Base64</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getDecoder</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">decode</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> encoded <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
            <span class="token class-name"><span class="token class-name">StandardCharsets</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>UTF_8 <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> decoded <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Виведення в консоль програми показує як кодований, так і декодований текст: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">QmFzZTY0IGZpbmFsbHkgaW4gSmF2YSA4IQ</span></span><span class="token operator"><span class="token operator">==</span></span>
<span class="token class-name"><span class="token class-name">Base64</span></span> <span class="token keyword"><span class="token keyword">finally</span></span> in <span class="token class-name"><span class="token class-name">Java</span></span> <span class="token number"><span class="token number">8</span></span><span class="token operator"><span class="token operator">!</span></span></code></pre> Є також класи URL-дружні кодери/декодери, а також MIME-дружні кодери/декодери ( <code class=" language-none">Base64.getUrlEncoder()</code>/ <code class=" language-none">Base64.getUrlDecoder()</code>, <code class=" language-none">Base64.getMimeEncoder()</code>/ <code class=" language-none">Base64.getMimeDecoder()</code>). 
<h3>5.6. Паралельні масиви</h3>Реліз Java 8 додає багато нових методів для паралельної обробки масивів. Можливо, найбільш важливим є <code class=" language-none">parallelSort()</code>, який може значно прискорити сортування на багатоядерних машинах. Невеликий приклад нижче демонструє сімейство нових методів ( <code class=" language-none">parallelXxx</code>) у дії. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>javacodegeeks<span class="token punctuation"><span class="token punctuation">.</span></span>java8<span class="token punctuation"><span class="token punctuation">.</span></span>parallel<span class="token punctuation"><span class="token punctuation">.</span></span>arrays</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Arrays</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span>concurrent<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">ThreadLocalRandom</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">ParallelArrays</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">long</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> arrayOfLong <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token keyword"><span class="token keyword">long</span></span> <span class="token punctuation"><span class="token punctuation">[</span></span> <span class="token number"><span class="token number">20000</span></span> <span class="token punctuation"><span class="token punctuation">]</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

        <span class="token class-name"><span class="token class-name">Arrays</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">parallelSetAll</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> arrayOfLong<span class="token punctuation"><span class="token punctuation">,</span></span>
            index <span class="token operator"><span class="token operator">-&gt;</span></span> <span class="token class-name"><span class="token class-name">ThreadLocalRandom</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">current</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">nextInt</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token number"><span class="token number">1000000</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">Arrays</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">stream</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> arrayOfLong <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">limit</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token number"><span class="token number">10</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">forEach</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>
            i <span class="token operator"><span class="token operator">-&gt;</span></span> <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">print</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> i <span class="token operator"><span class="token operator">+</span></span> <span class="token string"><span class="token string">" "</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

        <span class="token class-name"><span class="token class-name">Arrays</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">parallelSort</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> arrayOfLong <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">Arrays</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">stream</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> arrayOfLong <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">limit</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token number"><span class="token number">10</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">forEach</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>
            i <span class="token operator"><span class="token operator">-&gt;</span></span> <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">print</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> i <span class="token operator"><span class="token operator">+</span></span> <span class="token string"><span class="token string">" "</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Цей невеликий фрагмент коду використовує метод <code class=" language-none">parallelSetAll()</code>заповнення масиву 20000 випадковими значеннями. Після цього застосовується <code class=" language-none">parallelSort()</code>. Програма виводить перші 10 елементів до та після сортування, щоб показати, що масив дійсно відсортований. Приклад виведення програми може бути наступним чином (Зверніть увагу, що елементи масиву задані випадковим чином). 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">Unsorted</span></span><span class="token operator"><span class="token operator">:</span></span> <span class="token number"><span class="token number">591217</span></span> <span class="token number"><span class="token number">891976</span></span> <span class="token number"><span class="token number">443951</span></span> <span class="token number"><span class="token number">424479</span></span> <span class="token number"><span class="token number">766825</span></span> <span class="token number"><span class="token number">351964</span></span> <span class="token number"><span class="token number">242997</span></span> <span class="token number"><span class="token number">642839</span></span> <span class="token number"><span class="token number">119108</span></span> <span class="token number"><span class="token number">552378</span></span>
<span class="token class-name"><span class="token class-name">Sorted</span></span><span class="token operator"><span class="token operator">:</span></span> <span class="token number"><span class="token number">39</span></span> <span class="token number"><span class="token number">220</span></span> <span class="token number"><span class="token number">263</span></span> <span class="token number"><span class="token number">268</span></span> <span class="token number"><span class="token number">325</span></span> <span class="token number"><span class="token number">607</span></span> <span class="token number"><span class="token number">655</span></span> <span class="token number"><span class="token number">678</span></span> <span class="token number"><span class="token number">723</span></span> <span class="token number"><span class="token number">793</span></span></code></pre>
<h3>5.7. Паралелізм</h3>Нові методи були додані до класу <code class=" language-none">java.util.concurrent.ConcurrentHashMap</code>для підтримки агрегатних операцій на основі нещодавно доданих об'єктів потоків та лямбду виразів. Також нові методи були додані до класу <code class=" language-none">java.util.concurrent.ForkJoinPool</code>для підтримки загального пулу (дивіться також наш <a href="http://academy.javacodegeeks.com/course/java-concurrency-essentials/" rel="nofollow">безкоштовний курс з паралелізму Java</a> ). Новий клас <code class=" language-none">java.util.concurrent.locks.StampedLock</code>був доданий для забезпечення блокування на основі можливостей із трьома режимами доступу для керування читанням/записом (він може бути розглянутий як найкраща альтернатива для не дуже хорошого <code class=" language-none">java.util.concurrent.locks.ReadWriteLock</code>). Нові класи, які були додані в пакет <code class=" language-none">java.util.concurrent.atomic</code>: 
<ul>
 <li>DoubleAccumulator</li>
 <li>DoubleAdder</li>
 <li>LongAccumulator</li>
 <li>LongAdder</li>
</ul>
<h3>6. Нові функції у середовищі виконання Java (JVM)</h3>Область <code class=" language-none">PermGen</code>скасована та <a href="https://www.javacodegeeks.com/2013/02/java-8-from-permgen-to-metaspace.html" rel="nofollow">була замінена на Metaspace</a> (JEP 122). JVM опції <code class=" language-none">-XX:PermSize</code>та <code class=" language-none">-XX:MaxPermSize</code>були замінені на <code class=" language-none">-XX:MetaSpaceSize</code>та <code class=" language-none">-XX:MaxMetaspaceSize</code>відповідно. 
<h3>7. Висновок</h3>Майбутнє тут: Java 8 просунуло свою платформу вперед, надавши можливості, які дозволяють розробникам бути більш продуктивними. Ще зарано для перекладу виробничих систем на Java 8, але в найближчі кілька місяців ця адаптація має повільно починати зростати. Тим не менш, настав час для початку підготовки вашої кодової бази для сумісності з Java 8 і бути готовим включити зміни Java 8, коли вона виявиться досить безпечною та стабільною. Як підтвердження прийняття спільнотою Java 8, нещодавно <a href="https://spring.io/blog/2014/03/27/spring-framework-4-0-3-released-with-java-8-support-now-production-ready" rel="nofollow">Pivotal був випущений Spring Framework з production підтримкою Java 8</a> . <em>Ви можете зробити свій внесок про захоплюючі нові можливості в Java 8 в коментарях.</em>
<h3>8. Джерела</h3>Деякі додаткові ресурси, які глибоко обговорюють різні аспекти функцій Java 8: 
<ul>
 <li><a href="http://www.oracle.com/technetwork/java/javase/8-whats-new-2157071.html" rel="nofollow" target="_blank">What's New in JDK 8</a></li>
 <li><a href="http://docs.oracle.com/javase/tutorial/" rel="nofollow" target="_blank">The Java Tutorials</a></li>
 <li><a href="http://blog.arungupta.me/2014/03/wildfly8-jdk8-netbeans8-javaee7-excellent-combo-enterprise-java/" rel="nofollow" target="_blank">WildFly 8, JDK 8, NetBeans 8, Java EE 7</a></li>
 <li><a href="http://winterbe.com/posts/2014/03/16/java-8-tutorial/" rel="nofollow" target="_blank">Java 8 Tutorial</a></li>
 <li><a href="http://marxsoftware.blogspot.ca/2014/03/jdeps.html" rel="nofollow" target="_blank">JDK 8 Command-line Static Dependency Checker</a></li>
 <li><a href="http://marxsoftware.blogspot.ca/2014/03/illuminating-javadoc-of-jdk-8.html" rel="nofollow" target="_blank">The Illuminating Javadoc of JDK 8</a></li>
 <li><a href="http://blog.jooq.org/2014/04/04/java-8-friday-the-dark-side-of-java-8/" rel="nofollow">The Dark Side of Java 8</a></li>
 <li><a href="http://www.eclipse.org/downloads/java8/" rel="nofollow">Installing Java™ 8 Support in Eclipse Kepler SR2</a></li>
 <li><a href="http://www.baeldung.com/java8" rel="nofollow">Java 8</a></li>
 <li><a href="http://www.oracle.com/technetwork/articles/java/jf14-nashorn-2126515.html" rel="nofollow">Oracle Nashorn. A Next-Generation JavaScript Engine for the JVM</a></li>
</ul>