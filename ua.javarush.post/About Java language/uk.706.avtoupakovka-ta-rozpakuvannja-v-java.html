Автоупаковка та розпакування в Java
<p>----------------------------------------</p>
У цій статті ми розглянемо таку функцію Java як . Автоупаковка та розпакування це функція перетворення примітивних типів в об'єктні та навпаки. Весь процес виконується автоматично середовищем виконання Java (JRE). Але слід бути обережним пі
<p>----------------------------------------</p>
У цій статті ми розглянемо таку функцію Java як <em><strong>автоупаковка/распаковка</strong></em> . Автоупаковка та розпакування це функція перетворення примітивних типів в об'єктні та навпаки. <img data-id="eb602f3a-f575-40ef-8ae1-87104c3f1f69" data-max-width="850" alt="Автоупаковка та розпакування в Java - 1" src="https://cdn.javarush.com/images/article/eb602f3a-f575-40ef-8ae1-87104c3f1f69/800.jpeg" style="width: 850px;">Весь процес виконується автоматично середовищем виконання Java (JRE). Але слід бути обережним під час реалізації цієї функції, т.к. Вона може впливати на продуктивність вашої програми. 
<h2>Вступ</h2>У версіях нижче JDK 1.5 було легко перетворювати примітивні типи даних, такі як <code class=" language-none">int</code>, <code class=" language-none">char</code>, <code class=" language-none">float</code>, <code class=" language-none">double</code>в їх класи оболонки Integer, Character, Float, Double. Починаючи з версії JDK 5 ця функція, перетворення примітивних типів на еквівалентні об'єкти, реалізована автоматично. Ця властивість відома як <strong>Автоупаковка</strong> (Autoboxing). Зворотний процес відповідно – <strong>Розпакування</strong> (Unboxing) тобто. процес перетворення об'єктів у відповідні їм примітивні типи. Приклад коду для автоупаковки та розпакування представлений нижче: <strong>Автоупаковка</strong>
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">Integer</span></span> integer <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">9</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre><strong>Розпакування</strong>
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">int</span></span> in <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
in <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Integer</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">9</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre><strong>Коли використовується автоупаковка та розпакування? </strong> Автоупаковка застосовується компілятором Java за таких умов: 
<ul>
 <li>Коли значення примітивного типу передається в метод як параметр методу, який очікує на об'єкт відповідного класу-оболонки.</li>
 <li>Коли значення примітивного типу надається змінної, відповідного класу оболонки.</li>
</ul>Розглянемо наступний приклад: <strong>Лістинг 1:</strong> Простий код, що показує автоупаковку 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">int</span></span> <span class="token function"><span class="token function">sumEvenNumbers</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Integer</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> intList <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
<span class="token keyword"><span class="token keyword">int</span></span> sum <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">for</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Integer</span></span> i<span class="token operator"><span class="token operator">:</span></span> intList <span class="token punctuation"><span class="token punctuation">)</span></span>
<span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span> i <span class="token operator"><span class="token operator">%</span></span> <span class="token number"><span class="token number">2</span></span> <span class="token operator"><span class="token operator">==</span></span> <span class="token number"><span class="token number">0</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span>
sum <span class="token operator"><span class="token operator">+=</span></span> i<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">return</span></span> sum<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> До версії jdk 1.5 наведений вище код викликав би помилку компіляції, оскільки оператор отримання залишку % і унарний плюс += не могли застосовуватися до класу-оболонки. Але в jdk 1.5 і вище цей код компілюється без помилок, перетворюючи Integer на <code class=" language-none">int</code>. Розпакування застосовується компілятором Java за таких умов: 
<ul>
 <li>Коли об'єкт передається як параметр методу, який очікує відповідний примітивний тип.</li>
 <li>Коли об'єкт надається змінної відповідного примітивного типу.</li>
</ul>Розглянемо наступний приклад: <strong>Лістинг 2:</strong> Простий код, що показує розпакування 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">ArrayList</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">UnboxingCheck</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
<span class="token class-name"><span class="token class-name">Integer</span></span> in <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Integer</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">8</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">// 1. Распаковка через вызов метода</span></span>
<span class="token keyword"><span class="token keyword">int</span></span> absVal <span class="token operator"><span class="token operator">=</span></span> <span class="token function"><span class="token function">absoluteValue</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>in<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"absolute value of "</span></span> <span class="token operator"><span class="token operator">+</span></span> in <span class="token operator"><span class="token operator">+</span></span> <span class="token string"><span class="token string">" = "</span></span> <span class="token operator"><span class="token operator">+</span></span> absVal<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Double</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> doubleList <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ArrayList</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Double</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">// Автоупаковка через вызов метода</span></span>
doubleList<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">3.1416</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">// 2. Распаковка через присвоение</span></span>
<span class="token keyword"><span class="token keyword">double</span></span> phi <span class="token operator"><span class="token operator">=</span></span> doubleList<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"phi = "</span></span> <span class="token operator"><span class="token operator">+</span></span> phi<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">int</span></span> <span class="token function"><span class="token function">absoluteValue</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span> i<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
<span class="token keyword"><span class="token keyword">return</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>i <span class="token operator"><span class="token operator">&lt;</span></span> <span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">?</span></span> <span class="token operator"><span class="token operator">-</span></span>i <span class="token operator"><span class="token operator">:</span></span> i<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Автоупаковка та розпакування дозволяють розробнику писати код, який легко читається та зрозумілий. Наступна таблиця показує примітивні типи даних та їх відповідні об'єкти оболонки. 
<div class="table-container">
 <table border="1">
  <tbody>
   <tr>
    <th>Примітивні типи</th>
    <th>Класи оболонки</th>
   </tr>
   <tr>
    <td>boolean</td>
    <td>Boolean</td>
   </tr>
   <tr>
    <td>byte</td>
    <td>Byte</td>
   </tr>
   <tr>
    <td>char</td>
    <td>Character</td>
   </tr>
   <tr>
    <td>float</td>
    <td>Float</td>
   </tr>
   <tr>
    <td>int</td>
    <td>Integer</td>
   </tr>
   <tr>
    <td>long</td>
    <td>Long</td>
   </tr>
   <tr>
    <td>short</td>
    <td>Short</td>
   </tr>
  </tbody>
 </table>
</div><strong>Таблиця 1:</strong> Примітивні типи та еквівалентні їм класи оболонки з операторами порівняння Автоупаковка та розпакування можуть використовуватись з операторами порівняння. Наступний фрагмент коду ілюструє, як це відбувається: <strong>Лістинг 3:</strong> Приклад коду, що показує автоупаковку та розпакування з оператором порівняння 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">BoxedComparator</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
  <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
      <span class="token class-name"><span class="token class-name">Integer</span></span> in <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Integer</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">25</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
      <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>in <span class="token operator"><span class="token operator">&lt;</span></span> <span class="token number"><span class="token number">35</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
          <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Value of int = "</span></span> <span class="token operator"><span class="token operator">+</span></span> in<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
  <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Автоупаковка та розпакування при перевантаженні методу Автоупаковка та розпакування виконується при перевантаженні методу на підставі наступних правил: 
<ul>
 <li>Розширення "перемагає" упаковку в ситуації, коли стає вибір між розширенням і упаковкою, розширення краще.</li>
</ul><strong>Лістинг 4:</strong> Приклад коду, що показує перевагу навантаження 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">WideBoxed</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
  <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">WideBoxed</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
  <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">methodWide</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span> i<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"int"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>

  <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">methodWide</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token class-name"><span class="token class-name">Integer</span></span> i <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
      <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Integer"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
  <span class="token punctuation"><span class="token punctuation">}</span></span>

  <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
      <span class="token keyword"><span class="token keyword">short</span></span> shVal <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">25</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
      <span class="token function"><span class="token function">methodWide</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>shVal<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
  <span class="token punctuation"><span class="token punctuation">}</span></span>
 <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Виведення програми - тип<code class=" language-none">int</code>
<ul>
 <li>Розширення перемагає змінну кількість аргументів у ситуації, коли стає вибір між розширенням і змінною кількістю аргументів, розширення краще.</li>
</ul><strong>Лістинг 5:</strong> Приклад коду, що показує перевагу навантаження 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">WideVarArgs</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

    <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">methodWideVar</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span> i1<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token keyword"><span class="token keyword">int</span></span> i2<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
      <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"int int"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">methodWideVar</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Integer</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span> i<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Integers"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">short</span></span> shVal1 <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">25</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
      <span class="token keyword"><span class="token keyword">short</span></span> shVal2 <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">35</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
     <span class="token function"><span class="token function">methodWideVar</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> shVal1<span class="token punctuation"><span class="token punctuation">,</span></span> shVal2<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
  <span class="token punctuation"><span class="token punctuation">}</span></span></code></pre>
<ul>
 <li>Упаковка перемагає змінну кількість аргументів у ситуації, коли стає вибір між упаковкою та змінною кількістю аргументів, упаковка краща.</li>
</ul><strong>Лістинг 6:</strong> Приклад коду, що показує перевагу навантаження 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">BoxVarargs</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
     <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">methodBoxVar</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Integer</span></span> in<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
         <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Integer"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
     <span class="token punctuation"><span class="token punctuation">}</span></span>

     <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">methodBoxVar</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Integer</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span> i<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
         <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Integers"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
     <span class="token punctuation"><span class="token punctuation">}</span></span>
     <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
         <span class="token keyword"><span class="token keyword">int</span></span> intVal1 <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">25</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
         <span class="token function"><span class="token function">methodBoxVar</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>intVal1<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Ви повинні пам'ятати про наступні речі, використовуючи Автопакування: Як ми знаємо, будь-яка хороша функція має недолік. Автоупаковка не є винятком щодо цього. Деякі важливі зауваження, які повинен враховувати розробник під час використання цієї функції: 
<ul>
 <li>Порівнюючи об'єкти оператором <code class=" language-none">==</code>може виникнути плутанина, оскільки він може застосовуватися до примітивних типів і об'єктів. Коли цей оператор застосовується до об'єктів, він фактично порівнює посилання на об'єкти, а не самі об'єкти.</li>
</ul><strong>Лістинг 7:</strong> приклад коду, що показує порівняння. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Comparator</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
     <span class="token class-name"><span class="token class-name">Integer</span></span> istInt <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Integer</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token class-name"><span class="token class-name">Integer</span></span> secondInt <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Integer</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

       <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>istInt <span class="token operator"><span class="token operator">==</span></span> secondInt<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
         <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"both one are equal"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

       <span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">else</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
          <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Both one are not equal"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
      <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre>
<ul>
 <li>Змішування об'єктів та примітивних типів з оператором рівності та відносини. Якщо ми порівнюємо примітивний тип з об'єктом, то відбувається розпаковування об'єкта, який може залишити <code class=" language-none">NullPointerException</code>об'єкт <code class=" language-none">null</code>.</li>
 <li>Кешування об'єктів. Метод <code class=" language-none">valueOf()</code>створює контейнер примітивних об'єктів, які він кешує. Оскільки значення кешуються в діапазоні від -128 до 127 включно, ці об'єкти, що кешуються, можуть поводитися по-різному.</li>
 <li>Погіршення продуктивності. Автоупаковка або розпакування погіршують продуктивність програми, оскільки це створює небажаний об'єкт, через який збирачеві сміття доводиться працювати частіше.</li>
</ul><strong>Недоліки Автопакування</strong> Хоча Автопакування має ряд переваг, вона має такі недоліки: <strong>Лістинг 8:</strong> Приклад коду, що показує проблему продуктивності. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">int</span></span> <span class="token function"><span class="token function">sumEvenNumbers</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">List</span></span><integer> intList<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
          <span class="token keyword"><span class="token keyword">int</span></span> sum <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
          <span class="token keyword"><span class="token keyword">for</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Integer</span></span> i <span class="token operator"><span class="token operator">:</span></span> intList<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
              <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>i <span class="token operator"><span class="token operator">%</span></span> <span class="token number"><span class="token number">2</span></span> <span class="token operator"><span class="token operator">==</span></span> <span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                  sum <span class="token operator"><span class="token operator">+=</span></span> i<span class="token punctuation"><span class="token punctuation">;</span></span>
              <span class="token punctuation"><span class="token punctuation">}</span></span>
          <span class="token punctuation"><span class="token punctuation">}</span></span>
         <span class="token keyword"><span class="token keyword">return</span></span> sum<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
</integer></code></pre> У цій ділянці коду <code class=" language-none">sum +=i</code> буде розширено на <code class=" language-none">sum = sum + i</code>. Починаючи з оператора <code class=" language-none">+</code>JVM запускає розпакування, оскільки оператор <code class=" language-none">+</code>не може застосовуватися до об'єкта Integer. А потім результат автоупаковується назад. До версії JDK 1.5 типи даних <code class=" language-none">int</code>та Integer відрізнялися. У разі навантаження методу ці два типи використовувалися без проблем. З появою автоматичного пакування/розпакування це стало складніше. Прикладом цього є перевантажений <code class=" language-none">remove()</code>метод <code class=" language-none">ArrayList</code>. Клас <code class=" language-none">ArrayList</code>має два методи видалення - <code class=" language-none">remove(index)</code>і <code class=" language-none">remove(object)</code>. У цьому випадку перевантаження методів не відбудеться і відповідний метод буде викликатись з відповідними параметрами. 
<h2>Висновок</h2>Автопакування є механізмом для прихованого перетворення примітивних типів даних у відповідні класи-оболонки (об'єкти). Компілятор використовує метод, <code class=" language-none">valueOf()</code>щоб перетворити примітивні типи на об'єкти, а методи <code class=" language-none">IntValue()</code>, <code class=" language-none">doubleValue()</code>і т.д., щоб отримати примітивні типи об'єкта. Автоупаковка перетворює логічний тип <code class=" language-none">boolean</code>у Boolean, <code class=" language-none">byte</code>Byte, <code class=" language-none">char</code>Character, <code class=" language-none">float</code>Float, <code class=" language-none">int</code>Integer, <code class=" language-none">long</code>Long, <code class=" language-none">short</code>Short. Розпакування відбувається у зворотному напрямку. <a href="http://mrbool.com/autoboxing-and-unboxing-in-java/28238" target="_blank" rel="nofollow">Оригінал статті</a>