Дженерики на котиках
<p>----------------------------------------</p>
Сьогодні чудовий день, щоб згадати, що ж ми знаємо про Java. Згідно з найголовнішим документом, тобто. специфікації мови Java (JLS - Java Language Specifiaction), Java є строго типізованим мовою, що сказано у розділі " " . Що це означає? Пр
<p>----------------------------------------</p>
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-max-width="186" alt="Дженерики на котиках." src="https://cdn.javarush.com/images/article/8f98b924-9b51-4f91-ab39-e8d5358ae565/original.jpeg">
 </div>
</div>
<h2>Вступ</h2>Сьогодні чудовий день, щоб згадати, що ж ми знаємо про Java. Згідно з найголовнішим документом, тобто. специфікації мови Java (JLS - Java Language Specifiaction), Java є строго типізованим мовою, що сказано у розділі " <a href="https://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html" target="_blank" rel="nofollow">Chapter 4. Types, Values, and Variables</a> " . Що це означає? Припустимо, у нас є головний метод: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
<span class="token class-name"><span class="token class-name">String</span></span> text <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Hello world!"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>text<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Сувора типізація гарантує, що з компіляції даного коду компілятор перевірить, що ми вказали тип змінної text як String, ми ніде намагаємося використовувати її як змінну іншого типу (наприклад як число Integer). Наприклад, якщо ми замість тексту спробуємо зберегти значення <code class=" language-none">2L</code>(тобто long замість String), то на момент компіляції отримаємо помилку: 
<pre class="line-numbers language-none" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class=" language-none">
Main.java:3: error: incompatible types: long cannot be converted to String
String text = 2L;</code></pre> Тобто. Сувора типізація дозволяє забезпечити виконання операцій з об'єктами лише тоді, коли ці операції є правомірними для цих об'єктів. Це ще називається типобезпекою або "Type safety". Як сказано в JLS, у Java існує дві категорії типів: примітивні типи (primitive types) і типи посилань (reference types). Про примітивні типи можна згадати за оглядовою статтею: " <a href="https://codegym.cc/groups/posts/630-primitivnihe-tipih-v-java--ne-takie-uzh-oni-i-primitivnihe" target="_blank" rel="nofollow">Примітивні типи в Java: Не такі вони і примітивні</a> ". Типи посилань можуть бути представлені класом, інтерфейсом або масивом. І сьогодні нас цікавитимуть саме типи посилань. І почнемо з масивів: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Main</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
  <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> text <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token number"><span class="token number">5</span></span><span class="token punctuation"><span class="token punctuation">]</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    text<span class="token punctuation"><span class="token punctuation">[</span></span><span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Hello"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
  <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Такий код виконується без помилок. Як ми знаємо (наприклад, за " <a href="https://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html" target="_blank" rel="nofollow">Oracle Java Tutorial: Arrays</a> "), масив - це контейнер, який зберігає дані лише одного типу. У даному випадку – лише рядки. Спробуємо додати до масиву long замість String: 
<pre class="inline-block  language-java" tabindex="0"><code class="  language-java">text<span class="token punctuation"><span class="token punctuation">[</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">4L</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Виконаємо цей код (наприклад, <a href="https://repl.it/languages/java" target="_blank" rel="nofollow">Repl.it Online Java Compiler</a> ) і отримаємо помилку: 
<pre class="inline-block  language-java" tabindex="0"><code class="  language-java">error<span class="token operator"><span class="token operator">:</span></span> incompatible types<span class="token operator"><span class="token operator">:</span></span> <span class="token keyword"><span class="token keyword">long</span></span> cannot be converted <span class="token keyword"><span class="token keyword">to</span></span> <span class="token class-name"><span class="token class-name">String</span></span></code></pre> Масив та типобезпека мови не дали нам зберегти в масив те, що не підходить за типом. Ось він прояв type safety. Нам сказали: "Виправи помилку, а доти я не скомпілюю код". І найголовніше — це відбувається в момент компіляції, а не запуску програми. Тобто помилки ми бачимо відразу, а не колись. А якщо ми згадали про масиви, то згадаємо і про <a href="https://codegym.cc/groups/posts/2308-korotko-o-glavnom---java-collections-framework" target="_blank" rel="nofollow">Java Collections Framework</a> . Там ми мали різні структури. Наприклад, списки. Давайте перепишемо приклад: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token operator"><span class="token operator">*</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Main</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
  <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token class-name"><span class="token class-name">List</span></span> text <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ArrayList</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">5</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    text<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Hello"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    text<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">4L</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token class-name"><span class="token class-name">String</span></span> test <span class="token operator"><span class="token operator">=</span></span> text<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
  <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> При компіляції його ми отримаємо на рядку ініціалізації змінної <code class=" language-none">test</code>помилки: 
<pre class="inline-block  language-java" tabindex="0"><code class="  language-java">incompatible types<span class="token operator"><span class="token operator">:</span></span> <span class="token class-name"><span class="token class-name">Object</span></span> cannot be converted <span class="token keyword"><span class="token keyword">to</span></span> <span class="token class-name"><span class="token class-name">String</span></span></code></pre> У нашому випадку, List може зберігати будь-який об'єкт (тобто об'єкт типу Object). Тому компілятор каже, що він на себе такий тягар відповідальності брати не може. Тому нам треба явно вказати тип, який ми отримаємо зі списку: 
<pre class="inline-block  language-java" tabindex="0"><code class="  language-java"><span class="token class-name"><span class="token class-name">String</span></span> test <span class="token operator"><span class="token operator">=</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> text<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Така вказівка ​​називається наведенням типів (type conversion чи type casting). І все буде працювати тепер чудово, поки ми не спробуємо дістати елемент індексу 1, т.к. він має тип Long. І ми отримаємо справедливу помилку, але вже під час роботи програми (в Runtime): 
<pre class="line-numbers language-none" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class=" language-none">
type conversion, typecasting
Exception in thread "main" java.lang.ClassCastException: java.lang.Long cannot be cast to java.lang.String</code></pre> Як бачимо, тут відразу кілька важливих мінусів. По-перше, ми змушені самі "кастити" значення, отримане зі списку, до класу String. Погодьтеся, це негарно. По-друге, у разі помилки ми її побачимо тільки тоді, коли програма буде виконуватися. Якби наш код був складнішим, ми могли б виявити таку помилку далеко не відразу. І стали розробники думати, як зробити роботу в таких ситуаціях простішим, а код наочнішим. І народабося вони — Дженерики (Generics). 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="3b0774d5-22a4-411f-903d-fcab5c15ba37" data-max-width="282" alt="Дженерики на котиках." src="https://cdn.javarush.com/images/article/3b0774d5-22a4-411f-903d-fcab5c15ba37/256.jpeg" style="width: 282px;">
 </div>
</div>
<h2>Generics</h2>Отже, дженерики. Що це таке? Дженерік - це особливий спосіб опис типів, який використовує у своїй роботі компілятор коду для забезпечення типобезпеки. Виглядає це приблизно так: 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="a9f5eff1-4fa0-4158-ba6d-6ebf79ea9d0d" data-max-width="311" alt="Дженерики на котиках." src="https://cdn.javarush.com/images/article/a9f5eff1-4fa0-4158-ba6d-6ebf79ea9d0d/256.jpeg" style="width: 311px;">
 </div>
</div>А ось коротенький приклад і пояснення його: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token operator"><span class="token operator">*</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Main</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
  <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> text <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ArrayList</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">5</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    text<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Hello"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    text<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">4L</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token class-name"><span class="token class-name">String</span></span> test <span class="token operator"><span class="token operator">=</span></span> text<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
  <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> У цьому прикладі ми говоримо, що ми не просто <code class=" language-none">List</code>, а <code class=" language-none">List</code>, що працює ТІЛЬКИ з об'єктами типу String. І жодними іншими. Ось щойно зазначено в дужках, то й можемо зберігати. Такі "дужки" називаються "angle brackets", тобто. кутові (angle) дужки (brackets). Компілятор люб'язно за нас перевірить, чи припустабося ми помилок при роботі зі списком рядків (список має ім'я text). Компілятор побачить, що ми намагаємося до списку String покласти зухвалим чином Long. І на момент компіляції видасть помилку: 
<pre class="inline-block  language-java" tabindex="0"><code class="  language-java">error<span class="token operator"><span class="token operator">:</span></span> no suitable method found <span class="token keyword"><span class="token keyword">for</span></span> <span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">long</span></span><span class="token punctuation"><span class="token punctuation">)</span></span></code></pre> Ви згадали про те, що String - це спадкоємець CharSequence. І вирішіть зробити щось на зразок: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
	<span class="token class-name"><span class="token class-name">ArrayList</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">CharSequence</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> text <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ArrayList</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">5</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
	text<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Hello"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
	<span class="token class-name"><span class="token class-name">String</span></span> test <span class="token operator"><span class="token operator">=</span></span> text<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Але не можна і ми отримаємо помилку: <code class=" language-none">error: incompatible types: ArrayList&lt;String&gt; cannot be converted to ArrayList&lt;CharSequence&gt;</code> Здається дивним, т.к. рядок <code class=" language-none">CharSequence sec = "test";</code>не містить помилок. Давайте розумітися. Про таку поведінку кажуть: "Дженерики є інваріантними". Що таке "інваріант"? Мені подобається, як про це сказано на вікіпедії у статті " <a href="https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)" target="_blank" rel="nofollow">Covariance and contravariance</a> ": 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="efb6b127-f846-4d72-abd0-1674babb2fec" data-max-width="514" alt="Дженерики на котиках." src="https://cdn.javarush.com/images/article/efb6b127-f846-4d72-abd0-1674babb2fec/512.jpeg" style="width: 514px;">
 </div>
</div>Таким чином, інваріантність - це відсутність успадкування між похідними типами. Якщо Кішка - це підтип Тварини, то Множина&lt;Кішки&gt; не є підтипом Множина&lt;Тварини&gt; і Множина&lt;Тварини&gt; не є підтипом Множина&lt;Кішки&gt;. До речі, варто сказати, що починаючи з Java SE 7 з'явився так званий " <a href="https://docs.oracle.com/javase/tutorial/java/generics/types.html#diamond" target="_blank" rel="nofollow">Diamond Operator</a> ". Тому що дві кутові дужки &lt;&gt; схожі на діамант. Це дозволяє нам використовувати дженерики таким чином: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
  <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> lines <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ArrayList</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
  lines<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Hello world!"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
  <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>lines<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Компілятор за цим кодом розуміє, що якщо ми вказали в лівій частині, що <code class=" language-none">List</code>міститиме об'єкти типу String, то в правій частині ми маємо на увазі, що хочемо в змінну <code class=" language-none">lines</code>зберегти новий ArrayList, який зберігатиме також об'єкт того типу, який вказаний у лівій частині. Таким чином, компілятор із лівої частини розуміє або виводить тип для правої частини. Саме тому така поведінка називається виведенням типу або "Type Inference" англійською. Варто відзначити ще таку цікаву річ, як RAW Types або "сирі типи". Т.к. дженерики були не завжди, а Java намагається по можливості підтримувати зворотну сумісність, то дженерики змушені якось працювати з кодом, де не вказано жодного дженерика. Подивимося приклад: 
<pre class="inline-block  language-java" tabindex="0"><code class="  language-java"><span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">CharSequence</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> lines <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ArrayList</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Як ми пам'ятаємо, такий рядок не скомпілюється через інваріантність дженериків. 
<pre class="inline-block  language-java" tabindex="0"><code class="  language-java"><span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Object</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> lines <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ArrayList</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> І така теж не скомпілюється, з тієї ж причини. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">List</span></span> lines <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ArrayList</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> lines2 <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ArrayList</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Такі рядки скомпілюється і працюватимуть. Саме використовується Raw Types, тобто. не вказані типи. Ще раз варто вказати, що Raw Types у сучасному коді НЕ ПОВИННІ бути використані. 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="85da96a2-66cc-4412-8042-59eb8dc91499" data-max-width="279" alt="Дженерики на котиках." src="https://cdn.javarush.com/images/article/85da96a2-66cc-4412-8042-59eb8dc91499/256.jpeg" style="width: 279px;">
 </div>
</div>
<h2>Типізовані класи</h2>Отже, типізовані класи. Побачимо, як ми можемо написати свій типізований клас. Наприклад, у нас є ієрархія класів: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">abstract</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Animal</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
  <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">abstract</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">voice</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Cat</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Animal</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
  <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">voice</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Meow meow"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
  <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Dog</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Animal</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
  <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">voice</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Woof woof"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
  <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Ми хочемо створити клас, який реалізує контейнер для тварин. Можна було б написати клас, який міститиме будь-яких <code class=" language-none">Animal</code>. Це просто, зрозуміло, АЛЕ... заважати собак і кішок погано, вони не дружать один з одним. Крім того, якщо хтось отримає такий контейнер, він помилково може запустити з контейнера кішок у зграю собак... і до добра це не доведе. І тут нам допоможуть дженерики. Наприклад, напишемо реалізацію так: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Box</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">T</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
  <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">T</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> slots <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ArrayList</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
  <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">T</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">getSlots</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">return</span></span> slots<span class="token punctuation"><span class="token punctuation">;</span></span>
  <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Наш клас буде працювати з об'єктами типу, вказані дженериком з ім'ям T. Це свого роду псевдонім. Т.к. дженерик вказаний у імені класу, то й отримуватимемо його при оголошенні класу: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
  <span class="token class-name"><span class="token class-name">Box</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Cat</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> catBox <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Box</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
  <span class="token class-name"><span class="token class-name">Cat</span></span> murzik <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Cat</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
  catBox<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getSlots</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>murzik<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Як ми бачимо, ми вказали, що у нас <code class=" language-none">Box</code>, який працює тільки з <code class=" language-none">Cat</code>. Компілятор зрозумів, що замість <code class=" language-none">catBox</code>дженерика <code class=" language-none">T</code>потрібно підставити тип <code class=" language-none">Cat</code>скрізь, де вказано ім'я дженерика <code class=" language-none">T</code>: 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="616d06ed-0584-4675-a9fe-23d32bd9d264" data-max-width="344" alt="Дженерики на котиках." src="https://cdn.javarush.com/images/article/616d06ed-0584-4675-a9fe-23d32bd9d264/256.jpeg" style="width: 344px;">
 </div>
</div>Тобто. саме завдяки <code class=" language-none">Box&lt;Cat&gt;</code>компілятор розуміє, що <code class=" language-none">slots</code>насправді має бути <code class=" language-none">List&lt;Cat&gt;</code>. Для <code class=" language-none">Box&lt;Dog&gt;</code>всередині буде <code class=" language-none">slots</code>, що містить <code class=" language-none">List&lt;Dog&gt;</code>. Дженеріков в оголошенні типу може бути кілька, наприклад: 
<pre class="inline-block  language-java" tabindex="0"><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Box</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">T</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">V</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token punctuation"><span class="token punctuation">{</span></span></code></pre> Назва дженерика може бути будь-якою, хоча рекомендується дотримуватися деяких негласних правил - "Type Parameter Naming Conventions": Тип елемента - E, тип ключа - K, тип числа - N, T - для позначення типу, V - для типу значення. До речі, пам'ятаєте ми з вами говорабо, що дженерики інваріантні, тобто. не зберігають ієрархію спадкування. Насправді ми можемо на це вплинути. Тобто ми маємо можливість зробити дженерики КОваріантними, тобто. що зберігають успадкування у тому порядку. Таке поведінка називається " Bounded Type " , тобто. обмежені типи. Наприклад, наш клас <code class=" language-none">Box</code>міг би утримувати всіх тварин, тоді ми оголосабо б дженерик таким чином: 
<pre class="inline-block  language-java" tabindex="0"><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Box</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">T</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Animal</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token punctuation"><span class="token punctuation">{</span></span></code></pre>Тобто ми поставабо обмежабо верхню межу класом <code class=" language-none">Animal</code>. Також ми можемо вказати кілька типів після ключового слова <code class=" language-none">extends</code>. Це означатиме, що тип, з яким ми будемо працювати, має бути спадкоємцем деякого класу і при цьому реалізовувати певний інтерфейс. Наприклад: 
<pre class="inline-block  language-java" tabindex="0"><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Box</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">T</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Animal</span></span> <span class="token operator"><span class="token operator">&amp;</span></span> <span class="token class-name"><span class="token class-name">Comparable</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token punctuation"><span class="token punctuation">{</span></span></code></pre> У цьому випадку, якщо ми спробуємо покласти в таке <code class=" language-none">Box</code>щось, що не є спадкоємцем <code class=" language-none">Animal</code>і не реалізує <code class=" language-none">Comparable</code>, то під час компіляції ми отримаємо помилку: 
<pre class="inline-block  language-java" tabindex="0"><code class="  language-java">error<span class="token operator"><span class="token operator">:</span></span> type argument <span class="token class-name"><span class="token class-name">Cat</span></span> is not within bounds of type<span class="token operator"><span class="token operator">-</span></span>variable <span class="token class-name"><span class="token class-name">T</span></span></code></pre>
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="024b36ef-cd3b-4916-86f2-5fad3fb340c3" data-max-width="260" alt="Дженерики на котиках - 7" src="https://cdn.javarush.com/images/article/024b36ef-cd3b-4916-86f2-5fad3fb340c3/256.jpeg" style="width: 260px;">
 </div>
</div>
<h2>Типізація методів</h2>Дженерики застосовуються у типах, а й у окремих методах. Застосування у методах можна побачити в офіційному tutorial: " <a href="https://docs.oracle.com/javase/tutorial/java/generics/methods.html" target="_blank" rel="nofollow">Generics Methods</a> ". 
<h3>Передісторія:</h3>
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="7af6c352-c4bc-46e7-89e7-9f590464127c" data-max-width="631" alt="Дженерики на котиках." src="https://cdn.javarush.com/images/article/7af6c352-c4bc-46e7-89e7-9f590464127c/512.jpeg" style="width: 631px;">
 </div>
</div>Подивимося на цю картинку. Як видно, компілятор дивиться на сигнатуру методу і бачить, що ми приймаємо на вхід якийсь невизначений клас. Не сигнатурою він визначає, що ми повертаємо якийсь об'єкт, тобто. Object. Отже, якщо ми хочемо створити, скажімо, ArrayList, то треба робити так: 
<pre class="inline-block  language-java" tabindex="0"><code class="  language-java"><span class="token class-name"><span class="token class-name">ArrayList</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> object <span class="token operator"><span class="token operator">=</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">ArrayList</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token function"><span class="token function">createObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">ArrayList</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Доводиться самим явно писати, що на виході буде ArrayList, що негарно і додає шансу зробити помилку. Наприклад, ми можемо написати таку марення і це скомпілюється: 
<pre class="inline-block  language-java" tabindex="0"><code class="  language-java"><span class="token class-name"><span class="token class-name">ArrayList</span></span> object <span class="token operator"><span class="token operator">=</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">ArrayList</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token function"><span class="token function">createObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">LinkedList</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Чи можемо допомогти компілятору? Так, дженерики нам це дозволяють. Розглянемо той самий приклад: 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="31d53314-bb81-4ce5-b0b5-4881979638e6" data-max-width="472" alt="Дженерики на котиках." src="https://cdn.javarush.com/images/article/31d53314-bb81-4ce5-b0b5-4881979638e6/256.jpeg" style="width: 472px;">
 </div>
</div>Тоді ми можемо створити об'єкт просто ось так: 
<pre class="inline-block  language-java" tabindex="0"><code class="  language-java"><span class="token class-name"><span class="token class-name">ArrayList</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> object <span class="token operator"><span class="token operator">=</span></span> <span class="token function"><span class="token function">createObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">ArrayList</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre>
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-max-width="137" alt="Дженерики на котиках - 10" src="https://cdn.javarush.com/images/article/39ec85ee-3a2a-4969-a929-7cecee49e878/original.jpeg">
 </div>
</div>
<h2>WildCard</h2>Відповідно до Tutorial від Oracle по дженерикам, саме розділу " <a href="https://docs.oracle.com/javase/tutorial/java/generics/wildcards.html" target="_blank" rel="nofollow">Wildcards</a> " , ми можемо описати "невідомий тип" символом питання, так званого question mark. Wildcard - зручний інструмент, щоб пом'якшити деякі обмеження дженериків. Наприклад, як ми раніше розбирали, дженерики інваріантні. Це означає, що хоча всі класи є спадкоємцями (підтипами, subtypes) типу Object, але <code class=" language-none">List&lt;любой тип&gt;</code>не є підтипом <code class=" language-none">List&lt;Object&gt;</code>. АЛЕ <code class=" language-none">List&lt;любой тип&gt;</code>є підтипом <code class=" language-none">List&lt;?&gt;</code>. Таким чином, ми можемо написати наступний код: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">printList</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token operator"><span class="token operator">?</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> list<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
  <span class="token keyword"><span class="token keyword">for</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Object</span></span> elem<span class="token operator"><span class="token operator">:</span></span> list<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">print</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>elem <span class="token operator"><span class="token operator">+</span></span> <span class="token string"><span class="token string">" "</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
  <span class="token punctuation"><span class="token punctuation">}</span></span>
  <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Як і звичайні дженерики (тобто без використання wildcard'ів), дженерики з wildcard можуть бути обмежені. Обмеження верхньої межі (Upper bounded wildcard) виглядає звично: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">printCatList</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token operator"><span class="token operator">?</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Cat</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> list<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
  <span class="token keyword"><span class="token keyword">for</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Cat</span></span> cat<span class="token operator"><span class="token operator">:</span></span> list<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">print</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>cat <span class="token operator"><span class="token operator">+</span></span> <span class="token string"><span class="token string">" "</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
  <span class="token punctuation"><span class="token punctuation">}</span></span>
  <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Але можна обмежити і по нижньому кордоні (Lower bound wildcard): 
<pre class="inline-block  language-java" tabindex="0"><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">printCatList</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token operator"><span class="token operator">?</span></span> <span class="token keyword"><span class="token keyword">super</span></span> <span class="token class-name"><span class="token class-name">Cat</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> list<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span></code></pre> Таким чином, метод почне приймати всіх котів, а так само по ієрархії вище (аж до Object). 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-max-width="208" alt="Дженерики на котиках - 11" src="https://cdn.javarush.com/images/article/b524f9ce-9fe7-4301-a769-49f7d95a48bb/original.jpeg">
 </div>
</div>
<h2>Стирання типів або Type Erasure</h2>Говорячи про дженерики варто знати про "Стирання типів". Насправді стирання типів це про те, що дженерики це інформація для компілятора. Під час виконання програми інформації про дженериків більше немає, це і називається "прання". Це стирання має ефект, що тип дженерика замінюється конкретним типом. Якщо дженерик у відсутності кордону, буде підставлено тип Object. Якщо ж межа була вказана (наприклад <code class=" language-none">&lt;T extends Comparable&gt;</code>), вона і буде підставлена. Ось приклад із Tutorial від Oracle: " <a href="https://docs.oracle.com/javase/tutorial/java/generics/genTypes.html" target="_blank" rel="nofollow">Erasure of Generic Types</a> ": 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="55fc1a1a-b62c-4128-8aca-7300f2669fa6" data-max-width="661" alt="Дженерики на котиках - 12" src="https://cdn.javarush.com/images/article/55fc1a1a-b62c-4128-8aca-7300f2669fa6/512.jpeg" style="width: 661px;">
 </div>
</div>Як і було сказано, у цьому прикладі дженерик <code class=" language-none">T</code>стертий до свого кордону, тобто. до <code class=" language-none">Comparable</code>. 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="7b2447c6-482b-43d8-a4fb-b5dc4d794d6c" data-max-width="256" alt="Дженерики на котиках - 13" src="https://cdn.javarush.com/images/article/7b2447c6-482b-43d8-a4fb-b5dc4d794d6c/256.jpeg" style="width: 256px;">
 </div>
</div>
<h2>Висновок</h2>Дженеріки – дуже цікава тема. Сподіваюся, ця тема Вас зацікавила. Підбиваючи підсумки, можна сказати, що дженерики - чудовий засіб, який отримали розробники, щоб підказувати компілятору додаткову інформацію для забезпечення типобезпеки з одного боку та гнучкості з іншого. І якщо зацікавила, то пропоную до ознайомлення ресурси, які сподобалися самому: 
<ul>
 <li>coursehunters: " <a href="https://coursehunters.net/course/java-generics" target="_blank" rel="nofollow">java generics</a> "</li>
 <li>Oracle Tutorial: " <a href="https://docs.oracle.com/javase/tutorial/java/generics/index.html" target="_blank" rel="nofollow">Lesson: Generics (Updated)</a> "</li>
 <li>CodeGym: " <a href="https://codegym.cc/groups/posts/2004-teorija-dzhenerikov-v-java-ili-gde-na-praktike-stavitjh-skobki" target="_blank" rel="nofollow">Теорія дженериків у Java або як на практиці ставити дужки</a> "</li>
 <li>Юрій Ткач: " <a href="https://www.youtube.com/watch?v=MniNZsyjH9E&amp;list=PL6jg6AGdCNaX1yIJpX4sgALBTmTVc_uOJ" target="_blank" rel="nofollow">Advanced Java - Generics</a> "</li>
 <li>Олександр Маторін - " <a href="https://www.youtube.com/watch?v=_0c9Fd9FacU&amp;t=4s" target="_blank" rel="nofollow">Неочевидні Дженерики</a> "</li>
 <li>IBM Developer: " <a href="https://developer.ibm.com/tutorials/j-perry-generics/" target="_blank" rel="nofollow">Unit 20: Generics</a> "</li>
 <li>Хабр: " <a href="https://habr.com/ru/company/sberbank/blog/416413/" target="_blank" rel="nofollow">Прийшов, побачив, узагальнив: поринаємо в Java Generics</a> "</li>
 <li>Книга " <a href="https://www.amazon.com/Java-Generics-Collections-Development-Process-ebook/dp/B0026OR2HM" target="_blank" rel="nofollow">Java Generics and Collections</a> "</li>
</ul>#Viacheslav