Reflection API. Рефлексія. Темна сторона Java
<p>----------------------------------------</p>
Вітаю вас, молодий падан. У цій статті я розповім про Сил, міць якої java-програмісти використовують тільки в, здавалося б, безвихідній ситуації. Отже, темна сторона Java - Рефлексія Java здійснюється за допомогою Java Reflection API. Що та
<p>----------------------------------------</p>
Вітаю вас, молодий падан. У цій статті я розповім про Сил, міць якої java-програмісти використовують тільки в, здавалося б, безвихідній ситуації. Отже, темна сторона Java -<code class=" language-none">Reflection API</code>
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="47eb4688-7ab0-4c1b-b14c-250d49a892bd" data-max-width="500" alt="Reflection API.  Рефлексія.  Темна сторона Java - 1" src="https://cdn.javarush.com/images/article/47eb4688-7ab0-4c1b-b14c-250d49a892bd/256.jpeg" style="width: 500px;">
 </div>
</div>Рефлексія Java здійснюється за допомогою Java Reflection API. Що таке рефлексія? Існує коротке та точне, а також популярне на просторах інтернету визначення. <strong>Рефлексія </strong> <em>(від пізньолат. reflexio - звернення назад)</em>- Це механізм дослідження даних про програму під час її виконання. Рефлексія дозволяє досліджувати інформацію про поля, методи та конструктори класів. Сам механізм рефлексії дозволяє обробляти типи, відсутні при компіляції, але які з'явабося під час виконання програми. Рефлексія та наявність логічно цілісної моделі видачі інформації про помилки дає можливість створювати коректний динамічний код. Інакше висловлюючись, розуміння принципів роботи рефлексії в java відкриває перед вами низку дивовижних можливостей. Ви буквально можете жонглювати класами та їх складовими. 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="b15e4b1b-876d-4859-8fc4-dda2e73f16e9" data-max-width="660" alt="Reflection API.  Рефлексія.  Темна сторона Java - 2" src="https://cdn.javarush.com/images/article/b15e4b1b-876d-4859-8fc4-dda2e73f16e9/512.jpeg" style="width: 660px;">
 </div>
</div>Ось основний список того, що дозволяє рефлексія: 
<ul>
 <li>Дізнатися/визначити клас об'єкта;</li>
 <li>Отримати інформацію про модифікаторів класу, поля, методи, константи, конструктори та суперкласи;</li>
 <li>З'ясувати, які методи належать реалізованому інтерфейсу/інтерфейсу;</li>
 <li>Створити екземпляр класу, причому ім'я класу невідоме до виконання програми;</li>
 <li>Отримати та встановити значення поля об'єкта на ім'я;</li>
 <li>Викликати метод об'єкта на ім'я.</li>
</ul>Рефлексія використовується практично у всіх сучасних технологіях Java. Важко собі уявити, чи могла б Java, як платформа, досягти такого величезного поширення без рефлексії. Швидше за все, не змогла б. Із загальним теоретичним уявленням про рефлексію ви ознайомабося, тепер приступимо до її практичного застосування! Не вивчатимемо всі методи Reflection API, тільки те, що реально зустрічається на практиці. Оскільки механізм рефлексії має на увазі роботу з класами, то й у нас буде простий клас <code class=" language-none"><strong>MyClass</strong></code>. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">MyClass</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">int</span></span> number<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> name <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"default"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token comment"><span class="token comment">//    public MyClass(int number, String name) {</span></span>
<span class="token comment"><span class="token comment">//        this.number = number;</span></span>
<span class="token comment"><span class="token comment">//        this.name = name;</span></span>
<span class="token comment"><span class="token comment">//    }</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">int</span></span> <span class="token function"><span class="token function">getNumber</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> number<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">setNumber</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span> number<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>number <span class="token operator"><span class="token operator">=</span></span> number<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">setName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> name<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>name <span class="token operator"><span class="token operator">=</span></span> name<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">printData</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>number <span class="token operator"><span class="token operator">+</span></span> name<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Як бачимо, це звичайнісінький клас. Конструктор із параметрами закоментований не просто так, ми до цього ще повернемося. Якщо ви уважно переглянули вміст класу, то, напевно, побачабо відсутність <code class=" language-none"><strong>getter</strong></code>'a для поля <code class=" language-none"><strong>name</strong></code>. Саме поле <code class=" language-none"><strong>name</strong></code>позначене модифікатором доступу <code class=" language-none"><strong>private</strong></code>, звернутися до нього поза самим класом у нас не вийде <code class=" language-none">=&gt;</code>ми не можемо отримати його значення. "Так в чому проблема? - Скажете ви. — Допиши <code class=" language-none"><strong>getter</strong></code>або зміни модифікатор доступу”. І ви будете праві, але, що якщо <code class=" language-none"><strong>MyClass</strong></code>знаходиться в скомпільованій aar бібліотеці або в іншому закритому модулі без доступу до редагування, а на практиці таке трапляється вкрай часто. І якийсь неуважний програміст просто забув написати <code class=" language-none"><strong>getter</strong></code>. Саме час згадати рефлексії! Спробуємо дістатися до<code class=" language-none"><strong>private</strong></code>поля <code class=" language-none"><strong>name</strong></code>класу <code class=" language-none"><strong>MyClass</strong></code>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token class-name"><span class="token class-name">MyClass</span></span> myClass <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">MyClass</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">int</span></span> number <span class="token operator"><span class="token operator">=</span></span> myClass<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getNumber</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token class-name"><span class="token class-name">String</span></span> name <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">//no getter =(</span></span>
   <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>number <span class="token operator"><span class="token operator">+</span></span> name<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span><span class="token comment"><span class="token comment">//output 0null</span></span>
   <span class="token keyword"><span class="token keyword">try</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token class-name"><span class="token class-name">Field</span></span> field <span class="token operator"><span class="token operator">=</span></span> myClass<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getClass</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getDeclaredField</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"name"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       field<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setAccessible</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token boolean"><span class="token boolean">true</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       name <span class="token operator"><span class="token operator">=</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> field<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>myClass<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">catch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">NoSuchFieldException</span></span> <span class="token operator"><span class="token operator">|</span></span> <span class="token class-name"><span class="token class-name">IllegalAccessException</span></span> e<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       e<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">printStackTrace</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>number <span class="token operator"><span class="token operator">+</span></span> name<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span><span class="token comment"><span class="token comment">//output 0default</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Розберемо, що тут зараз сталося. У java є чудовий клас <code class=" language-none"><strong>Class</strong></code>. Він представляє класи та інтерфейси у додатку Java, що виконується. Зв'язок між <code class=" language-none"><strong>Class</strong></code>і <code class=" language-none"><strong>ClassLoader</strong></code>ми не зачіпатимемо, т.к. це не є темою статті. Далі, щоб отримати поля цього класу потрібно викликати метод <strong><code class=" language-none">getFields()</code></strong>, цей метод поверне нам усі доступні поля класу. Нам це не підходить, так як наше поле <code class=" language-none"><strong>private</strong></code>, тому використовуємо метод <strong><code class=" language-none">getDeclaredFields()</code></strong>, цей метод також повертає масив полів класу, але тепер і <code class=" language-none"><strong>private</strong></code>і <code class=" language-none"><strong>protected</strong></code>. У нашій ситуації ми знаємо ім'я поля, яке нас цікавить, і можемо використовувати метод <strong><code class=" language-none">getDeclaredField(String)</code></strong>, де <code class=" language-none"><strong>String</strong></code>ім'я потрібного поля. <mark>Примітка:</mark> <strong><code class=" language-none">getFields()</code></strong>і <strong><code class=" language-none">getDeclaredFields()</code></strong>не повертають поля класу-батька! Відмінно ми отримали об'єкт <code class=" language-none"><strong>Field </strong></code>з посиланням на наш <code class=" language-none"><strong>name</strong></code>. Т.к. поле не було <strong><code class=" language-none">публичным</code></strong>(public) слід дати доступ до роботи з ним. Метод <strong><code class=" language-none">setAccessible(true)</code></strong>дозволяє нам подальшу роботу. Тепер поле <code class=" language-none"><strong>name</strong></code>є повністю під нашим контролем! Отримати його значення можна викликом <strong><code class=" language-none">get(Object)</code></strong>у об'єкта <code class=" language-none"><strong>Field</strong></code>, де <code class=" language-none"><strong>Object</strong></code>екземпляр нашого класу <code class=" language-none"><strong>MyClass</strong></code>. Приводимо до типу <code class=" language-none"><strong>String</strong></code>і присвоюємо нашій змінній <code class=" language-none"><strong>name</strong></code>. На той випадок, якщо у нас раптом не виявилося <code class=" language-none"><strong>setter</strong></code>'a, для встановлення нового значення полю name можна використовувати метод <code class=" language-none"><strong>set</strong></code>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java">field<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">set</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>myClass<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token string"><span class="token string">"new value"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre><strong>Вітаю! Ви тільки що опанували базовий механізм рефлексії і змогли отримати доступ до <code class=" language-none">private</code>поля! </strong> Зверніть увагу на блок <code class=" language-none"><strong>try/catch</strong></code>і типи винятків, що обробляються. IDE сама вкаже на їхню обов'язкову присутність, але за їхньою назвою отже ясно навіщо вони тут. Йдемо далі! Як ви могли помітити, наш <code class=" language-none"><strong>MyClass</strong></code>уже має метод для виведення інформації про дані класу: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">printData</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>number <span class="token operator"><span class="token operator">+</span></span> name<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Але цей програміст і тут успадкував. Метод знаходиться під модифікатором доступу <code class=" language-none"><strong>private</strong></code>, і нам довелося самим щоразу писати код виводу. Не порядок, де там наша рефлексія? Напишемо таку функцію: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">printData</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Object</span></span> myClass<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token keyword"><span class="token keyword">try</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token class-name"><span class="token class-name">Method</span></span> method <span class="token operator"><span class="token operator">=</span></span> myClass<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getClass</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getDeclaredMethod</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"printData"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       method<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setAccessible</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token boolean"><span class="token boolean">true</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       method<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">invoke</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>myClass<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">catch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">NoSuchMethodException</span></span> <span class="token operator"><span class="token operator">|</span></span> <span class="token class-name"><span class="token class-name">InvocationTargetException</span></span> <span class="token operator"><span class="token operator">|</span></span> <span class="token class-name"><span class="token class-name">IllegalAccessException</span></span> e<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       e<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">printStackTrace</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Тут приблизно така сама процедура як і з отриманням поля - отримуємо потрібний метод на ім'я і даємо доступ до нього. І для виклику об'єкта <code class=" language-none"><strong>Method</strong></code>використовуємо <strong><code class=" language-none">invoke(Оbject, Args)</code></strong>, де <code class=" language-none"><strong>Оbject</strong></code>- все також екземпляр класу <code class=" language-none"><strong>MyClass</strong></code>. <code class=" language-none"><strong> Args</strong></code>- аргументи методу - наших не має. Тепер для виведення інформації ми використовуємо функцію <code class=" language-none"><strong>printData</strong></code>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token class-name"><span class="token class-name">MyClass</span></span> myClass <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">MyClass</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">int</span></span> number <span class="token operator"><span class="token operator">=</span></span> myClass<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getNumber</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token class-name"><span class="token class-name">String</span></span> name <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">//?</span></span>
   <span class="token function"><span class="token function">printData</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>myClass<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// outout 0default</span></span>
   <span class="token keyword"><span class="token keyword">try</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token class-name"><span class="token class-name">Field</span></span> field <span class="token operator"><span class="token operator">=</span></span> myClass<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getClass</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getDeclaredField</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"name"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       field<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setAccessible</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token boolean"><span class="token boolean">true</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       field<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">set</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>myClass<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token string"><span class="token string">"new value"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       name <span class="token operator"><span class="token operator">=</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> field<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>myClass<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">catch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">NoSuchFieldException</span></span> <span class="token operator"><span class="token operator">|</span></span> <span class="token class-name"><span class="token class-name">IllegalAccessException</span></span> e<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       e<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">printStackTrace</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token function"><span class="token function">printData</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>myClass<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span><span class="token comment"><span class="token comment">// output 0new value</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Ура, тепер ми маємо доступ до приватного методу класу. Але що робити якщо у методу все ж таки будуть аргументи, і навіщо той закоментований конструктор? Всьому свій час. З визначення спочатку ясно, що рефлексія дозволяє створювати екземпляри класу в режимі <code class=" language-none"><strong>runtime</strong></code>(під час виконання програми)! Ми можемо створити об'єкт класу на повне ім'я цього класу. Повне ім'я класу - це ім'я класу, враховуючи шлях до нього <code class=" language-none"><strong>package</strong></code>. 
<div class="jr-image-wrap">
 <img data-id="10b0b072-c2e8-4d1e-a591-1ef394b41975" data-max-width="256" alt="Reflection API.  Рефлексія.  Темна сторона Java - 3" src="https://cdn.javarush.com/images/article/10b0b072-c2e8-4d1e-a591-1ef394b41975/256.jpeg" style="width: 256px;">
</div>У моїй ієрархії <code class=" language-none"><strong>package</strong></code>повним ім'ям <code class=" language-none"><strong>MyClass</strong></code>буде “ <code class=" language-none"><strong>reflection.MyClass</strong></code>”. Також дізнатися ім'я класу можна простим способом (поверне ім'я класу у вигляді рядка): 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">MyClass</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span></code></pre> Створимо екземпляр класу за допомогою рефлексії: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token class-name"><span class="token class-name">MyClass</span></span> myClass <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">try</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token class-name"><span class="token class-name">Class</span></span> clazz <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Class</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">forName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">MyClass</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       myClass <span class="token operator"><span class="token operator">=</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">MyClass</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> clazz<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">newInstance</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">catch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">ClassNotFoundException</span></span> <span class="token operator"><span class="token operator">|</span></span> <span class="token class-name"><span class="token class-name">InstantiationException</span></span> <span class="token operator"><span class="token operator">|</span></span> <span class="token class-name"><span class="token class-name">IllegalAccessException</span></span> e<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       e<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">printStackTrace</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>myClass<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span><span class="token comment"><span class="token comment">//output created object reflection.MyClass@60e53b93</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> На момент старту програми Java далеко не всі класи виявляються завантаженими в JVM. Якщо у вашому коді немає звернення до класу <code class=" language-none"><strong>MyClass</strong></code>, то той, хто відповідає за завантаження класів у JVM, а ним є <code class=" language-none"><strong>ClassLoader</strong></code>, ніколи його туди і не завантажить. Тому потрібно змусити <code class=" language-none"><strong>ClassLoader</strong></code>завантажити його та отримати опис нашого класу у вигляді змінної типу <code class=" language-none"><strong>Class</strong></code>. Для цього завдання існує метод <strong><code class=" language-none">forName(String)</code></strong>, де <code class=" language-none"><strong>String</strong></code>ім'я класу, опис якого нам потрібно. Отримавши <code class=" language-none"><strong>Сlass</strong></code>, виклик методу <strong><code class=" language-none">newInstance()</code></strong>поверне <code class=" language-none"><strong>Object</strong></code>, який буде створений за тим самим описом. Залишається привести цей об'єкт до нашого класу<code class=" language-none"><strong>MyClass</strong></code>. Круто! Було складно, але сподіваюся, зрозуміло. Тепер ми вміємо створювати екземпляр класу буквально з одного рядка! На жаль, описаний спосіб буде працювати тільки з конструктором за умовчанням (без параметрів). Як викликати методи з аргументами і конструктори з параметрами? Саме час розкоментувати наш конструктор. Як і очікувалося, <code class=" language-none"><strong>newInstance()</strong></code>не знаходить за замовчуванням конструктор і більше не працює. Перепишемо створення екземпляра класу: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token class-name"><span class="token class-name">MyClass</span></span> myClass <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">try</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token class-name"><span class="token class-name">Class</span></span> clazz <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Class</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">forName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">MyClass</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token class-name"><span class="token class-name">Class</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> params <span class="token operator"><span class="token operator">=</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token keyword"><span class="token keyword">int</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token punctuation"><span class="token punctuation">}</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       myClass <span class="token operator"><span class="token operator">=</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">MyClass</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> clazz<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getConstructor</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>params<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">newInstance</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"default2"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">catch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">ClassNotFoundException</span></span> <span class="token operator"><span class="token operator">|</span></span> <span class="token class-name"><span class="token class-name">InstantiationException</span></span> <span class="token operator"><span class="token operator">|</span></span> <span class="token class-name"><span class="token class-name">IllegalAccessException</span></span> <span class="token operator"><span class="token operator">|</span></span> <span class="token class-name"><span class="token class-name">NoSuchMethodException</span></span> <span class="token operator"><span class="token operator">|</span></span> <span class="token class-name"><span class="token class-name">InvocationTargetException</span></span> e<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       e<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">printStackTrace</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>myClass<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span><span class="token comment"><span class="token comment">//output created object reflection.MyClass@60e53b93</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Для отримання конструкторів класу слід в описі класу викликати метод <strong><code class=" language-none">getConstructors()</code></strong>, а для отримання параметрів конструктора - <strong><code class=" language-none">getParameterTypes()</code></strong>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">Constructor</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> constructors <span class="token operator"><span class="token operator">=</span></span> clazz<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getConstructors</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">for</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Constructor</span></span> constructor <span class="token operator"><span class="token operator">:</span></span> constructors<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token class-name"><span class="token class-name">Class</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> paramTypes <span class="token operator"><span class="token operator">=</span></span> constructor<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getParameterTypes</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">for</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Class</span></span> paramType <span class="token operator"><span class="token operator">:</span></span> paramTypes<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">print</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>paramType<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">+</span></span> <span class="token string"><span class="token string">" "</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Таким чином отримуємо всі конструктори та всі параметри до них. У моєму прикладі йде звернення до конкретного конструктора з вже конкретними відомими параметрами. І виклику цього конструктора використовуємо метод <code class=" language-none"><strong>newInstance</strong></code>, у якому вказуємо значення цим параметрам. Так само буде і з<code class=" language-none"><strong>invoke</strong></code>для виклику методів. Виникає питання: де може стати в нагоді рефлексивний виклик конструкторів? Сучасні технології java, як говорилося на початку, не обходяться без Reflection API. Наприклад, DI (Dependency Injection), де анотації у поєднанні з рефлексією методів та конструкторів утворюють популярну в Android розробці бібліотеку Dagger. Після прочитання цієї статті ви з упевненістю можете вважати себе освіченим механізмами Reflection API. Темною стороною java рефлексія називається не дарма. Вона геть-чисто ламає парадигму ОВП. У Java інкапсуляція служить для приховування та обмеження доступу одних компонентів програми до інших. Використовуючи модифікатор private ми маємо на увазі, що доступ до цього поля буде тільки в межах класу, де це поле існує, ґрунтуючись на цьому, ми будуємо подальшу архітектуру програми. У цій статті ми побачабо, як за допомогою рефлексії можна пробиратися будь-куди. Хорошим прикладом у вигляді архітектурного рішення є шаблон проектування, що породжує.<code class=" language-none"><strong>Singleton</strong></code>. Основна його ідея в тому, щоб протягом всієї роботи програми клас, що реалізує цей шаблон, був тільки в одному примірнику. Здійснюється це за допомогою установки конструктору за замовчуванням модифікатор private доступу. І буде дуже погано, якщо якийсь програміст зі своєю рефлексією плодитиме такі класи. До речі, є дуже цікаве питання, яке я нещодавно почув від свого співробітника: чи може бути у класу <code class=" language-none"><strong>Singleton</strong></code>спадкоємці, що реалізує шаблон? Невже в цьому випадку неспроможна навіть рефлексія? Пишіть ваші feedback'и за статтею та відповідь у коментарі, а також ставте свої запитання! Справжня Сила Reflection API розкривається в комбінації з Runtime Annotations, про що ми, можливо, поговоримо в наступній статті про темну сторону Java. Дякую за увагу! 
<div class="email-subscription">
 <iframe frameborder="0" src="https://secure.esputnik.com.ua/4Q0Ef6d2SOs" width="100%" height="200" scrolling="no" data-savepage-key="0-2"></iframe>
</div>