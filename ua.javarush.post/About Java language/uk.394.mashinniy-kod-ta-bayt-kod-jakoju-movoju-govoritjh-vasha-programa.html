Машинний код та байт код: якою мовою говорить ваша програма?
<p>----------------------------------------</p>
У тих, хто тільки починає знайомитися з Java, часто виникає плутанина в поняттях і . Що вони являють собою? У чому різниця? У короткій нотатці ми постараємося дуже легко і зрозуміло розписати їх особливості, щоб раз і назавжди закрити це пи
<p>----------------------------------------</p>
У тих, хто тільки починає знайомитися з Java, часто виникає плутанина в поняттях <em><strong>машинний</strong></em> і <em><strong>байт код</strong></em> . Що вони являють собою? У чому різниця? У короткій нотатці ми постараємося дуже легко і зрозуміло розписати їх особливості, щоб раз і назавжди закрити це питання. 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="64e4500b-028f-425d-a654-844765adae95" data-max-width="710" alt="Машинний код та байт код: якою мовою говорить ваша програма?  - 1" src="https://cdn.javarush.com/images/article/64e4500b-028f-425d-a654-844765adae95/512.jpeg" style="width: 710px;">
 </div>
</div>
<h2 style="color:#cc2921">Машинний код</h2><em><strong>Процесор</strong></em> - це, по суті, дуже складний і калькулятор. У нього є безліч осередків пам'яті (званих регістрів) з якими і між якими проводяться різні математичні та байтові операції. Машинний код якраз і є описом послідовності виконання операцій і набору даних, що беруть участь. По суті це єдина мова, яку розуміє процесор вашого комп'ютера. 
<h4>Вроджена несумісність</h4>При цьому далеко не всі процесори говорять однією мовою. Відмінності є не лише між архітектурами <em><strong>CISC</strong></em> та <em><strong>RISC</strong></em> , а й усередині цих «таборів». 
<div class="table-container">
 <table>
  <tbody>
   <tr>
    <td>
     <p><em><strong>CISC (Complex Instruction Set Computing) — концепція проектування процесорів, яка характеризується наступним набором властивостей:</strong></em></p>
     <ul>
      <li>багато команд, різних за довжиною;</li>
      <li>багато режимів адресаації;</li>
      <li>складне кодування інструкції.</li>
     </ul><em><strong>RISC (Reduced Instruction Set Computing)</strong></em> – процесор зі скороченим набором команд. Команди одного формату, короткі, із простим кодуванням.</td>
   </tr>
  </tbody>
 </table>
</div>У нових поколіннях процесорів впроваджують додаткові набори інструкцій, які моделям старшого покоління просто невідомі. Через це програми, скомпільовані для однієї архітектури (або одного покоління процесорів) не можуть працювати на іншому апаратному забезпеченні. Усе це змушує займатися перекомпіляцією програм забезпечення їх роботи інших комп'ютерах. Втім, наново компілювати доводиться не лише через процесори, а й ще через відмінності у взаємодії програм та операційної системи. Саме через них неможливо запустити «виндову» програму під Linux, а «лінуксову» під Windows. 
<h2 style="color:#cc2921">Байт-код</h2>Байт-код багато в чому нагадує машинний код, тільки він використовує набір інструкцій не реального процесора, а віртуального. При цьому він може включати ділянки, орієнтовані на використання <em><strong>JIT-компілятора</strong></em> , що оптимізує виконання команд під реальний процесор, на якому запущена програма. 
<div class="table-container">
 <table>
  <tbody>
   <tr>
    <td><em><strong>JIT-компіляція</strong></em> (англ. Just-in-time compilation, компіляція «на льоту») або<em><strong> динамічна компіляція</strong></em> (англ. dynamic translation) - це технологія збільшення продуктивності програмних систем, що використовують байт-код шляхом компіляції байт-коду в машинний код або до іншого формату безпосередньо під час роботи програми. "Офіційно" в Java до 9-ї версії був лише JIT-компілятор. У Java 9 виник ще один компілятор, причому компілює він з випередженням (AoT). Ця можливість дозволяє компілювати класи Java у нативний код перед запуском на віртуальній машині. Ця функція призначена для покращення часу запуску і малих, і великих програм, з обмеженим впливом на максимальну продуктивність.</td>
   </tr>
  </tbody>
 </table>
</div>Для <em><strong>CISC</strong></em> процесорів деякі інструкції можуть об'єднуватися у складніші конструкції, підтримувані процесором, а <em><strong>RISC</strong></em> – навпаки розбиватися більш прості послідовності команд. 
<h4>Ще й віртуальна ОС</h4>Втім, байт-код містить не тільки процесорні інструкції. У ньому також міститься логіка взаємодії з віртуальною операційною системою, яка робить поведінку програми незалежним від операційної системи, що використовується на комп'ютері. Це добре видно в <em><strong>JVM</strong></em> , де робота з системними викликами та <em><strong>GUI</strong></em> часто не залежать від ОС, на якій запущено програму. За великим рахунком, <em><strong>JVM</strong></em> емулює запуск процесу програми, на відміну від рішень на кшталт <em><strong>Virtual Box</strong></em> , які створюють лише віртуальну систему/залізо. 
<h3>JVM одна така?</h3>Безумовно ні. Той самий <em><strong>DotNet CLI</strong></em> це теж віртуальна машина, яку найчастіше використовують на комп'ютерах, що працюють під <em><strong>Windows з x86</strong></em> сумісними процесорами. Втім існує її реалізація і під інші системи: програми під нього повинні працювати в <em><strong>Windows RT</strong></em> запущеної на <em><strong>ARM (RISC)</strong></em> сумісних процесорах, або можна запустити їх на <em><strong>Linux/OSX</strong></em> в середовищі <em><strong>Mono</strong></em> , що є сторонньою (і тому не повністю сумісною) реалізацією <em><strong>DotNet</strong></em> для цих платформ. Так що ця платформа, як і <em><strong>JVM</strong></em> , працює на різних процесорах та різних ОС. Існує ще безліч схожих рішень (як старих, так і нових): <em><strong>LLVM</strong></em>, <em><strong>Flash SWF</strong></em> та інші. Деякі мови програмування мають власні віртуальні машини. Наприклад, <em><strong>CPython</strong></em> компілює вихідні коди з <em><strong>PY</strong></em> в файли <em><strong>PYC</strong></em> – скомпільований (compiled) байт код який підготовлений до запуску в <em><strong>PVM</strong></em> . Або є набагато давніший приклад - <em><strong>Lisp</strong></em> можна компілювати у файли <em><strong>FASL</strong></em> (Fast Load). Фактично вони містять <em><strong>дерево AST</strong></em> , побудоване генератором з вихідного коду. Ці файли можуть бути прочитані та запущені інтерпретатором <em><strong>Lisp</strong></em> на різних платформах, або використані для створення машинного коду для апаратної архітектури, що використовується на даний момент. 
<div class="table-container">
 <table>
  <tbody>
   <tr>
    <th>
     <p>Що ще почитати:</p></th>
   </tr>
   <tr>
    <td>
     <p><a href="https://codegym.cc/groups/posts/244-vopros-otvet-kak-v-java-praviljhno-konvertirovatjh-string-v-int--" target="_blank">Питання-відповідь: як у Java правильно конвертувати String в int?</a></p>
     <p><a href="https://codegym.cc/groups/posts/278-samihe-rasprostranjennihe-problemih-tekh-kto-nachinaet-uchitjh-java" target="_blank">Найпоширеніші проблеми тих, хто починає вивчати Java</a></p></td>
   </tr>
  </tbody>
 </table>
</div>