Як тестове завдання на співбесіду перетворилося на open-source бібліотеку
<p>----------------------------------------</p>
Небагато про себе: з весни 2016 року працюю як Java Software Engineer. Люблю сюди заходити та вирішую завдання, що не вирішив ще під час навчання. Сьогодні розповім вам про бібліотеку - . Це open source бібліотека, яка зберігається у відкри
<p>----------------------------------------</p>
<strong>Всім привіт, CodeGym спільнота! </strong> Небагато про себе: з весни 2016 року працюю як Java Software Engineer. Люблю сюди заходити та вирішую завдання, що не вирішив ще під час навчання. Сьогодні розповім вам про бібліотеку - <a href="https://github.com/romankh3/image-comparison" target="_blank" rel="nofollow">Image Comparison</a> . Це open source бібліотека, яка зберігається у відкритому доступі до <a href="https://github.com/" target="_blank" rel="nofollow">GitHub</a> . <img data-id="8f116cfb-1717-4041-ace8-052e2dcd231d" data-max-width="850" alt="Як тестове завдання на співбесіду перетворилося на open-source бібліотеку - 1" src="https://cdn.javarush.com/images/article/8f116cfb-1717-4041-ace8-052e2dcd231d/800.jpeg" style="width: 850px;">Мета цієї статті донести, що створення open source продукту - це не просто марнування часу, ні! Це багатий досвід, який черпається з різних боків, коли у твоїй владі весь процес розробки, коли потрібно вникати у кожну деталь. Open Source – це світ навколо вас. Я не жартую за час існування цієї бібліотеки спілкувався з людьми з різних країн, таких як: США, Індії, Китаю, Єгипту, Росії, Німеччини, України, Швеції, Нової Зеландії, Норвегії. Тобто це реальний досвід спільної розробки, знаходження компромісів, перевірки коду тощо. Це був вступ, тепер почнемо по порядку: 
<h2>Тестове завдання. Початок серпня 2017 року</h2>Почалося все з того, що я співрозмовився до однієї з компаній, де першим етапом потрібно було написати тестове завдання. Завдання полягала в тому, щоб написати код, який порівнював дві картинки, з однаковими розмірами, знаходив відмінності між ними, групував їх і малював прямокутник навколо них. Є перша картинка: 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="a3f8f838-0bda-4d5c-84e0-4257ca14e853" data-max-width="985" alt="Як тестове завдання на співбесіду перетворилося на open-source бібліотеку - 2" src="https://cdn.javarush.com/images/article/a3f8f838-0bda-4d5c-84e0-4257ca14e853/800.jpeg" style="width: 985px;">
 </div>
</div>Є друга картинка: 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="c410832c-4ad0-4b14-9cc7-aa72325ef2b1" data-max-width="985" alt="Як тестове завдання на співбесіду перетворилося на open-source бібліотеку - 3" src="https://cdn.javarush.com/images/article/c410832c-4ad0-4b14-9cc7-aa72325ef2b1/800.jpeg" style="width: 985px;">
 </div>
</div>Потрібно було знайти відмінності та обвести їх як показано нижче: 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="411ef479-a9e3-4757-8d81-086c702aaa41" data-max-width="985" alt="Як тестове завдання на співбесіду перетворилося на open-source бібліотеку - 4" src="https://cdn.javarush.com/images/article/411ef479-a9e3-4757-8d81-086c702aaa41/800.jpeg" style="width: 985px;">
 </div>
</div>Як можна помітити, у полі <strong>Username</strong> є відмінність, яка була обведена червоним трикутником. <a href="https://codegym.cc/groups/posts/1700-testovoe-zadanie-image-comparison" target="_blank" rel="nofollow">Більш детальний опис завдання</a> . Я вирішив, що хочу зробити не лише правильно з погляду функціоналу, а ще й красиво, щоб було не соромно. Для цього вирішив, що опублікую це як проект на <a href="https://github.com/" target="_blank" rel="nofollow">GitHub</a> . Давно хотів вивчити GitHub, здобути досвід роботи з ним. Після швидкого перегляду, знайшов що добре додати сторонні сервіси з аналізу якості коду, по генерації покриття коду тестами і т.д. Додав такі інструменти: 
<ul>
 <li>
  <p><a href="https://app.codacy.com/" target="_blank" rel="nofollow">Codacy</a> – якість коду. Справді, варто звернути на нього увагу.</p></li>
 <li>
  <p><a href="https://travis-ci.org/" target="_blank" rel="nofollow">Travis CI</a> — це CI(continuous integration) інструмент, який збирає проект, проганяє тести та каже, чи успішно зібрано проект. Наприклад, якщо якийсь із тестів не пройшов у слідстві з новими змінами, то він скаже, що збірка проекту невдала і забарвить її червоним кольором.</p></li>
 <li>
  <p><a href="https://coveralls.io/" target="_blank" rel="nofollow">Coveralls</a> - це інструмент, який показує, який відсоток коду покритий тестами.</p></li>
 <li>
  <p><a href="https://bettercodehub.com/" target="_blank" rel="nofollow">BetterCode Hub</a> ще один інструмент для аналізу якості коду. Дуже корисна річ, яка не тільки скаже, що погано, а й опише, чому й дасть посилання на книгу, в якій можна почерпнути знання про це.</p></li>
</ul>Кожен із цих сервісів має свій бейджик з результатами даних, наприклад проект покриття коду. І цей бейджик можна додати в головному описі проекту - файл README. Завдання було готове — віддав його на реву. Після рев'ю відразу ж по свіжій пам'яті створив на кожне зауваження <a href="https://guides.github.com/features/issues/" target="_blank" rel="nofollow">Github Issue</a> , які потім допомогли мені покращити цей проект. Завдання від роботодавця щодо покращення не було, тому на деякий час я забув про проект... 
<h2>Шлях Бібліотеки. Липень 2018 року</h2>
<h3>Логотип</h3>Одного разу я виявив, що на мій проект часто заходять люди, причому це відбувається щодня. Мене це вразило, ще більше вразило те, що через рік створабо ISSUE, в якому було написано, що якийсь графічний дизайнер пропонує мені створити логотип мого проекту. Мовляв, він любить робити це для Opensource продуктів і зробить це абсолютно безкоштовно. Ми почали співпрацювати. Було запропоновано кілька варіантів, зрештою зупинабося на цьому: 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="1c333643-763b-4202-855c-62656ffb1ea7" data-max-width="1001" alt="Як тестове завдання на співбесіду перетворилося на open-source бібліотеку - 5" src="https://cdn.javarush.com/images/article/1c333643-763b-4202-855c-62656ffb1ea7/800.jpeg" style="width: 1001px;">
 </div>
</div>Я тоді ще був молодий і незнайомий з Opensource спільнотою і сам факт такої пропозиції мені був диким і я запитав, а навіщо він це робить? На що він мені відповів: "Lolz oh, just cause i love contributing to open source projects. Kind of a life goals thing..." ( <a href="https://github.com/romankh3/image-comparison/issues/20" target="_blank" rel="nofollow">саме issue тут</a> ). Ось тоді я і відчув уперше як це здорово, коли через opensource проекти тебе знаходять різні люди і пропонують такі цікаві речі! 
<h3>Перший Дефект з боку</h3>Я помітив, що якийсь розробник з Китаю створив мені <a href="https://github.com/romankh3/image-comparison/issues/21" target="_blank" rel="nofollow">issue</a> , в якому він описав, що знайшов дефект у роботі бібліотеки, що якщо використовувати великі картинки, то виходить <strong>StackOverflowError</strong> . Людина вирішила скористатися і знайшла помилку. І не просто знайшов. а ще й написав про неї. Це новий крок у розвитку бібліотеки. Причому реального рішення у мене не було. У певний момент, один із тестувальників із Росії запропонував рішення. Але воно було сире та зроблене не як годиться і я не прийняв його. А коли вже треба було публікувати бібліотеку в Maven Central, треба було щось вирішувати з цим дефектом, не хотілося викладати разом із ним. До того ж був ще один дефект, який я так і не полагодив і він теж приносив багато незручностей. 
<h2>Command Line Usage. Осінь 2018 року</h2>Наступним етапом у розвитку було спілкування зі шведом (Renato Athaydes), який захотів використати бібліотеку через командний рядок і для цього потрібно було внести деякі зміни та доповнення. Я знову був вражений і здивований цим. Після того, як мені писав графічний дизайнер, здивування моє було трохи менше, але все ще дуже високо. Від думки, що мій код комусь реально потрібний, мене переповнювали неймовірні почуття. Він здійснив необхідні зміни, підготував код. Я провів code review, тобто переглянув зміни, були коментарі, які були змінені та зміни були вже у бібліотеці. Ці зміни я позначив як версію <a href="https://github.com/romankh3/image-comparison/releases/tag/V2.0" target="_blank" rel="nofollow">v2.0</a> Наступним етапом було додавання бібліотеки до Maven Central — центрального сховища, звідки можна буде завантажити його для будь-якого проекту та використовувати як залежність (dependency). На той момент я гадки не мав як це зробити, навіть віддалено, тому я послався на зайнятість і попросив виконати його всі дії, які необхідні для налаштування на проекті. Але цього виявилося дуже мало і найцікавіше було саме в тому, щоб налаштувати зв'язок з Maven Central. Це дикий біль, який з першого разу я так і не зміг, і реально лише 15 квітня мені вдалося опублікувати проект на Maven Central. Це було нелегко, але як люблять говорити інші: "через це проходять усі, хто хоче опублікувати свій код Java". До того, як я опублікував бібліотеку, я таки знайшов що і як робити з дефектами,<a href="https://github.com/romankh3/image-comparison/releases/tag/2.0.2" target="_blank" rel="nofollow">v2.0.2</a> , в якій я подякував усім тим, хто допоміг мені, описав, що і як я зробив. 
<h2>Публікація в Maven Central. Весна 2019</h2>Щоб правильно опублікувати бібліотеку, необхідно добре розібратися з версіонуванням, як правильно виставляти версії. Я дотримуюсь такої схеми: 
<ul>
 <li><strong>XX.YY.BBBB</strong> , де <strong>XX</strong> — це мажорне оновлення версії, яке тягне за собою зміни несумісні з попереднім.(наприклад зміна повертаючого результату в методах);</li>
 <li><strong>YY</strong> - це мінорне оновлення - зміна внутрішнє або розширення, яке не змінює те, що <strong>BBBB</strong> - це дефекти, які були відновлені.</li>
 <li>Наприклад, версія <strong>2.0.2</strong> - означає, що мажорна версія 2, мінорних оновлень не було, і є два оновлення за дефектами.</li>
</ul>Далі було важливо розібратися як правильно поставити <strong>groupId</strong> , <strong>artifactId</strong> . Їх потрібно було вибрати один раз і використати далі. З них складається пакет, у якому зберігається код. І це явно краще, тому що всім відомо, що це проект з GitHub і можна його знайти у людини з <strong>ніком </strong><strong>romankh3</strong> . Коли все це зробив, випустив нову версію <a href="https://github.com/romankh3/image-comparison/releases/tag/2.1.0" target="_blank" rel="nofollow">v2.1.0</a> . <strong></strong><a href="https://github.com/romankh3/image-comparison/releases/tag/2.1.0" target="_blank" rel="nofollow"></a>
<h2>Спілкування зі шведами. Тдорівнюєь 2019 року</h2>Після того як я опублікував бібліотеку, мені написав на пошту інший швед (Mika Kytöläinen) і попросив, щоб його знайомий зробив зміни у моїй бібліотеці. Каже, що це йому дуже потрібне і він буде дуже радий, якщо ми це зробимо і зробимо швидко. Я, звичайно, був не проти змін, які потрібні. Він запропонував додати конфігурацію товщини лінії, що малює прямокутник. Мовляв, для тих, хто погано бачить — це буде корисна зміна. <a href="https://github.com/romankh3/image-comparison/pull/78" target="_blank" rel="nofollow">Підготував код</a> . Додавши ще кілька змін, випустив версію <a href="https://github.com/romankh3/image-comparison/releases/tag/2.2.0" target="_blank" rel="nofollow">v2.2.0</a>
<h2>Спілкування з німцем. Тдорівнюєь 2019 року</h2>Після цього один німець створив<a href="https://github.com/romankh3/image-comparison/issues/62" target="_blank" rel="nofollow"> issue</a>, В якому каже, що хоче використовувати для тестування, але йому не вистачає функціоналу. Він зробив багато пропозицій, які були дуже цікаві, він запропонував замість того, щоб в результаті порівняння повертати тільки картинку, що створюється з результатом, повертати набір даних: те, що порівнювалося, результат (якщо потрібно) і стан в якому буде MATCH, MISMATCH, SIZE_MISMATCH . Навіть виконав зміни. Але вони зовсім не враховували попередній код і були зроблені поспіхом. Я відхабов їх і запропонував виконати так, як я вважаю за потрібне. Незважаючи на це він більше відповідав і я вирішив, що сам зроблю це і випустю нову версію. Разом з тим, Mika Kytöläinen запропонував ще цікавий функціонал — додати області, які б не брали участь у порівнянні. Це справжній кейс. І все це було випущено у <a href="https://github.com/romankh3/image-comparison/releases/tag/3.0.0" target="_blank" rel="nofollow">v3.0.0</a>
<h2>Використання у реальному проекті</h2>Наприкінці травня мені написав тестувальник-автоматизатор із Києва, який зацікавився бібліотекою та хоче її використати у реальному проекті, який приносить гроші. То був прорив! Використання десь у pet-project це одне, а використовувати у реальному проекті – це зовсім інша справа. Ми обговорабо, що і як працює. Застосування дуже цікаве: у них у додатку є чеки, які друкують і потрібно було перевіряти, що чеки створюються за певним шаблоном і він не змінюється. Але була проблема, що такі секції, як дата і час, завжди змінювалися і їх потрібно було ігнорувати. У нас уже був доданий функціонал на ігнорування деяких областей, але він виявився ще дуже сирим для реального використання і ми ще плідно попрацювали кілька тижнів над цим. Результатом став випуск версії<a href="https://github.com/romankh3/image-comparison/releases/tag/3.1.1" target="_blank" rel="nofollow"> v3.1.1</a>
<h2>Пошук ніші</h2>Після цього я зрозумів, що реальна ніша для моєї бібліотеки використання її в тестах. Для цього я вирішив знайти якийсь форум для тестувальників та написати їм про це, щоб отримати якийсь відгук та збільшити популярність. Знайшов російськомовний форум і там опублікував статтю " <a href="https://automated-testing.info/t/organizacziya-testirovaniya-kartinok-sravnenie-dvuh-pohozhih/22765" target="_blank" rel="nofollow">Організація тестування картинок - порівняння двох схожих"</a> . У ній я отримав реальний відгук про код і функціонал, який я застосував і випустив нову версію <a href="https://github.com/romankh3/image-comparison/releases/tag/3.2.0" target="_blank" rel="nofollow">v3.2.0</a> , а потім і <a href="https://github.com/romankh3/image-comparison/releases/tag/3.3.0" target="_blank" rel="nofollow">v.3.3.0</a> . 
<h2>Зараз</h2>Зараз бібліотека має 60 зірок на Github, має 33 форки. Я вважаю, що це дуже здорово з огляду на те, що я його ніяк не піарив крім статті на форумі для автоматизаторів. Дякую всім, хто дочитав до кінця. Реально виявилося набагато більше стаття, ніж я очікував. <a href="https://blog.bintray.com/2014/02/11/bintray-as-pain-free-gateway-to-maven-central/" target="_blank" rel="nofollow">Стаття про те, як опублікувати бібліотеку в Maven Central. </a> <strong>Якщо є що додати, пишіть! Якщо є що запропонувати щодо покращення бібліотеки — пишіть! Я все прочитаю і належно приділю на цей час. </strong> <strong>Всім кому стаття сподобалася і була корисною — оцінюйте та пишіть у коментарях. </strong> <strong>Також, підписуйтесь на мій гітхаб обліковий запис <a href="https://github.com/romankh3" target="_blank" rel="nofollow">romankh3</a></strong> Дивіться також мої інші статті: 
<ul>
 <li><a href="https://codegym.cc/groups/posts/2301-tekhnicheskie-voprosih-na-sobesedovanii" target="_blank" rel="nofollow">Технічні питання на співбесіді</a></li>
 <li><a href="https://codegym.cc/groups/posts/2302-kak-nayti-rabotu-sovetih-po-rassihlke-rezjume" target="_blank" rel="nofollow">Як знайти роботу? Поради щодо розсилки резюме</a></li>
 <li><a href="https://codegym.cc/groups/posts/2327-professionaljhnoe-vihgoranie-kak-ustojatjh" target="_blank" rel="nofollow">Професійне вигоряння. Як встояти?</a></li>
 <li><a href="https://codegym.cc/groups/posts/2306-20-chasov-v-nedelju-programmirovanija-magistratura-i-lichnaja-zhiznjh" target="_blank" rel="nofollow">Історія успіху. 20 годин програмування на тиждень, магістратура та особисте життя</a></li>
 <li><a href="https://codegym.cc/groups/posts/2400-sozdanie-sistemih-monitoringa-cen-na-aviabiletih-poshagovoe-rukovodstvo" target="_blank">Створення системи моніторингу цін на авіаквитки: покрокове керівництво [Частина 1]</a></li>
 <li><a href="https://codegym.cc/groups/posts/2430-gayd-po-sozdaniju-klienta-dlja-skyscanner-api-i-ego-publikacii-v-jcenver-i-maven-central" target="_blank">Гайд зі створення клієнта для Skyscanner API та його публікації в jCenter та Maven Central [Частина 1]</a></li>
 <li><a href="https://codegym.cc/groups/posts/2388-logirovanie-chto-kak-gde-i-chem" target="_blank">Логування: що, як, де та чим?</a></li>
 <li><a href="https://codegym.cc/groups/posts/2463-debug-v-intellij-idea-gayd-dlja-novichkov" target="_blank">Debug в Intellij IDEA: гайд для новачків</a></li>
</ul>