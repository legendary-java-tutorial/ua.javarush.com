Винятки в Java (Java Exception)
<p>----------------------------------------</p>
У повсякденному житті іноді виникають ситуації, що ми не планували. Наприклад, встаєш вранці на роботу, шукаєш зарядний пристрій до телефону, а його немає. Ідеш у ванну, щоб вмитися – відключили воду. Сів у машину – не заводиться. Але людин
<p>----------------------------------------</p>
У повсякденному житті іноді виникають ситуації, що ми не планували. Наприклад, встаєш вранці на роботу, шукаєш зарядний пристрій до телефону, а його немає. Ідеш у ванну, щоб вмитися – відключабо воду. Сів у машину – не заводиться. Але людина може легко справитися з такими непередбаченими ситуаціями. А як із ними справляються Java-програми, постараємося розібратися у цій статті.
<h2>Що таке винятки (exceptions java)</h2>У світі програмування виникнення помилок та непередбачених ситуацій під час виконання програми називають винятком (exception). У програмі виключення можуть виникати внаслідок неправильних дій користувача, відсутності ресурсу на диску, або втрати з'єднання з сервером по мережі. Причинами винятків при виконанні програми можуть бути помилки програмування або неправильне використання API. На відміну від нашого світу, програма має чітко знати, як чинити в такій ситуації. Для цього Java передбачено механізм винятків. 
<h2>Коротко про ключові слова try, catch, finally, throws</h2>Обробка виключень у Java базується на використанні в програмі таких ключових слів: 
<ul>
 <li>try – визначає блок коду, у якому може статися виняток;</li>
 <li>catch - визначає блок коду, в якому відбувається обробка виключення;</li>
 <li>finally – визначає блок коду, що є необов'язковим, але за його наявності виконується у разі незалежно від результатів виконання блоку try.</li>
</ul>Ці ключові слова використовуються для створення в програмному коді спеціальних обробних конструкцій: try{}catch, try{}catch{}finally, try{}finally{}. 
<ul>
 <li>throw - використовується для порушення виключення;</li>
 <li>throws - використовується в сигнатурі методів для попередження, що метод може викинути виняток.</li>
</ul>Приклад використання ключових слів у програмі Java: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token comment"><span class="token comment">//Метод зчитує рядок з клавіатури</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">String</span></span> <span class="token function"><span class="token function">input</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">throws</span></span> <span class="token class-name"><span class="token class-name">MyException</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token comment"><span class="token comment">//попереджаємо за допомогою throws,</span></span>
<span class="token comment"><span class="token comment">// що метод може викинути виняток MyException</span></span>
      <span class="token class-name"><span class="token class-name">BufferedReader</span></span> reader <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">BufferedReader</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">InputStreamReader</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>in<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token class-name"><span class="token class-name">String</span></span> s <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token comment"><span class="token comment">//В блок try укладаємо код, в якому може статися виняток, в даному</span></span>
<span class="token comment"><span class="token comment">// у випадку компілятор нам підказує, що метод readLine() класу</span></span>
<span class="token comment"><span class="token comment">// BufferedReader може викинути виняток введення/виводу</span></span>
    <span class="token keyword"><span class="token keyword">try</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        s <span class="token operator"><span class="token operator">=</span></span> reader<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">readLine</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token comment"><span class="token comment">// До блоку catch укладаємо код з обробки виключення IOException</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">catch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">IOException</span></span> e<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>e<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getMessage</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token comment"><span class="token comment">// у блоці finally закриваємо потік читання</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">finally</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
<span class="token comment"><span class="token comment">// при закритті потоку теж можливий виняток, наприклад, якщо він не був відкритий, тому "обертаємо" код у блок try</span></span>
        <span class="token keyword"><span class="token keyword">try</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            reader<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">close</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token comment"><span class="token comment">// пишемо обробку виключення при закритті потоку читання</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">catch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">IOException</span></span> e<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>e<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getMessage</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>s<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">equals</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">""</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
<span class="token comment"><span class="token comment">// ми вирішабо, що порожній рядок може порушити надалі роботу нашої програми, наприклад, в результаті цього методу нам треба викликати метод substring(1,2), тому ми змушені перервати виконання програми з генерацією свого типу виключення MyException за допомогою throw</span></span>
        <span class="token keyword"><span class="token keyword">throw</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">MyException</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"String can not be empty!"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token keyword"><span class="token keyword">return</span></span> s<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre>
<h2>Навіщо потрібен механізм винятків?</h2>Подивимося на приклад із реального світу. Уявіть, що автомобільна дорога має ділянку з аварійним мостом з обмеженою вантажопідйомністю. Якщо по ньому поїде автомобіль із масою, що перевищує вантажопідйомність моста, він може зруйнуватися, і ситуація для водія може стати, м'яко кажучи, винятковою. Щоб цього не сталося, дорожня служба завчасно встановлює попереджувальні знаки на дорозі. Водій автомобіля, дивлячись на попереджувальний знак, порівнюватиме масу свого автомобіля з дозволеною для проїзду мостом. Якщо вона перевищує її – він поїде об'їзною колією. Завдяки діям дорожньої служби водії вантажного транспорту, по-перше, отримали можливість заздалегідь змінювати свій шлях, по-друге, попереджені про небезпеку на головному шляху та, нарешті, 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="9943b02d-8a5c-4278-8472-09a4ed14eaed" data-max-width="710" alt="Винятки в Java - 2" src="https://cdn.javarush.com/images/article/9943b02d-8a5c-4278-8472-09a4ed14eaed/512.jpeg" style="width: 710px;">
 </div>
</div>Можливість попередження та вирішення виняткової ситуації в програмі для її продовження – одна з причин використання винятків Java. Механізм винятків також дозволяє захистити написаний вами код (програмний інтерфейс) від неправильного використання користувачем за рахунок валідації (перевірки) вхідних даних. Давайте тепер на секунду побудемо дорожньою службою. По-перше, ви повинні знати місця, де автомобілістів можуть чекати на неприємності. По-друге, вам потрібно заготовити та встановити попереджувальні знаки. І, нарешті, вам потрібно передбачити об'їзні маршрути у разі небезпеки на основному шляху. У Java механізм виключень працює схожим чином. На стадії розробки програми ми «захищаємо» небезпечні ділянки коду щодо виключень за допомогою блоку try{}, передбачаємо «запасні» шляхи за допомогою блоку catch{}, у блоці finally{} ми пишемо код, який виконується у програмі за будь-якого результату. У випадках, коли ми не можемо передбачити «запасний шлях» або навмисно хочемо надати право вибору користувача, ми повинні принаймні попередити його про небезпеку. Чому? А ви тільки уявите обурення водія, який доїде до аварійного мосту, яким не можна проїхати, не зустрівши по дорозі жодного попереджувального знака! У програмуванні при написанні своїх класів та методів ми не завжди можемо передбачати контекст їх використання іншими розробниками у своїх програмах, тому не можемо передбачати на 100% правильний шлях для вирішення виняткової ситуації. У той же час правило хорошого тону — попередити користувачів нашого коду про можливість виняткової ситуації. 
<div class="email-subscription">
 <iframe frameborder="0" src="https://secure.esputnik.com.ua/4Q0Ef6d2SOs" width="100%" height="200" scrolling="no" data-savepage-key="0-2"></iframe>
</div>
<h2>Попередження про «неприємності»</h2>Коли ви не плануєте обробляти виняток у своєму методі, але хочете попередити користувачів методу про можливі виняткові ситуації, використовуйте ключове слово throws. Це ключове слово в сигнатурі методу означає, що за певних умов метод може викинути виняток. Таке попередження є частиною інтерфейсу методу та надає право користувачеві на власний варіант реалізації обробника виключення. Після throws ми вказуємо тип виключення, що викидається. Зазвичай, це спадкоємці класу <span class="code">Exception</span> Java. Оскільки Java є об'єктно-орієнтованою мовою, всі винятки в Java є об'єктами. 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="8fc76f74-5d07-43a1-a16b-7a4b77b10879" data-max-width="799" alt="Винятки в Java - 3" src="https://cdn.javarush.com/images/article/8fc76f74-5d07-43a1-a16b-7a4b77b10879/512.jpeg" style="width: 799px;">
 </div>
</div>
<h2>Ієрархія виключень Java</h2>У разі помилки у процесі виконання програми виконуюча середовище JVM створює об'єкт потрібного типу з ієрархії винятків Java – безлічі можливих виняткових ситуацій, успадкованих від загального «предка» – класу Throwable. Виняткові ситуації, що виникають у програмі, можна поділити на дві групи: 
<ol>
 <li>Ситуації, за яких відновлення подальшої нормальної роботи програми неможливе</li>
 <li>Відновлення можливе.</li>
</ol>До першої групи відносять ситуації, коли з'являються винятки, успадковані з класу <span class="code">Error</span> . Це помилки, які виникають під час виконання програми внаслідок збою роботи JVM, переповнення пам'яті чи збою системи. Зазвичай вони свідчать про серйозні проблеми, усунути які програмними засобами неможливо. Такий вид винятків Java відноситься до неконтрольованих (unchecked) на стадії компіляції. До цієї групи також відносять RuntimeException - винятки, спадкоємці класу <span class="code">Exception</span>, що генеруються JVM під час виконання програми. Часто причиною їх є помилки програмування. Ці винятки також є неконтрольованими (unchecked) на стадії компіляції, тому написання коду з їхньої обробки не є обов'язковим. До другої групи відносять виняткові ситуації, що передбачаються ще на стадії написання програми, і для яких має бути написаний код обробки. Такі винятки є контрольованими (checked). Основна частина роботи розробника Java при роботі з винятками – обробка таких ситуацій. 
<h2>Створення винятку</h2>При виконанні програми виняток генерується JVM або вручну за допомогою оператора <span class="code">throw</span> . При цьому в пам'яті створюється об'єкт виключення та виконання основного коду програми переривається, а обробник винятків JVM намагається знайти спосіб обробити виняток. 
<h2>Обробка виключення</h2>Створення блоків коду, для яких ми передбачаємо обробку винятків Java, проводиться в програмі за допомогою конструкцій try{}catch, try{}catch{}finally, try{}finally{}. 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="2cb82932-4d46-4565-88a7-73d4d869329b" data-max-width="710" alt="Винятки в Java - 4" src="https://cdn.javarush.com/images/article/2cb82932-4d46-4565-88a7-73d4d869329b/512.jpeg" style="width: 710px;">
 </div>
</div>При збудженні виключення в блоці try обробник виключення шукається в наступному блоці catch. Якщо в catch є обробник цього виду виключення - управління переходить до нього. Якщо ні, то JVM шукає обробник цього типу виключення в ланцюжку викликів методів доти, доки не буде знайдено відповідний catch. Після виконання блоку catch керування передається в необов'язковий блок <span class="code">finally</span> . У випадку, якщо відповідний блок catch не знайдений, JVM зупиняє виконання програми і виводить стек викликів методів – <span class="code">stack trace</span> , виконавши перед цим код блоку finally за його наявності. Приклад обробки винятків: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Print</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

     <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">print</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> s<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>s <span class="token operator"><span class="token operator">==</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            <span class="token keyword"><span class="token keyword">throw</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">NullPointerException</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Exception: s is null!"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span>
        <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Inside method print: "</span></span> <span class="token operator"><span class="token operator">+</span></span> s<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">Print</span></span> print <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Print</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">List</span></span><string> list<span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Arrays</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">asList</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"first step"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"second step"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

        <span class="token keyword"><span class="token keyword">for</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> s<span class="token operator"><span class="token operator">:</span></span>list<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            <span class="token keyword"><span class="token keyword">try</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                print<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">print</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>s<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token punctuation"><span class="token punctuation">}</span></span>
            <span class="token keyword"><span class="token keyword">catch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">NullPointerException</span></span> e<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>e<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getMessage</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Exception was processed. Program continues"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token punctuation"><span class="token punctuation">}</span></span>
            <span class="token keyword"><span class="token keyword">finally</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Inside bloсk finally"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token punctuation"><span class="token punctuation">}</span></span>
            <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Go program...."</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"-----------------"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
</string></code></pre> Результати роботи методу <span class="code">main</span> : 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">Inside</span></span> method print<span class="token operator"><span class="token operator">:</span></span> first step
<span class="token class-name"><span class="token class-name">Inside</span></span> bloсk <span class="token keyword"><span class="token keyword">finally</span></span>
<span class="token class-name"><span class="token class-name">Go</span></span> program<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>
<span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">-</span></span>
<span class="token class-name"><span class="token class-name">Exception</span></span><span class="token operator"><span class="token operator">:</span></span> s is <span class="token keyword"><span class="token keyword">null</span></span><span class="token operator"><span class="token operator">!</span></span>
<span class="token class-name"><span class="token class-name">Exception</span></span> was <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">processed<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span> Program</span></span> continues
<span class="token class-name"><span class="token class-name">Inside</span></span> bloсk <span class="token keyword"><span class="token keyword">finally</span></span>
<span class="token class-name"><span class="token class-name">Go</span></span> program<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>
<span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">-</span></span>
<span class="token class-name"><span class="token class-name">Inside</span></span> method print<span class="token operator"><span class="token operator">:</span></span> second step
<span class="token class-name"><span class="token class-name">Inside</span></span> bloсk <span class="token keyword"><span class="token keyword">finally</span></span>
<span class="token class-name"><span class="token class-name">Go</span></span> program<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>
<span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">-</span></span></code></pre> Блок <code class=" language-none">finally</code>зазвичай використовується для того, щоб закрити відкриті в блоці try потоки або звільнити ресурси. Однак при написанні програми не завжди можна встежити за закриттям усіх ресурсів. Для полегшення нашого життя розробники Java запропонували нам конструкцію <code class=" language-none">try-with-resources</code>, яка автоматично закриває ресурси, які відкриті в блоці try. Наш перший приклад можна переписати так за допомогою <code class=" language-none">try-with-resources</code>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">String</span></span> <span class="token function"><span class="token function">input</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">throws</span></span> <span class="token class-name"><span class="token class-name">MyException</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token class-name"><span class="token class-name">String</span></span> s <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">try</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">BufferedReader</span></span> reader <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">BufferedReader</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">InputStreamReader</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>in<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
        s <span class="token operator"><span class="token operator">=</span></span> reader<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">readLine</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">catch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">IOException</span></span> e<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>e<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getMessage</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>s<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">equals</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">""</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">throw</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">MyException</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"String can not be empty!"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token keyword"><span class="token keyword">return</span></span> s<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Завдяки можливостям Java, починаючи з версії 7, ми також можемо поєднувати перехоплення різнотипних винятків в одному блоці, роблячи код компактнішим і читабельнішим. Наприклад: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">String</span></span> <span class="token function"><span class="token function">input</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token class-name"><span class="token class-name">String</span></span> s <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">try</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">BufferedReader</span></span> reader <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">BufferedReader</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">InputStreamReader</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>in<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        s <span class="token operator"><span class="token operator">=</span></span> reader<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">readLine</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>s<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">equals</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">""</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            <span class="token keyword"><span class="token keyword">throw</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">MyException</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"String can not be empty!"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">catch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">IOException</span></span> <span class="token operator"><span class="token operator">|</span></span> <span class="token class-name"><span class="token class-name">MyException</span></span> e<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>e<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getMessage</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token keyword"><span class="token keyword">return</span></span> s<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre>
<h4>Підсумки</h4>Використання винятків у Java дозволяє підвищити стійкість до відмови програми за рахунок використання «запасних» шляхів, відокремити логіку основного коду від коду обробки виняткових ситуацій за рахунок використання блоків catch, а також дає нам можливість перекласти обробку виключень на користувача нашого коду за допомогою throws. 
<div class="table-container">
 <table>
  <thead>
   <tr>
    <th>Що ще почитати:</th>
   </tr>
  </thead>
  <tbody>
   <tr>
    <td>
     <p><a href="https://codegym.cc/groups/posts/895-top-10-voprosov-ob-iskljuchenijakh-v-java" target="_blank">Топ 10 питань про виключення в Java</a></p></td>
   </tr>
  </tbody>
 </table>
</div>