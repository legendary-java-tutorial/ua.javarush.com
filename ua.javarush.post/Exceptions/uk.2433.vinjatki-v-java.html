Винятки в Java
<p>----------------------------------------</p>
Коли зіткнувся з темою "Виключення", то виникло багато питань, на які довелося шукати відповіді з різних закутків інтернету, щоб зрозуміти в деталях, як все це працює. В результаті, я склав власне пояснення, яке може виявитися більш зрозумі
<p>----------------------------------------</p>
Коли зіткнувся з темою "Виключення", то виникло багато питань, на які довелося шукати відповіді з різних закутків інтернету, щоб зрозуміти в деталях, як все це працює. В результаті, я склав власне пояснення, яке може виявитися більш зрозумілим для новачків, які тільки-но зіткнулися з цим явищем. <img data-max-width="850" alt="Винятки в Java - 1" src="https://cdn.javarush.com/images/article/94037437-ee15-41ff-a4c7-f275acbcf7aa/original.jpeg">У комп'ютерах <span class="text-bold">Переривання</span>- це вхідний сигнал для процесора, про те, що відбувається подія, яка вимагає негайної реакції. Сигнал переривання вимагає від процесора призупинити програму з такою умовою, щоб вона могла бути продовжена трохи пізніше, тобто комп'ютер повинен запам'ятати всю інформацію, пов'язану з виконанням програми. Такі переривання тимчасові, а то й носять фатальний характер. Такі переривання можуть бути викликані як програмним кодом, так і деякою функціональністю заліза (наприклад, просто натисканням клавіш на клавіатурі; таймери наприклад, для автоматичного відключення комп'ютера). Кількість <span class="text-bold">переривань</span>обмежено певним числом, закладеним при виробництві того чи іншого процесора, тобто під це виділяються спеціальні «канали» зв'язку, що дозволяють звернутися до процесора в обхід решти всіх процесів. <span class="text-bold">Переривання</span> так само автоматично генеруються при виникненні помилки у програмному коді, що виконується (наприклад, якщо зустрічається поділ на нуль). Такі переривання традиційно називаються <em>traps або exceptions</em> . У таких випадках прийнято говорити: "Exception was thrown", тобто спрацювало <span class="text-bold">Виняток</span> або <span class="text-bold">Виняток</span> було запущено (кинуто), тобто запит на <span class="text-bold">Переривання</span>із запитанням «що робити?» посланий процесору. У цей момент процесор зупиняє роботу, запам'ятовуючи точку, в якій він зупинився, точніше кластер наступного осередку, інформація з якої має бути виконана. Запам'ятовується весь ланцюжок виконаних інструкцій та НЕ виконаних. Після чого процесор зчитує з пам'яті інструкції для дій при подібній помилці. Відповідно до цієї інструкції, він може занести нові значення до певних кластерів, додати деякі ланцюжки дій або новий цикл (наприклад, цикл повернення або кільцювання) і т.д., тобто в залежності від помилки виконуються раніше закладені інструкції. У систему комп'ютера саме по собі вбудовано багато автоматичних переривань, які запускаються через певну кількість часу, наприклад, контролю запущених на комп'ютері процесів чи виконання закладених будильників, збору вхідних зовнішніх сигналів, різних конвертерів даних. Варто пам'ятати, що велика кількість переривань з ряду причин може остаточно «повісити» систему. Помилка в програмному коді викликає в автоматичному режимі Переривання в процесорі, яке спробує обробити відповідно до закладених інструкцій. Але не для всіх переривань закладено їх обробку або вона може видавати процедуру, яка нас не влаштовує, наприклад, просто згорне додаток. Тому в програмуванні існує можливість організувати власне переривання для певної ділянки коду, в якому програміст потенційно бачить можливість помилки. У цьому випадку помилка обробиться всередині програми і не звертатиметься за інструкціями з обробки до процесора. Завдання таких блоків організується створенням об'єкта<span class="text-bold">"Виняток" (Exception)</span> . Цей об'єкт автоматично створюється у блоці <code class=" language-none">try-catch</code>. У блоці <code class=" language-none">&gt;try</code>проводиться перевірка на наявність помилки і, якщо вона є, програма слідує в блок <code class=" language-none">catch</code>, де виконуються дії, що попереджають або нівелюють помилку. Наприклад, якщо ми вводимо з клавіатури <span class="text-bold">Числа</span> , які повинні складатися і відніматися, то введення з клавіатури <span class="text-bold">Букв</span> призведе до неможливості їх складання з <span class="text-bold">Числами</span> (позначимо суму цих двох змінних буквою S). Тому в команді<code class=" language-none">try</code>ми повинні перевірити чи здатне число А, що містить Цифри, бути складено з числом Б, що містить Букви (тобто S = А + Б ), і якщо це неможливо, а це неможливо, то повинні бути вжиті певні заходи, щоб Помилки НЕ сталося до процесора не полетіло нове переривання з питанням «що робити?». У разі відсутності у програмі Винятки, її виконання перерветься процесором. За наявності Винятки, коли його «піймано» командою <code class=" language-none">try</code>, управління переходить команді <code class=" language-none">catch</code>, яка може задати альтернативний варіант рішення, наприклад, не будемо складати ці два числа, а задамо S = А. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">int</span></span> a <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">4</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">String</span></span> b <span class="token operator"><span class="token operator">=</span></span> “hello”<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">int</span></span> <span class="token class-name"><span class="token class-name">S</span></span> <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
 <span class="token keyword"><span class="token keyword">try</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token class-name"><span class="token class-name">S</span></span> <span class="token operator"><span class="token operator">=</span></span> a <span class="token operator"><span class="token operator">+</span></span> b<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">int</span></span> r <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
 <span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">catch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Exception</span></span> igogo1<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token class-name"><span class="token class-name">S</span></span> <span class="token operator"><span class="token operator">=</span></span> a<span class="token punctuation"><span class="token punctuation">;</span></span>
 <span class="token punctuation"><span class="token punctuation">}</span></span>
 <span class="token keyword"><span class="token keyword">return</span></span> <span class="token class-name"><span class="token class-name">S</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> /* рядок "int r = 1;" не виконується, оскільки сталася помилка і програма перенаправляє роботу відразу до оброблювача виключення блок catch*/ Таким чином, наявність <span class="text-bold">Винятків</span> – це можливість вирішити проблему всередині програми, не закидаючи її на рівень процесора. Об'єкт «Виключення», який автоматично створюється в блоці <code class=" language-none">try</code>при виявленні помилки, заноситься значення типу помилки. Назвемо його «НашеВиключення» – для нашого конкретного випадку з описом нашої конкретної помилки. Творці мови Java, заздалегідь створабо певний список типових помилок та типові варіанти їх виправлення, тобто у java існує деяка <span class="text-bold">бібліотека Винятків</span>, До якої ми можемо звернутися для обробки помилки, щоб самим не писати код обробки і тому НашеВиключення швидше за все вже кимось було описано, тому нам треба просто знати назву якого з цих винятків вставити в нашу програму для обробки коду, де потенційно може трапиться збій. Якщо ми помабомося і виберемо з бібліотеки неправильне<span class="text-bold"> Виняток</span> , то обробник його не «зловить», помилка не знайде рішення всередині програми та полетить запит до процесора. Але існує шлях для лінивих. Якщо ми не знаємо назву потрібного нам виключення з бібліотеки, то можемо взяти спільну назву « <span class="text-bold">Exception</span> », як у вищеописаному прикладі. Це <span class="text-bold">Виняток</span>здатне обробити будь-який тип помилки, тільки здатне видати конкретну інформацію про подію, яку ми могли б занести в логи. Бібліотека раніше написаних <span class="text-bold">Винятків</span> складається з перевірених (checked) та <span class="text-bold">неперевірених</span> (unchecked) <span class="text-bold">Винятків</span> . <span class="text-bold">Перевірені</span> – це ті, які можна виправити, не обриваючи роботу програми, тобто, якщо ми намагаємося відкрити файл у папці, в якій його немає, система дасть нам про це знати, ми можемо закинути файл у потрібну папку і продовжити роботу програми. Тобто за фактом до процесора надіслано запит на <span class="text-bold">переривання</span>, але без питання: «Шукай, що робити з цією проблемою?!?!». Ми надіслали Переривання, яке самі виявабо, з готовою інструкцією, яку процесор обробив і продовжив виконання програми. <span class="text-bold">Неперевірені</span> – це помилки, які не можна виправити і програма буде закрита до свого завершення, тобто до процесора полетить запит на <span class="text-bold">Переривання</span>, яке у будь-якому випадку обірве виконання програми. Єдиний сенс прописувати такі винятки у програмі – це дати користувачеві зрозуміти, що сталося, оскільки, зловивши це переривання, ми можемо вивести інформаційне повідомлення на екран, через що програма згорнулася. Другою причиною ловити такі переривання є можливість занести їх у логи для подальшого аналізу (вас хакнули, зате ви знаєте через яке місце). Наслідком наявності таких бібліотек є необхідність не забути їх підключити. (Список перевірених та неперевірених Винятків з бібліотеками можна подивитися, наприклад, <a href="https://www.codejava.net/java-core/exception/java-checked-and-unchecked-exceptions" target="_blank" rel="nofollow">тут</a> ) Якщо ми не знаємо точно яку бібліотеку включити або існує кілька варіантів помилки, то можемо в кількох<code class=" language-none">catch</code>перерахувати потрібні Винятки. Система сама вибере правильний обробник, якщо він є у списку. Замість конкретного <span class="text-bold">Виняток</span> можна написати загальне « <span class="text-bold">Exception</span> », яке може обробити будь-який тип <span class="text-bold">Виняток</span> , якщо воно не обробилося у попередніх блоках. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">int</span></span> a <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">4</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">String</span></span> b <span class="token operator"><span class="token operator">=</span></span> “hello”<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">int</span></span> <span class="token class-name"><span class="token class-name">S</span></span> <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
 <span class="token keyword"><span class="token keyword">try</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token class-name"><span class="token class-name">S</span></span> <span class="token operator"><span class="token operator">=</span></span> a <span class="token operator"><span class="token operator">+</span></span> b<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">int</span></span> r <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
 <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token keyword"><span class="token keyword">catch</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">NullPointerException</span></span> blabla2<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Exception handling code for the NullPointerException."</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
 <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token keyword"><span class="token keyword">catch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">ArithmeticException</span></span> ex1<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token class-name"><span class="token class-name">S</span></span> <span class="token operator"><span class="token operator">=</span></span> a<span class="token punctuation"><span class="token punctuation">;</span></span>
 <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token keyword"><span class="token keyword">catch</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Exception</span></span> uups1<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Exception occured"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
 <span class="token punctuation"><span class="token punctuation">}</span></span>
 <span class="token keyword"><span class="token keyword">return</span></span> <span class="token class-name"><span class="token class-name">S</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> У разі наявності блоку <code class=" language-none">try</code>Виняток створюється автоматично. Якщо нам треба примусово в якийсь момент викликати <span class="text-bold">Виняток</span> , то використовується команда <code class=" language-none">throw</code>. Тобто ми самостійно створюємо об'єкт <code class=" language-none">new throw</code>… після чого програма зупиняє свою роботу, посилає процесору запит на <span class="text-bold">Переривання</span> і переноситься до розділу програми <code class=" language-none">catch</code>, звідки намагається почерпнути інструкції з подальших дій. Створюючи вручну <span class="text-bold">Виняток</span> , ми можемо вказати його конкретний тип бібліотеки: 
<pre class=" language-none" tabindex="0"><code class=" language-none">
throw new ArithmeticException("Access denied - You must be at least 18 years old.");</code></pre> тоді обробник шукатиме блок <code class=" language-none">catch</code>, з саме цим <span class="text-bold">Винятком</span> – шукати по всій програмі, з усіх боків <code class=" language-none">catch</code>. Після команди <code class=" language-none">throw</code>обробки Винятки, весь код програми НЕ буде виконаний, за винятком того, який знаходиться в блоці <code class=" language-none">catch</code>. Якщо обробник у програмі не знайдено, процесору запитує: «вирішуй сам, що робити» і той перериває програму. Виклик <code class=" language-none">new throw</code>… може здійснюватися як у блоці <code class=" language-none">&gt;try</code>, так і поза ним (у будь-якому місці програми) 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">try</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token comment"><span class="token comment">/* функция або действие, в котором есть сомнения. То есть: «попробуй выполнить это, а если не получится, а, если не получится, запускай режим исключения» */</span></span>
   <span class="token keyword"><span class="token keyword">throw</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">CallForException</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">/* Назначаем исключение, которое будет работать в случае наличия ошибки в функции, описанной выше. Здесь исключение «CallForException» - берется из библиотеки существующих исключений */</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">catch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">CallForException</span></span> ee1<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token comment"><span class="token comment">/* Корректируем ошибку, чтобы программа не «отвалилась» або выводим сообщение об ошибке або что-то ещё */</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">finally</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token comment"><span class="token comment">/* этот блок работает всегда независимо от того была ошибка або нет. А если была, то сработало ли решение в catch або нет */</span></span>
   <span class="token comment"><span class="token comment">/* часто используется для подчистки хвостов, например, для закрытия запущенного файлу або базы данных */</span></span>
   <span class="token comment"><span class="token comment">/* в ряде случаев блок catch вообще может быть опущен и оставлен только блок finally и наоборот finally может быть опущен и оставлен только catch */</span></span>
   <span class="token comment"><span class="token comment">/* Не допускается использование этого блока в ряде случаев, например, когда функция System.exit() запущена або другие системные Исключения, типа «отключение электроэнергии» и т.п. */</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre>
<h2>Оповіщення про наявність Винятки</h2>Раніше написані кимось методи можуть включати виклик Винятків. Просто про всяк випадок програміст, який писав код, попередив наступних програмістів, що у написаному їм методі може статися помилка. Так, наприклад, метод створення файлу, описаний нижче, передбачає, що при створенні файлу може статися помилка (немає файлу по заданому шляху), а отже, потрібен буде її обробник: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">createFile</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> path<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> text<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">throws</span></span> <span class="token class-name"><span class="token class-name">IOException</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token class-name"><span class="token class-name">FileWriter</span></span> writer <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">FileWriter</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>path<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token boolean"><span class="token boolean">true</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    writer<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">write</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>text<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    writer<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">close</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Але при цьому самого оброблювача немає, а отже тепер просто викликати написаний метод у своїй програмі у звичайному режимі ми не зможемо. Тепер ми зобов'язані написати обробник помилки і викликати цей метод у блоці <code class=" language-none">try</code>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">String</span></span> filePath <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"hello.txt"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">String</span></span> text <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Hello World"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">try</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token function"><span class="token function">createFile</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>filePath<span class="token punctuation"><span class="token punctuation">,</span></span> text<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">catch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">IOException</span></span> ex<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>err<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Error creating file: "</span></span> <span class="token operator"><span class="token operator">+</span></span> ex<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre>
<h2>Власні винятки</h2>Існує можливість написати власні винятки для обробки тих чи інших помилок, якщо нам недостатньо вже існуючих бібліотек. Для цього ми просто створюємо клас-спадкоємець від класу Винятки 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">StudentNotFoundException</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Exception</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">StudentNotFoundException</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> message<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">super</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>message<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> При створенні власних винятків слід враховувати два правила: 
<ol>
 <li>Назва нашого класу має закінчуватись на «Exception»</li>
 <li>Клас повинен містити конструктор з рядковою змінною, що описує деталі проблеми Винятки. У конструкторі викликається супер-конструктор із передачею повідомлення.</li>
</ol>Приклад використання створеного виключення: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">StudentManager</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Student</span></span> <span class="token function"><span class="token function">find</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> studentID<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">throws</span></span> <span class="token class-name"><span class="token class-name">StudentNotFoundException</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>studentID<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">equals</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"123456"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            <span class="token keyword"><span class="token keyword">return</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Student</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">else</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            <span class="token keyword"><span class="token keyword">throw</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">StudentNotFoundException</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>
                <span class="token string"><span class="token string">"Could not find student with ID "</span></span> <span class="token operator"><span class="token operator">+</span></span> studentID<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Відловлюємо це Виняток кодом: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">StudentTest</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">StudentManager</span></span> manager <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">StudentManager</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
         <span class="token keyword"><span class="token keyword">try</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            <span class="token class-name"><span class="token class-name">Student</span></span> student <span class="token operator"><span class="token operator">=</span></span> manager<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">find</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"0000001"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">catch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">StudentNotFoundException</span></span> ex<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>err<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">print</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>ex<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Результатом виконання програми буде: <em>StudentNotFoundException: Could not find student with ID 0000001</em> <a href="https://codegym.cc/welcome" target="_blank"><img id="click_banner1_articles" data-max-width="1024" data-id="80a83713-bc60-4b05-806c-5c8a374f9988" class="img-fluid" alt="Винятки в Java - 2" src="https://cdn.javarush.com/images/article/80a83713-bc60-4b05-806c-5c8a374f9988/1024.jpeg" style="width: 1024px;"></a>
<h2>Навіщо потрібно писати Винятки</h2>У 1996 році розбилася ракета <a href="https://en.wikipedia.org/wiki/Cluster_(spacecraft)#Launch_failure" target="_blank" rel="nofollow">Ariane 5</a> через неправильну конвертацію змінної float в змінну integer. Винятків та обробників цієї ситуації передбачено не було. Якщо при завантаженні файлу стався обрив зв'язку з інтернетом, то Виняток дозволить продовжити завантаження, після того як з'єднання відновиться. За відсутності Винятки завантаження доведеться починати заново. 
<h2>Використана література:</h2>
<ul>
 <li><a href="https://en.wikipedia.org/wiki/Interrupt" target="_blank" rel="nofollow">Interrupt in hardware</a></li>
 <li><a href="https://en.wikipedia.org/wiki/Exception_handling" target="_blank" rel="nofollow">Винятки у Вікі</a></li>
 <li><a href="https://en.wikipedia.org/wiki/Exception_handling_syntax#Java" target="_blank" rel="nofollow">Винятки у Вікі для Java</a></li>
 <li><a href="https://en.wikibooks.org/wiki/Java_Programming/Throwing_and_Catching_Exceptions" target="_blank" rel="nofollow">Виняток у Вікі (кинути-зловити)</a></li>
 <li><a href="https://en.wikipedia.org/wiki/Type_signature#Java" target="_blank" rel="nofollow">Тип "підпису"</a></li>
 <li><a href="https://www.codejava.net/java-core/exception/java-checked-and-unchecked-exceptions" target="_blank" rel="nofollow">Перевірені-неперевірювані винятки</a></li>
 <li><a href="https://urvanov.ru/2016/05/02/java-8-%D0%B8%D1%81%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D1%8F" target="_blank" rel="nofollow">urvanov.ru</a></li>
 <li><a href="https://beginnersbook.com/2013/04/try-catch-in-java/" target="_blank" rel="nofollow">Винятки для початківців на WikiBook</a></li>
 <li><a href="https://www.w3schools.com/java/java_try_catch.asp" target="_blank" rel="nofollow">блок try-catch</a></li>
 <li><a href="https://www.codejava.net/java-core/exception/how-to-create-custom-exceptions-in-java" target="_blank" rel="nofollow">Створення власних винятків</a></li>
</ul>