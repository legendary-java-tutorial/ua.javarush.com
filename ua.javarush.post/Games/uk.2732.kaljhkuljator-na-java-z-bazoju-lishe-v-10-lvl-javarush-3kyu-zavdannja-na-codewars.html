Калькулятор на Java з базою лише в 10 лвл JavaRush (3Kyu завдання на CodeWars)
<p>----------------------------------------</p>
Ще одна стаття про мої пригоди на CodeWars. На цей реалізуємо функціонал елементарного калькулятора: . У мене за плечима лише 10+ рівнів JavaRush, тому код досить громіздкий, але функціонує чудово. Завдання, як ви могли помітити, з сайту . 
<p>----------------------------------------</p>
Ще одна стаття про мої пригоди на CodeWars. На цей реалізуємо функціонал елементарного калькулятора: <em>Create a simple calculator that given a string of operators (), +, -, *, /</em> . <img data-max-width="800" data-id="b58999d9-9a34-41b6-9d84-ce0abe028214" class="img-fluid" alt="Калькулятор на Java з базою лише в 10 лвл CodeGym (3Kyu завдання на CodeWars) - 1" src="https://cdn.javarush.com/images/article/b58999d9-9a34-41b6-9d84-ce0abe028214/800.jpeg" style="width: 800px;">У мене за плечима лише 10+ рівнів CodeGym, тому код досить громіздкий, але функціонує чудово. Завдання, як ви могли помітити, з сайту <span class="text-bold">CodeWars</span> . Її ранг - <span class="text-bold">3kyu</span> . посилання можу дати в особі. <span class="text-bold">Ось частковий список методів та процесів, які мені допомогли:</span>
<ol>
 <li>Рекурсія Процес, при якому метод викликає сам себе (вперше його застосував:)), в даному випадку необхідна, щоб позбавитися дужок.</li>
 <li>Методи <code class=" language-none">String</code>'a <code class=" language-none">trim()</code>, <code class=" language-none">split()</code>, <code class=" language-none">substring()</code>, <code class=" language-none">replace()</code>.</li>
 <li>Базові методи колекції <code class=" language-none">List</code>.</li>
 <li>А також перетворення типів <code class=" language-none">Double</code>і <code class=" language-none">String</code>назад.</li>
</ol>У принципі цього вистачає. Перш ніж перейти до самого коду, розповім на які підводні камені я натрапив. Здебільшого це порядок виконання обчислень, спочатку я зробив стандартну схему <code class=" language-none">* &gt; / &gt; + &gt; -</code>, проте зрозумів, що наприклад при ось такому варіанті: <code class=" language-none">12/6 * 32/2</code>, програма спочатку виконає множення ( <code class=" language-none">6*32</code>) і все піде під укіс, так що черговість стала такою: <code class=" language-none">* &gt; / &gt; + &gt; -</code>. Ще через пару годин наткнувся на найбільший камінчик <code class=" language-none">-</code>. У різних позиціях і за різних комбінаціях він <span class="text-bold">змінював ВСІ</span> . (Тут звичайно є і моя вина, тому що, наприклад: <code class=" language-none">-34</code>, лежить у мене не в одному осередку списку, а в двох: в одному, <code class=" language-none">-</code> в іншому, <code class=" language-none">34</code>). Через це довелося прописувати 2 додаткові логіки у обчислення з<code class=" language-none">-</code>, взагалі побачите це в коді. Перепрошую за зайві коментарі в коді, я хотів максимально розкрити хід своїх думок і пояснити, що там взагалі відбувається. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token operator"><span class="token operator">*</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Calculator</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">String</span></span> num <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"2 / ( ( 2 + 0 ) * 1 ) - 6"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token function"><span class="token function">evaluate</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>num<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token class-name"><span class="token class-name">Double</span></span> <span class="token function"><span class="token function">evaluate</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> expression<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

<span class="token comment"><span class="token comment">//  Этап 1</span></span>
<span class="token comment"><span class="token comment">//  На данном этапе преобразуем нашу строку в список строк, через совмещение цикла for-each и метода split(),</span></span>
<span class="token comment"><span class="token comment">//  также используем метод trim(), чтобы избавиться от пробелов по краям.</span></span>
<span class="token comment"><span class="token comment">//  Обратите внимание, что каждым вторым элиментом я добавляю " ". Для того, чтобы потом мне было легче работать со строкой</span></span>

        <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>string<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> strList <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ArrayList</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">for</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> listElement <span class="token operator"><span class="token operator">:</span></span> expression<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">trim</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">split</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">" "</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            strList<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>listElement<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            strList<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">" "</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span>
        strList<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">remove</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>strList<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">size</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">-</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token comment"><span class="token comment">//        for (String x : strList) System.out.print(x + "");</span></span>
<span class="token comment"><span class="token comment">//        System.out.println();</span></span>
<span class="token comment"><span class="token comment">//        После того, як дочитаете код до конца, расскоментируйте две верхние строчки</span></span>
<span class="token comment"><span class="token comment">//        и посмотрите як работает рекрусия</span></span>

<span class="token comment"><span class="token comment">//  Этап 2</span></span>
<span class="token comment"><span class="token comment">//  Производим поиск символа "(" в списке если находим, то преобразуем все символы от '(' до последнего ')' в строку.</span></span>
<span class="token comment"><span class="token comment">//  Надо быть внимательными и проверить на случай двух контрукций: 1) (())  2) ()().</span></span>
<span class="token comment"><span class="token comment">//  P.S. После получения строки мы используем РЕКУРСИЮ (метод вызывает сам себя). Таким образом будем находить произведение скобок.</span></span>

        <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>strList<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">indexOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"("</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">!=</span></span> <span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
<span class="token comment"><span class="token comment">//          Если "(" обнаружен, ищем подходящую конструкцию используя цикл.</span></span>

            <span class="token keyword"><span class="token keyword">for</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span> i <span class="token operator"><span class="token operator">=</span></span> strList<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">indexOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"("</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">+</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> i <span class="token operator"><span class="token operator">&lt;</span></span> strList<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">size</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">-</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> i<span class="token operator"><span class="token operator">++</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
<span class="token comment"><span class="token comment">//</span></span>
<span class="token comment"><span class="token comment">//              Конструкция 1: первым элиментом, который мы отыскали были вторые "("</span></span>
                <span class="token class-name"><span class="token class-name">String</span></span> recursion <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">""</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>strList<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>i<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">equals</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"("</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                    <span class="token keyword"><span class="token keyword">for</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span> j <span class="token operator"><span class="token operator">=</span></span> i<span class="token punctuation"><span class="token punctuation">;</span></span> j <span class="token operator"><span class="token operator">&lt;</span></span> strList<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">lastIndexOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">")"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> j<span class="token operator"><span class="token operator">++</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                        recursion <span class="token operator"><span class="token operator">+=</span></span> strList<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>j<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                    <span class="token punctuation"><span class="token punctuation">}</span></span>
                    <span class="token comment"><span class="token comment">// сверху считывали последовательность находящуюся в скобках (()) До lastIndex елемента</span></span>
                    <span class="token class-name"><span class="token class-name">String</span></span> test <span class="token operator"><span class="token operator">=</span></span> expression<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">substring</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>expression<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">indexOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"("</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> expression<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">lastIndexOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">")"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">+</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                    <span class="token comment"><span class="token comment">// test - последовательность як и сверху, но с добавлением скобок по краям</span></span>

                    <span class="token comment"><span class="token comment">// т.к. наш метод evaluate() возвращает Double, мы должны преобразовать результат рекрусии в String;</span></span>
                    <span class="token class-name"><span class="token class-name">String</span></span> testRecursion <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">valueOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token function"><span class="token function">evaluate</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>recursion<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                    expression <span class="token operator"><span class="token operator">=</span></span> expression<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">replace</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>test<span class="token punctuation"><span class="token punctuation">,</span></span> testRecursion<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                    <span class="token comment"><span class="token comment">// преобразовали нашу строку с использование рекруси. Избавабось от первых скобок</span></span>
                    strList<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">removeAll</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>strList<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                    <span class="token keyword"><span class="token keyword">for</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> newElement <span class="token operator"><span class="token operator">:</span></span> expression<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">trim</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">split</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">" "</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                        strList<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>newElement<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                        strList<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">" "</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                    <span class="token punctuation"><span class="token punctuation">}</span></span>
                    <span class="token comment"><span class="token comment">// Тут очищаем наш список и сново его заполняем (но уже раскрыв первые скобки)</span></span>
                <span class="token punctuation"><span class="token punctuation">}</span></span>

<span class="token comment"><span class="token comment">//                Конструкция 2: первым элиментом, который мы отыскали был  ")"</span></span>
                <span class="token class-name"><span class="token class-name">String</span></span> recursion2 <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">""</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>strList<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>i<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">equals</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">")"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

                    <span class="token keyword"><span class="token keyword">for</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span> j <span class="token operator"><span class="token operator">=</span></span> strList<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">indexOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"("</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">+</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> j <span class="token operator"><span class="token operator">&lt;</span></span> strList<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">indexOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">")"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> j<span class="token operator"><span class="token operator">++</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                        recursion2 <span class="token operator"><span class="token operator">+=</span></span> strList<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>j<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                    <span class="token punctuation"><span class="token punctuation">}</span></span>
                    <span class="token class-name"><span class="token class-name">String</span></span> test2 <span class="token operator"><span class="token operator">=</span></span> expression<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">substring</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>expression<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">indexOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"("</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> expression<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">lastIndexOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">")"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">+</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                    <span class="token class-name"><span class="token class-name">String</span></span> testRecursion2 <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">valueOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token function"><span class="token function">evaluate</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>recursion2<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                    expression <span class="token operator"><span class="token operator">=</span></span> expression<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">replace</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>test2<span class="token punctuation"><span class="token punctuation">,</span></span> testRecursion2<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                    <span class="token keyword"><span class="token keyword">for</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> newElement <span class="token operator"><span class="token operator">:</span></span> expression<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">trim</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">split</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">" "</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                        strList<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>newElement<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                        strList<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">" "</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                    <span class="token punctuation"><span class="token punctuation">}</span></span>
                    <span class="token comment"><span class="token comment">// Тут повторабо тот же алгоритм, что и в первой конструкции</span></span>
                <span class="token punctuation"><span class="token punctuation">}</span></span>
            <span class="token punctuation"><span class="token punctuation">}</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span>

<span class="token comment"><span class="token comment">//  Этап 3</span></span>
<span class="token comment"><span class="token comment">//  Заключительный этап на котором мы будем реализовывать сами вычесления (*/-+)</span></span>
<span class="token comment"><span class="token comment">//  Всю реализацию помещаем в цикл while ( который прекратиться, если все действия будут выполнены (соответственно в списке останется 1 элемент)).</span></span>
<span class="token comment"><span class="token comment">//  Внимательно посмотрите на порядок операций: 1)/ 2)* 3)- 4)+</span></span>

<span class="token comment"><span class="token comment">//        System.out.println(expression + "-------expression-");</span></span>
<span class="token comment"><span class="token comment">//        System.out.println();</span></span>
        <span class="token comment"><span class="token comment">// создаем очередной список для реализации вычеслений, на этот раз без добавления " ".</span></span>
        <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>string<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> stringList2 <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ArrayList</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">for</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> element <span class="token operator"><span class="token operator">:</span></span> expression<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">trim</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">split</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">" "</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>element<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span>


        <span class="token keyword"><span class="token keyword">while</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">size</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">!=</span></span> <span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
<span class="token comment"><span class="token comment">//          работаем со списком: глубоком этапе рекрусии обрабатываем:  (2+0)</span></span>
<span class="token comment"><span class="token comment">//          на среднем: 1 * 1  "або вот этой части уравнения "( ( 2 + 0 ) * 1 ) "</span></span>
<span class="token comment"><span class="token comment">//          Посмтортите сами</span></span>
<span class="token comment"><span class="token comment">//            for (String x : stringList2) System.out.print(x );</span></span>
<span class="token comment"><span class="token comment">//            System.out.println();</span></span>

            <span class="token comment"><span class="token comment">// наш Double :) Также стоит обратить внимание, что для получения класса обертки мы используем не</span></span>
            <span class="token comment"><span class="token comment">// Double.parseDouble() а Double.valueOf()</span></span>
             <span class="token class-name"><span class="token class-name">Double</span></span> result <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">0d</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">//  Сами алгоритмы вычеслений, впринципе понятны, поэтому не буду их комментировать.</span></span>
<span class="token comment"><span class="token comment">//  Однако обратите внимание на очередность, особенно при вычетании (там замість 1 условия, 3)</span></span>
<span class="token comment"><span class="token comment">//  Если что в комментариях под постом немного объясню, если кто-нибудь дочитает до сюда и у него будет желание)</span></span>
            <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">indexOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"/"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">!=</span></span> <span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                <span class="token keyword"><span class="token keyword">int</span></span> index <span class="token operator"><span class="token operator">=</span></span> stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">indexOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"/"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                result <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Double</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">valueOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>index <span class="token operator"><span class="token operator">-</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">/</span></span> <span class="token class-name"><span class="token class-name">Double</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">valueOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>index <span class="token operator"><span class="token operator">+</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>index <span class="token operator"><span class="token operator">-</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">valueOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>result<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">remove</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>index <span class="token operator"><span class="token operator">+</span></span> <span class="token number"><span class="token number">2</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">remove</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>index <span class="token operator"><span class="token operator">+</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">remove</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>index<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token punctuation"><span class="token punctuation">}</span></span>
            <span class="token keyword"><span class="token keyword">else</span></span> <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">indexOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"*"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">!=</span></span> <span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                <span class="token keyword"><span class="token keyword">int</span></span> index <span class="token operator"><span class="token operator">=</span></span> stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">indexOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"*"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                result <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Double</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">valueOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>index <span class="token operator"><span class="token operator">-</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">*</span></span> <span class="token class-name"><span class="token class-name">Double</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">valueOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>index <span class="token operator"><span class="token operator">+</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>index <span class="token operator"><span class="token operator">-</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">valueOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>result<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">remove</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>index <span class="token operator"><span class="token operator">+</span></span> <span class="token number"><span class="token number">2</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">remove</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>index <span class="token operator"><span class="token operator">+</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">remove</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>index<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token punctuation"><span class="token punctuation">}</span></span>
            <span class="token keyword"><span class="token keyword">else</span></span> <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">indexOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"-"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">!=</span></span> <span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                <span class="token keyword"><span class="token keyword">int</span></span> index <span class="token operator"><span class="token operator">=</span></span> stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">indexOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"-"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">int</span></span> lastIndex <span class="token operator"><span class="token operator">=</span></span> stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">lastIndexOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"-"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>index <span class="token operator"><span class="token operator">==</span></span> <span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                    result <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">0.0</span></span> <span class="token operator"><span class="token operator">-</span></span> <span class="token class-name"><span class="token class-name">Double</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">valueOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>index <span class="token operator"><span class="token operator">+</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                    stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">valueOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>result<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                    stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">remove</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">2</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                    stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">remove</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token punctuation"><span class="token punctuation">}</span></span>
                <span class="token keyword"><span class="token keyword">else</span></span> <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>lastIndex<span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">2</span></span><span class="token operator"><span class="token operator">&gt;</span></span><span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">&amp;&amp;</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>lastIndex<span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">2</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">equals</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"-"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
                    result <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Double</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">valueOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>lastIndex <span class="token operator"><span class="token operator">+</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">+</span></span> <span class="token class-name"><span class="token class-name">Double</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">valueOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>lastIndex <span class="token operator"><span class="token operator">-</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                    stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>lastIndex <span class="token operator"><span class="token operator">-</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">valueOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>result<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                    stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">remove</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>lastIndex <span class="token operator"><span class="token operator">+</span></span> <span class="token number"><span class="token number">2</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                    stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">remove</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>lastIndex <span class="token operator"><span class="token operator">+</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                    stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">remove</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>lastIndex<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token punctuation"><span class="token punctuation">}</span></span>
                <span class="token keyword"><span class="token keyword">else</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                    result <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Double</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">valueOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>index <span class="token operator"><span class="token operator">-</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">-</span></span> <span class="token class-name"><span class="token class-name">Double</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">valueOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>index <span class="token operator"><span class="token operator">+</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                    stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>index <span class="token operator"><span class="token operator">-</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">valueOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>result<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                    stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">remove</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>index <span class="token operator"><span class="token operator">+</span></span> <span class="token number"><span class="token number">2</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                    stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">remove</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>index <span class="token operator"><span class="token operator">+</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                    stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">remove</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>index<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token punctuation"><span class="token punctuation">}</span></span>
            <span class="token punctuation"><span class="token punctuation">}</span></span>
            <span class="token keyword"><span class="token keyword">else</span></span> <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">indexOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"+"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">!=</span></span> <span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                <span class="token keyword"><span class="token keyword">int</span></span> index <span class="token operator"><span class="token operator">=</span></span> stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">indexOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"+"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                result <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Double</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">valueOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>index <span class="token operator"><span class="token operator">-</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">+</span></span> <span class="token class-name"><span class="token class-name">Double</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">valueOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>index <span class="token operator"><span class="token operator">+</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>index <span class="token operator"><span class="token operator">-</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">valueOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>result<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">remove</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>index <span class="token operator"><span class="token operator">+</span></span> <span class="token number"><span class="token number">2</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">remove</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>index <span class="token operator"><span class="token operator">+</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">remove</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>index<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token punctuation"><span class="token punctuation">}</span></span>

            <span class="token comment"><span class="token comment">// Вот тут все немного коряво. (На всякий случий проверял отсутствие (*/+-))</span></span>
            <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">indexOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"*"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">==</span></span> <span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">&amp;&amp;</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">indexOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"/"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">==</span></span> <span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">&amp;&amp;</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">indexOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"+"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">==</span></span> <span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">&amp;&amp;</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">indexOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"-"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">==</span></span> <span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                <span class="token keyword"><span class="token keyword">return</span></span> result<span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token punctuation"><span class="token punctuation">}</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> <span class="token class-name"><span class="token class-name">Double</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">valueOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>stringList2<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>string<span class="token operator"><span class="token operator">&gt;</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>string<span class="token operator"><span class="token operator">&gt;</span></span></code></pre> Дякуємо всім хто прочитав і залишив коментар) <a href="https://codegym.cc/welcome" target="_blank"><img id="click_banner1_articles" data-max-width="1024" data-id="00d3b397-1509-41d4-9a34-cbc7de3388b6" class="img-fluid" alt="Калькулятор на Java з базою лише в 10 лвл CodeGym (3Kyu завдання на CodeWars) - 2" src="https://cdn.javarush.com/images/article/00d3b397-1509-41d4-9a34-cbc7de3388b6/1024.jpeg" style="width: 1024px;"></a>Якщо є зауваження, а швидше за все вони є, буду радий почути їх) 
<div class="table-container">
 <table>
  <tbody>
   <tr>
    <th>Мої попередні статті:</th>
   </tr>
   <tr>
    <td>
     <ul>
      <li><a href="https://codegym.cc/groups/posts/2724-pokorenie-codewars-reshaem-zadachu-4kyu" target="_blank" rel="nofollow">Підкорення CodeWars (Вирішуємо задачу 4kyu)</a></li>
      <li><a href="https://codegym.cc/groups/posts/2705-sozdanie-magicheskogo-kvadrata-v-java" target="_blank" rel="nofollow">Створення "Магічного квадрата" у Java</a></li>
     </ul></td>
   </tr>
  </tbody>
 </table>
</div>