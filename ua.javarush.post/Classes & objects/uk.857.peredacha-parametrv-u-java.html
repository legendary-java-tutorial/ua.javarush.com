Передача параметрів у Java
<p>----------------------------------------</p>
Змінна Java - це контейнер, зі значенням в ньому. То що означає передати змінну? І яка різниця між примітивними та посилальними типами даних. Ми дістанемося до цього пізніше. Давайте спочатку почнемо з простого присвоєння. Що робить цей код
<p>----------------------------------------</p>
Змінна Java - це контейнер, зі значенням в ньому. То що означає передати змінну? І яка різниця між примітивними та посилальними типами даних. 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="20c8163b-fcb0-4d5f-bb63-f6a0c2e43aaf" data-max-width="710" alt="Передача параметрів у Java - 1" src="https://cdn.javarush.com/images/article/20c8163b-fcb0-4d5f-bb63-f6a0c2e43aaf/512.jpeg" style="width: 710px;">
 </div>
</div>Ми дістанемося до цього пізніше. Давайте спочатку почнемо з простого присвоєння. Що робить цей код: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class=" language-java"><span class="token keyword">int</span> х <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> у <span class="token operator">=</span> х<span class="token punctuation">;</span></code></pre> У рядку 1 створюється змінна <strong>x</strong> типу int і їй присвоюється значення 3. У рядку 2 створюється змінна <strong>y</strong> типу int і їй присвоюється значення змінної <strong>x</strong> . Надалі змінна <strong>x</strong> ніяк не впливає на <strong>y</strong> . Java копіює значення <strong>х</strong> (3) і поміщає цю копію в <strong>у</strong> . Це передача параметра за значенням. Ви не записуєте одну змінну до іншої. Значення копіюється і надається нової змінної. Вираз <strong>у = х; </strong>НЕ означає "записати <strong>x</strong> у <strong>y</strong> ". Воно означає "скопіювати значення всередині <strong>х</strong> і записати цю копію в <strong>у</strong>Якщо пізніше я зміню <strong>y</strong> : 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class=" language-java">у <span class="token operator">=</span> <span class="token number">34</span><span class="token punctuation">;</span></code></pre> Чи вплине це на <strong>x</strong> ? Звичайно, ні. <strong>x</strong> як і раніше має значення 3. Якщо пізніше зміню <strong>х</strong> : 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class=" language-java">х <span class="token operator">=</span> <span class="token number">90</span><span class="token punctuation">;</span></code></pre> Як це відіб'ється на <strong>y</strong> ? Ніяк. Вони не пов'язані після того, як було зроблено присвоєння (КОПІРУВАННЯ значення). <strong>А що щодо посилальних типів? Як вони працюють? </strong> Не так вже й складно, насправді це правило те саме. Посилання роблять те саме - ви отримуєте копію посилання. Отже, якщо я говорю: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class=" language-java"><span class="token class-name">Cat</span> <span class="token class-name">A</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Cat</span> <span class="token class-name">B</span> <span class="token operator">=</span> <span class="token class-name">A</span><span class="token punctuation">;</span></code></pre> Посилання <strong>А</strong> копіюється на посилання <strong>B</strong> . До об'єкта це не стосується - у вас як і раніше один об'єкт. Але тепер у вас є дві різні посилання, що контролюють один і той же об'єкт <strong>Cat</strong> . <strong>Тепер розглянемо передачу параметрів у методи. </strong> <strong>Java передає параметри за значенням. Завжди. </strong> Це означає "скопіювати значення і передати копію." Для примітивних типів це легко: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class=" language-java"><span class="token keyword">int</span> х <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
doStuff <span class="token punctuation">(</span>х<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">/</span> <span class="token operator">/</span> Передать копию х <span class="token punctuation">(</span>значення <span class="token number">5</span><span class="token punctuation">)</span> в метод doStuff</code></pre> Метод <strong>doStuff</strong> виглядає так: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">void</span> doStuff <span class="token punctuation">(</span><span class="token keyword">int</span> у<span class="token punctuation">)</span> <span class="token punctuation">{</span>

   <span class="token operator">/</span> <span class="token operator">/</span> Действия с <span class="token string">'y'</span>
<span class="token punctuation">}</span></code></pre> Копія значення <strong>x</strong> , тобто 5, передається в метод <strong>doStuff ()</strong> . Метод <strong>doStuff ()</strong> має власну змінну, яка називається <strong>y</strong> . Змінна <strong>y</strong> - нова, інша змінна. З копією того, що було в <strong>х</strong> на момент передачі в метод. З цього моменту, <strong>у них</strong> не <strong>впливають</strong> один на одного. При зміні <strong>у</strong> , ви не торкаєтеся <strong>х</strong> . 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">void</span> doStuff <span class="token punctuation">(</span><span class="token keyword">int</span> у<span class="token punctuation">)</span> <span class="token punctuation">{</span>

   у <span class="token operator">=</span> <span class="token number">27</span><span class="token punctuation">;</span> <span class="token operator">/</span> <span class="token operator">/</span> Это не влияет на <span class="token string">'х'</span>
<span class="token punctuation">}</span></code></pre> І навпаки - при зміні <strong>х</strong> , ви не зміните <strong>y</strong> . Єдине, що зробив <strong>x</strong> у цій справі, це скопіював своє значення і передав його в метод <strong>doStuff()</strong> . <strong>Як "передача за значенням" працює із посиланнями?</strong> Занадто багато людей говорять, "Java передає примітивні типи за значенням, а об'єкти за посиланням". Це не так, як кажуть. Java передає все за значенням. З примітивами ви отримуєте копію вмісту. З посиланнями ви також отримуєте копію вмісту. Але що таке посилання? Пульт дистанційного керування. Засоби для керування/доступу до об'єкта. Коли ви надсилаєте посилання на об'єкт у метод, ви передаєте копію посилання. Клон пульта дистанційного керування. Об'єкт все ще сидить у купі, де був створений, чекаючи когось, щоб використали пульт. Об'єкт не турбує скільки пультів "запрограмовані" щоб контролювати його. Це хвилює лише збирача сміття і вас, програміста. Тому, коли ви кажете: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token class-name">Cat</span> <span class="token class-name">A</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
doStuff <span class="token punctuation">(</span>А<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> doStuff <span class="token punctuation">(</span><span class="token class-name">Cat</span> <span class="token class-name">B</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

   <span class="token operator">/</span> <span class="token operator">/</span> Использование <span class="token class-name">B</span>
<span class="token punctuation">}</span></code></pre> Існує лише один об'єкт <strong>Cat</strong> . Але тепер два пульта управління (посилання) можуть отримати доступ до одного і того ж об'єкта <strong>Cat</strong> . Так що тепер все, що <strong>B</strong> робить об'єкту <strong>Cat</strong> , вплине на <strong>Cat</strong> , на який вказує <strong>A</strong> , але це не вплине на вміст <strong>A</strong> ! Ви можете змінити <strong>Cat</strong> , використовуючи нове посилання <strong>B</strong> (скопійоване безпосередньо з <strong>А</strong> ), але ви не можете змінити <strong>А</strong> . Якого біса це означає? Ви можете змінити об'єкт, на який посилається <strong>А</strong> , але ви не можете взяти та змінити посилання <strong>А</strong>- Переадресаувати її на інший об'єкт або <strong>null</strong> . Так що якщо ви зміните посилання <strong>B</strong> (не сам об'єкт <strong>Cat</strong> , на який посилається <strong>B</strong> , а саме значення посилання) ви не зміните значення <strong>А</strong> . І навпаки. Так що: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token class-name">Cat</span> <span class="token class-name">A</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
doStuff <span class="token punctuation">(</span>А<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> doStuff <span class="token punctuation">(</span><span class="token class-name">Cat</span> <span class="token class-name">B</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

   <span class="token class-name">B</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">/</span> <span class="token operator">/</span> Не повлияет на ссылку <span class="token class-name">A</span>
<span class="token punctuation">}</span></code></pre> Це просто означає, що <strong>Вказує</strong> на інший об'єкт. <strong>А,</strong> як і раніше, щаслива. Тож повторюйте за мною: <strong>Java передає все за значенням. </strong> (Добре, ще раз... з почуттям.) <strong>Java передає все за значенням. </strong> Для примітивних типів – ви передаєте копію поточного значення, для посилань на об'єкти – ви надсилаєте копію посилання (дистанційного керування). Ви ніколи не передаєте об'єкт. Усі об'єкти зберігаються у купі. Завжди. Тепер заваріть здоровенну чашку кави та пишіть код! <em><a href="https://javaranch.com/campfire/StoryPassBy.jsp" rel="nofollow">Оригінал</a> статті.</em>