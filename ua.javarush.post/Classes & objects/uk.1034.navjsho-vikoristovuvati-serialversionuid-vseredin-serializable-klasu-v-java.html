Навіщо використовувати SerialVersionUID всередині Serializable класу в Java
<p>----------------------------------------</p>
і завжди залишається загадкою для багатьох Java-розробників. Я часто бачу питання щодо того, що таке , або що станеться, якщо я не оголошу в моєму класі? Крім заплутаного і рідкісного використання, є ще одна причина для цього питання - це п
<p>----------------------------------------</p>
<code class=" language-none">Serialization</code>і <code class=" language-none">SerialVersionUID</code>завжди залишається загадкою для багатьох Java-розробників. Я часто бачу питання щодо того, що таке <code class=" language-none">SerialVersionUID</code>, або що станеться, якщо я не оголошу <code class=" language-none">SerialVersionUID</code>в моєму <code class=" language-none">Serializable</code>класі? Крім заплутаного і рідкісного використання, є ще одна причина для цього питання - це попередження <img data-id="08b279f8-11b0-44cb-89a9-b6ae3d2d7adb" data-max-width="850" alt="Навіщо використовувати SerialVersionUID всередині Serializable класу в Java - 1" src="https://cdn.javarush.com/images/article/08b279f8-11b0-44cb-89a9-b6ae3d2d7adb/800.jpeg" style="width: 850px;">Eclipse IDE про відсутність <em>,</em><code class=" language-none">SerialVersionUID</code> наприклад: " long"). У цій статті, ви зможете не тільки дізнатися основи Java , але і його вплив на процес серіалізації та десеріалізації. Коли ви оголошуєте клас, як шляхом реалізації інтерфейсу-маркера<em></em><code class=" language-none">Serializable</code><code class=" language-none">Customer</code><code class=" language-none">SerialVersionUID</code><code class=" language-none">SerialVersionUID</code><code class=" language-none">Serializable</code><code class=" language-none">java.io.Serializable</code>, середовище виконання Java зберігає екземпляр цього класу на диску за допомогою механізму серіалізації за промовчанням, якщо ви не налаштували процес використання <a href="https://javarevisited.blogspot.com/2012/01/serializable-externalizable-in-java.html" rel="nofollow" target="_blank">інтерфейсу Externalizable</a> . Під час серіалізації, середовище виконання Java створює номер версії для класу, так що вона може десереалізувати його пізніше. У Java цей номер версії відомий як <code class=" language-none">SerialVersionUID</code>. Якщо під час десеріалізації, <code class=" language-none">SerialVersionUID</code>не відповідає, то процес завершиться з винятком <code class=" language-none">InvalidClassException</code>у потоці " <code class=" language-none">main</code>" <code class=" language-none">java.io.InvalidClassException</code>, а також надрукує ім'я класу та відповідний <code class=" language-none">SerialVersionUID</code>. Швидке рішення для виправлення цієї проблеми – скопіювати <code class=" language-none">SerialVersionUID</code>та визначити його як константу типу <code class=" language-none">private</code> <code class=" language-none">static</code> <code class=" language-none">final</code> <code class=" language-none">long</code>у вашому класі. У цій статті ми дізнаємося про те, чому ми повинні використовувати<code class=" language-none">SerialVersionUID</code>Java і як використовувати інструмент serialver JDK для генерації цього ID. Якщо ви новачок у серіалізації, ви також можете подивитися <a href="https://javarevisited.blogspot.com/2011/04/top-10-java-serialization-interview.html" rel="nofollow" target="_blank">Топ 10 питань про серіалізацію Java на інтерв'ю</a> , щоб оцінити свої знання і знайти прогалини у вашому розумінні для подальшого читання. Подібно <code class=" language-none">Concurrency</code>(паралельності) і <code class=" language-none">Multi-threading</code>(багатопоточності), <code class=" language-none">Serialization</code>(серіалізація) це вже інша тема, яка заслуговує на читання кілька разів. 
<h2>Навіщо використовувати SerialVersionUID в Java</h2>Як я сказав, коли ми не визначабо значення, <code class=" language-none">SerialVersionUID</code>як <code class=" language-none">static</code> <code class=" language-none">final</code> <code class=" language-none">long</code>у нашому класі, механізм серіалізації зробить це за нас. Цей механізм чутливий до багатьох деталей, включаючи поля вашого класу, їх модифікатори доступу, інтерфейси, які він реалізує і навіть різні реалізації компілятора, будь-які зміни в класі або використання іншого компілятора може дати результат іншого, який зрештою зупинить перезавантаження серіалізованих даних <code class=" language-none">SerialVersionUID</code>. ризиковано покладатися на механізм серіалізації Java для генерації цього id, тому рекомендується явно визначати <code class=" language-none">SerialVersionUID</code>у вашому<a href="http://www.java67.com/2012/08/what-is-transient-variable-in-java.html" rel="nofollow" target="_blank"> Serializable-класі</a> . Я наполегливо раджу прочитати класику Java - <strong>Joshua Bloch "Effective Java"</strong>для розуміння серіалізації Java та проблем неправильної їх обробки. До речі, JDK також надає інструмент <code class=" language-none">serialver</code>, який розташований в директорії <em>bin</em> каталогу <a href="https://javarevisited.blogspot.com/2012/02/how-to-set-javahome-environment-in.html" rel="nofollow" target="_blank">JAVA_HOME</a> , на моєму комп'ютері <strong>C:\Program Files\Java\jdk1.6.0_26\bin\serialver.exe</strong> , який може бути використаний для генерування <code class=" language-none">SerialVersionUID</code>для старих класів. Це дуже корисно у випадку, якщо ви внесли зміни до вашого класу, який порушує серіалізацію і ваш додаток не може перезавантажити серіалізовані екземпляри. Ви легко можете використовувати цю утиліту для створення <code class=" language-none">SerialVersionUID</code>для старих екземплярів, а потім використовувати його у явному вигляді оголосивши поле як <a href="https://javarevisited.blogspot.com/2012/03/private-in-java-why-should-you-always.html" rel="nofollow" target="_blank">private </a> <a href="https://javarevisited.blogspot.com/2011/11/static-keyword-method-variable-java.html" rel="nofollow" target="_blank">static </a> <a href="https://javarevisited.blogspot.com/2011/12/final-variable-method-class-java.html" rel="nofollow" target="_blank">final </a> <a href="https://javarevisited.blogspot.com/2012/12/how-to-convert-string-to-long-in-java-4-examples.html" rel="nofollow" target="_blank">long</a> <code class=" language-none">SerialVersionUID</code>. До речі, дуже рекомендується з міркувань продуктивності та безпеки використовувати звичайний двійковий формат для серіалізації, знову ж таки “Effective Java” має кілька параграфів, які демонструють переваги звичайного формату в найдрібніших деталях. 
<h2>Як використовувати утиліту serialver JDK для генерування SerialVersionUID</h2>Ви можете використовувати <code class=" language-none">serialver</code>для створення <code class=" language-none">SerialVersionUID</code>класів. Це особливо корисно для класів, що розвиваються, утиліта повертає <code class=" language-none">SerialVersionUID</code>у форматі легкому для копіювання. Ви можете використовувати утиліту <code class=" language-none">serialver</code>JDK як показано у прикладі: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java">$ serialver
use<span class="token operator"><span class="token operator">:</span></span> serialver <span class="token punctuation"><span class="token punctuation">[</span></span><span class="token operator"><span class="token operator">-</span></span>classpath classpath<span class="token punctuation"><span class="token punctuation">]</span></span> <span class="token punctuation"><span class="token punctuation">[</span></span><span class="token operator"><span class="token operator">-</span></span>show<span class="token punctuation"><span class="token punctuation">]</span></span> <span class="token punctuation"><span class="token punctuation">[</span></span>classname<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">]</span></span>
$ serialver <span class="token operator"><span class="token operator">-</span></span><span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">classpath <span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span> Hello</span></span>
<span class="token class-name"><span class="token class-name">Class</span></span> <span class="token class-name"><span class="token class-name">Hello</span></span> is not <span class="token class-name"><span class="token class-name">Serializable</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>
$ serialver <span class="token operator"><span class="token operator">-</span></span><span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">classpath <span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span> Hello</span></span>
<span class="token class-name"><span class="token class-name">Hello</span></span><span class="token operator"><span class="token operator">:</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token keyword"><span class="token keyword">long</span></span> <span class="token class-name"><span class="token class-name">SerialVersionUID</span></span> <span class="token operator"><span class="token operator">=</span></span> <span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">4862926644813433707L</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Ви також можете використовувати утиліту <code class=" language-none">serialver</code>у <code class=" language-none">GUI</code>вигляді використовуючи команду <code class=" language-none">$ serialver –show</code>, це відкриє інспектор <code class=" language-none">serial version</code>, який приймає повне ім'я класу та показує його <code class=" language-none">Serial version</code>. 
<h2>Резюме</h2>Тепер ми знаємо, що таке <code class=" language-none">SerialVersionUID</code>і чому важливо оголошувати його в <code class=" language-none">Serializable</code>-класі, саме час переглянути деякі важливі факти, пов'язані з Java SerialVersionUID. 
<ol>
 <li><code class=" language-none">SerialVersionUID</code>використовується для визначення версії серіалізованих даних.</li>
 <br>
 <li>Коли ми не оголошуємо <code class=" language-none">SerialVersionUID</code>в нашому класі, середовище виконання Java робить це за нас, але цей процес чутливий до багатьох метаданих класу, включаючи кількість полів, тип полів, модифікатори доступу полів, інтерфейсів, які реалізовані в класі та ін. Ви можете знайти точну інформацію в документації про серіалізацію від Oracle.</li>
 <br>
 <li>Рекомендується оголошувати SerialVersionUID як private static final long змінну, щоб уникнути механізму за замовчуванням. Деякі IDE, такі як <a href="https://javarevisited.blogspot.com/2013/03/how-to-write-unit-test-in-java-eclipse-netbeans-example-run.html" rel="nofollow" target="_blank">Eclipse</a> , також видають попередження якщо ви забули це, наприклад: "Serialalizable class Customer does no declare a static final SerialVersionUID field of type long" ("Serializable-клас Customer не оголосив статичне фінальне поле SerialVersionUID типу long . Хоча ви і можете відключити це попередження слідуючи у Window &gt; Preferences &gt; Java &gt; Compiler &gt; Errors / Warnings &gt; Potential Programming Problems, я пропоную не робити цього. Тільки коли відновлення даних не потрібно я можу бути недбалим у цьому. Ось як ця помилка виглядає в Eclipse IDE, все, що вам потрібно це прийняти перше швидке рішення. <img data-id="55b64684-c8cd-499e-bf80-630999584fb9" data-max-width="570" alt="Навіщо використовувати SerialVersionUID всередині Serializable класу в Java - 2" src="https://cdn.javarush.com/images/article/55b64684-c8cd-499e-bf80-630999584fb9/512.jpeg" style="width: 570px;"></li>
 <br>
 <li>Ви також можете використовувати утиліту serialver з JDK для генерування Serial Version для класів Java. Утиліта також має GUI, який включається під час передачі параметра – <code class=" language-none">show</code>.</li>
 <br>
 <li>Найкраща практика в серіалізації – це явно оголосити <code class=" language-none">SerialVersionUID</code>, щоб уникнути будь-яких проблем під час де-серіалізації, особливо якщо ви працюєте з клієнт-серверним додатком, який спирається на серіалізовані дані, наприклад, RMI.</li>
</ol> Це все про <code class=" language-none">SerialVersionUID</code>Java. Зараз ми знаємо чому важливо правильно оголошувати <code class=" language-none">SerialVersionUID</code>у класі. Ви можете сказати спасибі вашій IDE за це нагадування, яке потенційно може порушити десеріалізацію вашого класу. Якщо ви хочете більше прочитати про серіалізацію та споріднені поняття, ви можете також переглянути ці дивовижні статті. 
<ul>
 <li><a href="https://javarevisited.blogspot.com/2012/03/difference-between-transient-and.html" rel="nofollow" target="_blank">Відмінність між transient and volatile variable in Java</a></li>
 <li><a href="http://www.java67.com/2012/10/difference-between-serializable-vs-externalizable-interface.html" rel="nofollow" target="_blank">Відмінність між Serializable and Externalizable interface in Java</a></li>
 <li><a href="https://javarevisited.blogspot.com/2011/09/transient-keyword-variable-in-java.html" rel="nofollow" target="_blank">When to use transient variable in Java</a></li>
</ul>Оригінал<a href="https://javarevisited.blogspot.com/2014/05/why-use-serialversionuid-inside-serializable-class-in-java.html" rel="nofollow" target="_blank"> тут</a>