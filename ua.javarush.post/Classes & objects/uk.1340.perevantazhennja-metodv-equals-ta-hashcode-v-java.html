Перевантаження методів equals() та hashCode() в Java
<p>----------------------------------------</p>
і є фундаментальними методами, оголошені в класі і містяться в стандартних бібліотеках Java. Метод використовується для порівняння об'єктів, а - для генерації цілого коду об'єкта. Ці методи широко використовуються в стандартних бібліотеках 
<p>----------------------------------------</p>
<h2>Перевизначення методів equals() та hashCode() в Java</h2><code class=" language-none">Equals</code>і <code class=" language-none">hashCode</code>є фундаментальними методами, оголошені в класі <code class=" language-none">Object</code>і містяться в стандартних бібліотеках Java. <img data-id="5ef0d361-1d52-4d2b-93a1-b0fefb42d7e5" data-max-width="850" alt="Перевантаження методів equals() та hashCode() в Java - 1" src="https://cdn.javarush.com/images/article/5ef0d361-1d52-4d2b-93a1-b0fefb42d7e5/800.jpeg" style="width: 850px;">Метод <code class=" language-none">еquals()</code>використовується для порівняння об'єктів, а <code class=" language-none">hashCode</code>- для генерації цілого коду об'єкта. Ці методи широко використовуються в стандартних бібліотеках Java при вставці та вийманні об'єктів у <code class=" language-none">HashMap</code>. Метод <code class=" language-none">equal</code>також використовується для забезпечення зберігання тільки унікальних об'єктів <code class=" language-none">HashSet</code>та інших <code class=" language-none">Set</code>реалізаціях, а також у будь-яких інших випадках, коли потрібно порівнювати об'єкти. Реалізація за умовчанням методу <code class=" language-none">equals()</code>в класі <code class=" language-none">java.lang.Object</code>порівнює посилання на адресаи в пам'яті, які зберігають змінні, та повертає<code class=" language-none">true</code>Тільки в тому випадку, якщо адресаи збігаються, тобто змінні посилаються на той самий об'єкт. Java рекомендує перевизначати методи <code class=" language-none">equals()</code>і <code class=" language-none">hashCode()</code>, якщо передбачається, що порівняння має здійснюватися відповідно до природної логіки або бізнес-логіки. Багато класів у стандартних бібліотеках Java перевизначають їх, наприклад у класі <code class=" language-none">String</code>перевизначається <code class=" language-none">equals</code>таким чином, що повертається <code class=" language-none">true</code>, якщо вміст двох об'єктів, що порівнюються, однаковий. У класі-обгортці <code class=" language-none">Integer</code>метод <code class=" language-none">equal</code>перевизначається для виконання чисельного порівняння і так далі. Так як <code class=" language-none">HashMap</code>і <code class=" language-none">HashTable</code>в Java покладаються на методи <code class=" language-none">equals()</code>і <code class=" language-none">hashCode()</code>для порівняння своїх <code class=" language-none">key</code>і<code class=" language-none">values</code>Java пропонує такі правила для перевизначення цих методів: 
<ol>
 <li>Рефлексивність: Об'єкт повинен дорівнювати собі самому.</li>
 <li>Симетричність: якщо <code class=" language-none">a.equals(b)</code>повертає <code class=" language-none">true</code>, то <code class=" language-none">b.equals(a)</code>повинен також повернути <code class=" language-none">true</code>.</li>
 <li>Транзитивність: якщо <code class=" language-none">a.equals(b)</code>повертає <code class=" language-none">true</code>і <code class=" language-none">b.equals(c)</code>теж повертає <code class=" language-none">true</code>, то <code class=" language-none">c.equals(a)</code>теж має повертати <code class=" language-none">true</code>.</li>
 <li>Узгодженість: повторний виклик методу <code class=" language-none">equals()</code>повинен повертати те саме значення до тих пір, поки якесь значення властивостей об'єкта не буде змінено. Тобто, якщо два об'єкти дорівнюють Java, то вони будуть рівні поки їх властивості залишаються незмінними.</li>
 <li>Порівняння <code class=" language-none">null</code>: об'єкт повинен бути перевірений на <code class=" language-none">null</code>. Якщо об'єкт дорівнює <code class=" language-none">null</code>, то метод повинен повернути <code class=" language-none">false</code>, а не <code class=" language-none">NullPointerException</code>. Наприклад, <code class=" language-none">a.equals(null)</code>має повернути <code class=" language-none">false</code>.</li>
</ol>
<h2>Угода між equals і hashCode у Java</h2>
<ol>
 <li>Якщо об'єкти дорівнюють за результатами виконання методу <code class=" language-none">equals</code>, тоді їх <code class=" language-none">hashcode</code>мають бути однаковими.</li>
 <li>Якщо об'єкти не рівні за результатами виконання методу <code class=" language-none">equals</code>, їх <code class=" language-none">hashcode</code>можуть бути як однаковими, і різними. Однак для підвищення продуктивності краще, щоб різні об'єкти повертали різні коди.</li>
</ol>
<h2>Як перевизначати метод equals у Java</h2>
<ol>
 <li>
  <pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">boolean</span></span> <span class="token function"><span class="token function">equals</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Object</span></span> obj<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
<span class="token comment"><span class="token comment">/*1. Перевірте*/</span></span><span class="token keyword"><span class="token keyword"></span></span><code><span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>obj <span class="token operator"><span class="token operator">==</span></span> <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
<span class="token comment"><span class="token comment">/*і поверніть */</span></span> <span class="token keyword"><span class="token keyword">return</span></span> <span class="token boolean"><span class="token boolean">true</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
         <span class="token punctuation"><span class="token punctuation">}</span></span></code><span class="token punctuation"></span></code></pre></li>
 <li>
  <p>Перевірте об'єкт на <code class=" language-none">null</code>, а також перевірте, щоб об'єкти були одним типом. Не робіть перевірку за допомогою <code class=" language-none">instanceof</code>так як така перевірка буде повертати <code class=" language-none">true</code>для підкласів і працюватиме правильно тільки у випадку, якщо ваш клас оголошений як <code class=" language-none">immutable</code>. Замість цього можна використовувати <code class=" language-none">getClass()</code>;</p>
  <pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>obj <span class="token operator"><span class="token operator">==</span></span> <span class="token keyword"><span class="token keyword">null</span></span> <span class="token operator"><span class="token operator">||</span></span> obj<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getClass</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">!=</span></span> <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getClass</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            <span class="token keyword"><span class="token keyword">return</span></span> <span class="token boolean"><span class="token boolean">false</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre></li>
 <li>
  <p>Оголосіть змінну типу, який ви порівнюєте, та приведіть <code class=" language-none">obj</code>до цього типу. Потім порівнюйте кожен атрибут типу з чисельних атрибутів (якщо є) оскільки чисельні атрибути перевіряються швидше. Порівнюйте атрибути за допомогою операторів І та АБО (так звані <code class=" language-none">short-circuit logical operators</code>) для об'єднання перевірок з іншими атрибутами.</p>
  <pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">Person</span></span> guest <span class="token operator"><span class="token operator">=</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Person</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> obj<span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> id <span class="token operator"><span class="token operator">==</span></span> guest<span class="token punctuation"><span class="token punctuation">.</span></span>id <span class="token operator"><span class="token operator">&amp;&amp;</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>firstName <span class="token operator"><span class="token operator">==</span></span> guest<span class="token punctuation"><span class="token punctuation">.</span></span>firstName <span class="token operator"><span class="token operator">||</span></span>
            <span class="token punctuation"><span class="token punctuation">(</span></span>firstName <span class="token operator"><span class="token operator">!=</span></span> <span class="token keyword"><span class="token keyword">null</span></span> <span class="token operator"><span class="token operator">&amp;&amp;</span></span> firstName<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">equals</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>guest<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getFirstName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
                <span class="token operator"><span class="token operator">&amp;&amp;</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>lastName <span class="token operator"><span class="token operator">==</span></span> guest<span class="token punctuation"><span class="token punctuation">.</span></span>lastName <span class="token operator"><span class="token operator">||</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>lastName <span class="token operator"><span class="token operator">!=</span></span> <span class="token keyword"><span class="token keyword">null</span></span> <span class="token operator"><span class="token operator">&amp;&amp;</span></span>                      lastName <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">equals</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>guest<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getLastName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre></li>
</ol><span class="text-bold">Повний приклад перевизначення методу equals Java</span>
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token comment"><span class="token comment">/** * Person class with equals and hashcode implementation in Java * @author Javin Paul */</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Person</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">int</span></span> id<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> firstName<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> lastName<span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">int</span></span> <span class="token function"><span class="token function">getId</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span> <span class="token keyword"><span class="token keyword">return</span></span> id<span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">setId</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span> id<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span> <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>id <span class="token operator"><span class="token operator">=</span></span> id<span class="token punctuation"><span class="token punctuation">;</span></span><span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">String</span></span> <span class="token function"><span class="token function">getFirstName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span> <span class="token keyword"><span class="token keyword">return</span></span> firstName<span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">setFirstName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> firstName<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span> <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>firstName <span class="token operator"><span class="token operator">=</span></span> firstName<span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">String</span></span> <span class="token function"><span class="token function">getLastName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span> <span class="token keyword"><span class="token keyword">return</span></span> lastName<span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">setLastName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> lastName<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span> <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>lastName <span class="token operator"><span class="token operator">=</span></span> lastName<span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">boolean</span></span> <span class="token function"><span class="token function">equals</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Object</span></span> obj<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>obj <span class="token operator"><span class="token operator">==</span></span> <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> <span class="token boolean"><span class="token boolean">true</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>obj <span class="token operator"><span class="token operator">==</span></span> <span class="token keyword"><span class="token keyword">null</span></span> <span class="token operator"><span class="token operator">||</span></span> obj<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getClass</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">!=</span></span> <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getClass</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> <span class="token boolean"><span class="token boolean">false</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token class-name"><span class="token class-name">Person</span></span> guest <span class="token operator"><span class="token operator">=</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Person</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> obj<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">return</span></span> id <span class="token operator"><span class="token operator">==</span></span> guest<span class="token punctuation"><span class="token punctuation">.</span></span>id
        <span class="token operator"><span class="token operator">&amp;&amp;</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>firstName <span class="token operator"><span class="token operator">==</span></span> guest<span class="token punctuation"><span class="token punctuation">.</span></span>firstName
            <span class="token operator"><span class="token operator">||</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>firstName <span class="token operator"><span class="token operator">!=</span></span> <span class="token keyword"><span class="token keyword">null</span></span> <span class="token operator"><span class="token operator">&amp;&amp;</span></span>firstName<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">equals</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>guest<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getFirstName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>        <span class="token operator"><span class="token operator">&amp;&amp;</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>lastName <span class="token operator"><span class="token operator">==</span></span> guest<span class="token punctuation"><span class="token punctuation">.</span></span>lastName
            <span class="token operator"><span class="token operator">||</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>lastName <span class="token operator"><span class="token operator">!=</span></span> <span class="token keyword"><span class="token keyword">null</span></span> <span class="token operator"><span class="token operator">&amp;&amp;</span></span> lastName <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">equals</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>guest<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getLastName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
            <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">int</span></span> <span class="token function"><span class="token function">hashCode</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">final</span></span> <span class="token keyword"><span class="token keyword">int</span></span> prime <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">31</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">int</span></span> result <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    result <span class="token operator"><span class="token operator">=</span></span> prime <span class="token operator"><span class="token operator">*</span></span> result <span class="token operator"><span class="token operator">+</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>firstName <span class="token operator"><span class="token operator">==</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">?</span></span> <span class="token number"><span class="token number">0</span></span> <span class="token operator"><span class="token operator">:</span></span> firstName<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">hashCode</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>             result <span class="token operator"><span class="token operator">=</span></span> prime <span class="token operator"><span class="token operator">*</span></span> result <span class="token operator"><span class="token operator">+</span></span> id<span class="token punctuation"><span class="token punctuation">;</span></span> result <span class="token operator"><span class="token operator">=</span></span> prime <span class="token operator"><span class="token operator">*</span></span> result <span class="token operator"><span class="token operator">+</span></span>
        <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>lastName <span class="token operator"><span class="token operator">==</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">?</span></span> <span class="token number"><span class="token number">0</span></span> <span class="token operator"><span class="token operator">:</span></span> lastName<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">hashCode</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token keyword"><span class="token keyword">return</span></span> result<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
 <span class="token punctuation"><span class="token punctuation">}</span></span></code></pre>
<h2>Поширені помилки при перевизначенні equals Java</h2>
<ol>
 <li>
  <p>Замість того, щоб перевизначати метод <code class=" language-none">equals (Override)</code>програміст перевантажує його <code class=" language-none">(Overload)</code>Синтаксис методу <code class=" language-none">equals()</code>в класі <code class=" language-none">Object</code>визначений як <code class=" language-none">public boolean equals(Object obj)</code>, але багато програмістів ненароком перевантажують метод: <code class=" language-none">public boolean equals(Person obj)</code>- замість <code class=" language-none">Object</code>як аргумент використовують ім'я свого класу (напр. Person). Цю помилку складно виявити через <code class=" language-none">static binding</code>. Таким чином, якщо ви викличете цей метод для об'єкта свого класу, то метод не просто скомпілюється, а зробить це коректно. Однак, якщо ви покладете ваш об'єкт у колекцію, наприклад, <code class=" language-none">ArrayList</code>і викличете метод <code class=" language-none">contains()</code>, робота якого заснована на методі <code class=" language-none">equals()</code>, то метод <code class=" language-none">contains</code>не зможе виявити ваш об'єкт.</p></li>
 <li>
  <p>При перевизначенні методу <code class=" language-none">equals()</code>не перевіряти на <code class=" language-none">null</code>змінні, що зрештою закінчується <code class=" language-none">NullPointerException</code>при викликі <code class=" language-none">equals()</code>. Нижче наведено коректний код.</p>
  <pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java">firstname <span class="token operator"><span class="token operator">==</span></span> guest<span class="token punctuation"><span class="token punctuation">.</span></span>firstname <span class="token operator"><span class="token operator">||</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>firstname <span class="token operator"><span class="token operator">!=</span></span> <span class="token keyword"><span class="token keyword">null</span></span> <span class="token operator"><span class="token operator">&amp;&amp;</span></span>
     firstname<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">equals</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>guest<span class="token punctuation"><span class="token punctuation">.</span></span>firstname<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre></li>
 <li>
  <p>Третя поширена помилка це не перевизначати метод <code class=" language-none">hashCode()</code>, а лише <code class=" language-none">equals()</code>. Ви повинні перевизначати обидва способи <code class=" language-none">equals()</code>і <code class=" language-none">hashCode()</code>Java. Метод <code class=" language-none">hashCode</code>використовується в <code class=" language-none">hash</code>-колекціях(наприклад <code class=" language-none">HashSet</code>), і чим менше буде колізій (однаковий код при різних об'єктах) тим ефективніше ці колекції працюватимуть з об'єктами вашого класу.</p></li>
 <li>
  <p>Остання поширена помилка програмістів у цьому, що з перевизначенні методу <code class=" language-none">equals()</code>не зберігається відповідність між методами <code class=" language-none">equals()</code>і <code class=" language-none">compareTo()</code>, що є неформальним вимогою уникнення зберігання дублікатів в <code class=" language-none">Set (SortedSet, TreeSet)</code>.</p></li>
</ol>
<h2>Підказки як писати в Java метод equals</h2>
<ol>
 <li>
  <p>Більшість IDE такі як NetBeans, Eclipse та IntelliJ IDEA забезпечують підтримку генерації методів <code class=" language-none">equals()</code>та <code class=" language-none">hashCode()</code>. У Eclipse натисніть праву кнопку -&gt; source -&gt; <code class=" language-none">generate equals()</code>та <code class=" language-none">hashCode()</code>.</p></li>
 <li>
  <p>Якщо в класі є унікальний бізнес-ключ, то достатньо зробити перевірку тільки на рівність цих полів. Як у нашому прикладі “id” – унікальний номер для кожного Person.</p></li>
 <li>
  <p>При перевизначенні <code class=" language-none">hashCode()</code>Java перевірте використання всіх полів, які були використані в методі <code class=" language-none">equals()</code>.</p></li>
 <li>
  <p><code class=" language-none">String</code>і класи-оболонки такі як <code class=" language-none">Integer</code>, <code class=" language-none">Float</code>і <code class=" language-none">Double</code>перевизначають метод <code class=" language-none">equals()</code>, але <code class=" language-none">StringBuffer</code>не перевизначає.</p></li>
 <li>
  <p>За будь-якої можливості робіть поля <code class=" language-none">immutable</code>використовуючи <code class=" language-none">final</code>змінні Java.</p></li>
 <li>
  <p>При порівнянні <code class=" language-none">String</code>об'єктів використовуйте <code class=" language-none">equals()</code>замість оператора <code class=" language-none">==</code>.</p></li>
 <li>
  <p>Два об'єкти, які логічно рівні, але завантажені з різних, <code class=" language-none">ClassLoader</code>не можуть бути рівними. Пам'ятайте, що перевірка за допомогою <code class=" language-none">getClass()</code>поверне <code class=" language-none">false</code>, якщо клас-завантажувач різний.</p></li>
 <li>
  <p>Використовуйте <code class=" language-none">@Override</code>анотацію також для методу <code class=" language-none">hashCode</code>, оскільки це попереджає невловимі помилки, наприклад значення методу , що повертається <code class=" language-none">int</code>, проте деякі програмісти повертають <code class=" language-none">long</code>.</p></li>
</ol><a href="https://codegym.cc/welcome" target="_blank"><img id="click_banner1_articles" data-max-width="1024" data-id="ae3b9baa-f418-494a-b842-acbf47b2eaaf" class="img-fluid" alt="Перевантаження методів equals() та hashCode() в Java - 2" src="https://cdn.javarush.com/images/article/ae3b9baa-f418-494a-b842-acbf47b2eaaf/1024.jpeg" style="width: 1024px;"></a>PS Шановні колеги! Мені виявилася корисною ця стаття при вирішенні завдань 21-го рівня! Бажаю удачі при розборі цієї теми, користуйтесь перекладом! Я сподіваюся, що ви допоможете підняти мій рейтинг, тому що зараз я навіть не можу залишати коментар на цьому форумі. Всім велике спасибі! <a href="http://javarevisited.blogspot.co.il/2011/02/how-to-write-equals-method-in-java.html" rel="nofollow" target="_blank">Оригінал статті</a> Я деякі моменти опустив у зв'язку з нестачею вільного часу, проте переклав усе, що необхідно знати для вирішення завдань 21-го рівня.