Проектування Класів та Інтерфейсів (Переклад статті)
<p>----------------------------------------</p>
Незалежно від того, яку мову програмування ви використовуєте (і Java тут не виняток), дотримання правильних принципів проектування - є ключовим фактором до написання чистого, зрозумілого та піддається перевірці коду; а також створювати його
<p>----------------------------------------</p>
<img data-id="9b9b77b1-107b-4ffd-956e-70be0aa68e4b" data-max-width="850" alt="Проектування Класів та Інтерфейсів (Переклад статті) - 1" src="https://cdn.javarush.com/images/article/9b9b77b1-107b-4ffd-956e-70be0aa68e4b/800.jpeg" style="width: 850px;">
<h2>Зміст</h2>
<ol>
 <li>Вступ</li>
 <li>Інтерфейси</li>
 <li>Інтерфейс-маркери</li>
 <li>Функціональні інтерфейси, статичні методи та методи за замовчуванням</li>
 <li>Абстрактні класи</li>
 <li>Незмінні (постійні) класи</li>
 <li>Анонімні класи</li>
 <li>Видимість</li>
 <li>успадкування</li>
 <li>Множинне успадкування</li>
 <li>Спадкування та композиція</li>
 <li>Інкапсуляція</li>
 <li>Final класи та методи</li>
 <li>Що далі</li>
 <li>Завантажити вихідний код</li>
</ol>
<h3>1. ВВЕДЕННЯ</h3>Незалежно від того, яку мову програмування ви використовуєте (і Java тут не виняток), дотримання правильних принципів проектування - є ключовим фактором до написання чистого, зрозумілого та піддається перевірці коду; а також створювати його довгоживучим, що легко підтримує вирішення проблем. У цій частині уроку ми збираємося обговорити фундаментальні будівельні блоки, які надає мову Java, і ввести пару принципів проектування, прагнучи допомогти вам зробити найкращі дизайн-рішень. Точніше, ми збираємося обговорити інтерфейси та інтерфейси з використанням методів за замовчуванням (нова функція Java 8), абстрактні та остаточні (final) класи, незмінні класи, успадкування, композицію та переглянути правила видимості (або доступності), яких ми коротко торкнулися в 1 частині уроку<a href="http://www.javacodegeeks.com/2015/09/how-to-create-and-destroy-objects.html" rel="nofollow">"How to create and destroy objects"</a> . 
<h3>2. ІНТЕРФЕЙСИ</h3>В об'єктно-орієнтованому програмуванні поняття інтерфейсів формує основи розвитку контрактів (прим. перекладача: "Контракт" в <a href="https://codegym.cc/groups/posts/1880--principih-oop" target="_blank">ОВП</a> — набір чітко визначених умов, що регулюють відносини між класом-сервером та його клієнтами). Двома словами, інтерфейси визначають набір методів (контрактів) і кожен клас, який потребує підтримки цього специфічного інтерфейсу, повинен забезпечити реалізацію цих методів: досить проста, але потужна ідея. Багато мов програмування мають інтерфейси у тому чи іншого формі, але Java особливо забезпечує підтримку мови при цьому. Давайте поглянемо на просте інтерфейсне визначення Java. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>javacodegeeks<span class="token punctuation"><span class="token punctuation">.</span></span>advanced<span class="token punctuation"><span class="token punctuation">.</span></span>design</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">SimpleInterface</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
<span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">performAction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> У фрагменті вище, інтерфейс, який ми назвали <code class=" language-none">SimpleInterface</code>, оголошує лише один спосіб з ім'ям <code class=" language-none">performAction</code>. Головні відмінності інтерфейсів стосовно класів — те, що інтерфейси окреслюють, який має бути контакт (оголошують метод), але з забезпечують їх реалізацію. Однак, інтерфейси в Java можуть бути складнішими: вони можуть включати вкладені інтерфейси, класи, підрахунки, анотації та константи. Наприклад: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>javacodegeeks<span class="token punctuation"><span class="token punctuation">.</span></span>advanced<span class="token punctuation"><span class="token punctuation">.</span></span>design</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">InterfaceWithDefinitions</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token class-name"><span class="token class-name">String</span></span> CONSTANT <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"CONSTANT"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token keyword"><span class="token keyword">enum</span></span> <span class="token class-name"><span class="token class-name">InnerEnum</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        E1<span class="token punctuation"><span class="token punctuation">,</span></span> E2<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">InnerClass</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">InnerInterface</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">performInnerAction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">performAction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> У цьому складнішому прикладі є кілька обмежень, які інтерфейси беззастережно накладають щодо вкладених конструкцій та оголошень методу, і до виконання цього примушує компілятор Java. Перш за все, навіть якщо це не було оголошено очевидно, кожне оголошення методу в інтерфейсі є <strong>публічним (public)</strong> (і може бути лише публічним). Таким чином, наступні оголошення методів еквівалентні: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">performAction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">performAction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Варто згадати, що кожен окремий метод в інтерфейсі явно оголошений <strong>абстрактним</strong> і навіть ці оголошення методу еквівалентні: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">abstract</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">performAction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">performAction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">performAction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Що стосується оголошених полів констант, додатково до того, що вони є <strong>публічними</strong> , вони також неявно <strong>статичні</strong> і позначені, як <strong>final</strong> . Тому такі оголошення також еквівалентні: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">String</span></span> CONSTANT <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"CONSTANT"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> CONSTANT <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"CONSTANT"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> І, нарешті, вкладені класи, інтерфейси чи підрахунки, крім того, що є <strong><em>публічними</em></strong> , також неявно оголошені як <strong>static</strong> . Наприклад, дані оголошення також еквівалентні: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">InnerClass</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span>

<span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">InnerClass</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Стиль, який ви оберете - це ваша особиста перевага, проте знання цих простих властивостей інтерфейсів може врятувати вас від непотрібного введення. 
<h3>3. Інтерфейс-маркер</h3>Інтерфейс маркери - це особливий вид інтерфейсу, який не має методів або інших вкладених конструкцій. Як це визначає бібліотека Java: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">Cloneable</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Інтерфейс-маркери - не контракти по суті, але частково корисна техніка, щоб "прикріпити" або "зв'язати" деяку специфічну межу з класом. Наприклад, щодо <strong>Cloneable</strong> , клас позначений як доступний для клонування, проте, спосіб, яким це можна або слід реалізувати, не є частиною інтерфейсу. Ще один дуже відомий і широко використовуваний приклад інтерфейс-маркера - <code class=" language-none">Serializable</code>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">Serializable</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Цей інтерфейс позначає клас, як придатний для перетворення на послідовну форму (серіалізацію) і десеріалізацію (deserialization), і знову, це не вказує спосіб, як це можна або слід реалізовувати. Інтерфейс-маркери займають своє місце в об'єктно-орієнтованому програмуванні, хоча вони не задовольняють головну мету інтерфейсу, щоб бути контрактом.&nbsp; 
<h3>4. ФУНКЦІОНАЛЬНІ ІНТЕРФЕЙСИ, МЕТОДИ ЗА УМОВЧЕННЯМ І СТАТИЧНІ МЕТОДИ</h3>З випусків Java 8 інтерфейси отримали нові дуже цікаві можливості: статичні методи, методи за замовчуванням і автоматичне перетворення з лямбд (функціональні інтерфейси). У розділі інтерфейси ми підкреслювали той факт, що інтерфейси в Java можуть тільки оголошувати методи, але не забезпечують їх реалізацію. З методом за промовчанням, все інакше: інтерфейс може відзначити метод ключовим словом <strong>default</strong> та забезпечити реалізацію для нього. Наприклад: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>javacodegeeks<span class="token punctuation"><span class="token punctuation">.</span></span>advanced<span class="token punctuation"><span class="token punctuation">.</span></span>design</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">InterfaceWithDefaultMethods</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">performAction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token keyword"><span class="token keyword">default</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">performDefaulAction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token comment"><span class="token comment">// Implementation here</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Будучи на рівні екземпляра, методи за замовчуванням могли бути перевизначені кожною реалізацією інтерфейсу, але тепер інтерфейси можуть включати <strong>статичні</strong> методи, наприклад: package com.javacodegeeks.advanced.design; 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">InterfaceWithDefaultMethods</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">createAction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token comment"><span class="token comment">// Implementation here</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Можна сказати, що надання реалізації в інтерфейсі завдає поразки цілому задуму контрактного програмування. Але є багато причин, чому ці функції були введені в мову Java і незалежно від того, наскільки вони корисні або збивають з пантелику, вони є там для вас і вашого користування. Функціональні інтерфейси це зовсім інша історія і вони випробувані як дуже корисні доповнення до мови. В основному, функціональний інтерфейс - це інтерфейс лише з одним абстрактним методом, оголошеним у ньому. <code class=" language-none">Runnable</code>інтерфейс із стандартної бібліотеки – це дуже гарний приклад цієї концепції. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token annotation punctuation"><span class="token annotation punctuation">@FunctionalInterface</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">Runnable</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">run</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Компілятор Java по-різному обробляє функціональні інтерфейси і може перетворити лямбда-функцію на реалізацію функціонального інтерфейсу, де це має сенс. Давайте розглянемо наступний опис функції:&nbsp; 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">runMe</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">Runnable</span></span> r <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    r<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">run</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Для виклику цієї функції Java 7 і нижче повинна надаватися реалізація інтерфейсу <code class=" language-none">Runnable</code>(наприклад використовуючи анонімні класи), але Java 8 достатньо передати реалізацію методу run() використовуючи синтаксис лямбди: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java"><span class="token function"><span class="token function">runMe</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">-&gt;</span></span> <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token string"><span class="token string">"Run!"</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Крім того, анотація <strong>@FunctionalInterface</strong> (анотації будуть розкриті в деталях у 5 частині підручника) натякає, що компілятор може перевірити, чи містить інтерфейс лише один абстрактний метод, тому будь-які зміни, внесені в інтерфейсі в майбутньому, не порушуватимуть цього припущення. 
<h3>5. АБСТРАКТНІ КЛАСИ</h3>Ще одна цікава концепція, яку підтримує Java, — поняття абстрактних класів. Абстрактні класи частково схожі на інтерфейси Java 7 і дуже близькі інтерфейсу з методом за замовчуванням Java 8. На відміну від звичайних класів, не можна створювати екземпляри абстрактного класи, але він може бути підкласом (зверніться до розділу "Спадкування" для отримання більш докладної інформації ). Що ще важливіше, абстрактні класи можуть містити абстрактні методи: особливий вид методів без реалізації, як і інтерфейс. Наприклад: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>javacodegeeks<span class="token punctuation"><span class="token punctuation">.</span></span>advanced<span class="token punctuation"><span class="token punctuation">.</span></span>design</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">abstract</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">SimpleAbstractClass</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">performAction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token comment"><span class="token comment">// Implementation here</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">abstract</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">performAnotherAction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> У цьому прикладі клас <code class=" language-none">SimpleAbstractClass</code>оголошений як <strong>абстрактний</strong> і містить один оголошений абстрактний метод. Абстрактні класи дуже корисні, більшість або навіть деякі частини деталей реалізації можуть спільно використовуватися з багатьма підкласами. Як би там не було, вони, як і раніше, залишають двері прочиненими і дозволяють налаштувати поведінку, властиву кожному з підкласу за допомогою абстрактних методів. Варто згадати, на відміну інтерфейсів, які можуть містити лише <strong>громадські</strong> оголошення, абстрактні класи можуть використовувати всю силу правил доступності, щоб управляти видимістю абстрактного способу. 
<h3>6. НЕЗМІННІ КЛАСИ</h3>Незмінність стає все більш важливою в розробці програмного забезпечення в наш час. Підйом багатоядерних систем викликало багато питань, пов'язаних із спільним використанням даних та паралелізмом. Але одна проблема виразно виникла: невеликий (або навіть відсутність) зміненого стану призводить до кращої розширюваності (масштабованості) і більш простого міркування про систему. На жаль, мова Java не забезпечує гідну підтримку класової незмінності. Однак, користуючись комбінацією технік, можна проектувати класи, які незмінні. Насамперед, всі поля класу мають бути остаточні (позначені як <strong>final</strong> ). Це добрий початок, але не дає гарантій.&nbsp; 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>javacodegeeks<span class="token punctuation"><span class="token punctuation">.</span></span>advanced<span class="token punctuation"><span class="token punctuation">.</span></span>design</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Collection</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">ImmutableClass</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token keyword"><span class="token keyword">long</span></span> id<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> arrayOfStrings<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">Collection</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> collectionOfString<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> По-друге, стежте за правильною ініціалізацією: якщо поле є посиланням на колекцію або масив, не призначайте ті поля безпосередньо з аргументів конструктора, разом робіть копії. Це буде гарантувати, що стан колекції або масиву не буде змінено за межами. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">ImmutableClass</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token keyword"><span class="token keyword">long</span></span> id<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> arrayOfStrings<span class="token punctuation"><span class="token punctuation">,</span></span>
        <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">Collection</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> collectionOfString<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>id <span class="token operator"><span class="token operator">=</span></span> id<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>arrayOfStrings <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Arrays</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">copyOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> arrayOfStrings<span class="token punctuation"><span class="token punctuation">,</span></span> arrayOfStrings<span class="token punctuation"><span class="token punctuation">.</span></span>length <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>collectionOfString <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ArrayList</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span> collectionOfString <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> І, нарешті, забезпечення належного доступу (гетери). Для колекцій, незмінний вигляд має бути наданий у вигляді обгортки&nbsp; <code class=" language-none">Collections.unmodifiableXxx</code>: З масивами єдиний спосіб забезпечити справжню незмінність – це надати копію замість повернення посилання на масив. Це може бути неприйнятним з практичної точки зору, оскільки це дуже залежить від розміру масиву і може покласти величезний тиск на збирача сміття. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> <span class="token function"><span class="token function">getArrayOfStrings</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">return</span></span> <span class="token class-name"><span class="token class-name">Arrays</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">copyOf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> arrayOfStrings<span class="token punctuation"><span class="token punctuation">,</span></span> arrayOfStrings<span class="token punctuation"><span class="token punctuation">.</span></span>length <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Навіть цей маленький приклад дає хорошу ідею, що незмінність ще громадянин першого класу в Java. Все може бути ускладнене, якщо незмінний клас має поле, що посилається на об'єкт іншого класу. Ті класи повинні бути також незмінними, проте немає жодного способу це забезпечити. Є кілька гідних аналізаторів вихідного коду Java, як FindBugs і PMD, які можуть суттєво допомогти, перевіряючи ваш код і вказуючи на загальні недоліки програмування Java. Ці інструменти – великі друзі будь-якого розробника Java. 
<h3>7. АНОНІМНІ КЛАСИ</h3>У попередній Java 8 era, анонімні класи були єдиним способом забезпечити оперативне визначення класів та негайне створення екземпляра. Метою анонімних класів було зменшити шаблон та забезпечити короткий та легкий шлях представлення класів як запис. Давайте поглянемо на типовий старомодний шлях породити новий потік у Java: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>javacodegeeks<span class="token punctuation"><span class="token punctuation">.</span></span>advanced<span class="token punctuation"><span class="token punctuation">.</span></span>design</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">AnonymousClass</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Thread</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>
            <span class="token comment"><span class="token comment">// Example of creating anonymous class which implements</span></span>
            <span class="token comment"><span class="token comment">// Runnable interface</span></span>
            <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Runnable</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
                <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">run</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                    <span class="token comment"><span class="token comment">// Implementation here</span></span>
                <span class="token punctuation"><span class="token punctuation">}</span></span>
            <span class="token punctuation"><span class="token punctuation">}</span></span>
        <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">start</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> У цьому прикладі реалізація <code class=" language-none">Runnable</code>interface надається відразу як анонімний клас. Хоча є деякі обмеження, пов'язані з анонімними класами, основні недоліки їх використання — докладний синтаксис конструкцій, яким зобов'язує Java як мову. Навіть просто анонімний клас, який нічого не робить, вимагає щонайменше 5 ліній коду щоразу під час запису. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Runnable</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">run</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> На щастя, з Java 8, лямбдою і функціональними інтерфейсами всі ці стереотипи скоро підуть, нарешті написання коду Java буде виглядати по-справжньому коротко. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>javacodegeeks<span class="token punctuation"><span class="token punctuation">.</span></span>advanced<span class="token punctuation"><span class="token punctuation">.</span></span>design</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">AnonymousClass</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Thread</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">-&gt;</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span> <span class="token comment"><span class="token comment">/* Implementation here */</span></span> <span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">start</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre>
<h3>8. ВИДИМІСТЬ</h3>Ми вже трохи говорабо про правила видимості та доступності Java в частині 1 підручника. У цій частині ми збираємося повернутися до цієї теми знову, але у контексті створення підкласів. <img data-id="a3adfeae-4af2-44da-91b6-8f864edddfc5" data-max-width="625" alt="Проектування Класів та Інтерфейсів (Переклад статті) - 2" src="https://cdn.javarush.com/images/article/a3adfeae-4af2-44da-91b6-8f864edddfc5/512.jpeg" style="width: 625px;">Видимість різних рівнів дозволяє або забороняє класам переглядати інші класи або інтерфейси (наприклад, якщо вони знаходяться в різних пакетах або вкладені один в одного) або підкласів бачити та отримувати доступ до методів, конструкторів та полів їхніх батьків. У наступному розділі, успадкування, ми побачимо це у дії. 
<h3>9. СПАДЧИНА</h3>Спадкування - одне з ключових понять об'єктно-орієнтованого програмування, що виступає як основа побудови класу зв'язків. У поєднанні з видимістю та правилами доступності, успадкування дозволяє проектувати класи ієрархії, з можливістю розширення та підтримування. На понятійному рівні, успадкування в Java реалізується за допомогою створення підкласів та ключового слова <strong>extends</strong>, разом із батьківським класом. Підклас успадковує всі публічні та захищені елементи батьківського класу. Крім того, підклас успадковує package-private елементи батьківського класу, якщо обидва (підклас та клас) знаходяться в одному пакеті. При цьому, дуже важливо незалежно від того, що ви намагаєтеся спроектувати, дотримуватися мінімального набору методу, які клас виставляє публічно або для його підкласів. Наприклад, давай ті розглянемо клас <code class=" language-none">Parent</code>та його підклас <code class=" language-none">Child</code>, щоб продемонструвати різницю у рівнях видимості та їх ефекти. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>javacodegeeks<span class="token punctuation"><span class="token punctuation">.</span></span>advanced<span class="token punctuation"><span class="token punctuation">.</span></span>design</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Parent</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token comment"><span class="token comment">// Everyone can see it</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> CONSTANT <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Constant"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token comment"><span class="token comment">// No one can access it</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> privateField<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token comment"><span class="token comment">// Only subclasses can access it</span></span>
    <span class="token keyword"><span class="token keyword">protected</span></span> <span class="token class-name"><span class="token class-name">String</span></span> protectedField<span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token comment"><span class="token comment">// No one can see it</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">PrivateClass</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token comment"><span class="token comment">// Only visible to subclasses</span></span>
    <span class="token keyword"><span class="token keyword">protected</span></span> <span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">ProtectedInterface</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token comment"><span class="token comment">// Everyone can call it</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">publicAction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token comment"><span class="token comment">// Only subclass can call it</span></span>
    <span class="token keyword"><span class="token keyword">protected</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">protectedAction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token comment"><span class="token comment">// No one can call it</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">privateAction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token comment"><span class="token comment">// Only subclasses in the same package can call it</span></span>
    <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">packageAction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre>
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>javacodegeeks<span class="token punctuation"><span class="token punctuation">.</span></span>advanced<span class="token punctuation"><span class="token punctuation">.</span></span>design</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">// Resides in the same package as parent class</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Child</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Parent</span></span> <span class="token keyword"><span class="token keyword">implements</span></span> <span class="token class-name"><span class="token class-name">Parent<span class="token punctuation"><span class="token punctuation">.</span></span>ProtectedInterface</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">protected</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">protectedAction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token comment"><span class="token comment">// Calls parent's method implementation</span></span>
        <span class="token keyword"><span class="token keyword">super</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">protectedAction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">packageAction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token comment"><span class="token comment">// Do nothing, no call to parent's method implementation</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">childAction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>protectedField <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"value"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Спадкування – дуже велика тема сама по собі, з великою кількістю тонких деталей, характерних для Java. Однак, є кілька правил, які легко дотримуватися, і які можуть дуже допомогти зберегти стислість в класовій ієрархії. У Java кожен підклас може перевизначати будь-які успадковані методи його батька, якщо він не був оголошений як остаточний (final). Однак, немає спеціального синтаксису або ключового слова, щоб позначити метод як перевизначений, що може призвести до плутанини. Ось чому була введена інструкція <strong>@Override</strong> : щоразу, коли ваша мета - перевизначити успадкований спосіб, будь ласка, використовуйте інструкцію <strong>@Override</strong>, щоб стисло позначити це. Інша дилема, з якою Java розробники постійно стикаються в проектування - це побудова класів ієрархії (з конкретними або абстрактними класами) порівняно з реалізацією інтерфейсів. Настійно рекомендуємо надавати перевагу інтерфейсам по відношенню до класів або абстрактних класів, де це можливо. Інтерфейси легші, їх простіше тестувати та підтримувати, плюс до всього, вони мінімізують побічні ефекти змін реалізації. Багато просунуті техніки програмування, такі як створення проксі (proxy) класів у стандартній бібліотеці Java, покладаються на інтерфейси. 
<h3>10. МНОЖНЕ СПАДЧИНА</h3>На відміну від С++ та деяких інших мов, Java не підтримує множинне успадкування: Java кожен клас може мати тільки одного прямого батька (з класом <code class=" language-none">Object</code>у вершині ієрархії). Проте, клас може реалізовувати кілька інтерфейсів, і, таким чином, стікування (stacking) інтерфейсів - єдиний спосіб досягти (або імітувати) множинне успадкування Java. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>javacodegeeks<span class="token punctuation"><span class="token punctuation">.</span></span>advanced<span class="token punctuation"><span class="token punctuation">.</span></span>design</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">MultipleInterfaces</span></span> <span class="token keyword"><span class="token keyword">implements</span></span> <span class="token class-name"><span class="token class-name">Runnable</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">AutoCloseable</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">run</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token comment"><span class="token comment">// Some implementation here</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">close</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">throws</span></span> <span class="token class-name"><span class="token class-name">Exception</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token comment"><span class="token comment">// Some implementation here</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Реалізація кількох інтерфейсів насправді досить потужна, але часто необхідність знову і знову використовувати реалізацію призводить до глибокої класової ієрархії як спосіб подолати відсутність підтримки множинного успадкування Java.&nbsp; 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">A</span></span> <span class="token keyword"><span class="token keyword">implements</span></span> <span class="token class-name"><span class="token class-name">Runnable</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">run</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token comment"><span class="token comment">// Some implementation here</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre>
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token comment"><span class="token comment">// Class B wants to inherit the implementation of run() method from class A.</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">B</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">A</span></span> <span class="token keyword"><span class="token keyword">implements</span></span> <span class="token class-name"><span class="token class-name">AutoCloseable</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">close</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">throws</span></span> <span class="token class-name"><span class="token class-name">Exception</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token comment"><span class="token comment">// Some implementation here</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre>
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token comment"><span class="token comment">// Class C wants to inherit the implementation of run() method from class A</span></span>
<span class="token comment"><span class="token comment">// and the implementation of close() method from class B.</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">C</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">B</span></span> <span class="token keyword"><span class="token keyword">implements</span></span> <span class="token class-name"><span class="token class-name">Readable</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">int</span></span> <span class="token function"><span class="token function">read</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>nio<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>CharBuffer</span></span> cb<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">throws</span></span> <span class="token class-name"><span class="token class-name">IOException</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token comment"><span class="token comment">// Some implementation here</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> І так далі. Нещодавній випуск Java 8 вирішує проблему з використанням методів за замовчуванням. Через методи за замовчуванням, інтерфейси фактичні стали надавати не тільки контракт, а й реалізацію. Отже, класи, які реалізують ці інтерфейси, також автоматично успадкують ці реалізовані методи. Наприклад: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>javacodegeeks<span class="token punctuation"><span class="token punctuation">.</span></span>advanced<span class="token punctuation"><span class="token punctuation">.</span></span>design</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">DefaultMethods</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Runnable</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">AutoCloseable</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">default</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">run</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token comment"><span class="token comment">// Some implementation here</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">default</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">close</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">throws</span></span> <span class="token class-name"><span class="token class-name">Exception</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token comment"><span class="token comment">// Some implementation here</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span>

<span class="token comment"><span class="token comment">// Class C inherits the implementation of run() and close() methods from the</span></span>
<span class="token comment"><span class="token comment">// DefaultMethods interface.</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">C</span></span> <span class="token keyword"><span class="token keyword">implements</span></span> <span class="token class-name"><span class="token class-name">DefaultMethods</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">Readable</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">int</span></span> <span class="token function"><span class="token function">read</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>nio<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>CharBuffer</span></span> cb<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">throws</span></span> <span class="token class-name"><span class="token class-name">IOException</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token comment"><span class="token comment">// Some implementation here</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Майте на увазі, що множинне спадкування дуже потужний, але й у той же час небезпечний інструмент. Добре відому проблему «Ромб смерті» часто називають основним дефектом реалізації множинного наслідування, тому розробники змушені проектувати класи ієрархії дуже ретельно. На жаль, інтерфейси Java 8 з методами за замовчуванням також стають жертвою цих дефектів. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">A</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">default</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">performAction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span>

<span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">B</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">A</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">default</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">performAction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span>

<span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">C</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">A</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">default</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">performAction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Наприклад, наступний фрагмент коду не вдасться скомпілювати: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class="  language-java"><span class="token comment"><span class="token comment">// E is not compilable unless it overrides performAction() as well</span></span>
<span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">E</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">B</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">C</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> На даний момент, справедливо сказати, що Java як мова завжди намагався уникнути кутових випадків об'єктно-орієнтованого програмування, але, оскільки мова розвивається, деякі з тих випадків стали раптово з'являється.&nbsp; 
<h3>11. СПАДЧИНА І КОМПОЗИЦІЯ</h3>На щастя, успадкування не єдиний шлях спроектувати ваш клас. Іншою альтернативою, яка, на думку багатьох розробників, є набагато кращою, ніж спадкування, є композиція. Ідея дуже проста: замість створення ієрархії класів їх потрібно компонувати з інших класів. Давайте подивимося на цей приклад: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class="  language-java"><span class="token comment"><span class="token comment">// E is not compilable unless it overrides performAction() as well</span></span>
<span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">E</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">B</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">C</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Клас <code class=" language-none">Vehicle</code>складається з двигуна (engine) та коліс (плюс багато інших частин, які залишені осторонь для простоти). Однак, можна сказати, що клас <code class=" language-none">Vehicle</code>так само є машиною (engine), тому може бути спроектована з використанням успадкування.&nbsp; 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Vehicle</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Engine</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">Wheels</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> wheels<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token comment"><span class="token comment">// ...</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Яке рішення проектування буде правильним? Загальні основні рекомендації відомі як IS-A (є) і HAS-A (містить) принципи. IS-A - це зв'язок успадкування: підклас також задовольняє класову специфікацію батьківського класу та різновид батьківського класу (Прим. перекладача: У книзі Heading in Java принцип IS-A описаний так: "Коли один клас успадковує інший, ми говоримо, що дочірній клас ( підклас) розширює батьківський Якщо ви хочете дізнатися, чи розширює одна сутність іншу, проведіть перевірку на відповідність - IS-A (є).») Отже, HAS-A - це зв'язок композиції: клас володіє (або містить) об'єкт, який В більшості випадків, принцип HAS-A працює краще, ніж IS-A з ряду причин:&nbsp; 
<ul>
 <li>Проектування гнучкіше;</li>
 <li>Модель стабільніша, оскільки зміни не поширюються через класову ієрархію;</li>
 <li>Клас та його композиція слабо пов'язані порівняно з композицією, яка щільно пов'язує батька та його підклас.</li>
 <li>Логічний хід думки в класі простіше, тому що всі його залежності включені в ньому ж, в одному місці.&nbsp;</li>
</ul>Як би там не було, успадкування має своє місце, вирішує низку існуючих проблем проектування у різний спосіб, так що не слід ним нехтувати. Будь ласка, утримуйте ці дві альтернативи в голові під час проектування вашої об'єктно-орієнтованої моделі. 
<h3>12. ІНКАПСУЛЯЦІЯ.</h3>Поняття інкапсуляції в об'єктно-орієнтованому програмуванні полягає у прихованні всіх деталей реалізації (як режим роботи, внутрішні методи тощо) від зовнішнього світу. Переваги від інкапсуляції у зручності супроводу та легкості змін. Внутрішня реалізація класу ховається, робота з даними класу відбувається виключно через публічні методи класу (реальна проблема, якщо ви розробляєте бібліотеку чи фреймфорки (структури), використану багатьма людьми). Інкапсуляція в Java досягається за допомогою правил видимості та доступності. У Java вважається, що найкраще ніколи не виставляти поля безпосередньо, тільки за допомогою гетерів (getters) і сетерів (setters) (якщо поля не позначені як остаточні (final)). Наприклад: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>javacodegeeks<span class="token punctuation"><span class="token punctuation">.</span></span>advanced<span class="token punctuation"><span class="token punctuation">.</span></span>design</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Encapsulation</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> email<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> address<span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Encapsulation</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> email <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>email <span class="token operator"><span class="token operator">=</span></span> email<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">String</span></span> <span class="token function"><span class="token function">getAddress</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> address<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">setAddress</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> address<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>address <span class="token operator"><span class="token operator">=</span></span> address<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">String</span></span> <span class="token function"><span class="token function">getEmail</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> email<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Цей приклад нагадує те, що називається <strong>JavaBeans</strong> у мові Java: стандартні класи Java, написані відповідно до набору угод, одна з яких дає доступ до полів лише за допомогою гетер та сеттер методів. Як ми вже підкреслювали у розділі спадкування, будь ласка, завжди дотримуйтесь мінімального контракту публічності у класі, використовуючи принципи інкапсуляції. Все, що не повинно бути публічним – має стати приватним (або protected/package private, залежить від проблеми, яку ви вирішуєте). У довгостроковій перспективі це окупиться, даючи вам свободу в проектуванні без внесення критичних змін (або, принаймні, мінімізують їх).&nbsp; 
<h3>13. КІНЦЕВІ КЛАСИ І МЕТОДИ</h3>У Java є спосіб запобігти можливості класу стати підкласом від іншого класу: інший клас має бути оголошений як остаточний (final).&nbsp; 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>javacodegeeks<span class="token punctuation"><span class="token punctuation">.</span></span>advanced<span class="token punctuation"><span class="token punctuation">.</span></span>design</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">FinalClass</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Це ключове слово <strong>final</strong> в оголошення методу запобігає можливість перевизначення методу в підкласах.&nbsp; 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>javacodegeeks<span class="token punctuation"><span class="token punctuation">.</span></span>advanced<span class="token punctuation"><span class="token punctuation">.</span></span>design</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">FinalMethod</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">performAction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Немає загальних правил, щоб вирішити повинен клас чи методи бути остаточними чи ні. Остаточні класи і методи обмежують розширюваність і дуже складно думати наперед, чи повинен клас бути успадкованим, або повинен або не повинен бути перевизначений в майбутньому. Це особливо важливо для розробників бібліотеки, оскільки рішення проектування подібні до цього могли б суттєво обмежити застосовність бібліотеки. Стандартна бібліотека Java має кілька прикладів остаточних класів, причому найбільш відомий - це клас String. На ранній стадії було прийнято це рішення, щоб запобігти будь-яким спробам розробників з'явитися з власним, «найкращим» рішенням реалізації string.&nbsp; 
<h3>14. ЩО ДАЛІ</h3>У цій частині уроку ми розглянули концепції об'єктно-орієнтованого програмування Java. Ми також коротко пройшлися контрактним програмуванням, торкнулися деяких функціональних понять і побачабо, як мова розвивалася з часом. У наступній частині уроку ми збираємось зустріти generics та як вони змінюють спосіб наближення типової безпеки у програмуванні.&nbsp; 
<h3>15. СКАЧАТИ ПОХІДНИЙ КІД</h3>Завантажити вихідний ви можете тут - <a href="http://www.javacodegeeks.com/wp-content/uploads/2015/09/advanced-java-part-3.zip" rel="nofollow" target="_blank">advanced-java-part-3</a> Джерело: <a href="https://www.javacodegeeks.com/2015/09/how-to-design-classes-and-interfaces.html" rel="nofollow" target="_blank">How to design Classes an</a>