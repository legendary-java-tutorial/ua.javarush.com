10 підказок з перевизначення методу toString() у Java (частина 1)
<p>----------------------------------------</p>
Метод Java використовується для надання ясної і достатньої інформації про об'єкт ( ) в зручному для людини вигляді. Правильне перевизначення методу може допомогти та у Java програми надаючи цінну та важливу інформацію. Оскільки визначений у
<p>----------------------------------------</p>
<strong>10 підказок з перевизначення методу toString() у Java - ToStringBuilder Netbeans Eclipse</strong> <img data-id="436e7fd7-f4c0-4ea3-9bad-37f73315fd9f" data-max-width="850" alt="10 підказок з перевизначення методу toString() у Java (частина 1) - 1" src="https://cdn.javarush.com/images/article/436e7fd7-f4c0-4ea3-9bad-37f73315fd9f/800.jpeg" style="width: 850px;">
<h2>Java toString метод</h2><code class=" language-none">toString</code>Метод Java використовується для надання ясної і достатньої інформації про об'єкт ( <code class=" language-none">Object</code>) в зручному для людини вигляді. Правильне перевизначення методу <code class=" language-none">toString</code>може допомогти <a href="https://javarevisited.blogspot.com/2011/05/top-10-tips-on-logging-in-java.html" rel="nofollow" target="_blank">у веденні журналу роботи</a> та у <a href="https://javarevisited.blogspot.com/2011/07/java-debugging-tutorial-example-tips.html" rel="nofollow" target="_blank">налагодженні</a> Java програми надаючи цінну та важливу інформацію. Оскільки <code class=" language-none">toString()</code>визначений у <code class=" language-none">java.lang.Object</code>класі та його реалізація за умовчанням не надає багато інформації, завжди найкращою практикою є перевизначення даного методу у класі-нащадку. Фактично, якщо ви створюєте важливий або загальний клас типу <code class=" language-none">Order</code>, <code class=" language-none">Trade</code>або <code class=" language-none">Employee</code>завжди перевизначайте <a href="https://javarevisited.blogspot.com/2011/02/how-to-write-equals-method-in-java.html" rel="nofollow" target="_blank">equals</a> , <a href="https://javarevisited.blogspot.com/2011/02/how-to-write-equals-method-in-java.html" rel="nofollow" target="_blank">hashCode</a> , <a href="https://javarevisited.blogspot.com/2011/11/how-to-override-compareto-method-in.html" rel="nofollow" target="_blank">compareTo</a> і <code class=" language-none">toString</code>методи в Java. За замовчуванням реалізація<code class=" language-none">toString</code>створює висновок у вигляді <code class=" language-none">package.class@hashCode</code>, наприклад для нашого прикладу <code class=" language-none">toString()</code>, <code class=" language-none">toString()</code>метод класу <code class=" language-none">Country</code>надрукує test.Country@18e2b22 де 18e2b22 це хеш-код об'єкта в шістнадцятковому вигляді, якщо ви викличете<a href="https://javarevisited.blogspot.com/2011/02/how-hashmap-works-in-java.html" rel="nofollow" target="_blank"> hashCode</a> метод, то він поверне 260943370, що є <a href="https://javarevisited.blogspot.com/2011/10/convert-decimal-binary-octal-java.html" rel="nofollow" target="_blank">десятковим</a> еквівалентом Ця інформація не є особливо корисною під час пошуку будь-якої проблеми. Давайте подивимося на приклад з реального життя, де вам потрібно знайти проблему в з'єднанні з мережею, в тому випадку якщо ви хочете знати з яким саме хостом і портом намагається з'єднатися ваша система і якщо друкує тільки інформацію за умовчанням, то неможливо уявити <code class=" language-none">Socket</code>реальну <code class=" language-none">ServerSocket</code>проблему <code class=" language-none">toString</code>, але з перевизначеною реалізацією<code class=" language-none">toString</code>вони можуть надати корисну інформацію, таку як ім'я хоста та номер порту. У цій Java-консультації ми дамо кілька підказок щодо перевизначення методу <code class=" language-none">toString</code>з прикладами коду. 
<h2>Як перевизначити метод toString в Java:</h2>Друк форматованої дати (тобто день/місяць/рік) замість "сирого" значення. Це дуже корисна підказка при перевизначенні Java-методу <code class=" language-none">toString</code>. Звичайний <code class=" language-none">toString()</code>клас <code class=" language-none">java.util.Date</code>не виводить форматовану дату і включає багато деталей, які не завжди потрібні. Якщо ви використовуєте частковий <a href="https://javarevisited.blogspot.com/2011/09/convert-date-to-string-simpledateformat.html" rel="nofollow" target="_blank">DateFormat</a> , тобто. dd-MM-yy у вашому додатку, то ви напевно хотіли б бачити цей формат замість даного за умовчанням. IDE зазвичай не генерує форматований висновок <code class=" language-none">Date</code>і це те, що вам потрібно зробити самому, але це того варте. Прочитайте <a href="https://javarevisited.blogspot.com/2011/09/convert-date-to-string-simpledateformat.html" rel="nofollow" target="_blank">Як роздрукувати Date у форматі ddMMyy у Java</a> , де детально описано форматування <code class=" language-none">Date</code>у Java. Ви також можете використовувати <a href="https://javarevisited.blogspot.com/2012/03/simpledateformat-in-java-is-not-thread.html" rel="nofollow" target="_blank">SimpleDataFormat</a> клас або бібліотеку Joda Date time для цього. 
<h2>Документування формату toString</h2>Якщо ваш метод <code class=" language-none">toString()</code>не виводить дані у вигляді поле = значення, то гарною ідеєю буде документування формату виведення <code class=" language-none">toString</code>, особливо для важливих об'єктів типу Працівник або Студент. Наприклад якщо метод <code class=" language-none">toString()</code>класу <code class=" language-none">Работник(Employee)</code>друкує " <em>John-101-Sales-9846387321</em> " то гарною практикою буде вказати формат як "ім'я-ID-відділ-контакт", але в той же час не давайте клієнту можливість отримувати інформацію з методу <code class=" language-none">toString()</code>, ви повинні завжди надавати відповідні методи для отримання даних, такі як <code class=" language-none">getName()</code>, <code class=" language-none">getId()</code>, <code class=" language-none">getContact()</code>і так далі, оскільки інформація отримана з <code class=" language-none">toString()</code>подання об'єкта є крихкою і схильна до помилок, так що клієнт завжди повинен мати чистий шлях отримання інформації. 
<h2>Використовуйте StringBuilder для складання виводу toString()</h2>Якщо ви пишете код для методу <code class=" language-none">toString()</code>Java, тоді використовуйте <a href="https://javarevisited.blogspot.com/2011/07/string-vs-stringbuffer-vs-stringbuilder.html" rel="nofollow" target="_blank">StringBuilder</a> щоб додати окремі атрибути. Якщо ви використовуєте IDE на кшталт <a href="https://javarevisited.blogspot.com/2011/02/how-to-setup-remote-debugging-in.html" rel="nofollow" target="_blank">Eclipse</a> , Netbeans або IntelliJ тоді використання <code class=" language-none">StringBuilder</code>і метод <code class=" language-none">append()</code>замість оператора + для складання <code class=" language-none">toString</code>, так само є правильним шляхом. За замовчуванням Eclipse і Netbeans генерують <code class=" language-none">toString</code>з оператором конкатенації. 
<h2>Використання анотації @Override</h2>Використання <code class=" language-none">@Override</code>при перевизначенні методу Java це одна з кращих практик в мові. Але ця підказка не така важлива, як це було б у випадку з перевизначенням методів <code class=" language-none">equals()</code>і <code class=" language-none">compareTo()</code>, оскільки перевантаження замість перевизначення може створити більш тонкі помилки, що складно обчислюються. У будь-якому випадку краще використовувати інструкцію <code class=" language-none">@Overrride</code>. 
<h2>Друк вмісту масиву замість виведення об'єкта масиву</h2>Масив це об'єкт в Java але він не перевизначає метод <code class=" language-none">toString</code>і коли ви друкуєте масив, то за замовчуванням формат виводу не є особливо корисним, оскільки ми хотіли б бачити вміст масиву. До речі, це ще одна причина <a href="https://javarevisited.blogspot.com/2012/03/why-character-array-is-better-than.html" rel="nofollow" target="_blank">чому char[] array краще String</a> для зберігання чутливих даних, таких як пароль. Знайдіть час поглянути чи допомагає друк вмісту масиву вашим клієнтам чи ні і якщо це має сенс, то друкуйте вміст масиву замість об'єкта. З міркувань продуктивності краще використовувати <code class=" language-none">Collection</code>такі як <code class=" language-none">ArrayList</code>або <a href="https://javarevisited.blogspot.com/2012/06/hashset-in-java-10-examples-programs.html" rel="nofollow" target="_blank">HashSet</a> замість <code class=" language-none">Array</code>зберігання інших об'єктів. 
<h2>Бонусні підказки</h2>Ще кілька бонусних підказок з перевизначення методу <code class=" language-none">toString</code>Java. 
<ol>
 <li>
  <p>Друкувати виведення <code class=" language-none">toString</code>в кілька рядків або в один ґрунтуючись на його довжині.</p></li>
 <li>
  <p>Включати повні імена класів у виставу <code class=" language-none">toString</code>, тобто <code class=" language-none">package.class</code>щоб уникнути будь-якого нерозуміння.</p></li>
 <li>
  <p>Можна пропускати значення null або показувати їх, але краще показувати. Іноді вони корисні, оскільки показують, яке поле є <code class=" language-none">null</code>під час якогось інциндента, наприклад <a href="https://javarevisited.blogspot.com/2012/06/common-cause-of-javalangnullpointerexce.html" rel="nofollow" target="_blank">NullPointerException</a> .</p></li>
 <li>
  <p>Використовуйте формат ключ-значення, наприклад <code class=" language-none">member.name=member.value</code>більшість IDE підтримують це.</p></li>
 <li>
  <p>Включайте успадкованих членів, якщо ви вважаєте, що вони повинні надавати необхідну інформацію до класу спадкоємця.</p></li>
 <li>
  <p>Іноді об'єкт містить багато необов'язкових і обов'язкових параметрів, як ми показали в прикладі <a href="https://javarevisited.blogspot.com/2012/06/builder-design-pattern-in-java-example.html" rel="nofollow" target="_blank">шаблону Builder</a> , коли практично неможливо роздрукувати всі поля, в цьому випадку можна виводити тільки обов'язкові поля, тим більше, що у нас є необов'язкові.</p></li>
</ol>