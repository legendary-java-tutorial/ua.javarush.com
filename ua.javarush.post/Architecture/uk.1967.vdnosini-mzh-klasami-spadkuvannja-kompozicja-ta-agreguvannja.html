Відносини між класами. Спадкування, композиція та агрегування
<p>----------------------------------------</p>
Вітання! Сьогодні ми докладно розглянемо ще один принцип об'єктно-орієнтованого програмування (ООП) – успадкування. Заодно вивчимо інші типи відносин між класами - композицію та агрегування. Ця тема не буде складною: ти вже багато разів сти
<p>----------------------------------------</p>
Вітання! Сьогодні ми докладно розглянемо ще один принцип об'єктно-орієнтованого програмування (ООП) – успадкування. Заодно вивчимо інші типи відносин між класами - композицію та агрегування. Ця тема не буде складною: ти вже багато разів стикався з наслідуванням та його прикладами у минулих лекціях. Сьогодні головним буде закріпити твої знання, детальніше розглянути механізм успадкування та ще раз пробігтися за прикладами:) Отже, поїхали!
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="1b6c4908-c764-4724-b12a-8d639b1e50a8" data-max-width="710" alt="Відносини між класами.  Спадкування, композиція та агрегування - 1" src="https://cdn.javarush.com/images/article/1b6c4908-c764-4724-b12a-8d639b1e50a8/512.jpeg" style="width: 710px;">
 </div>
</div>
<h2>Спадкування в Java та його переваги</h2>Як ти, напевно, пам'ятаєш, <em><strong>спадкування (inheritance)</strong></em> — механізм, який дозволяє описати новий клас на основі існуючого (батьківського). При цьому властивості та функціональність батьківського класу запозичуються новим класом. Давай згадаємо приклад успадкування з попередніх лекцій: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Car</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> model<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">int</span></span> maxSpeed<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">int</span></span> yearOfManufacture<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Car</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> model<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token keyword"><span class="token keyword">int</span></span> maxSpeed<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token keyword"><span class="token keyword">int</span></span> yearOfManufacture<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>model <span class="token operator"><span class="token operator">=</span></span> model<span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>maxSpeed <span class="token operator"><span class="token operator">=</span></span> maxSpeed<span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>yearOfManufacture <span class="token operator"><span class="token operator">=</span></span> yearOfManufacture<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>


<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">gas</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token comment"><span class="token comment">//...газ</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">brake</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token comment"><span class="token comment">//...гальмо</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span>


<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Truck</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Car</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Truck</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> model<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token keyword"><span class="token keyword">int</span></span> maxSpeed<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token keyword"><span class="token keyword">int</span></span> yearOfManufacture<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">super</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>model<span class="token punctuation"><span class="token punctuation">,</span></span> maxSpeed<span class="token punctuation"><span class="token punctuation">,</span></span> yearOfManufacture<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span>



<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Sedan</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Car</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Sedan</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> model<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token keyword"><span class="token keyword">int</span></span> maxSpeed<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token keyword"><span class="token keyword">int</span></span> yearOfManufacture<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">super</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>model<span class="token punctuation"><span class="token punctuation">,</span></span> maxSpeed<span class="token punctuation"><span class="token punctuation">,</span></span> yearOfManufacture<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Є програма, в рамках якої ми працюємо з різними типами автомобілів. Навіть якщо ти не автолюбитель, напевно знаєш, що типів цих самих автомобілів у світі безліч :) Тому загальні властивості автомобілів виділяємо в загальний клас-батьок - <code class=" language-none">Car</code>. А що спільного у всіх автомобілів, незалежно від типу? Будь-яка машина має рік випуску, назву моделі та максимальну швидкість. Ці властивості виносимо у поля <code class=" language-none">model</code>, <code class=" language-none">maxSpeed</code>, <code class=" language-none">yearOfManufacture</code>. Що стосується поведінки, будь-яка машина може газувати та гальмувати :) Цю поведінку ми визначаємо в методах <code class=" language-none">gas()</code>і <code class=" language-none">brake()</code>. Які вигоди нам це дає? Насамперед — скорочення обсягу коду. Звичайно, можемо обійтися без батьківського класу. Але оскільки кожна машина повинна вміти газувати та гальмувати, нам доведеться створювати методи.<code class=" language-none">gas()</code>й <code class=" language-none">brake()</code>у класі <code class=" language-none">Truck</code>, у класі <code class=" language-none">Sedan</code>, у класі <code class=" language-none">F1Car</code>, класі <code class=" language-none">Sportcar</code>й у всіх інших класах машин. Уяви, скільки зайвого коду ми при цьому напишемо. Не забувай і про поля model, maxSpeed ​​і yearOfManufacture: якщо відмовимося від батьківського класу, будемо створювати їх у кожному з класів-машин! <img data-id="c69af702-f57c-4ad4-aea3-11522ad2c17e" data-max-width="850" alt="Відносини між класами.  Спадкування, композиція та агрегування - 2" src="https://cdn.javarush.com/images/article/c69af702-f57c-4ad4-aea3-11522ad2c17e/800.jpeg" style="width: 850px;"> Коли у нас набереться пара десятків класів-машин, обсяг коду, що повторюється, стане дійсно серйозним. Винесення загальних полів та методів (ще кажуть — «стану» та «поведінки») до класу-батька дозволить нам заощадити купу часу та місця. Якщо ж якийсь тип має властивості або методи, унікальні тільки для нього і відсутні в інших типів машин, — не біда. Їх завжди можна створити в класі-нащадку, окремо від решти. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">F1Car</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Car</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">pitStop</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

       <span class="token comment"><span class="token comment">//...піт-стоп роблять тільки гоночні автомобілі</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

       <span class="token class-name"><span class="token class-name">F1Car</span></span> formula1Car <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">F1Car</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       formula1Car<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">gas</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       formula1Car<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">pitStop</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       formula1Car<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">brake</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Візьмемо випадок із гоночними машинами Формули-1. Вони, на відміну «родичів», є унікальне поведінка — іноді вони заїжджають на піт-стоп. Нам це не заважає. Загальну поведінку ми вже описали в батьківському класі <code class=" language-none">Car</code>, а специфічну поведінку класів-нащадків можемо додати усередині класів. <img data-id="f8abca9b-b5e0-4fc8-b91a-236a70946b11" data-max-width="850" alt="Відносини між класами.  Спадкування, композиція та агрегування - 3" src="https://cdn.javarush.com/images/article/f8abca9b-b5e0-4fc8-b91a-236a70946b11/800.jpeg" style="width: 850px;"> Це стосується і полів: якщо у дочірнього класу є унікальні властивості, спокійно оголошуємо ці поля всередині нього і не переживаємо :) <strong>Можливість повторного використання коду – головна перевага спадкування. </strong> Для програміста дуже важливо не писати зайвого обсягу коду. Ти не раз зіткнешся з цим у роботі. Будь ласка, запам'ятай ще одну вкрай важливу річ: <strong>Java не має множинного успадкування.</strong>Кожен клас успадковується лише від одного класу. Про причини цього докладніше поговоримо у майбутніх лекціях, поки просто запам'ятай. Цим Java, до речі, відрізняється від інших ООП-мов. Наприклад, у С++ множинне успадкування є. З успадкуванням все більш-менш зрозуміло — йдемо далі. 
<h2>Композиція та агрегування</h2>Класи та об'єкти можуть бути пов'язані один з одним. Спадкування описує зв'язок «є» (або англійською «IS A»). Лев є Тваринним. Таке ставлення легко висловити за допомогою успадкування, де <code class=" language-none">Animal</code>буде батьківським класом, а <code class=" language-none">Lion</code>нащадком. Однак не всі зв'язки в світі описуються таким чином. Наприклад, клавіатура безумовно якось пов'язана з комп'ютером, але <strong>вона не є комп'ютером</strong> . Руки якось пов'язані з людиною, але вони не є людиною. У цих випадках в його основі лежить інший тип відношення: не є, а є частиною (HAS A). Рука не є людиною, але є частиною людини. Клавіатура не є комп'ютером, але є частиною комп'ютера. Відносини HAS A можна описати в коді, використовуючи механізми <strong>композиції</strong> та<strong>агрегування</strong> . Різниця між ними полягає у «суворості» цих зв'язків. Наведемо простий приклад: У нас є наша <code class=" language-none">Car</code>машина. Кожна машина має двигун. Крім того, кожна машина має пасажирів усередині. У чому принципова різниця між полями <code class=" language-none">Engine engine</code>і <code class=" language-none">Passenger [] passengers</code>? Якщо у машини всередині сидить пасажир <code class=" language-none">А</code>, це не означає, що в ній не можуть перебувати <code class=" language-none">B</code>пасажири <code class=" language-none">C</code>. Одна машина може відповідати кільком пасажирам. Крім того, якщо всіх пасажирів висадити із машини, вона продовжить спокійно функціонувати. Зв'язок між класом <code class=" language-none">Car</code>та масивом пасажирів <code class=" language-none">Passenger [] passengers</code>менш суворий. Вона називається <em>агрегацією</em> . Є непогана стаття з цієї теми: <a href="http://java-course.ru/begin/relations/" rel="nofollow" target="_blank">Відносини між класами (об'єктами)</a>. У ній наведено ще один добрий приклад агрегації. Припустимо, у нас є клас <code class=" language-none">Student</code>, який позначає студента, та клас <code class=" language-none">StudentsGroup</code>(група студентів). Студент може входити і до клубу любителів фізики, і до студентського фан-клубу «Зоряних війн» або команди КВК. <em>Композиція</em> - суворіший тип зв'язку. При використанні композиції об'єкт не тільки є частиною якогось об'єкта, але й не може належати до іншого об'єкта того ж типу. Найпростіший приклад – двигун автомобіля. Двигун є частиною автомобіля, але може бути частиною іншого автомобіля. Як бачиш, їх зв'язок набагато суворіший, ніж у <code class=" language-none">Car</code>і <code class=" language-none">Passengers</code>. <img data-id="2aa305d5-f7c0-49d2-860a-1cba259b91f9" data-max-width="850" alt="Відносини між класами.  Спадкування, композиція та агрегування - 4" src="https://cdn.javarush.com/images/article/2aa305d5-f7c0-49d2-860a-1cba259b91f9/800.jpeg" style="width: 850px;">