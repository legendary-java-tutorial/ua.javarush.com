Паттерн Command своїми словами
<p>----------------------------------------</p>
Розібрався-таки ґрунтовно (як мені здається) з патером і хочу спробувати розповісти про нього "своїми словами". Виходячи з Вікіпедії, можемо дізнатися, що мета його - це . У принципі написано чітко і правильно, але це теоретично. А як це зр
<p>----------------------------------------</p>
<h2>Привіт усім, Форумчани!</h2>Розібрався-таки ґрунтовно (як мені здається) з патером <code class=" language-none">Command</code>і хочу спробувати розповісти про нього "своїми словами". <img data-id="8db18801-0304-409e-9123-4d00fe6f0fa4" data-max-width="850" alt="Паттерн Command своїми словами - 1" src="https://cdn.javarush.com/images/article/8db18801-0304-409e-9123-4d00fe6f0fa4/800.jpeg" style="width: 850px;">Виходячи з Вікіпедії, можемо дізнатися, що мета його - це <em>створення структури, в якій клас-відправник та клас-одержувач не залежать один від одного безпосередньо. Організація зворотного виклику до класу, який включає клас-відправник</em>. У принципі написано чітко і правильно, але це теоретично. А як це зробити? Саме цим починаються проблеми, т.к. опис не так ясно і очевидно. Тому я як розібрався, вирішив розповісти вам як я це зрозумів, може комусь і знадобиться: Виходячи з опису мети цього патерна, комбінуватиму опис відразу з кодом, щоб було наочніше, т.к. у тій самій вікіпедії узагальнабо для багатьох мов і тому опис відокремлено від прикладу. У цьому патерні є чотири терміни, поки приймемо їх як даність: команди( <code class=" language-none">command</code>), приймач команд( <code class=" language-none">receiver</code>), що викликає команди( <code class=" language-none">invoker</code>) та клієнт( <code class=" language-none">client</code>). Приклад братиму з тієї ж Вікіпедії, він цілком стерпний. <strong>Завдання</strong> є клас <code class=" language-none">Light</code>, який вміє дві речі: увімкнути світло і вимкнути. Він у термінах патерну буде "приймач команд (<code class=" language-none">receiver</code>)" 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token comment"><span class="token comment">/*Receiver class*/</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Light</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
     <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Light</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>  <span class="token punctuation"><span class="token punctuation">}</span></span>

     <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">turnOn</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"The light is on"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
     <span class="token punctuation"><span class="token punctuation">}</span></span>

     <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">turnOff</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"The light is off"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
     <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Створимо інтерфейс з одним методом <code class=" language-none">execute()</code>, який виконуватиме і який називається в термінах патерну "команда ( <code class=" language-none">command</code>)" 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token comment"><span class="token comment">/*the Command interface*/</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">Command</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">execute</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Необхідно інкапсулювати виконання умінь класу <code class=" language-none">Light</code>. Для цього ми створимо класи <code class=" language-none">TurnOnLightCommand</code>та <code class=" language-none">TurnOffLightCommand</code>, які реалізують інтерфейс <code class=" language-none">Command</code>і які прийматимуть у конструкторі об'єкт класу <code class=" language-none">Light</code>. І кожен із них виконуватиме лише одну дію. Один викликатиме метод <code class=" language-none">turnOn()</code>, а інший <code class=" language-none">turnOff()</code>. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token comment"><span class="token comment">/*the Command for turning on the light*/</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">TurnOnLightCommand</span></span> <span class="token keyword"><span class="token keyword">implements</span></span> <span class="token class-name"><span class="token class-name">Command</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">Light</span></span> theLight<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">TurnOnLightCommand</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Light</span></span> light<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>theLight<span class="token operator"><span class="token operator">=</span></span>light<span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">execute</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
      theLight<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">turnOn</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span>

<span class="token comment"><span class="token comment">/*the Command for turning off the light*/</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">TurnOffLightCommand</span></span> <span class="token keyword"><span class="token keyword">implements</span></span> <span class="token class-name"><span class="token class-name">Command</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">Light</span></span> theLight<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">TurnOffLightCommand</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Light</span></span> light<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>theLight<span class="token operator"><span class="token operator">=</span></span>light<span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">execute</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
      theLight<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">turnOff</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Тепер настав час створити об'єкт, який приймав ці інкапсульовані методи об'єкта <code class=" language-none">Light</code>. Він у термінах патерну називається викликає команди (invoker). Назвемо його <code class=" language-none">Switch</code>і нехай він прийматиме в конструкторі змінні <code class=" language-none">Command</code>, які будуть використовуватися у створених методах <code class=" language-none">flipUp()</code>та <code class=" language-none">flipDown()</code>. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token comment"><span class="token comment">/*the Invoker class*/</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Switch</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">Command</span></span> flipUpCommand<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">Command</span></span> flipDownCommand<span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Switch</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Command</span></span> flipUpCommand<span class="token punctuation"><span class="token punctuation">,</span></span><span class="token class-name"><span class="token class-name">Command</span></span> flipDownCommand<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
         <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>flipUpCommand<span class="token operator"><span class="token operator">=</span></span>flipUpCommand<span class="token punctuation"><span class="token punctuation">;</span></span>
         <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>flipDownCommand<span class="token operator"><span class="token operator">=</span></span>flipDownCommand<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">flipUp</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
         flipUpCommand<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">execute</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">flipDown</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
         flipDownCommand<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">execute</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Ну і звичайно створимо клас, який буде використовувати їх, щоб зрозуміти, що відбувається взагалі. Він буде називати метод main, в якому і відбуватиметься вся дія: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token comment"><span class="token comment">/*The test class*/</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">TestCommand</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token comment"><span class="token comment">// создаем об'єкт, который будет использоваться</span></span>
       <span class="token class-name"><span class="token class-name">Light</span></span> l<span class="token operator"><span class="token operator">=</span></span><span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Light</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token comment"><span class="token comment">// создаем об'єкты для всех умений об'єкта Light:</span></span>
       <span class="token class-name"><span class="token class-name">Command</span></span> switchUp<span class="token operator"><span class="token operator">=</span></span><span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">TurnOnLightCommand</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>l<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token class-name"><span class="token class-name">Command</span></span> switchDown<span class="token operator"><span class="token operator">=</span></span><span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">TurnOffLightCommand</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>l<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

       <span class="token comment"><span class="token comment">// Создаемтся invoker, с которым мы будем непосредственно контактировать:</span></span>
       <span class="token class-name"><span class="token class-name">Switch</span></span> s<span class="token operator"><span class="token operator">=</span></span><span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Switch</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>switchUp<span class="token punctuation"><span class="token punctuation">,</span></span>switchDown<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

       <span class="token comment"><span class="token comment">// вот проверка этого, используем методы:</span></span>
       s<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">flipUp</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       s<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">flipDown</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> На висновку буде наступне: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token string"><span class="token string">"The light is on"</span></span>
<span class="token string"><span class="token string">"The light is off"</span></span></code></pre>
<h2>Де це застосовується?</h2>По меті ясно, що й навіщо це потрібно, саме: у ситуації, коли потрібно відокремити конкретне виконання, дуже зручно. Щоб використання якихось функцій не залежало від конкретної реалізації і можна було змінювати без шкоди системи. якось так ...) Пишіть свої коментарі, давайте обговорювати, може щось можна зробити простіше і розповісти краще, будемо все правити, якщо необхідно) Щоб для тих, хто читатиме перший раз, було якомога зрозуміліше. Ну і кому сподобається стаття - ставить "+" на ній :) Для мене це важливо) Згодом хочу написати ще про <code class=" language-none">Builder</code>, <code class=" language-none">Singleton</code>та інші. <strong>також мої інші статті:</strong>
<ul>
 <li>
  <p><a href="https://codegym.cc/groups/posts/1707-testovoe-zadanie-napisatjh-interpretator-na-jazihk-brainfuck" target="_blank">Тестове завдання: "Написати Інтерпретатор на мову BrainFuck"</a></p></li>
 <li>
  <p><a href="https://codegym.cc/groups/posts/1700-testovoe-zadanie-image-comparison" target="_blank">Тестове завдання "Image Comparison"</a></p></li>
 <li>
  <p><a href="https://codegym.cc/groups/posts/1696-java---bihstree-siljhnee-i-vihshe-zarplatih-ukrainskikh-programmistov" target="_blank">Java - швидше, сильніше і вище! Зарплати українських програмістів</a></p></li>
 <li>
  <p><a href="https://codegym.cc/groups/posts/1675-istorija-uspekha-spustja-15-goda-ot-nachala-obuchenija" target="_blank">Історія успіху через 1,5 року від початку навчання</a></p></li>
 <li>
  <p><a href="https://codegym.cc/groups/posts/1692-tekhnicheskie-voprosih-na-sobesedovanii" target="_blank">Технічні питання на співбесіді</a></p></li>
 <li>
  <p><a href="https://codegym.cc/groups/posts/1693-kak-nayti-rabotu-rassihlka-rezjume" target="_blank">Як знайти роботу? Розсилка резюме</a></p></li>
 <li>
  <p><a href="https://codegym.cc/groups/posts/1694-professionaljhnoe-vihgoranie-kak-ustojatjh" target="_blank">Професійне вигоряння. Як встояти?</a></p></li>
 <li>
  <p><a href="https://codegym.cc/groups/posts/1689-angliyskiy-dlja-it-i-dlja--sobesedovanija" target="_blank">Англійська для IT та для співбесіди</a></p></li>
 <li>
  <p><a href="https://codegym.cc/groups/posts/1352-kak-sozdatjh-ispolnjaemihy-jar-v-intellij-idea--how-to-create-jar-in-idea" target="_blank">Як створити jar, що виконується, в Intellij IDEA / how to create jar in IDEA</a></p></li>
 <li>
  <p><a href="https://codegym.cc/groups/posts/1685-pattern-singleton-svoimi-slovami" target="_blank">Паттерн Singleton своїми словами</a></p></li>
 <li>
  <p><a href="https://codegym.cc/groups/posts/1356-pomogite-nuzhna-motivacija" target="_blank">Допоможіть, потрібна мотивація!</a></p></li>
</ul>