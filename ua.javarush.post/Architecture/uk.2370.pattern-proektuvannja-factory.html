Паттерн проектування Factory
<p>----------------------------------------</p>
Привіт друг! Сьогодні ми продовжимо вивчати з тобою патерни проектування. У цій лекції говоритимемо про Фабрика. Обговоримо з тобою, яку проблему вирішують за допомогою даного шаблону, подивимося на прикладі того, як фабрика допомагає відкр
<p>----------------------------------------</p>
Привіт друг! Сьогодні ми продовжимо вивчати з тобою патерни проектування. У цій лекції говоритимемо про Фабрика. Обговоримо з тобою, яку проблему вирішують за допомогою даного шаблону, подивимося на прикладі того, як фабрика допомагає відкривати кав'ярню. А ще я дам 5 простих кроків для створення фабрики. <img data-max-width="800" data-id="c63d71f2-b30f-49c4-8860-53096a4511eb" class="img-fluid" alt="Паттерн проектування Factory - 1" src="https://cdn.javarush.com/images/article/c63d71f2-b30f-49c4-8860-53096a4511eb/800.jpeg" style="width: 800px;">Щоб бути з усіма на одній хвилі і легко вловлювати суть, тобі мають бути знайомі такі теми: 
<ul>
 <li>Спадкування в Java</li>
 <li>Звуження та розширення посилальних типів у Java</li>
 <li>Взаємодія між різними класами та об'єктами</li>
</ul>
<h2>Що таке Фабрика?</h2>Шаблон проектування Фабрика дозволяє керувати створенням об'єктів. Процес створення нового об'єкта не те щоб простий, а й не надто складний. Усі ми знаємо, що для створення нового об'єкта необхідно використовувати оператор <code class=" language-none"><span class="text-bold">new</span></code>. І може здатися, що тут нема чим керувати, проте це не так. Складнощі можуть виникнути, коли в нашому додатку є певний клас, який має безліч спадкоємців, і необхідно створювати екземпляр певного класу залежно від деяких умов. <span class="text-bold">Фабрика</span> — це шаблон проектування, який допомагає вирішити проблему створення різних об'єктів залежно від умов. Абстрактно, чи не так? Більше конкретики та ясності з'явиться, коли ми розглянемо приклад нижче. 
<h2>Створюємо різні види кави</h2>Припустимо, ми хочемо автоматизувати кав'ярню. Нам необхідно навчитися готувати різні види кави. Для цього в нашому додатку ми створимо клас кави та її похідні: американо, капучино, еспресо, латте – ті види кави, які ми готуватимемо. Почнемо із загального кавового класу: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">grindCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token comment"><span class="token comment">// перемалываем кофе</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">makeCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token comment"><span class="token comment">// делаем кофе</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">pourIntoCup</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token comment"><span class="token comment">// наливаем в чашку</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Далі створимо його спадкоємців: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Americano</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Cappuccino</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">CaffeLatte</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Espresso</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Наші клієнти замовлятимуть будь-який вид кави, і цю інформацію потрібно передавати програмі. Це можна зробити різними способами, наприклад, використовувати <code class=" language-none">String</code>. Але найкраще для цих цілей підійде <code class=" language-none">enum</code>. Створимо <code class=" language-none">enum</code>та визначимо в ньому типи кави, на які ми приймаємо замовлення: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">enum</span></span> <span class="token class-name"><span class="token class-name">CoffeeType</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    ESPRESSO<span class="token punctuation"><span class="token punctuation">,</span></span>
    AMERICANO<span class="token punctuation"><span class="token punctuation">,</span></span>
    CAFFE_LATTE<span class="token punctuation"><span class="token punctuation">,</span></span>
    CAPPUCCINO
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Відмінно, тепер напишемо код нашої кав'ярні: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">CoffeeShop</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token function"><span class="token function">orderCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">CoffeeType</span></span> type<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">Coffee</span></span> coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

        <span class="token keyword"><span class="token keyword">switch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>type<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> AMERICANO<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Americano</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> ESPRESSO<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Espresso</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> CAPPUCCINO<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Cappuc</span></span>с<span class="token function"><span class="token function">ino</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> CAFFE_LATTE<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">CaffeLatte</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span>

        coffee<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">grindCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        coffee<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">makeCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        coffee<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">pourIntoCup</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

        <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Вот ваш кофе! Спасибо, приходите еще!"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> coffee<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Метод <code class=" language-none">orderCoffee</code>можна розділити на дві складові: 
<ol>
 <li>Створення конкретного екземпляра кави в блоці <code class=" language-none">switch-case</code>. Саме тут відбувається те, що робить Фабрика – створення конкретного типу, залежно від умов.</li>
 <li>Саме приготування - перемолка, приготування та розлиття в чашку.</li>
</ol>Що важливо знати, якщо потрібно буде вносити до методу зміни в майбутньому: 
<ol>
 <li>Сам алгоритм приготування (перемолка, приготування та розлиття у чашку) залишиться незмінним (принаймні ми на це розраховуємо).</li>
 <li>А ось асортимент кави може змінитися. Можливо, ми почнемо готувати мок. Мокка. Моккачі… Господь з ним, новий вид кави.</li>
</ol>Ми вже зараз можемо припустити, що в майбутньому, з певною часткою ймовірності, нам доведеться вносити зміни до методу, блоку <code class=" language-none">switch-case</code>. Також можливо, в нашій кав'ярні метод <code class=" language-none">orderCoffee</code>буде не єдиним місцем, в якому ми створюватимемо різні види кави. Отже, вносити зміни доведеться у кількох місцях. Тобі вже зрозуміло, до чого я хилю. Нам потрібно рефакторити. Винести блок, який відповідає за створення кави, в окремий клас із двох причин: 
<ol>
 <li>Ми зможемо перевикористовувати логіку створення кави в інших місцях.</li>
 <li>Якщо асортимент зміниться, нам не доведеться правити код скрізь, де використовуватиметься створення кави. Достатньо змінити код тільки в одному місці.</li>
</ol>Іншими словами, настав час запиляти фабрику. 
<h2>Пабомо нашу першу фабрику</h2>Для цього створимо новий клас, який відповідатиме лише за створення потрібних екземплярів класів кави: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">SimpleCoffeeFactory</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> createCoffee <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">CoffeeType</span></span> type<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">Coffee</span></span> coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

        <span class="token keyword"><span class="token keyword">switch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>type<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> AMERICANO<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Americano</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> ESPRESSO<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Espresso</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> CAPPUCCINO<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Cappucino</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> CAFFE_LATTE<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">CaffeLatte</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span>

        <span class="token keyword"><span class="token keyword">return</span></span> coffee<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Вітаю тебе! Ми щойно реалізували шаблон проектування Фабрика у найпростішому вигляді. Хоча все могло бути ще простіше, якщо зробити метод <code class=" language-none">createCoffee</code>статичним. Але тоді ми втратабо дві можливості: 
<ol>
 <li>успадковуватися від <code class=" language-none">SimpleCoffeeFactory</code>і перевизначати метод <code class=" language-none">createCoffee</code>.</li>
 <li>Впроваджувати необхідну реалізацію фабрики у наші класи.</li>
</ol>До речі, про впровадження. Нам потрібно повернутися до кав'ярні та впровадити нашу фабрику зі створення кави. 
<h2>Використання фабрики в кав'ярню</h2>Перепишемо клас нашої кав'ярні з використанням фабрики: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">CoffeeShop</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">SimpleCoffeeFactory</span></span> coffeeFactory<span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">CoffeeShop</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">SimpleCoffeeFactory</span></span> coffeeFactory<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>coffeeFactory <span class="token operator"><span class="token operator">=</span></span> coffeeFactory<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token function"><span class="token function">orderCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">CoffeeType</span></span> type<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">Coffee</span></span> coffee <span class="token operator"><span class="token operator">=</span></span> coffeeFactory<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">createCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>type<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        coffee<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">grindCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        coffee<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">makeCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        coffee<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">pourIntoCup</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

        <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Вот ваш кофе! Спасибо, приходите еще!"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> coffee<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Чудово. Тепер схематично та лаконічно спробуємо описати структуру шаблону проектування Фабрика. 
<h2>5 кроків до відкриття власної фабрики</h2>Крок 1. У тебе в програмі клас із кількома нащадками, як на малюнку нижче: <img data-max-width="800" data-id="04a99b11-fd01-4899-aecc-6a9a92b524be" class="img-fluid" alt="Паттерн проектування Factory - 2" src="https://cdn.javarush.com/images/article/04a99b11-fd01-4899-aecc-6a9a92b524be/800.jpeg" style="width: 800px;">Крок 2. Ти створюєш <code class=" language-none">enum</code>, в якому визначаєш enum-змінну для кожного класу-спадкоємця: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">enum</span></span> <span class="token class-name"><span class="token class-name">CatType</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    LION<span class="token punctuation"><span class="token punctuation">,</span></span>
    TIGER<span class="token punctuation"><span class="token punctuation">,</span></span>
    BARSIK
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Крок 3. Ти будуєш свою фабрику. Називаєш її <code class=" language-none">MyClassFactory</code>, код нижче: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">CatFactory</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Крок 4. Ти створюєш у своїй фабриці метод <code class=" language-none">createMyClass</code>, який приймає змінну- <code class=" language-none">enum</code> <code class=" language-none">MyClassType</code>. Код нижче: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">CatFactory</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Cat</span></span> <span class="token function"><span class="token function">createCat</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">CatType</span></span> type<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Крок 5. Ти пишеш у тілі методу блок <code class=" language-none">switch-case</code>, в якому перебираєш всі значення enum і створюєш екземпляр класу, відповідний <code class=" language-none">enum</code>значенню: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">CatFactory</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Cat</span></span> <span class="token function"><span class="token function">createCat</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">CatType</span></span> type<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            <span class="token class-name"><span class="token class-name">Cat</span></span> cat <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

            <span class="token keyword"><span class="token keyword">switch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>type<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                <span class="token keyword"><span class="token keyword">case</span></span> LION<span class="token operator"><span class="token operator">:</span></span>
                    cat <span class="token operator"><span class="token operator">=</span></span>  <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Barsik</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                    <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">case</span></span> TIGER<span class="token operator"><span class="token operator">:</span></span>
                    cat <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Tiger</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                    <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">case</span></span> BARSIK<span class="token operator"><span class="token operator">:</span></span>
                    cat <span class="token operator"><span class="token operator">=</span></span>  <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Lion</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                    <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token punctuation"><span class="token punctuation">}</span></span>

            <span class="token keyword"><span class="token keyword">return</span></span> cat<span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Як бос. <a href="https://codegym.cc/welcome" target="_blank"><img id="click_banner1_articles" data-max-width="1024" data-id="b9018e89-260c-47c8-822a-096229717cd1" class="img-fluid" alt="Паттерн проектування Factory - 3" src="https://cdn.javarush.com/images/article/b9018e89-260c-47c8-822a-096229717cd1/1024.jpeg" style="width: 1024px;"></a>
<h2>Як тренуватися</h2>Читати - добре, писати код -ще краще. Якщо у твоєму імені парна кількість букв, спробуй створити свою віртуальну піцерію. Якщо у твоєму імені непарна кількість літер, спробуй створити віртуальний суші-бар. Якщо ти безіменний, тобі пощастило. Сьогодні можеш відпочивати.