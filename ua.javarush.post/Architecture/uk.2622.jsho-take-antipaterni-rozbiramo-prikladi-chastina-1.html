Що таке антипатерни? Розбираємо приклади (частина 1)
<p>----------------------------------------</p>
Всім доброго доби! Днями я проходив співбесіду, і мені поставили питання про антипаттерни: що це за звір такий, які бувають їхні види та приклади на практиці. На запитання я, звичайно, відповів, але дуже поверхово, тому що не сильно заглибл
<p>----------------------------------------</p>
<img data-max-width="512" data-id="4cc3a624-8f85-4069-92b6-5d469b8b33f6" class="img-fluid" alt="Що таке антипатерни?  Розбираємо приклади (частина 1) - 1" src="https://cdn.javarush.com/images/article/4cc3a624-8f85-4069-92b6-5d469b8b33f6/512.jpeg" style="width: 512px;">Всім доброго доби! Днями я проходив співбесіду, і мені поставабо питання про антипаттерни: що це за звір такий, які бувають їхні види та приклади на практиці. На запитання я, звичайно, відповів, але дуже поверхово, тому що не сильно заглиблювався у вивчення цього питання. Після співбесіди я почав нишпорити по просторах інтернету, дедалі більше занурюючись у цю тему. Сьогодні я хотів би зробити невеликий огляд найпопулярніших антипаттернів та їх прикладів, прочитання якого, можливо, дасть вам необхідні знання у цьому питанні. Почнемо! Отже, як міркувати, що таке антипаттерн, давайте згадаємо, що таке патерн. <span class="text-bold">Паттерн</span>- Це повторна архітектурна конструкція для вирішення часто зустрічаються проблем або ситуацій, що виникають при проектуванні програми. Але сьогодні у нас йдеться не про них, а про їхні протилежності — антипатерни. <span class="text-bold">Антипаттерн</span> - це поширений підхід до вирішення класу проблем, що часто зустрічаються, який є неефективним, ризикованим або непродуктивним. Інакше висловлюючись, це патерн помилок (також іноді званий пасткою). <img data-max-width="512" data-id="932cb41b-9eab-42bf-a5db-f18457a60b54" class="img-fluid" alt="Що таке антипатерни?  Розбираємо приклади (частина 1) - 2" src="https://cdn.javarush.com/images/article/932cb41b-9eab-42bf-a5db-f18457a60b54/512.jpeg" style="width: 512px;">Як правило, антипатерни ділять на такі види: 
<ol>
 <li><span class="text-bold">Architectural antipatterns</span> - антипатерни архітектури, що виникають при проектуванні структури системи (як правило архітектором).</li>
 <li><span class="text-bold">Management Anti Pattern</span> - антипатерни в галузі управління, з якими зазвичай стикаються різноманітні менеджери (або групи менеджерів).</li>
 <li><span class="text-bold">Development Anti Pattern</span> - антипатерні проблеми розробки, що виникають під час написання системи рядовими програмістами.</li>
</ol>Екзотика антипатернів набагато ширша, але ми їх розглядати сьогодні не будемо, тому що для звичайних розробників цього буде з головою. Спочатку як приклад розглянемо антипаттерн у сфері управління. 
<h3>1. Analytical paralysis</h3><span class="text-bold">Аналітичний параліч</span>- Вважається класичним організаційним антипаттерном. Його суть полягає в надмірному аналізуванні ситуації при плануванні, так що рішення чи дія не робляться, по суті, паралізуючи розробку. Найчастіше це трапляється у тих випадках, коли мета полягає у досягненні досконалості та повної завершеності періоду аналізу. Цей антипаттерн характеризується ходінням по колу (такий собі замкнутий цикл), переглядом та створенням детальних моделей, що у свою чергу заважає робочому процесу. Наприклад, ви намагаєтеся передбачити речі рівня: а якщо раптом користувач захоче створити список співробітників на основі четвертих і п'ятих літер їх імені, з включенням до списку проектів, яким вони приділабо найбільше робочих годин між Новим Роком і Восьмим березня за чотири попередні роки ? Насправді це надлишок аналізу.<a href="https://businessrevisor.ru/2019/07/analysis-paralysis-kodak-bankruptcy/" rel="nofollow" target="_blank">привів Kodak до банкрутства</a> . Ось пара невеликих порад для боротьби аналітичним паралічем: 
<ol>
 <li>Потрібно визначити довгострокову мету як маяк для прийняття рішень, щоб кожне ваше рішення наближало до мети, а не змушувало тупцювати на місці.</li>
 <li>Не концентруватися на дрібницях (навіщо приймати рішення щодо незначного нюансу так, ніби воно останнє у житті?)</li>
 <li>Вкажіть крайній термін для прийняття рішення.</li>
 <li>Не намагайтеся зробити завдання досконало: краще зробити дуже добре.</li>
</ol>Занадто поглиблюватись і розглядати інші управлінські антипатерни ми зараз не будемо. Тому без передмов переходимо до деяких архітектурних антипаттернів, адже, швидше за все, цю статтю читають майбутні розробники, а не менеджери. 
<h2>2. God object</h2><span class="text-bold">Божественний об'єкт</span> - антипаттерн, який описує зайву концентрацію занадто великої кількості різношерстих функцій, зберігання великої кількості різноманітних даних (об'єкт, навколо якого обертається додаток). Візьмемо невеликий приклад: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">SomeUserGodObject</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> FIND_ALL_USERS_EN <span class="token operator"><span class="token operator">=</span></span> "<span class="token class-name"><span class="token class-name">SELECT</span></span> id<span class="token punctuation"><span class="token punctuation">,</span></span> email<span class="token punctuation"><span class="token punctuation">,</span></span> phone<span class="token punctuation"><span class="token punctuation">,</span></span> first_name_en<span class="token punctuation"><span class="token punctuation">,</span></span> access_counter<span class="token punctuation"><span class="token punctuation">,</span></span> middle_name_en<span class="token punctuation"><span class="token punctuation">,</span></span> last_name_en<span class="token punctuation"><span class="token punctuation">,</span></span> created_date <span class="token class-name"><span class="token class-name">FROM</span></span> users<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> FIND_BY_ID <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"SELECT id, email, phone, first_name_en, access_counter, middle_name_en, last_name_en, created_date FROM users WHERE id = ?"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> FIND_ALL_CUSTOMERS <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"SELECT id, u.email, u.phone, u.first_name_en, u.middle_name_en, u.last_name_en, u.created_date"</span></span> <span class="token operator"><span class="token operator">+</span></span>
           <span class="token string"><span class="token string">"  WHERE u.id IN (SELECT up.user_id FROM user_permissions up WHERE up.permission_id = ?)"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> FIND_BY_EMAIL <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"SELECT id, email, phone, first_name_en, access_counter, middle_name_en, last_name_en, created_dateFROM users WHERE email = ?"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> LIMIT_OFFSET <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">" LIMIT ? OFFSET ?"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> ORDER <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">" ORDER BY ISNULL(last_name_en), last_name_en, ISNULL(first_name_en), first_name_en, ISNULL(last_name_ru), "</span></span> <span class="token operator"><span class="token operator">+</span></span>
           <span class="token string"><span class="token string">"last_name_ru, ISNULL(first_name_ru), first_name_ru"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> CREATE_USER_EN <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"INSERT INTO users(id, phone, email, first_name_en, middle_name_en, last_name_en, created_date) "</span></span> <span class="token operator"><span class="token operator">+</span></span>
           <span class="token string"><span class="token string">"VALUES (?, ?, ?, ?, ?, ?, ?)"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> FIND_ID_BY_LANG_CODE <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"SELECT id FROM languages WHERE lang_code = ?"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                                  <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">JdbcTemplate</span></span> jdbcTemplate<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">Map</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> firstName<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">Map</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> middleName<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">Map</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> lastName<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Long</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> permission<span class="token punctuation"><span class="token punctuation">;</span></span>
                                   <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>
   <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">findAllEnCustomers</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Long</span></span> permissionId<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> jdbcTemplate<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">query</span></span><span class="token punctuation"><span class="token punctuation">(</span></span> FIND_ALL_CUSTOMERS <span class="token operator"><span class="token operator">+</span></span> ORDER<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token function"><span class="token function">userRowMapper</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> permissionId<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">findAllEn</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> jdbcTemplate<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">query</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>FIND_ALL_USERS_EN <span class="token operator"><span class="token operator">+</span></span> ORDER<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token function"><span class="token function">userRowMapper</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Optional</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">findAllEnByEmail</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> email<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">var</span></span> query <span class="token operator"><span class="token operator">=</span></span> FIND_ALL_USERS_EN <span class="token operator"><span class="token operator">+</span></span> FIND_BY_EMAIL <span class="token operator"><span class="token operator">+</span></span> ORDER<span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> <span class="token class-name"><span class="token class-name">Optional</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">ofNullable</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>jdbcTemplate<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">query</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>query<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token function"><span class="token function">userRowMapper</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> email<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
                              <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">findAllWithoutPageEn</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Long</span></span> permissionId<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">Type</span></span> type<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">switch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>type<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
           <span class="token keyword"><span class="token keyword">case</span></span> USERS<span class="token operator"><span class="token operator">:</span></span>
               <span class="token keyword"><span class="token keyword">return</span></span> <span class="token function"><span class="token function">findAllEnUsers</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>permissionId<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
           <span class="token keyword"><span class="token keyword">case</span></span> CUSTOMERS<span class="token operator"><span class="token operator">:</span></span>
               <span class="token keyword"><span class="token keyword">return</span></span> <span class="token function"><span class="token function">findAllEnCustomers</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>permissionId<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
           <span class="token keyword"><span class="token keyword">default</span></span><span class="token operator"><span class="token operator">:</span></span>
               <span class="token keyword"><span class="token keyword">return</span></span> <span class="token function"><span class="token function">findAllEn</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
                              <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>…

   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">RowMapper</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">userRowMapperEn</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>rs<span class="token punctuation"><span class="token punctuation">,</span></span> rowNum<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">-&gt;</span></span>
               <span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">builder</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
                       <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">id</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>rs<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getLong</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"id"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
                       <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">email</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>rs<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"email"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
                       <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">accessFailed</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>rs<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getInt</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"access_counter"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
                       <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">createdDate</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>rs<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"created_date"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">LocalDateTime</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
                       <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">firstName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>rs<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"first_name_en"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
                       <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">middleName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>rs<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"middle_name_en"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
                       <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">lastName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>rs<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"last_name_en"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
                       <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">phone</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>rs<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"phone"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
                       <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">build</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Тут ми бачимо якийсь великий клас, який робить все й одразу. Містить запити до Бази даних, містить у собі якісь дані, також бачимо фасадний метод <code class=" language-none">findAllWithoutPageEn</code>із бізнес-логікою. Такий божественний об'єкт стає величезним та неповоротким для адекватної підтримки. Нам доводиться возитися з ним у кожному шматочку коду: багато вузлів системи покладаються на нього і жорстко з ним пов'язані. Підтримувати такий код стає складніше і складніше. У разі його треба розрубати деякі класи, в кожного з яких буде лише одне призначення (мета). У цьому прикладі можна розбити на клас дао: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">UserDaoImpl</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> FIND_ALL_USERS_EN <span class="token operator"><span class="token operator">=</span></span> "<span class="token class-name"><span class="token class-name">SELECT</span></span> id<span class="token punctuation"><span class="token punctuation">,</span></span> email<span class="token punctuation"><span class="token punctuation">,</span></span> phone<span class="token punctuation"><span class="token punctuation">,</span></span> first_name_en<span class="token punctuation"><span class="token punctuation">,</span></span> access_counter<span class="token punctuation"><span class="token punctuation">,</span></span> middle_name_en<span class="token punctuation"><span class="token punctuation">,</span></span> last_name_en<span class="token punctuation"><span class="token punctuation">,</span></span> created_date <span class="token class-name"><span class="token class-name">FROM</span></span> users<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> FIND_BY_ID <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"SELECT id, email, phone, first_name_en, access_counter, middle_name_en, last_name_en, created_date FROM users WHERE id = ?"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

                                   <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">JdbcTemplate</span></span> jdbcTemplate<span class="token punctuation"><span class="token punctuation">;</span></span>

                                   <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>
   <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">findAllEnCustomers</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Long</span></span> permissionId<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> jdbcTemplate<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">query</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>FIND_ALL_CUSTOMERS <span class="token operator"><span class="token operator">+</span></span> ORDER<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token function"><span class="token function">userRowMapper</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> permissionId<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">findAllEn</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> jdbcTemplate<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">query</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>FIND_ALL_USERS_EN <span class="token operator"><span class="token operator">+</span></span> ORDER<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token function"><span class="token function">userRowMapper</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>

                               <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Клас, що містить дані та методи доступу до них: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">UserInfo</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">Map</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> firstName<span class="token punctuation"><span class="token punctuation">;</span></span>
                     …<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Map</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">getFirstName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> firstName<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">setFirstName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Map</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> firstName<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>firstName <span class="token operator"><span class="token operator">=</span></span> firstName<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
                    <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span></code></pre> І метод з бізнес-логікою буде доречніше винести на сервіс: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">findAllWithoutPageEn</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Long</span></span> permissionId<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">Type</span></span> type<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token keyword"><span class="token keyword">switch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>type<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">case</span></span> USERS<span class="token operator"><span class="token operator">:</span></span>
           <span class="token keyword"><span class="token keyword">return</span></span> <span class="token function"><span class="token function">findAllEnUsers</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>permissionId<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token keyword"><span class="token keyword">case</span></span> CUSTOMERS<span class="token operator"><span class="token operator">:</span></span>
           <span class="token keyword"><span class="token keyword">return</span></span> <span class="token function"><span class="token function">findAllEnCustomers</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>permissionId<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token keyword"><span class="token keyword">default</span></span><span class="token operator"><span class="token operator">:</span></span>
           <span class="token keyword"><span class="token keyword">return</span></span> <span class="token function"><span class="token function">findAllEn</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre>
<h3>3. Singleton</h3>Одинак ​​- це найпростіший патерн, що гарантує, що в однопотоковому додатку буде єдиний екземпляр деякого класу, і надає глобальну точку доступу до цього об'єкта. Докладніше про нього можна почитати ось <a href="https://habr.com/ru/post/27108/" rel="nofollow" target="_blank">тут</a> . Але чи це патерн чи антипаттерн? <img data-max-width="512" data-id="8d86cd68-6689-457c-bc13-b0f3dd4d9aa7" class="img-fluid" alt="Що таке антипатерни?  Розбираємо приклади (частина 1) – 3" src="https://cdn.javarush.com/images/article/8d86cd68-6689-457c-bc13-b0f3dd4d9aa7/512.jpeg" style="width: 512px;">Давайте розглянемо недоліки даного шаблону: 
<ol>
 <li>
  <p>Світовий стан. Коли ми отримуємо доступ до екземпляра класу, ми не знаємо поточний стан цього класу, і хто і коли його змінював, і цей стан може бути зовсім не таким, як очікується. Іншими словами, коректність роботи з синглтон залежить від порядку звернень до нього, що викликає залежність підсистем один від одного і, як наслідок, серйозно підвищує складність розробки.</p></li>
 <li>
  <p>Сінглтон порушує один із принципів SOLID - Single Responsibility Principle - клас синглтона, крім виконання своїх безпосередніх обов'язків, займається ще й контролюванням кількості своїх екземплярів.</p></li>
 <li>
  <p>Залежність звичайного класу синглтона не видно в інтерфейсі класу. Оскільки зазвичай екземпляр синглтона не передається в параметрах методу, а виходить безпосередньо, через <code class=" language-none">getInstance()</code>, виявлення залежності класу від синглтона треба залізти у кожен метод — просто переглянути громадський договір об'єкта недостатньо.</p>
  <p>Наявність синглтона знижує тестованість програми загалом і класів, які використовують синглтон, зокрема. По-перше, замість синглтона не можна підкласти Mock-об'єкт, а по-друге, якщо синглтон має інтерфейс для зміни свого стану, тести залежатимуть один від одного.</p>
  <p>Іншими словами, синглтон підвищує зв'язність, і все перелічене вище є ніщо інше як наслідок підвищення зв'язності.</p>
  <p>І якщо замислитись, використання синглтона можна уникнути. Наприклад, контролю кількості екземплярів об'єкта цілком можна (та й потрібно) використовувати різноманітних фабрики.</p>
  <p>Найбільша ж небезпека чатує при спробі побудувати на основі синглтонів всю архітектуру програми. Такому підходу існує безліч чудових альтернатив. Найголовніший приклад — це Spring, а саме його IoC контейнери: там проблема контролю створення сервісів вирішується природним чином, оскільки вони, за фактом, є "фабриками на стероїдах".</p>
  <p>Зараз існує багато холівара на цю тему, та й вирішувати, синглтон - це патерн або антипаттерн, вже вам.</p>
  <p>А ми на ньому не затримуватимемося і перейдемо до останнього на сьогодні патерну проектування — полтергейсту.</p></li>
</ol>
<h3>4. Poltergeist</h3><span class="text-bold">Полтергейст</span> - це антипаттерн класу, що не має користі, який використовується для виклику методів іншого класу або просто додає непотрібний шар абстракції. Антипаттерн проявляється як короткоживучих об'єктів, позбавлених стану. Ці об'єкти часто використовуються для ініціалізації інших більш стійких об'єктів. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">UserManager</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">UserService</span></span> service<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">UserManager</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">UserService</span></span> userService<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       service <span class="token operator"><span class="token operator">=</span></span> userService<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token class-name"><span class="token class-name">User</span></span> <span class="token function"><span class="token function">createUser</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">User</span></span> user<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> service<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">create</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>user<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token class-name"><span class="token class-name">Long</span></span> <span class="token function"><span class="token function">findAllUsers</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> service<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">findAll</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">size</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token class-name"><span class="token class-name">String</span></span> <span class="token function"><span class="token function">findEmailById</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Long</span></span> id<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> service<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">findById</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>id<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getEmail</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span><span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token class-name"><span class="token class-name">User</span></span> <span class="token function"><span class="token function">findUserByEmail</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> email<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> service<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">findByEmail</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>email<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token class-name"><span class="token class-name">User</span></span> <span class="token function"><span class="token function">deleteUserById</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Long</span></span> id<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> service<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">delete</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>id<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Навіщо нам потрібен об'єкт, який лише посередник і делегує свою роботу комусь іншому? Видаляємо його, а той невеликий функціонал, який він реалізує, виносимо до об'єктів-довгожителів. Далі ми переходимо до патернів, які надають найбільший інтерес для нас (як рядових розробників) - до <span class="text-bold">антипатернів розробки</span> . 
<h3>5. Hard code</h3>От ми й дісталися цього страшного слова — хардкод. Суть даного антипаттерну в тому, що код сильно прив'язаний до конкретної апаратної конфігурації та/або системного оточення, що ускладнює перенесення його на інші конфігурації. Цей антипаттерн тісно пов'язаний із магічними числами (вони часто переплітаються). Приклад: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Connection</span></span> <span class="token function"><span class="token function">buildConnection</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">throws</span></span> <span class="token class-name"><span class="token class-name">Exception</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token class-name"><span class="token class-name">Class</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">forName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"com.mysql.cj.jdbc.Driver"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   connection <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">DriverManager</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getConnection</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"jdbc:mysql://localhost:3306/someDb?characterEncoding=UTF-8&amp;characterSetResults=UTF-8&amp;serverTimezone=UTC"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"user01"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"12345qwert"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">return</span></span> connection<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Прибито цвяхами, чи не так? Тут ми безпосередньо задаємо конфігурацію нашого з'єднання, за підсумком код справно працюватиме тільки з MySQL, і для зміни бази даних потрібно буде залізти в код і ручками все міняти. Хорошим рішенням буде винести конфіги в окремий файл: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java">spring<span class="token operator"><span class="token operator">:</span></span>
  datasource<span class="token operator"><span class="token operator">:</span></span>
    jdbc<span class="token operator"><span class="token operator">-</span></span>url<span class="token operator"><span class="token operator">:</span></span>jdbc<span class="token operator"><span class="token operator">:</span></span>mysql<span class="token operator"><span class="token operator">:</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token operator"><span class="token operator">/</span></span>localhost<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">3306</span></span><span class="token operator"><span class="token operator">/</span></span>someDb<span class="token operator"><span class="token operator">?</span></span>characterEncoding<span class="token operator"><span class="token operator">=</span></span>UTF<span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">8</span></span>
    driver<span class="token operator"><span class="token operator">-</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token operator"><span class="token operator">-</span></span>name<span class="token operator"><span class="token operator">:</span></span> <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>mysql<span class="token punctuation"><span class="token punctuation">.</span></span>cj<span class="token punctuation"><span class="token punctuation">.</span></span>jdbc<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>Driver</span></span>
    username<span class="token operator"><span class="token operator">:</span></span>  user01
    password<span class="token operator"><span class="token operator">:</span></span>  <span class="token number"><span class="token number">12345</span></span>qwert</code></pre> Як варіант ще – винос у константи. 
<h3>6. Boat anchor</h3><span class="text-bold">Човновий якір</span> у контексті антипатернів означає зберігання частин системи, що не використовуються, які залишабося після якоїсь оптимізації або рефакторингу. Також деякі частини коду могли бути залишені «на майбутнє», раптом доведеться їх використовувати. По суті це робить із коду відро для сміття. <img data-max-width="512" data-id="1917219b-9775-4a4c-8fe1-85e10bedb03a" class="img-fluid" alt="Що таке антипатерни?  Розбираємо приклади (частина 1) – 4" src="https://cdn.javarush.com/images/article/1917219b-9775-4a4c-8fe1-85e10bedb03a/512.jpeg" style="width: 512px;">Приклад: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">User</span></span> <span class="token function"><span class="token function">update</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Long</span></span> id<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">User</span></span> request<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token class-name"><span class="token class-name">User</span></span> user <span class="token operator"><span class="token operator">=</span></span> <span class="token function"><span class="token function">mergeUser</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token function"><span class="token function">findById</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>id<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> request<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">return</span></span> userDAO<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">update</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>user<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">User</span></span> <span class="token function"><span class="token function">mergeUser</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">User</span></span> findUser<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">User</span></span> requestUser<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token keyword"><span class="token keyword">return</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>
           findUser<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getId</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
           requestUser<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getEmail</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">!=</span></span> <span class="token keyword"><span class="token keyword">null</span></span> <span class="token operator"><span class="token operator">?</span></span> requestUser<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getEmail</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">:</span></span> findUser<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getEmail</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
           requestUser<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getFirstName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">!=</span></span> <span class="token keyword"><span class="token keyword">null</span></span> <span class="token operator"><span class="token operator">?</span></span> requestUser<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getFirstName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">:</span></span> findUser<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getFirstNameRu</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
           requestUser<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getMiddleName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">!=</span></span> <span class="token keyword"><span class="token keyword">null</span></span> <span class="token operator"><span class="token operator">?</span></span> requestUser<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getMiddleName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">:</span></span> findUser<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getMiddleNameRu</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
           requestUser<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getLastName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">!=</span></span> <span class="token keyword"><span class="token keyword">null</span></span> <span class="token operator"><span class="token operator">?</span></span> requestUser<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getLastName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">:</span></span> findUser<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getLastNameEn</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
           requestUser<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getPhone</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">!=</span></span> <span class="token keyword"><span class="token keyword">null</span></span> <span class="token operator"><span class="token operator">?</span></span> requestUser<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getPhone</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">:</span></span> findUser<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getPhone</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> У нас є метод оновлення, який використовує окремий метод для злиття даних користувача з бази даних і прийшов на оновлення (якщо у порожнього поля, що прийшов на оновлення, то воно записується старим з бази даних). І, наприклад, з'явилася вимога, що записи не повинні об'єднуватися зі старими, а перезаписуватися поверх, навіть якщо є порожні поля: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">User</span></span> <span class="token function"><span class="token function">update</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Long</span></span> id<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">User</span></span> request<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token keyword"><span class="token keyword">return</span></span> userDAO<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">update</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>user<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Як результат, <code class=" language-none">mergeUser</code>вже не використовується і шкода його видаляти: раптом він (або його ідея) ще знадобиться? Такий код лише ускладнює та плутає системи, по суті не несучи зовсім ніякої практичної цінності. Потрібно не забувати, що подібний код з «мертвими шматками» важко передаватиме колезі, коли ви підете на інший проект. Найкращим методом боротьби з човновими якорями є рефакторинг коду, саме видалення даних ділянок коду (на жаль, на жаль). Також при плануванні розробки необхідно враховувати поява подібних якорів (виділяти час на зачистку хвостів). 
<h3>7.Object cesspool</h3>Для опису даного антипаттерну спочатку потрібно познайомитися з патерном <span class="text-bold">пул об'єктів</span> . <span class="text-bold">Пул об'єктів</span> (пул ресурсів) — <a href="https://wiki2.red/%D0%9F%D0%BE%D1%80%D0%BE%D0%B6%D0%B4%D0%B0%D1%8E%D1%89%D0%B8%D0%B5_%D1%88%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD%D1%8B_%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F" rel="nofollow" target="_blank">шаблон проектування, що породжує</a> , набір ініціалізованих і готових до використання об'єктів. Коли додатку потрібен об'єкт, він створюється заново, а береться з цього пулу. Коли об'єкт не потрібен, він знищується, а повертається в пул. Зазвичай використовується для важких об'єктів, які ресурсозатратно щоразу створювати, наприклад з'єднання з базою даних. Давайте розберемо невеликий і простий приклад для прикладу. Отже, у нас є клас, який представляє цей патерн: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">ReusablePool</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token class-name"><span class="token class-name">ReusablePool</span></span> pool<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Resource</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> list <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">LinkedList</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">ReusablePool</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">for</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span> i <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> i <span class="token operator"><span class="token operator">&lt;</span></span> <span class="token number"><span class="token number">3</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> i<span class="token operator"><span class="token operator">++</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
           list<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Resource</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token class-name"><span class="token class-name">ReusablePool</span></span> <span class="token function"><span class="token function">getInstance</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>pool <span class="token operator"><span class="token operator">==</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
           pool <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ReusablePool</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> pool<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Resource</span></span> <span class="token function"><span class="token function">acquireResource</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>list<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">size</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">==</span></span> <span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
           <span class="token keyword"><span class="token keyword">return</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Resource</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">else</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
           <span class="token class-name"><span class="token class-name">Resource</span></span> r <span class="token operator"><span class="token operator">=</span></span> list<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
           list<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">remove</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>r<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
           <span class="token keyword"><span class="token keyword">return</span></span> r<span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">releaseResource</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Resource</span></span> r<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       list<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>r<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Даний клас у нас представлений у вигляді вищеописаного патерну/антипатерну <span class="text-bold">синглтона</span> , тобто може бути тільки один об'єкт даного типу, оперує деякими об'єктами <code class=" language-none">Resource</code>, за замовчуванням в конструкторі пул заповнюється чотирма примірниками; при взятті такого об'єкта він видаляється з пулу (якщо його немає, то створюється і відразу віддається), і наприкінці - метод, щоб покласти об'єкт назад. Об'єкти <code class=" language-none">Resource</code>виглядають так: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Resource</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">Map</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> patterns<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Resource</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       patterns <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">HashMap</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       patterns<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">put</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"заместитель"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"https://studfile.net/preview/3676297/page:3/"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       patterns<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">put</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"мост"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"https://studfile.net/preview/3676297/page:4/"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       patterns<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">put</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"фасад"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"https://studfile.net/preview/3676297/page:5/"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       patterns<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">put</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"строитель"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"https://studfile.net/preview/3676297/page:6/#16"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Map</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">getPatterns</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> patterns<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">setPatterns</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Map</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> patterns<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>patterns <span class="token operator"><span class="token operator">=</span></span> patterns<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Тут у нас невеликий об'єкт, що містить карту з назвами патернів як ключ і посилання на них як значення, а також методів доступу до карти. Дивимося <code class=" language-none">main</code>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">SomeMain</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token class-name"><span class="token class-name">ReusablePool</span></span> pool <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">ReusablePool</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getInstance</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

       <span class="token class-name"><span class="token class-name">Resource</span></span> firstResource <span class="token operator"><span class="token operator">=</span></span> pool<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">acquireResource</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token class-name"><span class="token class-name">Map</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> firstPatterns <span class="token operator"><span class="token operator">=</span></span> firstResource<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getPatterns</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token comment"><span class="token comment">// ......яким-то образом используем нашу мапу.....</span></span>
       pool<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">releaseResource</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>firstResource<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

       <span class="token class-name"><span class="token class-name">Resource</span></span> secondResource <span class="token operator"><span class="token operator">=</span></span> pool<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">acquireResource</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token class-name"><span class="token class-name">Map</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> secondPatterns <span class="token operator"><span class="token operator">=</span></span> firstResource<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getPatterns</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token comment"><span class="token comment">// ......яким-то образом используем нашу мапу.....</span></span>
       pool<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">releaseResource</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>secondResource<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

       <span class="token class-name"><span class="token class-name">Resource</span></span> thirdResource <span class="token operator"><span class="token operator">=</span></span> pool<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">acquireResource</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token class-name"><span class="token class-name">Map</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> thirdPatterns <span class="token operator"><span class="token operator">=</span></span> firstResource<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getPatterns</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token comment"><span class="token comment">// ......яким-то образом используем нашу мапу.....</span></span>
       pool<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">releaseResource</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>thirdResource<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Тут все теж зрозуміло: ми беремо об'єкт пула, витягуємо з нього об'єкт з ресурсами, беремо з нього карту, щось із нею робимо і кладемо все це на місце в пул для подальшого перевикористання. Вуаля: ось вам і патерн пул об'єктів. Але ж ми говорабо про антипатерни, чи не так? Давайте розглянемо такий випадок у <code class=" language-none">main</code>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">Resource</span></span> fourthResource <span class="token operator"><span class="token operator">=</span></span> pool<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">acquireResource</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token class-name"><span class="token class-name">Map</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> fourthPatterns <span class="token operator"><span class="token operator">=</span></span> firstResource<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getPatterns</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token comment"><span class="token comment">// ......яким-то образом используем нашу мапу.....</span></span>
fourthPatterns<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">clear</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
firstPatterns<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">put</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"first"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span><span class="token string"><span class="token string">"blablabla"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
firstPatterns<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">put</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"second"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span><span class="token string"><span class="token string">"blablabla"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
firstPatterns<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">put</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"third"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span><span class="token string"><span class="token string">"blablabla"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
firstPatterns<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">put</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"fourth"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span><span class="token string"><span class="token string">"blablabla"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
pool<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">releaseResource</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>fourthResource<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Тут знову ж таки береться об'єкт ресурсів, береться його map з патернами і щось з ним робиться, але перед збереженням назад в пул об'єктів карта чиститься і забивається незрозумілими даними, що роблять даний об'єкт Resource непридатним для перевикористання. Один із головних нюансів пулу об'єктів — після того, як об'єкт повернуто, він має повернутися до стану, придатного для подальшого перевикористання. Якщо об'єкти після повернення в пул опиняються в неправильному чи невизначеному стані, така конструкція називається об'єктною клоакою. <a href="https://codegym.cc/welcome" target="_blank"><img id="click_banner1_articles" data-max-width="1024" data-id="6152d447-0b72-42ab-9e09-ca1907d4038e" class="img-fluid" alt="Що таке антипатерни?  Розбираємо приклади (частина 1) – 5" src="https://cdn.javarush.com/images/article/6152d447-0b72-42ab-9e09-ca1907d4038e/1024.jpeg" style="width: 1024px;"></a>Зміст нам зберігати об'єкти, непридатні для перевикористання? У цій ситуації можна зробити в конструкторі внутрішню карту незмінною: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Resource</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   patterns <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">HashMap</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   patterns<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">put</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"заместитель"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"https://studfile.net/preview/3676297/page:3/"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   patterns<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">put</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"мост"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"https://studfile.net/preview/3676297/page:4/"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   patterns<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">put</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"фасад"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"https://studfile.net/preview/3676297/page:5/"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   patterns<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">put</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"строитель"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"https://studfile.net/preview/3676297/page:6/#16"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   patterns <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Collections</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">unmodifiableMap</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>patterns<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> (Спроби і бажання змінити вміст впадуть разом з UnsupportedOperationException). <span class="text-bold">Антипатерни</span> - пастки, в які розробник часто встряє через гостру нестачу часу, неуважності, недосвідченості або стусанів з боку менеджерів. Звичайна нестача часу і поспіх може ваботися у великі проблеми для застосування в майбутньому, тому ці помилки потрібно знати і заздалегідь їх уникати. <img data-max-width="512" data-id="47c6d3a7-cb72-4c62-810f-2fc5f8c882a6" class="img-fluid" alt="Що таке антипатерни?  Розбираємо приклади (частина 1) – 6" src="https://cdn.javarush.com/images/article/47c6d3a7-cb72-4c62-810f-2fc5f8c882a6/512.jpeg" style="width: 512px;">На цьому, перша частина статті добігла кінця: <a href="https://codegym.cc/groups/posts/2624-chto-takoe-antipatternih-razbiraem-primerih-chastjh-2" target="_blank">продовження слідує</a> .