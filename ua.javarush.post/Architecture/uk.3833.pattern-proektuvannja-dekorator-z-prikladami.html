Паттерн проектування декоратор з прикладами
<p>----------------------------------------</p>
Паттерн проектування декоратор дозволяє нам динамічно додавати функціональність об'єкту без впливу на поведінку об'єктів того самого класу. Звучить трохи заплутано, але коли побачите код, все стане зрозуміліше. — Декоратор дозволяє додавати
<p>----------------------------------------</p>
Паттерн проектування декоратор дозволяє нам динамічно додавати функціональність об'єкту без впливу на поведінку об'єктів того самого класу. Звучить трохи заплутано, але коли побачите код, все стане зрозуміліше. <strong>Особливості</strong> — Декоратор дозволяє додавати функціональність існуючому об'єкту без зміни його структури, тобто вихідний клас не змінюється. — Паттерн проектування декоратор — це структурний патерн, який забезпечує обгортку для існуючого класу. методів вихідного класу незайманими - Паттерн проектування декоратор найчастіше використовується для дотримання принципу єдиної відповідальності (single responsibility з SOLID), оскільки ми не навантажуємо вихідний клас додатковими обов'язками, а поділяємо їх на класи-декоратори - Декоратор структурно майже аналогічний патерну "ланцюжок відповідальності" ( chain of responsibility) <strong>Необхідно враховувати такі ключові моменти</strong> - Декоратор корисний для можливості модифікувати поведінку об'єкта під час рантайму. Такий код легко підтримувати та розширювати. - Недоліком цього патерну є те, що використовується велика кількість однотипних об'єктів-декораторів - Паттерн декоратор часто використовується в класах Java IO (FileReader, BufferedReader і т. д.) <strong>Що</strong> зробимо реалізує цей інтерфейс - Створимо конкретний декоратор, що успадковується від абстрактного декоратора - Використовуємо конкретний декоратор для "декорування" конкретних реалізацій інтерфейсу <strong>.</strong> Ми створимо інтерфейс Shape та конкретні класи, що реалізують цей інтерфейс. Потім ми створимо абстрактний клас-декоратор ShapeDecorator, що реалізує інтерфейс Shape і має об'єкт Shape як поле класу. <img width="800" height="500" data-id="4d032716-0725-4738-aaa5-88bd15b6d368" alt="Паттерн проектування декоратор з прикладами - 1" src="https://cdn.javarush.com/images/article/4d032716-0725-4738-aaa5-88bd15b6d368/1080.jpeg"> - Shape - ім'я інтерфейсу - Класи Rectangle, Triangle і клас Circle будуть конкретними класами, що реалізують інтерфейс Shape - ShapeDecorator - це абстрактний клас-декоратор, що реалізує той же інтерфейс Shape - RedShapeDecorator - конкретний клас, що реалізує ShapeDecorator - Demo - демонстр ми будемо використовувати RedShapeDecorator для декорування об'єктів Shape <strong>Крок 1</strong> : створюємо інтерфейс Shape 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><strong>Крок 2</strong> : створимо кілька реалізацій цього інтерфейсу. У прикладі нижче буде лише коло, а за фактом створимо ще кілька: прямокутник і трикутник. 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Circle</span> <span class="token keyword">implements</span> <span class="token class-name">Shape</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Я круг!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><strong>Крок 3</strong> : створимо абстрактний декоратор, що реалізує інтерфейс Shape 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">ShapeDecorator</span> <span class="token keyword">implements</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">Shape</span> decoratedShape<span class="token punctuation">;</span>

    <span class="token comment">//Конструктор, принимающий об'єкт Shape</span>
    <span class="token keyword">public</span> <span class="token class-name">ShapeDecorator</span><span class="token punctuation">(</span><span class="token class-name">Shape</span> decoratedShape<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>decoratedShape <span class="token operator">=</span> decoratedShape<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        decoratedShape<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><strong>Крок 4</strong> : створимо конкретний клас-декоратор, що наслідує абстрактний клас 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedShapeDecorator</span> <span class="token keyword">extends</span> <span class="token class-name">ShapeDecorator</span><span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">RedShapeDecorator</span><span class="token punctuation">(</span><span class="token class-name">Shape</span> decoratedShape<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>decoratedShape<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        decoratedShape<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setRedBorder</span><span class="token punctuation">(</span>decoratedShape<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">setRedBorder</span><span class="token punctuation">(</span><span class="token class-name">Shape</span> decoratedShape<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Сообщение от RedShapeDecorator. Цвет границы: красный"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><strong>Крок 5</strong> : використовуємо RedShapeDecorator щоб розфарбувати наші об'єкти 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">Shape</span> circle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Shape</span> redCircle<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedShapeDecorator</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Shape</span> redRectangle<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedShapeDecorator</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Shape</span> redTriangle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedShapeDecorator</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Triangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\nОбычный круг:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        circle<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\nКруг с красной границей:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        redCircle<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\nПрямоугольник с красной границей:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        redRectangle<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\nТреугольник с красной границей:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        redTriangle<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><strong>Крок 6</strong> : дивимося в консоль і радіємо 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java">Обычный круг<span class="token operator">:</span>
Я круг<span class="token operator">!</span>

Круг с красной границей<span class="token operator">:</span>
Я круг<span class="token operator">!</span>
Сообщение от <span class="token class-name">RedShapeDecorator</span><span class="token punctuation">.</span> Цвет границы<span class="token operator">:</span> красный

Прямоугольник с красной границей<span class="token operator">:</span>
Я прямоугольник<span class="token operator">!</span>
Сообщение от <span class="token class-name">RedShapeDecorator</span><span class="token punctuation">.</span> Цвет границы<span class="token operator">:</span> красный

Треугольник с красной границей<span class="token operator">:</span>
Я треугольник<span class="token operator">!</span>
Сообщение от <span class="token class-name">RedShapeDecorator</span><span class="token punctuation">.</span> Цвет границы<span class="token operator">:</span> красный</code></pre> Розібравши на прикладі патерн проектування декоратор, можна дійти невтішного висновку, що його використання виправдано у таких случаях: — Коли ми хочемо додати, поліпшити чи, можливо, видалити поведінка чи стан об'єкта — Коли ми хочемо змінити функціональність одного конкретного об'єкта класу, інші ж залишити без змін Дякуємо! <a href="https://github.com/sbv239/Design-patterns-examples/tree/master/src/Decorator" target="_blank" rel="nofollow">Репозиторій з файлуми проекту</a> За основу <a href="https://www.geeksforgeeks.org/decorator-design-pattern-in-java-with-example/" target="_blank" rel="nofollow">взято статтю</a> із сайту geeksforgeeks.org <a href="https://t.me/java_wine" target="_blank" rel="nofollow">Мій блог</a> Java Dev