Паттерн Singleton своїми словами
<p>----------------------------------------</p>
Розповім сьогодні про патерн проектування (одинак). створити клас, який матиме лише ОДИН об'єкт. Це означає, що скільки б разів до нього не зверталися, повертатиметься той самий об'єкт, який був створений вперше. Це зручна річ і необхідна у
<p>----------------------------------------</p>
<h2>Привіт усім, codeGym!</h2>Розповім сьогодні про патерн проектування <code class=" language-none">Singleton</code>(одинак). <img data-id="1cb048f8-444f-4161-978d-147c6072878d" data-max-width="850" alt="Паттерн Singleton своїми словами - 1" src="https://cdn.javarush.com/images/article/1cb048f8-444f-4161-978d-147c6072878d/800.jpeg" style="width: 850px;"><strong>Мета:</strong> створити клас, який матиме лише ОДИН об'єкт. Це означає, що скільки б разів до нього не зверталися, повертатиметься той самий об'єкт, який був створений вперше. Це зручна річ і необхідна у багатьох місцях, недаремно її впроваджують у фреймворки. <strong>Застосування:</strong>
<ul>
 <li>Наприклад, необхідно підключити базу даних до проекту та класу, який відповідатиме за з'єднання з нею. Один раз створюється з'єднання і немає потрібно створювати його знову і знову</li>
 <li><code class=" language-none">Application settings</code>— клас, що відповідає за налаштування зброї, які потрібні для застосування: хост і порт бази даних і т.д. Вони створюються один раз і використовуються весь час роботи програми.</li>
 <li>є ще безліч прикладів, про які я не сказав, тому пишіть у коментарях свої варіанти! =)</li>
</ul>Після цього вступу, як я розумію, можна показати вже приклад цього класу: (Хоча я впевнений, що кожен з нас зможе придумати реалізацію цього) Ось найпростіший приклад, коли ми ставимо приватним конструктором, тобто. не можна створювати об'єкт. І є статичний метод <code class=" language-none">getInstance()</code>, який надає об'єкт. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Singleton</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
  <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token class-name"><span class="token class-name">Singleton</span></span> instance<span class="token punctuation"><span class="token punctuation">;</span></span>
  <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">Singleton</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token punctuation"><span class="token punctuation">}</span></span>

  <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token class-name"><span class="token class-name">Singleton</span></span> <span class="token function"><span class="token function">getInstance</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>instance <span class="token operator"><span class="token operator">==</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
      instance <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Singleton</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token keyword"><span class="token keyword">return</span></span> instance<span class="token punctuation"><span class="token punctuation">;</span></span>
  <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Є проблеми з багатопоточністю і тоді можна поставити метод <code class=" language-none">getInstance()</code>маркер <code class=" language-none">synchronized</code>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Singleton</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
  <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token class-name"><span class="token class-name">Singleton</span></span> instance<span class="token punctuation"><span class="token punctuation">;</span></span>
  <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">Singleton</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token punctuation"><span class="token punctuation">}</span></span>

  <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">synchronized</span></span> <span class="token class-name"><span class="token class-name">Singleton</span></span> <span class="token function"><span class="token function">getInstance</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>instance <span class="token operator"><span class="token operator">==</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
      instance <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Singleton</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token keyword"><span class="token keyword">return</span></span> instance<span class="token punctuation"><span class="token punctuation">;</span></span>
  <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Насамкінець, як завжди, хочу сказати, що якщо ви думаєте інакше або знайшли у мене помилку — пишіть у коментарях! Ми всі обговоримо, із задоволенням :) Якщо Вам сподобалася стаття, пишіть "+" і я це знатиму. Це для мене важливо :) PS Додаю ще реалізації: На думку <strong>Joshua Bloch</strong> 'а це найкращий спосіб реалізації шаблону<code class=" language-none">Enum Singleton</code>
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">enum</span></span> <span class="token class-name"><span class="token class-name">Singleton</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   INSTANCE<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre><code class=" language-none">Double Checked Locking &amp; volatile</code>
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Singleton</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">volatile</span></span> <span class="token class-name"><span class="token class-name">Singleton</span></span> instance<span class="token punctuation"><span class="token punctuation">;</span></span>

        <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token class-name"><span class="token class-name">Singleton</span></span> <span class="token function"><span class="token function">getInstance</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
      <span class="token class-name"><span class="token class-name">Singleton</span></span> localInstance <span class="token operator"><span class="token operator">=</span></span> instance<span class="token punctuation"><span class="token punctuation">;</span></span>
      <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>localInstance <span class="token operator"><span class="token operator">==</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
         <span class="token keyword"><span class="token keyword">synchronized</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Singleton</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            localInstance <span class="token operator"><span class="token operator">=</span></span> instance<span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>localInstance <span class="token operator"><span class="token operator">==</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
               instance <span class="token operator"><span class="token operator">=</span></span> localInstance <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Singleton</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token punctuation"><span class="token punctuation">}</span></span>
         <span class="token punctuation"><span class="token punctuation">}</span></span>
      <span class="token punctuation"><span class="token punctuation">}</span></span>
      <span class="token keyword"><span class="token keyword">return</span></span> localInstance<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> І ще <code class=" language-none">On Demand Holder idiom</code>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Singleton</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">SingletonHolder</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
      <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">Singleton</span></span> HOLDER_INSTANCE <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Singleton</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token class-name"><span class="token class-name">Singleton</span></span> <span class="token function"><span class="token function">getInstance</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
      <span class="token keyword"><span class="token keyword">return</span></span> <span class="token class-name"><span class="token class-name">SingletonHolder</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>HOLDER_INSTANCE<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre><code class=" language-none">+</code>Лінива ініціалізація <code class=" language-none">+</code>Висока продуктивність <code class=" language-none">-</code>Неможливо використовувати для нестатичних полів класу Будуть запитання/пропозиції — пишіть у коментарі! <strong>також мої інші статті:</strong>
<ul>
 <li>
  <p><a href="https://codegym.cc/groups/posts/1707-testovoe-zadanie-napisatjh-interpretator-na-jazihk-brainfuck" target="_blank">Тестове завдання: "Написати Інтерпретатор на мову BrainFuck"</a></p></li>
 <li>
  <p><a href="https://codegym.cc/groups/posts/1700-testovoe-zadanie-image-comparison" target="_blank">Тестове завдання "Image Comparison"</a></p></li>
 <li>
  <p><a href="https://codegym.cc/groups/posts/1696-java---bihstree-siljhnee-i-vihshe-zarplatih-ukrainskikh-programmistov" target="_blank">Java - швидше, сильніше і вище! Зарплати українських програмістів</a></p></li>
 <li>
  <p><a href="https://codegym.cc/groups/posts/1675-istorija-uspekha-spustja-15-goda-ot-nachala-obuchenija" target="_blank">Історія успіху через 1,5 року від початку навчання</a></p></li>
 <li>
  <p><a href="https://codegym.cc/groups/posts/1692-tekhnicheskie-voprosih-na-sobesedovanii" target="_blank">Технічні питання на співбесіді</a></p></li>
 <li>
  <p><a href="https://codegym.cc/groups/posts/1693-kak-nayti-rabotu-rassihlka-rezjume" target="_blank">Як знайти роботу? Розсилка резюме</a></p></li>
 <li>
  <p><a href="https://codegym.cc/groups/posts/1694-professionaljhnoe-vihgoranie-kak-ustojatjh" target="_blank">Професійне вигоряння. Як встояти?</a></p></li>
 <li>
  <p><a href="https://codegym.cc/groups/posts/1689-angliyskiy-dlja-it-i-dlja--sobesedovanija" target="_blank">Англійська для IT та для співбесіди</a></p></li>
 <li>
  <p><a href="https://codegym.cc/groups/posts/1684-pattern-command-svoimi-slovami" target="_blank">Паттерн Command своїми словами</a></p></li>
 <li>
  <p><a href="https://codegym.cc/groups/posts/1352-kak-sozdatjh-ispolnjaemihy-jar-v-intellij-idea--how-to-create-jar-in-idea" target="_blank">Як створити jar, що виконується, в Intellij IDEA / how to create jar in IDEA</a></p></li>
 <li>
  <p><a href="https://codegym.cc/groups/posts/1356-pomogite-nuzhna-motivacija" target="_blank">Допоможіть, потрібна мотивація!</a></p></li>
</ul>