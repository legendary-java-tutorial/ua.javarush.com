Патерни проектування: FactoryMethod
<p>----------------------------------------</p>
Вітання! Сьогодні ми продовжимо вивчати патерни проектування та поговоримо про фабричний метод (FactoryMethod). Ти дізнаєшся, що це таке і для вирішення яких завдань підходить цей шаблон. Ми розглянемо цей патерн проектування на практиці та
<p>----------------------------------------</p>
Вітання! Сьогодні ми продовжимо вивчати патерни проектування та поговоримо про фабричний метод (FactoryMethod). <img data-max-width="800" data-id="31ee8991-c5dd-4849-8d72-f7be4f2c80b8" class="img-fluid" alt="Патерни проектування: FactoryMethod - 1" src="https://cdn.javarush.com/images/article/31ee8991-c5dd-4849-8d72-f7be4f2c80b8/800.jpeg" style="width: 800px;">Ти дізнаєшся, що це таке і для вирішення яких завдань підходить цей шаблон. Ми розглянемо цей патерн проектування на практиці та вивчимо його структуру. Щоб усе викладене було тобі зрозуміло, потрібно розбиратися в наступних темах: 
<ol>
 <li>Спадкування в Java.</li>
 <li>Абстрактні методи та класи в Java.</li>
</ol>
<h2>Яку проблему вирішує фабричний метод</h2>У всіх фабричних патернах проектування є дві групи учасників - творці (самі фабрики) та продукти (об'єкти, що створюються фабриками). Уяви ситуацію: у нас є фабрика, що випускає автомобілі під маркою AutoRush. Вона вміє створювати моделі автомобілів із різними видами кузовів: 
<ul>
 <li>седани</li>
 <li>універсали</li>
 <li>купе</li>
</ul>Справи у нас йшли настільки добре, що одного прекрасного дня ми поглинули концерн OneAuto. Як розсудливі управлінці, ми не хочемо втрачати клієнтів OneAuto, і перед нами стоїть завдання реструктурувати виробництво таким чином, щоб ми могли випускати: 
<ul>
 <li>седани AutoRush</li>
 <li>універсали AutoRush</li>
 <li>купе AutoRush</li>
 <li>седани OneAuto</li>
 <li>універсали OneAuto</li>
 <li>купе OneAuto</li>
</ul>Як бачиш, замість однієї групи похідних продуктів з'явабося дві, які відрізняються деякими деталями. Шаблон проектування <span class="text-bold">фабричний метод</span> вирішує проблему створення різних груп продуктів, кожна з яких має деяку специфіку. Принцип даного шаблону ми розглянемо на практиці, поступово переходячи від простого до складного, на прикладі нашої кав'ярні, яку ми створабо в одній із попередніх <a href="https://codegym.cc/groups/posts/2370-pattern-proektirovanija-factory" target="_blank">лекцій</a> . 
<h2>Небагато про шаблон фабрика</h2>Нагадаю: ми збудували з тобою невелику віртуальну кав'ярню. У ній ми за допомогою простої фабрики навчабося створювати різні види кави. Сьогодні доопрацьовуватимемо цей приклад. Давай пригадаємо, як виглядала наша кав'ярня із простою фабрикою. У нас був клас кави: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">grindCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token comment"><span class="token comment">// перемалываем кофе</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">makeCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token comment"><span class="token comment">// делаем кофе</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">pourIntoCup</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token comment"><span class="token comment">// наливаем в чашку</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> А також кілька його спадкоємців — конкретні види кави, які могла виробляти наша фабрика: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Americano</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Cappuccino</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">CaffeLatte</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Espresso</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Для зручності прийняття замовлень ми завели перерахування: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">enum</span></span> <span class="token class-name"><span class="token class-name">CoffeeType</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    ESPRESSO<span class="token punctuation"><span class="token punctuation">,</span></span>
    AMERICANO<span class="token punctuation"><span class="token punctuation">,</span></span>
    CAFFE_LATTE<span class="token punctuation"><span class="token punctuation">,</span></span>
    CAPPUCCINO
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Сама фабрика з виробництва кави виглядала так: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">SimpleCoffeeFactory</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> createCoffee <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">CoffeeType</span></span> type<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">Coffee</span></span> coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

        <span class="token keyword"><span class="token keyword">switch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>type<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> AMERICANO<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Americano</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> ESPRESSO<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Espresso</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> CAPPUCCINO<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Cappuccino</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> CAFFE_LATTE<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">CaffeLatte</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span>

        <span class="token keyword"><span class="token keyword">return</span></span> coffee<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Ну і, нарешті, сама кав'ярня: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">CoffeeShop</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">SimpleCoffeeFactory</span></span> coffeeFactory<span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">CoffeeShop</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">SimpleCoffeeFactory</span></span> coffeeFactory<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>coffeeFactory <span class="token operator"><span class="token operator">=</span></span> coffeeFactory<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token function"><span class="token function">orderCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">CoffeeType</span></span> type<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">Coffee</span></span> coffee <span class="token operator"><span class="token operator">=</span></span> coffeeFactory<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">createCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>type<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        coffee<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">grindCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        coffee<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">makeCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        coffee<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">pourIntoCup</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

        <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Вот ваш кофе! Спасибо, приходите еще!"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> coffee<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre>
<h2>Модернізація простої фабрики</h2>Наша кав'ярня працює добре. Настільки, що ми думаємо про розширення. Ми хочемо відкрити кілька нових точок. Як заповзятливі хлопці, ми не штампуватимемо одноманітні кав'ярні. Хочеться, щоб у кожної була особливість. Тому для початку відкриємо дві точки: в італійському та американському стилях. Зміни торкнуться не тільки інтер'єру, а й напоїв: 
<ul>
 <li>в італійській кав'ярні ми будемо використовувати виключно італійські кавові бренди, з особливим помелом та прожарюванням.</li>
 <li>в американській порції будуть трохи більше, і до кожного замовлення подаватимемо плавлений зефір — маршмеллоу.</li>
</ul>Єдине, що залишиться незмінним, — це наша бізнес-модель, яка добре зарекомендувала себе. Якщо говорити мовою коду, то ось що виходить. У нас було 4 класи продуктів: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Americano</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Cappuccino</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">CaffeLatte</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Espresso</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> А стане 8: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">ItalianStyleAmericano</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">ItalianStyleCappucino</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">ItalianStyleCaffeLatte</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">ItalianStyleEspresso</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token punctuation"><span class="token punctuation">}</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">AmericanStyleAmericano</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">AmericanStyleCappucino</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">AmericanStyleCaffeLatte</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">AmericanStyleEspresso</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Якщо ми бажаємо зберегти діючу бізнес-модель незмінною, нам хочеться, щоб метод <code class=" language-none">orderCoffee(CoffeeType type)</code>зазнав мінімальної кількості змін. Погляньмо на нього: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token function"><span class="token function">orderCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">CoffeeType</span></span> type<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token class-name"><span class="token class-name">Coffee</span></span> coffee <span class="token operator"><span class="token operator">=</span></span> coffeeFactory<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">createCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>type<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    coffee<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">grindCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    coffee<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">makeCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    coffee<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">pourIntoCup</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Вот ваш кофе! Спасибо, приходите еще!"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">return</span></span> coffee<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Які варіанти ми маємо? Адже ми вже вміємо писати фабрику? Найпростіше, що відразу спадає на думку - написати дві аналогічні фабрики, а потім передавати необхідну реалізацію в нашу кав'ярню в конструкторі. Тоді клас кав'ярні не зміниться. Для початку нам потрібно створити новий клас-фабрику, успадкуватись від нашої простої фабрики та перевизначити метод <code class=" language-none">createCoffee (CoffeeType type)</code>. Напишемо фабрики для створення кави в італійському та американському стилях: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">SimpleItalianCoffeeFactory</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">SimpleCoffeeFactory</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> createCoffee <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">CoffeeType</span></span> type<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">Coffee</span></span> coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">switch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>type<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> AMERICANO<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ItalianStyleAmericano</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> ESPRESSO<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ItalianStyleEspresso</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> CAPPUCCINO<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ItalianStyleCappuccino</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> CAFFE_LATTE<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ItalianStyleCaffeLatte</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> coffee<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">SimpleAmericanCoffeeFactory</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">SimpleCoffeeFactory</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> createCoffee <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">CoffeeType</span></span> type<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">Coffee</span></span> coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

        <span class="token keyword"><span class="token keyword">switch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>type<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> AMERICANO<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">AmericanStyleAmericano</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> ESPRESSO<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">AmericanStyleEspresso</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> CAPPUCCINO<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">AmericanStyleCappuccino</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> CAFFE_LATTE<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">AmericanStyleCaffeLatte</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span>

        <span class="token keyword"><span class="token keyword">return</span></span> coffee<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Тепер ми можемо передавати потрібну реалізацію заводу в CoffeeShop. Давай подивимося, як би виглядав код для замовлення кави з різних кав'ярень. Наприклад, капучино в італійському та американському стилях: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Main</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token comment"><span class="token comment">/*
            Закажем капучино в итальянском стиле:
            1. Создадим фабрику для приготовления итальянского кофе
            2. Создадим новую кофейню, передав ей в конструкторе фабрику итальянского кофе
            3. Закажем наш кофе
         */</span></span>
        <span class="token class-name"><span class="token class-name">SimpleItalianCoffeeFactory</span></span> italianCoffeeFactory <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">SimpleItalianCoffeeFactory</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">CoffeeShop</span></span> italianCoffeeShop <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">CoffeeShop</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>italianCoffeeFactory<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        italianCoffeeShop<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">orderCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">CoffeeType</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>CAPPUCCINO<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>


         <span class="token comment"><span class="token comment">/*
            Закажем капучино в американском стиле
            1. Создадим фабрику для приготовления американского кофе
            2. Создадим новую кофейню, передав ей в конструкторе фабрику американского кофе
            3. Закажем наш кофе
         */</span></span>
        <span class="token class-name"><span class="token class-name">SimpleAmericanCoffeeFactory</span></span> americanCoffeeFactory <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">SimpleAmericanCoffeeFactory</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">CoffeeShop</span></span> americanCoffeeShop <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">CoffeeShop</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>americanCoffeeFactory<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        americanCoffeeShop<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">orderCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">CoffeeType</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>CAPPUCCINO<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Ми створабо дві різні кав'ярні, передавши кожну потрібну фабрику. З одного боку, ми досягли поставленого завдання, але з іншого боку… Щось шкребе невгамовну душу підприємця… Давай розбиратися, що не так. По-перше, велика кількість фабрик. Це щоразу тепер під нову точку свою фабрику створювати і до того стежити за тим, щоб при створенні кав'ярні до конструктора передавалася потрібна фабрика? По-друге, це досі проста фабрика. Просто трохи модернізована. Ми тут таки новий патерн вивчаємо. По-третє, а що, чи не можна по-іншому? Ось було б класно, якби ми могли локалізувати всі питання щодо приготування кави всередині класу<code class=" language-none">CoffeeShop</code>, пов'язавши процеси зі створення кави та обслуговування замовлення, але при цьому зберігши достатню гнучкість, щоб робити каву у різних стилях. Відповідь – так, можна. Це називається шаблон проектування фабричний метод. 
<h2>Від простої фабрики до фабричного методу</h2>Щоб вирішити поставлене завдання максимально ефективно, ми: 
<ol>
 <li>Повернемо метод <code class=" language-none">createCoffee(CoffeeType type)</code>у клас <code class=" language-none">CoffeeShop</code>.</li>
 <li>Цей метод зробимо абстрактним.</li>
 <li>Сам клас <code class=" language-none">CoffeeShop</code>стане абстрактним.</li>
 <li>У класу <code class=" language-none">CoffeeShop</code>з'являться спадкоємці.</li>
</ol>Так друг. Італійська кав'ярня, це ніщо інше, як спадкоємець класу <code class=" language-none">CoffeeShop</code>, що реалізує метод <code class=" language-none">createCoffee(CoffeeType type)</code>відповідно до кращих традицій італійських баристів. Отже, за порядком. Крок 1. Зробимо <code class=" language-none">Coffee</code>абстрактним клас. У нас з'явилося цілих два сімейства різних продуктів. Італійські та американські кавові напої, як і раніше, мають спільний предок — клас <code class=" language-none">Coffee</code>. Було б правильно зробити його абстрактним: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">abstract</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">makeCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token comment"><span class="token comment">// делаем кофе</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">pourIntoCup</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token comment"><span class="token comment">// наливаем в чашку</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Крок 2. Робимо <code class=" language-none">CoffeeShop</code>абстрактним, з абстрактним методом<code class=" language-none">createCoffee(CoffeeType type)</code>
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">abstract</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">CoffeeShop</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token function"><span class="token function">orderCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">CoffeeType</span></span> type<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">Coffee</span></span> coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token function"><span class="token function">createCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>type<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

        coffee<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">makeCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        coffee<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">pourIntoCup</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

        <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Вот ваш кофе! Спасибо, приходите еще!"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> coffee<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">protected</span></span> <span class="token keyword"><span class="token keyword">abstract</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> <span class="token function"><span class="token function">createCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">CoffeeType</span></span> type<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Крок 3. Створимо італійську кав'ярню, клас-нащадок абстрактної кав'ярні. У ньому ми реалізуємо метод <code class=" language-none">createCoffee(CoffeeType type)</code>із урахуванням італійської специфіки. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">ItalianCoffeeShop</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">CoffeeShop</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> createCoffee <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">CoffeeType</span></span> type<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">Coffee</span></span> coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">switch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>type<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> AMERICANO<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ItalianStyleAmericano</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> ESPRESSO<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ItalianStyleEspresso</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> CAPPUCCINO<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ItalianStyleCappuccino</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> CAFFE_LATTE<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ItalianStyleCaffeLatte</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> coffee<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Крок 4. Зробимо те саме, для кав'ярні в американському стилі 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">AmericanCoffeeShop</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">CoffeeShop</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Coffee</span></span> createCoffee <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">CoffeeType</span></span> type<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">Coffee</span></span> coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

        <span class="token keyword"><span class="token keyword">switch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>type<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> AMERICANO<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">AmericanStyleAmericano</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> ESPRESSO<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">AmericanStyleEspresso</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> CAPPUCCINO<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">AmericanStyleCappuccino</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token keyword"><span class="token keyword">case</span></span> CAFFE_LATTE<span class="token operator"><span class="token operator">:</span></span>
                coffee <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">AmericanStyleCaffeLatte</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token keyword"><span class="token keyword">break</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span>

        <span class="token keyword"><span class="token keyword">return</span></span> coffee<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Крок 5. Поглянемо на те, як виглядатиме замовлення латте в американському та італійському стилі: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Main</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">CoffeeShop</span></span> italianCoffeeShop <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ItalianCoffeeShop</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        italianCoffeeShop<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">orderCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">CoffeeType</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>CAFFE_LATTE<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

        <span class="token class-name"><span class="token class-name">CoffeeShop</span></span> americanCoffeeShop <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">AmericanCoffeeShop</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        americanCoffeeShop<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">orderCoffee</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">CoffeeType</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>CAFFE_LATTE<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Вітаю тебе. Ми тільки-но реалізували шаблон проектування фабричний метод на прикладі нашої кав'ярні. 
<h2>Принцип роботи фабричного методу</h2>Тепер розглянемо докладніше, що в нас вийшло. На діаграмі нижче — класи, що вийшли. Зелені блоки – класи творці, блакитні – класи продукти. <img data-max-width="800" data-id="5203ee0c-118e-4040-93df-bc23a32c756b" class="img-fluid" alt="Патерни проектування: FactoryMethod - 2" src="https://cdn.javarush.com/images/article/5203ee0c-118e-4040-93df-bc23a32c756b/800.jpeg" style="width: 800px;">Які висновки можна зробити? 
<ol>
 <li>Всі продукти – реалізації абстрактного класу <code class=" language-none">Coffee</code>.</li>
 <li>Усі творці - реалізації абстрактного класу <code class=" language-none">CoffeeShop</code>.</li>
 <li>Ми спостерігаємо дві паралельні ієрархії класів: 
  <ul style="list-style-type:lower-alpha">
   <li>Ієрархія продуктів. Ми бачимо італійських нащадків та американських нащадків</li>
   <li>Ієрархія авторів. Ми бачимо італійських нащадків та американських нащадків</li>
  </ul></li>
 <li>У суперкласу <code class=" language-none">CoffeeShop</code>немає інформації у тому, яка саме реалізація товару ( <code class=" language-none">Coffee</code>) буде створено.</li>
 <li>Суперклас <code class=" language-none">CoffeeShop</code>делегує створення конкретного продукту своїм нащадкам.</li>
 <li>Кожен нащадок класу <code class=" language-none">CoffeeShop</code>реалізує фабричний метод <code class=" language-none">createCoffee()</code>відповідно до своєї специфіки. Іншими словами, усередині реалізацій класів-творців приймається рішення про приготування конкретного продукту, виходячи зі специфіки класу автора.</li>
</ol>Тепер ти готовий до визначення патерну <span class="text-bold">фабричний метод</span> . <span class="text-bold">Паттерн фабричний метод</span> визначає інтерфейс створення об'єкта, але дозволяє субкласам вибрати клас екземпляра, що створюється. Таким чином, Фабричний метод делегує операцію створення екземпляра субкласів. Загалом, не так важливо пам'ятати визначення, як розуміти, як усе працює. 
<h2>Структура фабричного методу</h2><img data-max-width="800" data-id="75e252d6-559d-408b-9714-8243c5d8c37d" class="img-fluid" alt="Патерни проектування: FactoryMethod - 3" src="https://cdn.javarush.com/images/article/75e252d6-559d-408b-9714-8243c5d8c37d/800.jpeg" style="width: 800px;">На схемі вище представлена ​​загальна структура патерну фабричний метод. Що ще тут важливе? 
<ol>
 <li>Клас Creator містить реалізації всіх методів, що взаємодіють із продуктами, крім фабричного методу.</li>
 <li>Абстрактний метод <code class=" language-none">factoryMethod()</code>має бути реалізований усіма нащадками класу <code class=" language-none">Creator</code>.</li>
 <li>Клас <code class=" language-none">ConcreteCreator</code>реалізує метод <code class=" language-none">factoryMethod()</code>, що безпосередньо виробляє продукт.</li>
 <li>Цей клас відповідає за створення конкретних товарів. Це єдиний клас з інформацією про створення цих продуктів.</li>
 <li>Всі продукти повинні реалізовувати спільний інтерфейс – бути нащадками загального класу продукту. Це потрібно, щоб класи, які використовують продукти, могли оперувати ними лише на рівні абстракцій, а чи не конкретних реалізацій.</li>
</ol><a href="https://codegym.cc/welcome" target="_blank"><img id="click_banner1_articles" data-max-width="1024" data-id="d117d7fb-dbf7-4a35-9984-f699cdc43c6e" class="img-fluid" alt="Паттерни проектування: FactoryMethod - 4" src="https://cdn.javarush.com/images/article/d117d7fb-dbf7-4a35-9984-f699cdc43c6e/1024.jpeg" style="width: 1024px;"></a>
<h2>Домашнє завдання</h2>Отже, сьогодні ми провели досить велику роботу та вивчабо патерн проектування фабричний метод. Саме час закріпити пройдений матеріал! Завдання 1. Попрацювати над відкриттям ще однієї кав'ярні. Вона може бути виконана в англійському або іспанському стилі. Або навіть у стилі космічного корабля. Додамо харчових барвників у каву, щоб блищало, і взагалі, кава буде просто космос! Завдання 2. На <a href="https://codegym.cc/groups/posts/2370-pattern-proektirovanija-factory" target="_blank">минулій лекції</a> ти мав завдання створити віртуальний суші-бар або віртуальну піцерію. Твоє завдання – не стояти на місці. Сьогодні ти дізнався, як за допомогою шаблону фабричний метод можна досягти успіху. Настав час скористатися цими знаннями і розширити власний бізнес ;)