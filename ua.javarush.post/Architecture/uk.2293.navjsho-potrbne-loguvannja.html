Навіщо потрібне логування
<p>----------------------------------------</p>
Вітання! При написанні лекцій я особливо наголошую, якщо якась конкретна тема обов'язково використовуватиметься у реальній роботі. Так ось, УВАГА! Тема, якою ми торкнемося сьогодні, нагоді тобі на всіх твоїх проектах з першого дня роботи. Т
<p>----------------------------------------</p>
Вітання! При написанні лекцій я особливо наголошую, якщо якась конкретна тема обов'язково використовуватиметься у реальній роботі. <img data-id="65102d42-a5df-4e84-9d12-9f9f18ad983a" data-max-width="850" alt="Навіщо потрібне логування - 1" src="https://cdn.javarush.com/images/article/65102d42-a5df-4e84-9d12-9f9f18ad983a/800.jpeg" style="width: 850px;"> Так ось, УВАГА! Тема, якою ми торкнемося сьогодні, нагоді тобі на всіх твоїх проектах з першого дня роботи. <strong>Ми поговоримо про логування. </strong> Тема ця зовсім не складна (я навіть сказав би легка). Але на першій роботі і так буде достатньо стресу, щоб ще розбиратися з очевидними речами, тому краще досконально розібрати її зараз :) Отже, почнемо. Що таке логування? <strong>Логування - це запис кудись даних про роботу програми. </strong>Місце, куди ці дані записуються називається « <strong>лог</strong>». Виникає одразу два питання – куди і які дані записуються? Почнемо із «куди». Записувати дані про роботу програми можна в різні місця. Наприклад, ти під час навчання часто виводив дані у консоль за допомогою <code class=" language-none">System.out.println()</code>. Це справжнє логування, хоч і найпростіше. Звичайно, для клієнта чи команди підтримки продукту це не дуже зручно: вони явно не захочуть встановлювати IDE та моніторити консоль :) Є й звичніший людині формат запису інформації — у текстовий файл. Людям набагато зручніше читати їх у такому вигляді, і вже точно набагато зручніше зберігати! Тепер друге питання: <strong>які дані про роботу програми мають записуватися в балку?</strong> А ось тут все залежить від тебе! Система логування Java дуже гнучка. Ти можеш налаштувати її таким чином, що в ліг потрапить весь хід роботи твоєї програми. Це, з одного боку, добре. Але з іншого - уяви собі, яких розмірів можуть досягти логи Facebook або Twitter, якщо туди писати взагалі все. Такі великі компанії, напевно, мають можливість зберігати навіть таку кількість інформації. Але уяви, як складно буде шукати інформацію про одну критичну помилку в логах на 500 гігабайт тексту? Це навіть гірше, ніж голка у стозі сіна. Тому логування Java можна налаштувати так, щоб в журнал (лог) записувалися лише дані про помилки. Або навіть лише про критичні помилки! Хоча, говорити "логування в Java" не зовсім правильно. Справа в тому, що потреба ведення логів виникла у програмістів раніше, чим цей функціонал був доданий у мову. І на той час, як у Java з'явився власна бібліотека для логування, всі вже користувалися бібліотекою log4j. Історія появи логування в Java насправді дуже довга і пізнавальна, на дозвіллі можеш почитати<a href="https://habr.com/ru/post/113145/" rel="nofollow" target="_blank">цей пост на Хабрі</a> . Коротше кажучи, своя бібліотека логування в Java є, але їй майже ніхто не користується :) Пізніше, коли з'явилося кілька різних бібліотек логування, і всі програмісти почали користуватися різними, виникла проблема сумісності. Щоб люди не робабо те саме за допомогою десятка різних бібліотек з різними інтерфейсами, був створений <strong>абстрагуючий фреймворк slf4j</strong>("Service Logging Facade For Java"). Абстрагуючим він називається тому, що хоч і користуєшся класами slf4j і викликаєш їх методи, під капотом у них працюють усі попередні фреймворки логування: log4j, стандартний java.util.logging та інші. Якщо тобі зараз потрібна якась специфічна фіча log4j, якої немає в інших бібліотек, але ти не хотів би при цьому жорстко прив'язувати проект саме до цієї бібліотеки, просто використовуй slf4j. А вона вже «смикне» методи log4j. Якщо ти передумаєш і вирішиш, що фічі log4j тобі більше не потрібні, тобі треба тільки переналаштувати обгортку (тобто slf4j) на використання іншої бібліотеки. Твій код не припинить працювати, адже в ньому ти викликаєш методи slf4j, а не конкретної бібліотеки. Невеликий відступ. Щоб наступні приклади запрацювали, тобі потрібно завантажити бібліотеку slf4j<a href="https://www.slf4j.org/download.html" rel="nofollow" target="_blank">звідси</a> , і бібліотеку log4j <a href="https://logging.apache.org/log4j/2.x/download.html" rel="nofollow" target="_blank">звідси</a> . Далі архів потрібно розпакувати і додати потрібні нам jar-файли в classpath через Intellij IDEA. Пункти меню: <em>File</em> -&gt; <em>Project Structure</em> -&gt; <em>Libraries</em> Вибираєш потрібні jar-ники та додаєш у проект (в архівах, які ми скачали, лежить багато jar'ників, подивися потрібні на картинках) Примітка <img data-id="09c92a9d-03af-405e-88f9-9ff66145ba8e" data-max-width="850" alt="Навіщо потрібне логування - 2" src="https://cdn.javarush.com/images/article/09c92a9d-03af-405e-88f9-9ff66145ba8e/800.jpeg" style="width: 850px;"><img data-id="c87a7e99-c90c-45c5-98a9-109db7daaced" data-max-width="850" alt="Навіщо потрібне логування - 3" src="https://cdn.javarush.com/images/article/c87a7e99-c90c-45c5-98a9-109db7daaced/800.jpeg" style="width: 850px;"><small><em>— ця інструкція для тих студентів, які не вміють використовувати Maven. Якщо ти вмієш ним користуватися, краще спробуй почати з нього: це зазвичай набагато простіше</em></small> Якщо використовуєш <a href="https://codegym.cc/groups/posts/2523-chastjh-4osnovih-maven" target="_blank">Maven</a> , додай таку залежність: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>dependency<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
            <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>groupId<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>org<span class="token punctuation"><span class="token punctuation">.</span></span>apache<span class="token punctuation"><span class="token punctuation">.</span></span>logging<span class="token punctuation"><span class="token punctuation">.</span></span>log4j<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>groupId<span class="token operator"><span class="token operator">&gt;</span></span>
            <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>artifactId<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>log4j<span class="token operator"><span class="token operator">-</span></span>slf4j<span class="token operator"><span class="token operator">-</span></span>impl<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>artifactId<span class="token operator"><span class="token operator">&gt;</span></span>
            <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>version<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token number"><span class="token number">2.14</span></span><span class="token number"><span class="token number">.0</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>version<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>dependency<span class="token operator"><span class="token operator">&gt;</span></span></code></pre> Добре розглянемо, як працює slf4j. Як нам зробити так, щоб хід роботи програми кудись записувався? Для цього нам потрібні дві речі — <strong>логер</strong> і <strong>апендер</strong> . Почнемо з першого. <strong>Логгер - це об'єкт, який повністю керує веденням записів</strong> . Створити логер дуже легко: це робиться за допомогою статичного методу <code class=" language-none"><strong>LoggerFactory.getLogger()</strong></code>. Як параметр у метод потрібно передати клас, робота якого логуватиметься. Запустимо наш код: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>slf4j<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Logger</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>slf4j<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">LoggerFactory</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">MyTestClass</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">Logger</span></span> LOGGER <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">LoggerFactory</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getLogger</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">MyTestClass</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

       LOGGER<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">info</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Test log record!!!"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       LOGGER<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">error</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"В программе возникла ошибка!"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre><strong>Виведення в консоль: <em>ERROR StatusLogger No Log4j 2 configuration file found. Використовуючи невеликі параметри (залишення лише нагадувань на консолі), або user programmatically забезпечені параметрами. Set system property 'log4j2.debug' до show Log4j 2 internal initialization logging. Натисніть https://logging.apache.org/log4j/2.x/manual/configuration.html для інструкцій на те, як configure Log4j 2 15:49:08.907 [main] ERROR MyTestClass - У програмі виникла помилка! </em></strong> Що ми тут бачимо? Спочатку ми бачимо повідомлення про помилку. Вона з'явилася, бо зараз у нас не вистачає необхідних налаштувань. Тому наш логер зараз вміє виводити тільки повідомлення про помилки (ERROR) і тільки в консоль. Метод <code class=" language-none">logger.info()</code>виконано був. А ось <code class=" language-none">logger.error()</code>спрацював! У консолі з'явилася поточна дата, метод, де виникла помилка (<code class=" language-none">main</code>), слово ERROR та наше повідомлення! <strong>ERROR – це рівень логгрування. </strong> Загалом, якщо запис у лозі позначений словом ERROR, отже, у цьому місці програми сталася помилка. Якщо запис позначений словом INFO — це просто поточна інформація про нормальну роботу програми. У бібліотеці SLF4J багато різних рівнів логування, які дозволяють гнучко налаштувати ведення журналу. Управляти ними дуже легко: вся необхідна логіка вже закладена в клас <code class=" language-none">Logger</code>. Тобі досить просто викликати необхідні методи. Якщо хочеш залогувати звичайне повідомлення, викликай метод <code class=" language-none"><strong>logger.info()</strong></code>. Повідомлення про помилку — <code class=" language-none"><strong>logger.error()</strong></code>. Вивести попередження - <code class=" language-none"><strong>logger.warn()</strong></code> Тепер поговоримо про <strong>апендера</strong> . <strong>Апендер це місце, куди приходять твої дані.</strong>Можна сміливо сказати, протилежність джерелу даних — «точка B». За промовчанням дані виводяться в консоль. Зверніть увагу, що в попередньому прикладі нам не довелося нічого налаштовувати: текст з'явився в консолі сам, але при цьому логер з бібліотеки log4j вміє виводити в консоль тільки повідомлення рівня ERROR. Людям, очевидно, зручніше читати логи з текстового файлу і зберігати логи в таких же файлух. Щоб змінити поведінку логера за замовчуванням, нам потрібно налаштувати свій <strong>файловий апендер</strong> . Для початку, прямо в папці src потрібно створити файл <strong>log4j.xml</strong> , або в папці resources, якщо використовуєш Maven, або в ресурсах folder, в випадку ви використовуєте Maven. З форматом xml ти вже знайомий, у нас нещодавно була <a href="https://codegym.cc/groups/posts/2287-chto-takoe-xml" target="_blank">лекція</a> про нього :) Ось таким буде його вміст: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">?</span></span>xml version<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"1.0"</span></span> encoding<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"UTF-8"</span></span><span class="token operator"><span class="token operator">?</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token class-name"><span class="token class-name">Configuration</span></span> status<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"INFO"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
   <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Appenders</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
       <span class="token operator"><span class="token operator">&lt;</span></span><span class="token class-name"><span class="token class-name">File</span></span> name<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"MyFileAppender"</span></span> fileName<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"C:\Users\Username\Desktop\testlog.txt"</span></span> immediateFlush<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"false"</span></span> append<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"false"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
           <span class="token operator"><span class="token operator">&lt;</span></span><span class="token class-name"><span class="token class-name">PatternLayout</span></span> pattern<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"%d{yyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
       <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token class-name"><span class="token class-name">File</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
   <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token class-name"><span class="token class-name">Appenders</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
   <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Loggers</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
       <span class="token operator"><span class="token operator">&lt;</span></span><span class="token class-name"><span class="token class-name">Root</span></span> level<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"INFO"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
           <span class="token operator"><span class="token operator">&lt;</span></span><span class="token class-name"><span class="token class-name">AppenderRef</span></span> ref<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"MyFileAppender"</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
       <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token class-name"><span class="token class-name">Root</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
   <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token class-name"><span class="token class-name">Loggers</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token class-name"><span class="token class-name">Configuration</span></span><span class="token operator"><span class="token operator">&gt;</span></span></code></pre> Виглядає не надто й складно :) Але давай таки пройдемося по вмісту. 
<pre class="inline-block  language-java" tabindex="0"><code class="  language-java"><span class="token operator"><span class="token operator">&lt;</span></span><span class="token class-name"><span class="token class-name">Configuration</span></span> status<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"INFO"</span></span><span class="token operator"><span class="token operator">&gt;</span></span></code></pre> Це так званий status-logger. Він не має відношення до нашого логера і використовується у внутрішніх процесах log4j. Можеш встановити status="TRACE" замість status="INFO", і в консоль буде виводитися вся інформація про внутрішню роботу log4j (status-logger виводить дані саме в консоль, навіть якщо наш апендер для програми буде файловим). Нам це зараз не потрібно, тож залишимо все як є. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Appenders</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
   <span class="token operator"><span class="token operator">&lt;</span></span><span class="token class-name"><span class="token class-name">File</span></span> name<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"MyFileAppender"</span></span> fileName<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"C:\Users\Евгений\Desktop\testlog.txt"</span></span> append<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"true"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
       <span class="token operator"><span class="token operator">&lt;</span></span><span class="token class-name"><span class="token class-name">PatternLayout</span></span> pattern<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"%d{yyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
   <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token class-name"><span class="token class-name">File</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token class-name"><span class="token class-name">Appenders</span></span><span class="token operator"><span class="token operator">&gt;</span></span></code></pre> Тут ми створюємо наш апендер. Тег <code class=" language-none">&lt;File&gt;</code>показує, що він буде файловим. <code class=" language-none">name="MyFileAppender"</code>- Ім'я нашого апендера. <code class=" language-none">fileName="C:\Users\Username\Desktop\testlog.txt"</code>— шлях до лог-файлу, куди записуватимуться всі дані. <code class=" language-none">append="true"</code>— чи потрібно дозаписувати дані до кінця файлу. У нашому випадку так буде. Якщо встановити значення <em>false</em> , при кожному новому запуску програми старий вміст лога буде видалено. <code class=" language-none">&lt;PatternLayout pattern="%d{yyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/&gt;</code>- Це налаштування форматування. Тут ми за допомогою регулярних виразів можемо налаштовувати формат тексту у нашому лозі. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Loggers</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
       <span class="token operator"><span class="token operator">&lt;</span></span><span class="token class-name"><span class="token class-name">Root</span></span> level<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"INFO"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
           <span class="token operator"><span class="token operator">&lt;</span></span><span class="token class-name"><span class="token class-name">AppenderRef</span></span> ref<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"MyFileAppender"</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
       <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token class-name"><span class="token class-name">Root</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token class-name"><span class="token class-name">Loggers</span></span><span class="token operator"><span class="token operator">&gt;</span></span></code></pre> Тут ми вказуємо рівень логування (root level). У нас встановлено рівень INFO: тобто всі повідомлення рівнів вище INFO (за таблицею, яку ми розглядали вище) в лог не потраплять. У нас у програмі буде 3 повідомлення: одне INFO, одне WARN та одне ERROR. З поточною конфігурацією всі три повідомлення будуть записані в лог. Якщо ти зміниш значення root level на ERROR, у лог потрапить лише останнє повідомлення з LOGGER.error(). Крім того, сюди ж міститься посилання на апендер. Щоб створити таке посилання, потрібно <code class=" language-none">&lt;Root&gt;</code>створити тег усередині тега <code class=" language-none">&lt;ApprenderRef&gt;</code>і додати йому параметр <code class=" language-none">ref=”ім'я твоего аппендера”</code>. Ім'я апендера ми створабо ось тут, якщо ти забув: <code class=" language-none">&lt;File name="MyFileAppender"</code> А ось і код нашої програми! 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>slf4j<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Logger</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>slf4j<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">LoggerFactory</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">MyTestClass</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">Logger</span></span> LOGGER <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">LoggerFactory</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getLogger</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">MyTestClass</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

       LOGGER<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">info</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Начало работы программы!!!"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

       <span class="token keyword"><span class="token keyword">try</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
           LOGGER<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">warn</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Внимание! Программа пытается разделить одно число на другое"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
           <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">12</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">catch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">ArithmeticException</span></span> x<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

           LOGGER<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">error</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Ошибка! Произошло деление на ноль!"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Він, звичайно, трохи кривуватий (перехоплення RuntimeException - ідея так собі), але для наших цілей відмінно підійде :) Давай запустимо наш метод <code class=" language-none">main()</code>4 рази поспіль і подивимося на наш файл testlog.txt. Створювати його наперед не потрібно: бібліотека зробить це автоматично. Все запрацювало! :) Тепер у тебе є налаштований логер. Ти можеш погратися з якимись написаними тобою раніше програмами, додавши виклики логера у всі методи, і подивитися на журнал, що вийшов:) В якості додаткового читання дуже рекомендую тобі ось цю <a href="http://skipy.ru/useful/logging.html#log4j_fa" rel="nofollow" target="_blank">статтю</a>. Там тема логування розглянута поглиблено і за один раз прочитати її буде непросто. Але в ній міститься багато корисної додаткової інформації. Наприклад, ти навчишся конфігурувати логер так, щоб він створював новий текстовий файл, якщо наш файл testlog.txt досяг певного розміру:) А наше заняття на цьому завершено! Ти сьогодні познайомився з дуже важливою темою, і ці знання знадобляться тобі в подальшій роботі. До нових зустрічей! :)