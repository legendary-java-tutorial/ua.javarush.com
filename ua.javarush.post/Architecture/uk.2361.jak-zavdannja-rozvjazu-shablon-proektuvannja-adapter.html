Які завдання розв'язує шаблон проектування Адаптер
<p>----------------------------------------</p>
Часто розробку програмного забезпечення ускладнює несумісність компонентів, що працюють один з одним. Наприклад, якщо потрібно інтегрувати нову бібліотеку зі старою платформою, написаною на ранніх версіях Java, можна зіткнутися з несумісніс
<p>----------------------------------------</p>
Часто розробку програмного забезпечення ускладнює несумісність компонентів, що працюють один з одним. Наприклад, якщо потрібно інтегрувати нову бібліотеку зі старою платформою, написаною на ранніх версіях Java, можна зіткнутися з несумісністю об'єктів, а точніше — інтерфейсів. Що робити у такому разі? Переписати код? Але це неможливо: аналіз системи займе багато часу або буде порушена внутрішня логіка роботи. <img data-max-width="850" alt="Які завдання вирішує шаблон проектування Адаптер - 1" src="https://cdn.javarush.com/images/article/198de7bd-866b-4135-bcc1-bff73fbed455/original.jpeg">Для вирішення цієї проблеми вигадали патерн Адаптер, який допомагає об'єктам з несумісними інтерфейсами працювати разом. Давай подивимося, як його використати! 
<h2>Докладніше про проблему</h2>Для початку зімітуємо поведінку старої системи. Припустимо, вона генерує причини запізнення працювати чи навчання. Для цього є інтерфейс <code class=" language-none">Excuse</code>, який містить методи <code class=" language-none">generateExcuse()</code>, <code class=" language-none">likeExcuse()</code>і <code class=" language-none">dislikeExcuse()</code>. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">Excuse</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token class-name"><span class="token class-name">String</span></span> <span class="token function"><span class="token function">generateExcuse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">likeExcuse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> excuse<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">dislikeExcuse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> excuse<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Цей інтерфейс реалізує клас <code class=" language-none">WorkExcuse</code>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">WorkExcuse</span></span> <span class="token keyword"><span class="token keyword">implements</span></span> <span class="token class-name"><span class="token class-name">Excuse</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> reasonOptions <span class="token operator"><span class="token operator">=</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token string"><span class="token string">"по невероятному стечению обстоятельств у нас в доме закончилась горячая вода и я ждал, пока солнечный свет, сконцентрированный через лупу, нагреет кружку воды, чтобы я мог умыться."</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
   <span class="token string"><span class="token string">"искусственный интеллект в моем будильнике подвел меня и разбудил на час раньше обычного. Поскольку сейчас зима, я думал что еще ночь и уснул. Дальше все як в тумане."</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
   <span class="token string"><span class="token string">"предпраздничное настроение замедляет метаболические процессы в моем организме и приводит к подавленному состоянию и бессоннице."</span></span><span class="token punctuation"><span class="token punctuation">}</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> sorryOptions <span class="token operator"><span class="token operator">=</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token string"><span class="token string">"Это, конечно, не повторится, мне очень жаль."</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"Прошу меня извинить за непрофессиональное поведение."</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"Нет оправдания моему поступку. Я недостоин этой должности."</span></span><span class="token punctuation"><span class="token punctuation">}</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">String</span></span> <span class="token function"><span class="token function">generateExcuse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span> <span class="token comment"><span class="token comment">// Случайно выбираем отговорку из массива</span></span>
       <span class="token class-name"><span class="token class-name">String</span></span> result <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Я сегодня опоздал, потому что "</span></span> <span class="token operator"><span class="token operator">+</span></span> reasonOptions<span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token class-name"><span class="token class-name">Math</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">round</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Math</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">random</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">+</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> <span class="token operator"><span class="token operator">+</span></span> <span class="token string"><span class="token string">"\n"</span></span> <span class="token operator"><span class="token operator">+</span></span>
               sorryOptions<span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token class-name"><span class="token class-name">Math</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">round</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Math</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">random</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">+</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">]</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> result<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">likeExcuse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> excuse<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token comment"><span class="token comment">// Дублируем элемент в массиве, чтобы шанс его выпадения был выше</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">dislikeExcuse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> excuse<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token comment"><span class="token comment">// Удаляем элемент из массива</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Протестуємо приклад: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">Excuse</span></span> excuse <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">WorkExcuse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>excuse<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">generateExcuse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre><span class="text-bold">Висновок:</span>
<pre class=" language-none" tabindex="0"><code class=" language-none">Я сегодня опоздал, потому что предпраздничное настроение замедляет метаболические процессы в моем организме и приводит к подавленному состоянию и бессоннице. <br>
Прошу меня извинить за непрофессиональное поведение.</code></pre> Тепер уявімо, що ти запустив сервіс, зібрав статистику і помітив, що більшість користувачів сервісу – студенти вишів. Щоб покращити його під потреби цієї групи, ти замовив у іншого розробника систему створення відмовок спеціально для неї. Команда розробника провела дослідження, склала рейтинги, підключила штучний інтелект, додала інтеграцію із пробками на дорогах, погодою тощо. <code class=" language-none">StudentExcuse</code>Тепер у тебе є бібліотека генерації відмовок для студентів, однак інтерфейс взаємодії з нею інший
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">StudentExcuse</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token class-name"><span class="token class-name">String</span></span> <span class="token function"><span class="token function">generateExcuse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">dislikeExcuse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> excuse<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Інтерфейс має два методи: <code class=" language-none">generateExcuse</code>, який генерує відмовку, і <code class=" language-none">dislikeExcuse</code>, який блокує відмовку, щоб вона не з'являлася надалі. Бібліотека стороннього розробника закрита для редагування – ти не можеш змінювати вихідний код. У результаті в твоїй системі є два класи, що реалізують інтерфейс <code class=" language-none">Excuse</code>, і бібліотека з класом <code class=" language-none">SuperStudentExcuse</code>, який реалізує інтерфейс <code class=" language-none">StudentExcuse</code>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">SuperStudentExcuse</span></span> <span class="token keyword"><span class="token keyword">implements</span></span> <span class="token class-name"><span class="token class-name">StudentExcuse</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">String</span></span> <span class="token function"><span class="token function">generateExcuse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token comment"><span class="token comment">// Логика нового функционала</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> <span class="token string"><span class="token string">"Невероятная отговорка, адаптированная под текущее состояние погоды, пробки або сбои в расписании общественного транспорта."</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">dislikeExcuse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> excuse<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token comment"><span class="token comment">// Добавляет причину в черный список</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Змінити код не можна. Поточна схема виглядатиме так: <img data-max-width="850" alt="Які завдання вирішує шаблон проектування Адаптер - 2" src="https://cdn.javarush.com/images/article/0a8c1f2d-4b1d-4d1b-9aca-51b9f45d1ffe/original.jpeg">Ця версія системи працює лише з інтерфейсом Excuse. Переписувати код не можна: у великій програмі такі редагування можуть затягнутися або порушити логіку програми. Можна запропонувати використання основного інтерфейсу та збільшення ієрархії: <img data-max-width="850" alt="Які завдання розв'язує шаблон проектування Адаптер - 3" src="https://cdn.javarush.com/images/article/6d59a23f-f05e-4be3-9fa6-2379f7292717/original.jpeg">Для цього необхідно перейменувати інтерфейс <code class=" language-none">Excuse</code>. Але додаткова ієрархія небажана у серйозних додатках: використання загального кореневого елемента порушує архітектуру. Слід реалізувати проміжний клас, який дозволить використовувати новий та старий функціонал із мінімальними втратами. Словом, <span class="text-bold">тобі потрібний адаптер</span> . 
<h2>Принцип роботи патерну Адаптер</h2>Адаптер — це проміжний об'єкт, який здійснює виклики методів одного об'єкта зрозумілими іншому. Реалізуємо адаптер для нашого прикладу та назвемо його <code class=" language-none"><span class="text-bold">Middleware</span></code>. Наш адаптер повинен реалізовувати інтерфейс, сумісний з одним із об'єктів. Нехай це буде <code class=" language-none">Excuse</code>. Завдяки цьому <code class=" language-none">Middleware</code>можуть викликати методи першого об'єкта. <code class=" language-none">Middleware</code>отримує дзвінки та передає їх другому об'єкту у сумісному форматі. Так виглядає реалізація методу <code class=" language-none">Middleware</code>з <code class=" language-none">generateExcuse</code>методами <code class=" language-none">dislikeExcuse</code>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Middleware</span></span> <span class="token keyword"><span class="token keyword">implements</span></span> <span class="token class-name"><span class="token class-name">Excuse</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span> <span class="token comment"><span class="token comment">// 1. Middleware становится совместимым с об'єктом WorkExcuse через интерфейс Excuse</span></span>

   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">StudentExcuse</span></span> superStudentExcuse<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Middleware</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">StudentExcuse</span></span> excuse<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span> <span class="token comment"><span class="token comment">// 2. Получаем ссылку на адаптируемый об'єкт</span></span>
       <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>superStudentExcuse <span class="token operator"><span class="token operator">=</span></span> excuse<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">String</span></span> <span class="token function"><span class="token function">generateExcuse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> superStudentExcuse<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">generateExcuse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// 3. Адаптер реализовывает метод интерфейса</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">dislikeExcuse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> excuse<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token comment"><span class="token comment">// Метод предварительно помещает отговорку в черный список БД,</span></span>
        <span class="token comment"><span class="token comment">// Затем передает ее в метод dislikeExcuse об'єкта superStudentExcuse.</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token comment"><span class="token comment">// Метод likeExcuse появятся позже</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Тестування (у клієнтському коді): 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Test</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token class-name"><span class="token class-name">Excuse</span></span> excuse <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">WorkExcuse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// Создаются об'єкты классов,</span></span>
       <span class="token class-name"><span class="token class-name">StudentExcuse</span></span> newExcuse <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">SuperStudentExcuse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// Которые должны быть совмещены.</span></span>
       <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Обычная причина для работника:"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>excuse<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">generateExcuse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"\n"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token class-name"><span class="token class-name">Excuse</span></span> adaptedStudentExcuse <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Middleware</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>newExcuse<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// Оборачиваем новый функционал в об'єкт-адаптер</span></span>
       <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Использование нового функционала с помощью адаптера:"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>adaptedStudentExcuse<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">generateExcuse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// Адаптер вызывает адаптированный метод</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre><span class="text-bold">Висновок:</span>
<pre class=" language-none" tabindex="0"><code class=" language-none">Обычная причина для работника:<br>
Я сегодня опоздал, потому что предпраздничное настроение замедляет метаболические процессы в моем организме и приводит к подавленному состоянию и бессоннице.<br>
Нет оправдания моему поступку. Я недостоин этой должности.
Использование нового функционала с помощью адаптера</code></pre> Неймовірна відмовка адаптована під поточний стан погоди, пробки або збої в розкладі громадського транспорту. У методі <code class=" language-none">generateExcuse</code>виконано просту передачу виклику іншому об'єкту, без додаткових перетворень. Метод <code class=" language-none">dislikeExcuse</code>зажадав попереднього приміщення відмовки до чорного списку бази даних. Додаткова проміжна обробка даних - причина, через яку люблять патерн Адаптер. А як бути з методом <code class=" language-none">likeExcuse</code>, який є в інтерфейсі <code class=" language-none">Excuse</code>, але немає в <code class=" language-none">StudentExcuse</code>? Ця операція не підтримується у новому функціоналі. Для такого випадку придумали виняток <code class=" language-none">UnsupportedOperationException</code>: воно викидається, якщо операція, що запитується, не підтримується. Використовуємо це. Так виглядає нова реалізація класу <code class=" language-none">Middleware</code>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Middleware</span></span> <span class="token keyword"><span class="token keyword">implements</span></span> <span class="token class-name"><span class="token class-name">Excuse</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">StudentExcuse</span></span> superStudentExcuse<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Middleware</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">StudentExcuse</span></span> excuse<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>superStudentExcuse <span class="token operator"><span class="token operator">=</span></span> excuse<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">String</span></span> <span class="token function"><span class="token function">generateExcuse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> superStudentExcuse<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">generateExcuse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">likeExcuse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> excuse<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">throw</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">UnsupportedOperationException</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Метод likeExcuse не поддерживается в новом функционале"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">dislikeExcuse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> excuse<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token comment"><span class="token comment">// Метод обращается за дополнительной информацией к БД,</span></span>
       <span class="token comment"><span class="token comment">// Затем передает ее в метод dislikeExcuse об'єкта superStudentExcuse.</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> На перший погляд, це рішення не здається вдалим, але імітування функціоналу може призвести до більш складної ситуації. Якщо клієнт буде уважним, а адаптер добре документований, таке рішення прийнятне. 
<h2>Коли використовувати Адаптер</h2>
<ol>
 <li>
  <p>Якщо потрібно використовувати сторонній клас, але його інтерфейс не сумісний із основною програмою. На прикладі вище видно, як створюється об'єкт-прокладка, який обертає дзвінки у зрозумілий для цільового об'єкта формат.</p></li>
 <li>
  <p>Коли у кількох існуючих підкласів має бути загальний функціонал. Замість додаткових підкласів (їх створення призведе до дублювання коду) краще використовувати адаптер.</p></li>
</ol>
<h2>Переваги і недоліки</h2><span class="text-bold">Перевага:</span> Адаптер приховує від клієнта подробиці обробки запитів від одного об'єкта до іншого. Клієнтський код не думає про форматування даних або обробку викликів цільового методу. Це занадто складно, а програмісти ліниві :) <span class="text-bold">Недолік:</span> Кодова база проекту ускладнюється додатковими класами, а за великої кількості несумісних точок їх кількість може зрости до неконтрольованих розмірів. 
<h2>Не плутати з Фасадом та Декоратором</h2>При поверхневому вивченні Адаптер можна переплутати з патернами Фасад та Декоратор. Відмінність Адаптера від Фасаду полягає в тому, що Фасад впроваджує новий інтерфейс та обертає цілу підсистему. Ну а Декоратор, на відміну Адаптера, змінює сам об'єкт, а чи не інтерфейс. <a href="https://codegym.cc/welcome" target="_blank"><img id="click_banner1_articles" data-max-width="1024" data-id="f3250127-41f7-4ab3-82b9-bd98a4039ed2" class="img-fluid" alt="Які завдання вирішує шаблон проектування Адаптер - 4" src="https://cdn.javarush.com/images/article/f3250127-41f7-4ab3-82b9-bd98a4039ed2/1024.jpeg" style="width: 1024px;"></a>
<h2>Покроковий алгоритм реалізації</h2>
<ol>
 <li>
  <p>Спочатку переконайся, що є проблема, яку може вирішити цей патерн.</p></li>
 <li>
  <p>Визнач клієнтський інтерфейс, від імені якого використовуватиметься інший клас.</p></li>
 <li>
  <p>Реалізуй клас адаптера на основі інтерфейсу, визначеного на попередньому етапі.</p></li>
 <li>
  <p>У класі адаптера зроби поле, де зберігається посилання на об'єкт. Це посилання передається у конструкторі.</p></li>
 <li>
  <p>Реалізуй у адаптері усі методи клієнтського інтерфейсу. Метод може:</p>
  <ul style="list-style-type: lower-alpha">
   <li>
    <p>Передавати виклик без зміни;</p></li>
   <li>
    <p>Змінювати дані, збільшувати/зменшувати кількість викликів цільового методу, додатково розширювати склад даних тощо.</p></li>
   <li>
    <p>У крайньому випадку, при несумісності конкретного методу, викинути виняток UnsupportedOperationException, яке суворо потрібно задокументувати.</p></li>
  </ul></li>
 <li>
  <p>Якщо програма буде використовувати адаптер тільки через клієнтський інтерфейс (як у прикладі вище), це дозволить безболісно розширювати адаптери в майбутньому.</p></li>
</ol>Само собою, патерн проектування - це не панацея від усіх бід, але з його допомогою можна елегантно вирішити задачу несумісності об'єктів з різними інтерфейсами. Розробник, який знає базові патерни, — на кілька сходинок вище за тих, хто просто вміє писати алгоритми, адже вони потрібні для створення серйозних додатків. Повторно використовувати код стає не так складно, а підтримувати одне задоволення. На сьогодні все! Але ми скоро продовжимо знайомство з різними шаблонами проектування:)