Принципи SOLID, які зроблять код чистішим
<p>----------------------------------------</p>
Ось як розшифровується акронім SOLID: S: (Принцип єдиної відповідальності). - O: (Принцип відкритості-закритості). - L: (Принцип підстановки Барбари Лисков). - I: (Принцип розподілу інтерфейсу). - D: (Принцип інверсії залежностей). SOLID пр
<p>----------------------------------------</p>
<strong>Що таке SOLID? </strong> Ось як розшифровується акронім SOLID: S: <strong><em>Single Responsibility Principle</em></strong> &nbsp;(Принцип єдиної відповідальності). - O: <strong><em>Open-Closed Principle</em></strong> &nbsp;(Принцип відкритості-закритості). - L: <strong><em>Liskov Substitution Principle</em></strong> &nbsp;(Принцип підстановки Барбари Лисков). - I: <strong><em>Interface Segregation Principle</em></strong> &nbsp;(Принцип розподілу інтерфейсу). - D: <strong><em>Dependency Inversion Principle</em></strong> &nbsp;(Принцип інверсії залежностей). SOLID принципи рекомендують, як проектувати модулі, тобто. цеглини, з яких будується додаток. Мета принципів - проектувати модулі, які: - сприяють змінам - легко розуміються - повторно використовуються Отже, давайте розберемо що це таке на прикладах. 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">class</span> <span class="token class-name">MainRepository</span><span class="token punctuation">(</span>
    <span class="token keyword">private</span> val auth<span class="token operator">:</span> <span class="token class-name">FirebaseAuth</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    suspend fun <span class="token function">loginUser</span><span class="token punctuation">(</span>email<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> password<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            auth<span class="token punctuation">.</span><span class="token function">signInWithEmailAndPassword</span><span class="token punctuation">(</span>email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> <span class="token class-name">Exception</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            val file <span class="token operator">=</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"errors.txt"</span><span class="token punctuation">)</span>
            file<span class="token punctuation">.</span><span class="token function">appendText</span><span class="token punctuation">(</span>text <span class="token operator">=</span> e<span class="token punctuation">.</span>message<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> Що ми бачимо у цьому прикладі? У конструкторі передається FirebaseAuth, за допомогою якого ми намагаємося логінуватися. Якщо отримуємо помилку у відповідь, то записуємо меседж у файл. Тепер давайте подивимося що з цим кодом не так. 1. S: <strong><em>Single Responsibility Principle</em></strong> &nbsp;(Принцип єдиної відповідальності): Клас (або функція/метод) має бути відповідальним лише за щось одне. Якщо клас відповідає за вирішення кількох завдань, його підсистеми, що реалізують розв'язання цих завдань, виявляються пов'язаними один з одним. Зміни в одній такій підсистемі ведуть до змін в іншій. У нашому прикладі функція loginUser відповідає за дві речі - логін та запис помилки у файл. Для того, щоб відповідальність була одна, треба винести логіку запису помилки в окремий клас. 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">class</span> <span class="token class-name">FileLogger</span><span class="token punctuation">{</span>
    fun <span class="token function">logError</span><span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        val file <span class="token operator">=</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"errors.txt"</span><span class="token punctuation">)</span>
        file<span class="token punctuation">.</span><span class="token function">appendText</span><span class="token punctuation">(</span>text <span class="token operator">=</span> error<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">class</span> <span class="token class-name">MainRepository</span><span class="token punctuation">(</span>
    <span class="token keyword">private</span> val auth<span class="token operator">:</span> <span class="token class-name">FirebaseAuth</span><span class="token punctuation">,</span>
    <span class="token keyword">private</span> val fileLogger<span class="token operator">:</span> <span class="token class-name">FileLogger</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    suspend fun <span class="token function">loginUser</span><span class="token punctuation">(</span>email<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> password<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span><span class="token punctuation">{</span>
            auth<span class="token punctuation">.</span><span class="token function">signInWithEmailAndPassword</span><span class="token punctuation">(</span>email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> <span class="token class-name">Exception</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            fileLogger<span class="token punctuation">.</span><span class="token function">logError</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>message<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> Логіка запису помилки винесена в окремий клас і тепер метод loginUser має тільки одну відповідальність - авторизація. Якщо логіку логування помилки треба буде змінити, це робитимемо у класі FileLogger, а чи не у функції loginUser 2. O: <strong><em>Open-Closed Principle</em></strong>&nbsp;(Принцип відкритості-закритості): Програмні сутності (класи, модулі, функції) мають бути відкриті для розширення, але не модифікації. У цьому контексті відкритість для розширення – це можливість додати для класу, модуля або функції нову поведінку, якщо потреба у цьому виникне, а закритість для змін – це заборона зміну вихідного коду програмних сутностей. На перший погляд, це звучить складно та суперечливо. Але якщо розібратися, то принцип цілком логічний. Дотримання принципу OCP полягає в тому, що програмне забезпечення змінюється не через зміну існуючого коду, а через додавання нового коду. Тобто створений код залишається «недоторканим» і стабільним, а нова функціональність впроваджується або через успадкування реалізації, або через використання абстрактних інтерфейсів і поліморфізм. Отже, Погляньмо на клас FileLogger. Якщо нам потрібно буде записувати логи в інший файл, ми можемо змінити назву: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">class</span> <span class="token class-name">FileLogger</span><span class="token punctuation">{</span>
    fun <span class="token function">logError</span><span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        val file <span class="token operator">=</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"errors2.txt"</span><span class="token punctuation">)</span>
        file<span class="token punctuation">.</span><span class="token function">appendText</span><span class="token punctuation">(</span>text <span class="token operator">=</span> error<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> Але тоді всі логи записуватимуться в новий файл, чого, швидше за все, нам не треба. Але як змінити наш логер, не змінюючи сам клас? 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">open</span> <span class="token keyword">class</span> <span class="token class-name">FileLogger</span><span class="token punctuation">{</span>

    <span class="token keyword">open</span> <span class="token namespace">fun</span> <span class="token function">logError</span><span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        val file <span class="token operator">=</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"error.txt"</span><span class="token punctuation">)</span>
        file<span class="token punctuation">.</span><span class="token function">appendText</span><span class="token punctuation">(</span>text <span class="token operator">=</span> error<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">CustomErrorFileLogger</span> <span class="token operator">:</span> <span class="token class-name">FileLogger</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    override fun <span class="token function">logError</span><span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        val file <span class="token operator">=</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"my_custom_error_file.txt"</span><span class="token punctuation">)</span>
        file<span class="token punctuation">.</span><span class="token function">appendText</span><span class="token punctuation">(</span>text <span class="token operator">=</span> error<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre> Позначаємо клас FileLogger та функцію logError як open, створюємо новий клас CustomErrorFileLogger та пишемо нову реалізацію логування. У результаті наш клас є доступним для розширення функціональності, але закритий для модифікації. 3. L: <strong><em>Liskov Substitution Principle</em></strong> &nbsp;(Принцип підстановки Барбари Лисков). Необхідно, щоб підкласи могли бути заміною для своїх суперкласів. Ціль цього принципу полягає в тому, щоб класи-спадкоємці могли б використовуватися замість батьківських класів, від яких вони утворені, не порушуючи роботу програми. Якщо виявляється, що в коді перевіряється тип класу, то принцип підстановки порушується. Якби ми клас-спадкоємець написали так: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">class</span> <span class="token class-name">CustomErrorFileLogger</span> <span class="token operator">:</span> <span class="token class-name">FileLogger</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    fun <span class="token function">customErrorLog</span><span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        val file <span class="token operator">=</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"my_custom_error_file.txt"</span><span class="token punctuation">)</span>
        file<span class="token punctuation">.</span><span class="token function">appendText</span><span class="token punctuation">(</span>text <span class="token operator">=</span> error<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre> І тепер замінимо клас FileLogger на CustomErrorFileLogger у репозиторії 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">class</span> <span class="token class-name">MainRepository</span><span class="token punctuation">(</span>
    <span class="token keyword">private</span> val auth<span class="token operator">:</span> <span class="token class-name">FirebaseAuth</span><span class="token punctuation">,</span>
    <span class="token keyword">private</span> val fileLogger<span class="token operator">:</span> <span class="token class-name">CustomErrorFileLogger</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    suspend fun <span class="token function">loginUser</span><span class="token punctuation">(</span>email<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> password<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span><span class="token punctuation">{</span>
            auth<span class="token punctuation">.</span><span class="token function">signInWithEmailAndPassword</span><span class="token punctuation">(</span>email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token operator">:</span> <span class="token class-name">Exception</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            fileLogger<span class="token punctuation">.</span><span class="token function">logError</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>message<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre> У цьому випадку logError викликається з батьківського класу, або доведеться змінювати виклик fileLogger.logError(e.message.toString()) на fileLogger.customErrorLog(e.message.toString()) 4. I: Interface Segregation <strong><em>Principle</em></strong> &nbsp;(Принцип поділу інтерфейсу) . Створюйте вузькоспеціалізовані інтерфейси, призначені для конкретного клієнта. Клієнти не повинні залежати від інтерфейсів, які вони не використовують. Звучить складно, але насправді все дуже просто. Для прикладу давайте клас FileLogger зробимо інтерфейсом, але додамо до нього ще одну функцію: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">interface</span> <span class="token class-name">FileLogger</span><span class="token punctuation">{</span>

    fun <span class="token function">printLogs</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    fun <span class="token function">logError</span><span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        val file <span class="token operator">=</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"errors.txt"</span><span class="token punctuation">)</span>
        file<span class="token punctuation">.</span><span class="token function">appendText</span><span class="token punctuation">(</span>text <span class="token operator">=</span> error<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre> Тепер усі спадкоємці будуть зобов'язані реалізувати функцію printLogs, навіть якщо нам не треба це у всіх класах спадкоємців. 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">class</span> <span class="token class-name">CustomErrorFileLogger</span> <span class="token operator">:</span> <span class="token class-name">FileLogger</span><span class="token punctuation">{</span>

    override fun <span class="token function">printLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    override fun <span class="token function">logError</span><span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        val file <span class="token operator">=</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"my_custom_error_file.txt"</span><span class="token punctuation">)</span>
        file<span class="token punctuation">.</span><span class="token function">appendText</span><span class="token punctuation">(</span>text <span class="token operator">=</span> error<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre> і тепер ми матимемо порожні функції, що погано для чистоти коду. Натомість ми можемо зробити дефолтне значення в інтерфейсі і тоді перевизначати функцію тільки в тих класах, в яких це потрібно: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">interface</span> <span class="token class-name">FileLogger</span><span class="token punctuation">{</span>

    fun <span class="token function">printLogs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//якая-то дефолтная реализация</span>
    <span class="token punctuation">}</span>

    fun <span class="token function">logError</span><span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        val file <span class="token operator">=</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"errors.txt"</span><span class="token punctuation">)</span>
        file<span class="token punctuation">.</span><span class="token function">appendText</span><span class="token punctuation">(</span>text <span class="token operator">=</span> error<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">class</span> <span class="token class-name">CustomErrorFileLogger</span> <span class="token operator">:</span> <span class="token class-name">FileLogger</span><span class="token punctuation">{</span>

    override fun <span class="token function">logError</span><span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        val file <span class="token operator">=</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"my_custom_error_file.txt"</span><span class="token punctuation">)</span>
        file<span class="token punctuation">.</span><span class="token function">appendText</span><span class="token punctuation">(</span>text <span class="token operator">=</span> error<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre> Тепер класи, які будуть реалізувати інтерфейс FileLogger будуть чистішими. 5. D: <strong><em>Dependency Inversion Principle</em></strong> &nbsp;(Принцип інверсії залежностей). Об'єктом залежності має бути абстракція, а не щось конкретне. Повернімося до нашого основного класу: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">class</span> <span class="token class-name">MainRepository</span><span class="token punctuation">(</span>
    <span class="token keyword">private</span> val auth<span class="token operator">:</span> <span class="token class-name">FirebaseAuth</span><span class="token punctuation">,</span>
    <span class="token keyword">private</span> val fileLogger<span class="token operator">:</span> <span class="token class-name">FileLogger</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    suspend fun <span class="token function">loginUser</span><span class="token punctuation">(</span>email<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> password<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span><span class="token punctuation">{</span>
            auth<span class="token punctuation">.</span><span class="token function">signInWithEmailAndPassword</span><span class="token punctuation">(</span>email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> <span class="token class-name">Exception</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            fileLogger<span class="token punctuation">.</span><span class="token function">logError</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>message<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre> Здається, ми все тут уже налаштували і пофіксували. Але все ж таки є ще один момент, який варто змінити. Це використання класу FirebaseAuth. Що буде якщо в якийсь момент нам треба буде змінити авторизацію та логінуватися не через Firebase, а, наприклад, за якимсь запитом? Тоді доведеться змінювати багато чого, а нам цього не хотілося б. Для цього створюємо інтерфейс з функцією signInWithEmailAndPassword(email: String, password: String): 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">interface</span> <span class="token class-name">Authenticator</span><span class="token punctuation">{</span>
    fun <span class="token function">signInWithEmailAndPassword</span><span class="token punctuation">(</span>email<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> password<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre> Цей інтерфейс є наша абстракція. І тепер робимо конкретні реалізації логіну 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">class</span> <span class="token class-name">FirebaseAuthenticator</span> <span class="token operator">:</span> <span class="token class-name">Authenticator</span><span class="token punctuation">{</span>

    override fun <span class="token function">signInWithEmailAndPassword</span><span class="token punctuation">(</span>email<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> password<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">FirebaseAuth</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">signInWithEmailAndPassword</span><span class="token punctuation">(</span>email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">class</span> <span class="token class-name">CustomApiAuthenticator</span> <span class="token operator">:</span> <span class="token class-name">Authenticator</span><span class="token punctuation">{</span>

    override fun <span class="token function">signInWithEmailAndPassword</span><span class="token punctuation">(</span>email<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> password<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//другой способ логина</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre> І в класі `MainRepository` тепер не залежить від конкретної реалізації, а тільки від абстракції 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">class</span> <span class="token class-name">MainRepository</span> <span class="token punctuation">(</span>
    <span class="token keyword">private</span> val auth<span class="token operator">:</span> <span class="token class-name">Authenticator</span><span class="token punctuation">,</span>
    <span class="token keyword">private</span> val fileLogger<span class="token operator">:</span> <span class="token class-name">FileLogger</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    suspend fun <span class="token function">loginUser</span><span class="token punctuation">(</span>email<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> password<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span><span class="token punctuation">{</span>
            auth<span class="token punctuation">.</span><span class="token function">signInWithEmailAndPassword</span><span class="token punctuation">(</span>email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token operator">:</span> <span class="token class-name">Exception</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            fileLogger<span class="token punctuation">.</span><span class="token function">logError</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>message<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre> І тепер щоб змінити спосіб авторизації нам треба змінити лише один рядок у класі модуля.