Регулярні вирази в Java, частина 4
<p>----------------------------------------</p>
Пропонуємо до вашої уваги переклад короткого посібника з регулярних виразів у мові Java, написаного Джеффом Фрісеном (Jeff Friesen) для сайту . Для простоти читання ми розділили статтю кілька частин. Вихідний код програми включає виклик мет
<p>----------------------------------------</p>
Пропонуємо до вашої уваги переклад короткого посібника з регулярних виразів у мові Java, написаного Джеффом Фрісеном (Jeff Friesen) для сайту <a href="https://www.javaworld.com/article/3195301/learn-java/java-101-regular-expressions-in-java-part-2.html?page=2" target="_blank">javaworld</a> . Для простоти читання ми розділабо статтю кілька частин. <img data-max-width="800" data-id="1e0c1623-25d7-4a5c-8476-f610d0b89429" class="img-fluid" alt="Регулярні вирази Java, частина 4 - 1" src="https://cdn.javarush.com/images/article/1e0c1623-25d7-4a5c-8476-f610d0b89429/800.jpeg" style="width: 800px;"> <a href="https://codegym.cc/groups/posts/136-reguljarnihe-vihrazhenija-v-java-chastjh-1" target="_blank">Регулярні вирази в Java, частина 1 </a> <a href="https://codegym.cc/groups/posts/154-reguljarnihe-vihrazhenija-v-java-chastjh-2" target="_blank">Регулярні вирази в Java, частина 2 </a> <a href="https://codegym.cc/groups/posts/186-reguljarnihe-vihrazhenija-v-java-chastjh-3" target="_blank">Регулярні вирази в Java, частина 3 </a>
<h2>Методи роботи з захоплюваними групами</h2>Вихідний код програми <code class=" language-none">RegexDemo</code>включає виклик методу <code class=" language-none">m.group()</code>. Метод <code class=" language-none">group()</code>– одне із кількох методів класу <code class=" language-none">Matcher</code>, орієнтованих працювати із захоплюваними групами: 
<ul>
 <li>
  <p>Метод <code class=" language-none">int groupCount()</code>повертає кількість груп, що захоплюються в шаблоні співставника. Ця кількість не враховує спеціальну групу, що захоплюється, номер 0, відповідну шаблону в цілому.</p></li>
 <li>
  <p>Метод <code class=" language-none">String group()</code>повертає символи попереднього знайденого збігу. Щоб повідомити про успішний пошук по порожньому рядку, цей метод повертає порожній рядок. Якщо порівняч ще не виконував пошуку або попередня операція пошуку завершилася невдачею, генерується виняток <code class=" language-none">IllegalStateException</code>.</p></li>
 <li>
  <p>Метод <code class=" language-none">String group(int group)</code>нагадує попередній метод, за винятком того, що повертає символи попереднього знайденого збігу, захоплені групою, номер якої задається параметром <code class=" language-none">group</code>. Зверніть увагу, що <code class=" language-none">group(0)</code>еквівалентно <code class=" language-none">group()</code>. Якщо в шаблоні немає групи з заданим номером, метод генерує виняток <code class=" language-none">IndexOutOfBoundsException</code>. Якщо порівняч ще не виконував пошуку або попередня операція пошуку завершилася невдачею, генерується виняток <code class=" language-none">IllegalStateException</code>.</p></li>
 <li>
  <p>Метод <code class=" language-none">String group(String name)</code>повертає символи попереднього знайденого збігу, захоплені групою name. Якщо групи name у шаблоні немає, генерується виняток <code class=" language-none">IllegalArgumentException</code>. Якщо порівняч ще не виконував пошуку або попередня операція пошуку завершилася невдачею, генерується виняток <code class=" language-none">IllegalStateException</code>.</p></li>
</ul>Наступний приклад демонструє використання методів <code class=" language-none">groupCount()</code>та <code class=" language-none">group(int group)</code>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">Pattern</span></span> p <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Pattern</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">compile</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"(.(.(.)))"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">Matcher</span></span> m <span class="token operator"><span class="token operator">=</span></span> p<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">matcher</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"abc"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
m<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">find</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>m<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">groupCount</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">for</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span> i <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> i <span class="token operator"><span class="token operator">&lt;=</span></span> m<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">groupCount</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> i<span class="token operator"><span class="token operator">++</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>i <span class="token operator"><span class="token operator">+</span></span> <span class="token string"><span class="token string">": "</span></span> <span class="token operator"><span class="token operator">+</span></span> m<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">group</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>i<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Результати виконання: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token number"><span class="token number">3</span></span>
<span class="token number"><span class="token number">0</span></span><span class="token operator"><span class="token operator">:</span></span> abc
<span class="token number"><span class="token number">1</span></span><span class="token operator"><span class="token operator">:</span></span> abc
<span class="token number"><span class="token number">2</span></span><span class="token operator"><span class="token operator">:</span></span> bc
<span class="token number"><span class="token number">3</span></span><span class="token operator"><span class="token operator">:</span></span> c</code></pre><img data-max-width="800" data-id="c110d579-e4b1-43a3-a0f0-598e96f20e16" class="img-fluid" alt="Регулярні вирази у Java, частина 4 - 2" src="https://cdn.javarush.com/images/article/c110d579-e4b1-43a3-a0f0-598e96f20e16/800.jpeg" style="width: 800px;">
<h2>Методи визначення позицій збігів</h2> Клас <code class=" language-none">Matcher</code>надає кілька методів, що повертають початкову та кінцеву позиції збігу: 
<ul>
 <li>
  <p>Метод <code class=" language-none">int start()</code>повертає початкову позицію попереднього знайденого збігу. Якщо порівняч ще не виконував пошуку або попередня операція пошуку завершилася невдачею, генерується виняток <code class=" language-none">IllegalStateException</code>.</p></li>
 <li>
  <p>Метод <code class=" language-none">int start(int group)</code>нагадує попередній метод, але повертає початкову позицію попереднього знайденого збігу групи, номер якої задається параметром <code class=" language-none">group</code>. Якщо в шаблоні немає групи з заданим номером, метод генерує виняток <code class=" language-none">IndexOutOfBoundsException</code>. Якщо порівняч ще не виконував пошуку або попередня операція пошуку завершилася невдачею, генерується виняток <code class=" language-none">IllegalStateException</code>.</p></li>
 <li>
  <p>Метод <code class=" language-none">int start(String name)</code>нагадує попередній метод, але повертає початкову позицію попереднього знайденого збігу групи з назвою <code class=" language-none">name</code>. Якщо групи, що захоплюється, <code class=" language-none">name</code>у шаблоні немає, генерується виняток <code class=" language-none">IllegalArgumentException</code>. Якщо порівняч ще не виконував пошуку або попередня операція пошуку завершилася невдачею, генерується виняток <code class=" language-none">IllegalStateException</code>.</p></li>
 <li>
  <p>Метод <code class=" language-none">int end()</code>повертає позицію останнього із символів попереднього знайденого збігу плюс 1. Якщо співставник ще не виконував пошуку або попередня операція пошуку завершилася невдачею, генерується виняток <code class=" language-none">IllegalStateException</code>.</p></li>
 <li>
  <p>Метод <code class=" language-none">int end(int group)</code>нагадує попередній метод, але повертає кінцеву позицію попереднього знайденого збігу групи, номер якої задається параметром <code class=" language-none">group</code>. Якщо в шаблоні немає групи з заданим номером, метод генерує виняток <code class=" language-none">IndexOutOfBoundsException</code>. Якщо порівняч ще не виконував пошуку або попередня операція пошуку завершилася невдачею, генерується виняток <code class=" language-none">IllegalStateException</code>.</p></li>
 <li>
  <p>Метод <code class=" language-none">int end(String name)</code>нагадує попередній метод, але повертає кінцеву позицію попереднього знайденого збігу групи з назвою <code class=" language-none">name</code>. Якщо групи, що захоплюється, <code class=" language-none">name</code>у шаблоні немає, генерується виняток <code class=" language-none">IllegalArgumentException</code>. Якщо порівняч ще не виконував пошуку або попередня операція пошуку завершилася невдачею, генерується виняток <code class=" language-none">IllegalStateException</code>.</p></li>
</ul>Наступний приклад демонструє два методи позиціонування збігів, що виводять початкову/кінцеву позиції збігу для захоплюваної групи номер 2: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">Pattern</span></span> p <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Pattern</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">compile</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"(.(.(.)))"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">Matcher</span></span> m <span class="token operator"><span class="token operator">=</span></span> p<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">matcher</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"abcabcabc"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">while</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>m<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">find</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
<span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Найдено "</span></span> <span class="token operator"><span class="token operator">+</span></span> m<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">group</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">2</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"  начинается с позиции "</span></span> <span class="token operator"><span class="token operator">+</span></span> m<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">start</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">2</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">+</span></span>
                      <span class="token string"><span class="token string">" и заканчивается на позиции "</span></span> <span class="token operator"><span class="token operator">+</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>m<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">end</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">2</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">-</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> В результаті виконання цього прикладу виводиться таке: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java">Найдено bc
начинается с позиции <span class="token number"><span class="token number">1</span></span> и заканчивается на позиции <span class="token number"><span class="token number">2</span></span>
Найдено bc
начинается с позиции <span class="token number"><span class="token number">4</span></span> и заканчивается на позиции <span class="token number"><span class="token number">5</span></span>
Найдено bc
начинается с позиции <span class="token number"><span class="token number">7</span></span> и заканчивается на позиции <span class="token number"><span class="token number">8</span></span></code></pre>
<h2>Методи класу PatternSyntaxException</h2>Примірник класу <code class=" language-none">PatternSyntaxException</code>описує синтаксичну помилку у регулярному вираженні. Генерує такий виняток з методів <code class=" language-none">compile()</code>і <code class=" language-none">matches()</code>класу <code class=" language-none">Pattern</code>, а формується за допомогою наступного конструктора: <code class=" language-none">PatternSyntaxException(String desc, String regex, int index)</code> Цей конструктор зберігає вказаний опис ( <code class=" language-none">desc</code>), <a href="https://codegym.cc/groups/posts/2013-reguljarnihe-vihrazhenija-v-java" target="_blank">регулярний вираз</a> ( <code class=" language-none">regex</code>) та позицію, на якій відбулася синтаксична помилка. Якщо місце синтаксичної помилки невідоме, значення <code class=" language-none">index</code>встановлюється рівним <code class=" language-none">-1</code>. Швидше за все, вам ніколи не знадобиться створювати екземпляри класу <code class=" language-none">PatternSyntaxException</code>. Тим не менш, потрібно буде виймати вищезазначені значення при створенні форматованого повідомлення про помилку. Для цього можна скористатися такими методами: 
<ul>
 <li>Метод <code class=" language-none">String getDescription()</code>повертає опис синтаксичної помилки.</li>
 <li>Метод <code class=" language-none">int getIndex()</code>повертає або позицію, де сталася помилка, або -1, якщо позиція невідома.</li>
 <li>Метод <code class=" language-none">String getPattern()</code>повертає помилкове регулярне вираження.</li>
</ul>Крім того, успадкований метод <code class=" language-none">String getMessage()</code>повертає багаторядковий рядок зі значеннями, повернутими з попередніх методів разом із візуальною вказівкою на місце синтаксичної помилки у шаблоні. Що таке синтаксична помилка? Ось приклад: <code class=" language-none">java RegexDemo (?itree Treehouse</code> У цьому випадку ми забули вказати закриває метасимвол дужки ( <code class=" language-none">)</code>) у вкладеному прапорі. Ось що виводиться внаслідок цієї помилки: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java">regex <span class="token operator"><span class="token operator">=</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token operator"><span class="token operator">?</span></span>itree
input <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Treehouse</span></span>
<code>Неправильное регулярное выражение<span class="token operator"><span class="token operator">:</span></span> <span class="token class-name"><span class="token class-name">Unknown</span></span> inline modifier near index <span class="token number"><span class="token number">3</span></span>
<span class="token punctuation"><span class="token punctuation">(</span></span><span class="token operator"><span class="token operator">?</span></span>itree</code>
   <span class="token operator"><span class="token operator">^</span></span>
Описание<span class="token operator"><span class="token operator">:</span></span> <span class="token class-name"><span class="token class-name">Unknown</span></span> inline modifier
Позиция<span class="token operator"><span class="token operator">:</span></span> <span class="token number"><span class="token number">3</span></span>
Неправильный шаблон<span class="token operator"><span class="token operator">:</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token operator"><span class="token operator">?</span></span>itree</code></pre>
<h2>Створення корисних програм з регулярними виразами за допомогою API Regex</h2>Регулярні вирази дозволяють створювати додатки для обробки тексту, які мають великі можливості. У цьому розділі ми покажемо вам дві зручні програми, які, сподіваємося, спонукають вас далі дослідити класи та методи API Regex. У другому додатку ви познайомитеся з Lexan: бібліотекою багаторазового коду для виконання лексичного аналізу. <img data-max-width="800" data-id="61f26bdb-8d85-4cd0-b113-02be78f5a480" class="img-fluid" alt="Регулярні вирази Java, частина 4 - 3" src="https://cdn.javarush.com/images/article/61f26bdb-8d85-4cd0-b113-02be78f5a480/800.jpeg" style="width: 800px;">
<h2>Регулярні вирази та документація</h2>Документування – одне з обов'язкових завдань розробки професійно виконаного програмного забезпечення. На щастя, регулярні висловлювання можуть допомогти вам з багатьма аспектами створення документації. Код у лістингу 1 витягує рядки, що містять однорядкові та багаторядкові коментарі в стилі мови C з вихідного файлу і записує їх в інший файл. Щоб код працював, коментарі мають бути розташовані в одному рядку. Лістинг 1. Вилучення коментарів 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>io<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">BufferedReader</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>io<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">BufferedWriter</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>io<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">FileReader</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>io<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">FileWriter</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>io<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">IOException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span>regex<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Matcher</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span>regex<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Pattern</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span>regex<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">PatternSyntaxException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">ExtCmnt</span></span>
<span class="token punctuation"><span class="token punctuation">{</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token punctuation"><span class="token punctuation">{</span></span>
      <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>args<span class="token punctuation"><span class="token punctuation">.</span></span>length <span class="token operator"><span class="token operator">!=</span></span> <span class="token number"><span class="token number">2</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
      <span class="token punctuation"><span class="token punctuation">{</span></span>
         <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>err<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Способ применения: java ExtCmnt infile outfile"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
         <span class="token keyword"><span class="token keyword">return</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
      <span class="token punctuation"><span class="token punctuation">}</span></span>

      <span class="token class-name"><span class="token class-name">Pattern</span></span> p<span class="token punctuation"><span class="token punctuation">;</span></span>
      <span class="token keyword"><span class="token keyword">try</span></span>
      <span class="token punctuation"><span class="token punctuation">{</span></span>
         <span class="token comment"><span class="token comment">// Следующий шаблон определяет многострочные комментарии,</span></span>
         <span class="token comment"><span class="token comment">// располагающиеся в одной строке (например, /* одна строка */)</span></span>
            <span class="token comment"><span class="token comment">// и однострочные комментарии (например, // якая-то строка).</span></span>
            <span class="token comment"><span class="token comment">// Комментарий может располагаться в любом месте строки.</span></span>

         p <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Pattern</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">compile</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">".*/\\*.*\\*/|.*//.*$"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
      <span class="token punctuation"><span class="token punctuation">}</span></span>
      <span class="token keyword"><span class="token keyword">catch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">PatternSyntaxException</span></span> pse<span class="token punctuation"><span class="token punctuation">)</span></span>
      <span class="token punctuation"><span class="token punctuation">{</span></span>
         <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>err<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">printf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Синтаксическая ошибка в регулярном выражении: %s%n"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> pse<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getMessage</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
         <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>err<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">printf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Описание ошибки: %s%n"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> pse<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getDescription</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
         <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>err<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">printf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Позиция ошибки: %s%n"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> pse<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getIndex</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
         <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>err<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">printf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Ошибочный шаблон: %s%n"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> pse<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getPattern</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
         <span class="token keyword"><span class="token keyword">return</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
      <span class="token punctuation"><span class="token punctuation">}</span></span>

      <span class="token keyword"><span class="token keyword">try</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">FileReader</span></span> fr <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">FileReader</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>args<span class="token punctuation"><span class="token punctuation">[</span></span><span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">]</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
           <span class="token class-name"><span class="token class-name">BufferedReader</span></span> br <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">BufferedReader</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>fr<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
           <span class="token class-name"><span class="token class-name">FileWriter</span></span> fw <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">FileWriter</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>args<span class="token punctuation"><span class="token punctuation">[</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">]</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
           <span class="token class-name"><span class="token class-name">BufferedWriter</span></span> bw <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">BufferedWriter</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>fw<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
      <span class="token punctuation"><span class="token punctuation">{</span></span>
         <span class="token class-name"><span class="token class-name">Matcher</span></span> m <span class="token operator"><span class="token operator">=</span></span> p<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">matcher</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">""</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
         <span class="token class-name"><span class="token class-name">String</span></span> line<span class="token punctuation"><span class="token punctuation">;</span></span>
         <span class="token keyword"><span class="token keyword">while</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>line <span class="token operator"><span class="token operator">=</span></span> br<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">readLine</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">!=</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
         <span class="token punctuation"><span class="token punctuation">{</span></span>
            m<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">reset</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>line<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>m<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">matches</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token comment"><span class="token comment">/* Должна соответствовать вся строка */</span></span>
            <span class="token punctuation"><span class="token punctuation">{</span></span>
               bw<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">write</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>line<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
               bw<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">newLine</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token punctuation"><span class="token punctuation">}</span></span>
         <span class="token punctuation"><span class="token punctuation">}</span></span>
      <span class="token punctuation"><span class="token punctuation">}</span></span>
      <span class="token keyword"><span class="token keyword">catch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">IOException</span></span> ioe<span class="token punctuation"><span class="token punctuation">)</span></span>
      <span class="token punctuation"><span class="token punctuation">{</span></span>
         <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>err<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>ioe<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getMessage</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
         <span class="token keyword"><span class="token keyword">return</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
      <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Метод <code class=" language-none">main()</code>з лістингу 1 спочатку перевіряє правильність синтаксису командного рядка, після чого компілює призначене для виявлення одно-і багаторядкових коментарів регулярне вираження об'єкт класу <code class=" language-none">Pattern</code>. Якщо немає винятку <code class=" language-none">PatternSyntaxException</code>, спосіб <code class=" language-none">main()</code>відкриває вихідний файл, створює цільовий файл, отримує співставник для зіставлення кожного прочитаного рядка з шаблоном, після чого читає вихідний файл рядково. Для кожного рядка виконується зіставлення її із шаблоном коментаря. У разі успіху метод <code class=" language-none">main()</code>записує рядок (з наступним символом нового рядка) у цільовий файл (ми розглянемо логіку файлового вводу/виводу у майбутньому навчальному посібнику Java 101). Скомпілюйте листинг 1 таким чином: <code class=" language-none">javac ExtCmnt.java</code> Виконайте програму з файлом<code class=" language-none">ExtCmnt.java</code>як вхідний: <code class=" language-none">java ExtCmnt ExtCmnt.java out</code> Ви повинні отримати у файлі out наступні результати: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token comment"><span class="token comment">// Следующий шаблон определяет многострочные комментарии,</span></span>
 <span class="token comment"><span class="token comment">// располагающиеся в одной строке (например, /* одна строка */)</span></span>
    <span class="token comment"><span class="token comment">// и однострочные комментарии (например, // якая-то строка).</span></span>
    <span class="token comment"><span class="token comment">// Комментарий может располагаться в любом месте строки.</span></span>
p <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Pattern</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">compile</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">".*/\\*.*\\*/|.*//.*$"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>m<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">matches</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token comment"><span class="token comment">/* Должна соответствовать вся строка */</span></span></code></pre> У рядку шаблону <code class=" language-none">.*/\\*.*\\*/|.*//.*$</code>метасимвол вертикальної риси <code class=" language-none">|</code>грає роль логічного оператора АБО, що вказує на необхідність співставника використовувати лівий операнд з конструкції даного регулярного виразу для пошуку відповідності в тексті співставника. Якщо відповідностей немає, співставник використовує правий операнд з конструкції даного регулярного вираження для ще однієї спроби пошуку (метасимволи дужок у групі, що захоплюється, теж формують логічний оператор). <a href="https://codegym.cc/groups/posts/247-reguljarnihe-vihrazhenija-v-java-chastjh-5" target="_blank">Регулярні вирази в Java, частина 5</a><a href="https://codegym.cc/welcome" target="_blank"><img id="click_banner1_articles" data-max-width="1024" data-id="826dcbe9-1f0f-4950-91bd-3be9958acb84" class="img-fluid" alt="Регулярні вирази у Java, частина 4 - 4" src="https://cdn.javarush.com/images/article/826dcbe9-1f0f-4950-91bd-3be9958acb84/1024.jpeg" style="width: 1024px;"></a><a href="https://codegym.cc/groups/posts/247-reguljarnihe-vihrazhenija-v-java-chastjh-5" target="_blank"></a>
<div class="table-container">
 <table>
  <tbody>
   <tr>
    <th>
     <p>Що ще почитати:</p></th>
   </tr>
   <tr>
    <td>
     <ul>
      <li><a href="https://codegym.cc/groups/posts/264-populjarno-o-ljambda-vihrazhenijakh-v-java-s-primerami-i-zadachami-chastjh-1-" target="_blank">Популярно про лямбда-вираження в Java. З прикладами та завданнями. Частина 1</a></li>
      <li><a href="https://codegym.cc/groups/posts/305-sozdanie-prosteyshego-web-proekta-v-intellij-idea-enterprise-edition-poshagovo-s-kartinkami" target="_blank">Створення найпростішого веб-проекту в IntelliJ Idea Enterprise. Покроково, з картинками</a></li>
      <li><a href="https://codegym.cc/groups/posts/234-luchshie-knigi-dlja-podgotovki-k-ehkzamenu-ocajp8-1z0-808-po-java-8" target="_blank">Кращі книги для підготовки до іспиту OCAJP8 (1Z0-808) з Java 8</a></li>
     </ul></td>
   </tr>
  </tbody>
 </table>
</div>