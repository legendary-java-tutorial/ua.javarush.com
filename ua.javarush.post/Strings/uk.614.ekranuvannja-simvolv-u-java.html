Екранування символів у Java
<p>----------------------------------------</p>
Щось пішло не так! Ця стаття писалася як виконання тестового завдання посаду у команді JavaRush. І писалася як повноцінна лекція. За рахунок цього гарантую вам якість і кількість корисних знань, що накопичилися в цьому пості. Крім практично
<p>----------------------------------------</p>
Щось пішло не так! Ця стаття писалася як виконання тестового завдання посаду у команді CodeGym. І писалася як повноцінна лекція. За рахунок цього гарантую вам якість і кількість корисних знань, що накопичабося в цьому пості. Крім практичної та теоретичної інформації, у статті є цікаві факти, про які ви могли навіть не здогадуватися! <img data-id="c2d47735-26c0-47f3-a632-16513b163b5c" data-max-width="850" alt="Екранування символів у Java - 1" src="https://cdn.javarush.com/images/article/c2d47735-26c0-47f3-a632-16513b163b5c/800.jpeg" style="width: 850px;">Hello World! <a href="https://ru.wikipedia.org/wiki/%D0%AD%D0%BA%D1%80%D0%B0%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%81%D0%B8%D0%BC%D0%B2%D0%BE%D0%BB%D0%BE%D0%B2" target="_blank" rel="nofollow">Екранування символів</a>— це дуже цікаве та необхідне технічне рішення. Необхідність у екрануванні символів зіграло значної ролі історія всієї індустрії програмування. У цій статті ми поговоримо про те, що таке екранування символів, чому виникла потреба їх екранувати, і як екранування символів реалізовано Java. У статті наведено приклади та цікаві факти, пов'язані з темою екранування символів. Приємного читання! Вся інформація в комп'ютерній системі представлена ​​у вигляді тексту, який нижчому рівні представлений байтами. Коли ми пишемо листа чи повідомлення, ми набираємо текст, який буде зрозумілий для людини. Коли ми пишемо код у IDE, ми набираємо текст, який зможе розібрати компілятор. У Java текст можна подати у вигляді типу<code class=" language-none">String</code>для позначення даних якого використовуються керуючі символи - парні лапки. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">String</span></span> str <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Hello World!"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> З текстом Hello World! ніяких проблем не виникає, але якщо цей текст необхідно виділити прямою мовою? Скориставшись правилами граматики стає ясно, що текст “Hello World!”, окрім керуючих символів від типу <code class=" language-none">String</code>, потрібно помістити в лапки прямої мови. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">String</span></span> str <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Java said, "</span></span><span class="token class-name"><span class="token class-name">Hello</span></span> <span class="token class-name"><span class="token class-name">World</span></span><span class="token operator"><span class="token operator">!</span></span><span class="token string"><span class="token string">""</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Такий випадок буде неробочим, т.к. компілятор просто не зрозуміє в який момент закінчується ініціалізація змінної <code class=" language-none">str</code>. Для вирішення цієї та подібних їй проблем було придумано <span class="text-bold">екранувати символи</span> , тобто змінювати <span class="text-bold">керуючі символи</span> на так звані послідовності, що управляють, відомі також, як <span class="text-bold">escape-послідовності</span> . Нижче наведено список діючих escape-послідовностей java для використання у рядках. <code class=" language-none">\t </code>- Символ табуляції (у java - еквівалент чотирьох прогалин); <code class=" language-none">\b</code>- Символ повернення в тексті на один крок назад або видалення одного символу в рядку (backspace); <code class=" language-none">\n</code>- Символ переходу на новий рядок; <code class=" language-none">\r</code>- Символ повернення каретки; <code class=" language-none">\f</code>- Прогін сторінки до початку наступної сторінки; <code class=" language-none">\'</code>- Символ одинарної лапки; <code class=" language-none">\"</code>- символ подвійної лапки; <code class=" language-none">\\</code>— Символ зворотної косої межі ( <code class=" language-none">\</code>). Тепер давайте виділимо пряме мовлення у нашій фразі те щоб компілятор зміг без проблем розібрати написане. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">String</span></span> str <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Java said, \"Hello World!\""</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Таким чином, написаний текст зрозумілий і компілятор і людині, якщо вміст змінної <code class=" language-none">str</code>вивести на екран. Ми розібралися з тим, що таке екранування символів і для чого воно потрібне. І навіть екранували символ подвійної лапки! Приступимо до розбору escape-послідовностей, що залишабося. 
<div class="table-container">
 <table>
  <tbody>
   <tr>
    <th>Що ще почитати:</th>
   </tr>
   <tr>
    <td>
     <p><a href="https://codegym.cc/groups/java-developer" target="_blank">Група Java Developer:</a></p>
     <ul>
      <li>
       <p><a href="https://codegym.cc/groups/posts/1921-ehkranirovanie-simvolov" target="_blank">Екранування символів</a></p></li>
     </ul></td>
   </tr>
  </tbody>
 </table>
</div>Символ табуляції у рядку позначається escape-послідовністю <code class=" language-none">\t</code>та є аналогом чотирьох прогалин. Однак, якщо довжина рядка, що складається з чотирьох пробілів, дорівнює довжині чотирьох символів, то довжина рядка з символом табуляції дорівнюватиме одному. Символ табуляції часто використовується для побудови таблиць чи <a href="https://ru.wikipedia.org/wiki/%D0%9F%D1%81%D0%B5%D0%B2%D0%B4%D0%BE%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0" target="_blank" rel="nofollow">псевдографічних</a> елементів інтерфейсу, т.к. це зручніше запису чотирьох прогалин. Нижче наведено приклад псевдографічного інтерфейсу. <img data-id="4572681f-f39e-471f-86c7-8b9e9b5eae17" data-max-width="850" alt="Екранування символів у Java - 2" src="https://cdn.javarush.com/images/article/4572681f-f39e-471f-86c7-8b9e9b5eae17/800.jpeg" style="width: 850px;">Серед усіх escape-послідовностей символ <code class=" language-none">\b</code>мабуть найцікавіший, адже він дозволяє нам видалити останній символ у рядку виведення, подібно, якби ми прали його натисканням клавіші <span class="text-bold">backspace</span> . 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">print</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"2 + 2 = 5"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// На екрані відображається 2 + 2 = 5</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">print</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"\b"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span><span class="token comment"><span class="token comment">// На екрані відображається 2 + 2 =</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">print</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"4"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span><span class="token comment"><span class="token comment">// На екрані відображається 2 + 2 = 4</span></span></code></pre> Символи <code class=" language-none">\n</code>і <code class=" language-none">\r</code>мають спільну історію – розглянемо їх разом. Зі символом перенесення рядка <code class=" language-none">\n</code>ви могли зустрічатися раніше. Наприклад, якщо метод <code class=" language-none">println()</code>виводить інформацію так, що наступний висновок буде з нового рядка, то метод <code class=" language-none">print()</code>не виконує перенесення рядка після виведення, але якщо додати в кінець виводу символ <code class=" language-none">\n</code>, то перенесення рядка буде виконано. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">print</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Наступний висновок буде з нового рядка\n"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Наступний висновок буде з нового рядка"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Символ повернення каретки <code class=" language-none">\r</code>дозволяє нам повернути курсор до початку рядка виведення та відображати нову інформацію так, ніби раніше у цьому рядку нічого не було. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">print</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Текст, який потрібно переписати."</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span><span class="token comment"><span class="token comment">//На екрані відображається "Текст, який потрібно переписати."</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">print</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">'\r'</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span><span class="token comment"><span class="token comment">//На екрані порожньо</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">print</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Новий текст."</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span><span class="token comment"><span class="token comment">//На екрані відображається "Новий текст."</span></span></code></pre> Насправді повернення каретки бере початок ще з часів, коли текст друкували на друкарських машинках. Щоб виконати перенесення рядка, необхідно було пересунути каретку та опустити важіль (частини механізму друкарської машинки), після чого буде виконано перенесення рядка. Якщо ж важіль не опустити, можна було продовжувати друкувати у тому рядку. Що ми спостерігаємо, виводячи символ <code class=" language-none">\r</code>. У зв'язку з цим, коли програміст хотів виконати перенесення рядка, він, за звичкою, наприкінці виводу виконував послідовність із символів <code class=" language-none">\r\n</code>. Коли ера друкарських машинок добігла кінця, з'явилося покоління програмістів, які все ще використовували цю послідовність, хоча самі за друкарською ніколи не працювали. Вони часто забували в якому порядку необхідно було виконати цю послідовність — <code class=" language-none">\r\n</code>або<code class=" language-none">\n\r</code>. Тоді їм на допомогу прийшло перевірочне слово <code class=" language-none">return</code>, де видно порядок виведення цих символів. Однак пізніше при розробці програмного забезпечення на перші версії Windows після MS-DOS програмісти змушені були використовувати послідовність <code class=" language-none">\r\n</code>. Зараз про це можна не турбуватися і для перенесення рядка використовувати тільки символ <code class=" language-none">\n</code>. <img data-id="34d3d84c-0416-4d82-8e98-4547cec8f893" data-max-width="850" alt="Екранування символів у Java - 3" src="https://cdn.javarush.com/images/article/34d3d84c-0416-4d82-8e98-4547cec8f893/800.jpeg" style="width: 850px;">Повернемося ще раз у минуле, приблизно у 80-ті роки. Саме тоді символ прогону сторінки <code class=" language-none">\f</code>на початок наступної сторінки мав популярність. У той час були великі лінійні принтери, для роботи з якими необхідно було писати програмний код, що містить і як принтер повинен надрукувати. І для позначення, що текст необхідно почати друкувати з нової сторінки, використовувався символ.<code class=" language-none">\f</code>. В наш час цей символ давно втратив свою актуальність, і навряд чи ви з ним коли-небудь зіткнетеся. Розміри лінійного принтера дуже значні. <img data-id="e7980eba-23ea-4eed-a9c2-cea9eea64faf" data-max-width="850" alt="Екранування символів у Java - 4" src="https://cdn.javarush.com/images/article/e7980eba-23ea-4eed-a9c2-cea9eea64faf/800.jpeg" style="width: 850px;">З символами <code class=" language-none">\’</code>і <code class=" language-none">\\</code>так само як і з екрануванням подвійної лапки, приклад був на початку статті. Екранувати одинарну лапку доведеться, наприклад, для ініціалізації типу char одинарною лапкою. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">char</span></span> ch <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">'\''</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Екранувати символ зворотної косої риси необхідно для вказівки, що наступний символ не буде частиною escape-послідовності. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"\\n - escape-послідовність перенесення рядка"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token comment"><span class="token comment">// Висновок: \n - escape-послідовність перенесення рядка</span></span></code></pre> На практиці ж екранувати зворотний сліш частіше доводиться під час роботи з шляхами: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"It's Java string: \"C:\\Program Files\\Java\\jdk1.7.0\\bin\""</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token comment"><span class="token comment">// Висновок: It's Java string: "C:\Program Files\Java\jdk1.7.0\bin"</span></span></code></pre> Я підкреслив, що дані escape-послідовності використовуються у рядках (рядкових літералах), т.к. решта їх частина використовується для опису регулярних виразів класу <code class=" language-none">Pattern</code>і не відноситься до теми цієї статті. <a href="https://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html" target="_blank" rel="nofollow">Тут</a> можна ознайомитись зі списком всіх escape-послідовностей класу <code class=" language-none">Pattern</code>. Однак, варто відзначити, що регулярні вирази в тому вигляді, в якому вони є зараз, неможливо уявити без використання escape-послідовностей не тільки в java, але й в інших популярних програмах, наприклад, PHP. <a href="https://codegym.cc/welcome" target="_blank"><img id="click_banner1_articles" data-max-width="1024" data-id="c8b74d44-24de-4327-9106-e0b5e86f77f5" class="img-fluid" alt="Екранування символів у Java - 5" src="https://cdn.javarush.com/images/article/c8b74d44-24de-4327-9106-e0b5e86f77f5/1024.jpeg" style="width: 1024px;"></a>У java екранування символів використовується у форматуванні рядків. Наприклад, задаючи формат рядка для відображення символу відсотка, необхідно продублювати символ відсотка –<code class=" language-none">%%</code>, інакше отримаємо помилку, а IDE пропонуватиме дописати відсоток. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">printf</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Відсоток жирності молока: %d%%"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">10</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token comment"><span class="token comment">// Відсоток жирності молока: 10%</span></span></code></pre> На цьому стаття добігає кінця. Сподіваюся, ви дізналися багато нового про екранування символів і про те, як застосовувати це на практиці. Екранування символів притаманне багатьма мовами програмування. У java, як і в інших сі-подібних мовах, дана технологія реалізована майже однаково. Тому, отримані вами знання з цієї статті цілком можуть стати в нагоді не тільки в java. Дякуємо за увагу та удачі в навчанні!