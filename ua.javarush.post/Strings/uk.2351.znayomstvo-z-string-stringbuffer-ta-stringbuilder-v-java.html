Знайомство з String, StringBuffer та StringBuilder в Java
<p>----------------------------------------</p>
Для роботи з текстовими даними в Java є три класи: , і . З першим кожен розробник стикається ще на початку вивчення мови. А що щодо двох, що залишилися? Які вони мають відмінності, і коли краще використовувати той чи інший клас? Загалом різ
<p>----------------------------------------</p>
Для роботи з текстовими даними в Java є три класи: <strong>String</strong> , <strong>StringBuffer</strong> і <strong>StringBuilder</strong> . З першим кожен розробник стикається ще на початку вивчення мови. А що щодо двох, що залишабося? Які вони мають відмінності, і коли краще використовувати той чи інший клас? Загалом різниця між ними невелика, але краще у всьому розібратися на практиці :) 
<ul>
 <li><a href="https://codegym.cc/groups/posts/2351#%D0%9A%D0%BB%D0%B0%D1%81%D1%81-String">Клас String в Java</a></li>
 <li><a href="https://codegym.cc/groups/posts/2351#%D0%9A%D0%BB%D0%B0%D1%81%D1%81-StringBuffer">Клас StringBuffer в Java</a></li>
 <li><a href="https://codegym.cc/groups/posts/2351#%D0%9A%D0%BB%D0%B0%D1%81%D1%81-StringBuilder">Клас StringBuilder в Java</a></li>
</ul><img data-id="485e3702-c4b1-4b66-ba72-1306cfbd0690" data-max-width="850" alt="Знайомство з String, StringBuffer та StringBuilder в Java - 1" src="https://cdn.javarush.com/images/article/485e3702-c4b1-4b66-ba72-1306cfbd0690/800.jpeg" style="width: 850px;">
<h2 id="Класс-String">Клас String</h2>Цей клас є послідовністю символів. Усі визначені у програм рядкові літерали, на зразок This is String - це екземпляри класу String. <strong>String має дві фундаментальні особливості:</strong>
<ul>
 <li>це immutable (постійний) клас</li>
 <li>це final клас</li>
</ul>Загалом, у класу String може бути спадкоємців ( <code class=" language-none">final</code>) і екземпляри класу не можна змінити після створення ( <code class=" language-none">immutable</code>). Це дає класу String кілька важливих переваг: 
<ol>
 <li>
  <p>Завдяки незмінності, хешкод екземпляра класу String кешується. Його не потрібно обчислювати щоразу, тому що значення полів об'єкта ніколи не зміняться після його створення. Це дає високу продуктивність при використанні даного класу як ключ для <code class=" language-none">HashMap</code>.</p></li>
 <li>
  <p>Клас String можна використовувати у багатопотоковому середовищі без додаткової синхронізації.</p></li>
 <li>
  <p>Ще одна особливість класу String — для нього перевантажений оператор <code class=" language-none">+</code>Java в Java. Тому конкатенація (складання) рядків виконується досить просто:</p></li>
</ol>
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token class-name"><span class="token class-name">String</span></span> command <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Follow"</span></span> <span class="token operator"><span class="token operator">+</span></span> <span class="token string"><span class="token string">" "</span></span> <span class="token operator"><span class="token operator">+</span></span> <span class="token string"><span class="token string">"the"</span></span> <span class="token operator"><span class="token operator">+</span></span> <span class="token string"><span class="token string">" "</span></span> <span class="token operator"><span class="token operator">+</span></span> <span class="token string"><span class="token string">"white"</span></span> <span class="token operator"><span class="token operator">+</span></span> <span class="token string"><span class="token string">" "</span></span> <span class="token operator"><span class="token operator">+</span></span> <span class="token string"><span class="token string">"rabbit"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>command<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// Follow the white rabbit</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Під капотом конкатенація рядків виконується класом StringBuilder або StringBuffer (на розсуд компілятора) і способом <code class=" language-none">append</code>(про ці класи поговоримо трохи пізніше). Якщо ми складатимемо екземпляри класу String з екземплярами інших класів, останні будуть наводитися до рядкового подання: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token class-name"><span class="token class-name">Boolean</span></span> b <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Boolean</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>TRUE<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token class-name"><span class="token class-name">String</span></span> result <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"b is "</span></span> <span class="token operator"><span class="token operator">+</span></span> b<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>result<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">//b is true</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Це ще одна цікава властивість класу String: об'єкти будь-яких класів можна привести до рядкового уявлення, використовуючи метод <code class=" language-none">toString()</code>, визначений у класі <code class=" language-none">Object</code>та успадкований усіма іншими класами. Часто метод toString() об'єкта викликається неявно. Наприклад, коли ми виводимо щось на екран або складаємо String з об'єктом іншого класу. Клас String має ще одну особливість. Усі строкові літерали, визначені в Java коді, на кшталт "asdf", на етапі компіляції кешуються і додаються у пул рядків. Якщо ми запустимо наступний код: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">String</span></span> a <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Wake up, Neo"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">String</span></span> b <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Wake up, Neo"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>a <span class="token operator"><span class="token operator">==</span></span> b<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Ми побачимо в консолі <em>true</em> , тому що змінні <code class=" language-none">a</code>і <code class=" language-none">b</code>насправді посилатимуться на той самий екземпляр класу String, доданий в пул рядків на етапі компіляції. Тобто різні екземпляри класу з однаковим значенням не створюються, і пам'ять економиться. 
<h3>Недоліки:</h3>Неважко здогадатися, що клас String потрібен насамперед для роботи з рядками. Але в деяких випадках перелічені вище особливості класу String можуть перетворитися з переваг на недоліки. Після створення рядків у коді Java-програми з ними часто відбувається безліч операцій: 
<ul>
 <li>переведення рядків у різні регістри;</li>
 <li>вилучення підрядок;</li>
 <li>конкатенація;</li>
 <li>і т.д.</li>
</ul>Давайте подивимося на цей код: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

    <span class="token class-name"><span class="token class-name">String</span></span> s <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">" Wake up, Neo! "</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    s <span class="token operator"><span class="token operator">=</span></span> s<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">toUpperCase</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    s <span class="token operator"><span class="token operator">=</span></span> s<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">trim</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"\""</span></span> <span class="token operator"><span class="token operator">+</span></span> s <span class="token operator"><span class="token operator">+</span></span> <span class="token string"><span class="token string">"\""</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> З першого погляду здається, що ми перевели рядок "Wake up, Neo!" у верхній регістр видалабо з цього рядка зайві прогалини і обернули в лапки. Насправді, через незмінність класу String, у результаті кожної операції створюються нові екземпляри рядків, а старі відкидаються, породжуючи велику кількість сміття. Як уникнути нераціонального використання пам'яті? 
<h2 id="Класс-StringBuffer">Клас StringBuffer</h2>Щоб впоратися зі створенням тимчасового сміття через модифікації об'єкта String, можна використовувати клас StringBuffer. Це <code class=" language-none">mutable</code>клас, тобто. змінюється. Об'єкт класу StringBuffer може містити певний набір символів, довжину і значення якого можна змінити через виклик певних методів. Подивимося, як працює цей клас. Для створення нового об'єкта використовується один із його конструкторів, наприклад: 
<ul>
 <li>StringBuffer() — створить порожній (який не містить символів) об'єкт</li>
 <li>StringBuffer(String str) — створить об'єкт на основі змінної str (що містить усі символи str у тій самій послідовності)</li>
</ul> Практика: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">StringBuffer</span></span> sb <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">StringBuffer</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">StringBuffer</span></span> sb2 <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">StringBuffer</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Not empty"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Конкатенація рядків через StringBuffer Java виконується за допомогою методу <code class=" language-none">append</code>. Взагалі метод <code class=" language-none">append</code>у класі StringBuffer перевантажений таким чином, що може приймати практично будь-який тип даних: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token class-name"><span class="token class-name">StringBuffer</span></span> sb <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">StringBuffer</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

    sb<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">append</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Integer</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">2</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    sb<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">append</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"; "</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    sb<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">append</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token boolean"><span class="token boolean">false</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    sb<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">append</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"; "</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    sb<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">append</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Arrays</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">asList</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">,</span></span><span class="token number"><span class="token number">2</span></span><span class="token punctuation"><span class="token punctuation">,</span></span><span class="token number"><span class="token number">3</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    sb<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">append</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"; "</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>sb<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// 2; false; [1, 2, 3];</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Метод <code class=" language-none">append</code>повертає об'єкт, на якому був викликаний (як і багато інших методів), що дозволяє викликати його "ланцюжком". Приклад вище можна написати так: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token class-name"><span class="token class-name">StringBuffer</span></span> sb <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">StringBuffer</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

    sb<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">append</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Integer</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">2</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
            <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">append</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"; "</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
            <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">append</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token boolean"><span class="token boolean">false</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
            <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">append</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"; "</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
            <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">append</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Arrays</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">asList</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">,</span></span><span class="token number"><span class="token number">2</span></span><span class="token punctuation"><span class="token punctuation">,</span></span><span class="token number"><span class="token number">3</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
            <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">append</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"; "</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>sb<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// 2; false; [1, 2, 3];</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Для роботи з рядками клас StringBuffer має ряд методів. Перерахуємо основні: 
<ul>
 <li><code class=" language-none">delete(int start, int end)</code>- Видаляє підстроку символів починаючи з позиції <code class=" language-none">start</code>, закінчуючи<code class=" language-none">end</code></li>
 <li><code class=" language-none">deleteCharAt(int index)</code>- Видаляє символ в позиції<code class=" language-none">index</code></li>
 <li><code class=" language-none">insert(int offset, String str)</code>- Вставляє рядок <code class=" language-none">str</code>у позицію <code class=" language-none">offset</code>. Метод <code class=" language-none">insert</code>також перевантажений і може приймати різні аргументи</li>
 <li><code class=" language-none">replace(int start, int end, String str)</code>— замінить усі символи, починаючи з позиції <code class=" language-none">start</code>до позиції <code class=" language-none">end</code>на<code class=" language-none">str</code></li>
 <li><code class=" language-none">reverse()</code>- Змінює порядок всіх символів на протилежний</li><il>
  <code class=" language-none">substring(int start)</code>— поверне підрядок, починаючи з позиції
  <code class=" language-none">start</code>
  <li><code class=" language-none">substring(int start, int end)</code>— поверне підрядок, починаючи з позиції <code class=" language-none">start</code>до позиції<code class=" language-none">end</code></li>
 </il>
</ul>Повний перелік методів та конструкторів є в <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/StringBuffer.html" rel="nofollow" target="_blank">офіційній документації</a> . Як працюють зазначені вище методи? Подивимося практично: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
     <span class="token class-name"><span class="token class-name">String</span></span> numbers <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"0123456789"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

     <span class="token class-name"><span class="token class-name">StringBuffer</span></span> sb <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">StringBuffer</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>numbers<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

     <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>sb<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">substring</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">3</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// 3456789</span></span>
     <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>sb<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">substring</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">4</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">8</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// 4567</span></span>
     <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>sb<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">replace</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">3</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">5</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"ABCDE"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// 012ABCDE56789</span></span>

     sb <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">StringBuffer</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>numbers<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
     <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>sb<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">reverse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// 9876543210</span></span>
     sb<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">reverse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// Повернем початковий порядок</span></span>

     sb <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">StringBuffer</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>numbers<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
     <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>sb<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">delete</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">5</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">9</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// 012349</span></span>
     <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>sb<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">deleteCharAt</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// 02349</span></span>
     <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>sb<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">insert</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"One"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// 0One2349</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span></code></pre>
<h3>Переваги:</h3>
<ol>
 <li>
  <p>Як вже сказано, StringBuffer — клас, що змінюється, тому при роботі з ним не виникає такої ж кількості сміття в пам'яті, як зі String. Тому, якщо над рядками проводиться багато модифікацій, краще використовувати <code class=" language-none">StringBuffer</code>.</p></li>
 <li>
  <p>StringBuffer – потокобезпечний клас. Його методи синхронізовані, а екземпляри можуть бути використані кількома потоками одночасно.</p></li>
</ol>
<h3>Недоліки:</h3>З одного боку, потокобезпека – перевага класу, а з іншого – недолік. Синхронізовані методи працюють повільніше не синхронізовані. І тут у гру вступає StringBuilder. Давайте розберемося, що це за клас Java - StringBuilder, які методи є і в чому його особливості. 
<h2 id="Класс-StringBuilder">Клас StringBuilder</h2>StringBuilder в Java - клас, що представляє послідовність символів. Він дуже схожий на StringBuffer у всьому, крім потокобезпеки. StringBuilder надає API, аналогічний API StringBuffer'a. Продемонструємо це вже на знайомому прикладі, замінивши оголошення змінних з StringBufer'а на StringBuilder: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token class-name"><span class="token class-name">String</span></span> numbers <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"0123456789"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token class-name"><span class="token class-name">StringBuilder</span></span> sb <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">StringBuilder</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>numbers<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>sb<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">substring</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">3</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">//3456789</span></span>
    <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>sb<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">substring</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">4</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">8</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">//4567</span></span>
    <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>sb<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">replace</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">3</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">5</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"ABCDE"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">//012ABCDE56789</span></span>

    sb <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">StringBuilder</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>numbers<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>sb<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">reverse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">//9876543210</span></span>
    sb<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">reverse</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// Повернем початковий порядок</span></span>

    sb <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">StringBuilder</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>numbers<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>sb<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">delete</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">5</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">9</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">//012349</span></span>
    <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>sb<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">deleteCharAt</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">//02349</span></span>
    <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>sb<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">insert</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"One"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">//0One2349</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Різниця лише в тому, що StringBuffer є потокобезпечним, і всі його методи синхронізовані, а StringBuilder — ні. Це єдина особливість. StringBuilder в Java працює швидше StringBuffer'а завдяки несинхронізованості методів. Тому в більшості випадків, крім багатопотокового середовища, краще використовувати для програми Java StringBuilder. <a href="https://codegym.cc/welcome" target="_blank"><img id="click_banner1_articles" data-max-width="1024" data-id="11e38582-5795-4e88-96bf-792c799a3f28" class="img-fluid" alt="Знайомство з String, StringBuffer і StringBuilder в Java - 2" src="https://cdn.javarush.com/images/article/11e38582-5795-4e88-96bf-792c799a3f28/1024.jpeg" style="width: 1024px;"></a>Резюмуємо все у порівняльній таблиці трьох класів: 
<center>
 <h3>String vs StringBuffer vs StringBuilder</h3>
</center>
<div class="table-container">
 <table>
  <tbody>
   <tr>
    <th></th>
    <th>String</th>
    <th>StringBuffer</th>
    <th>StringBuilder</th>
   </tr>
   <tr>
    <td>Змінність</td>
    <td><code class=" language-none">Immutable</code>(ні)</td>
    <td><code class=" language-none">mutable</code>(так)</td>
    <td><code class=" language-none">mutable</code>(так)</td>
   </tr>
   <tr>
    <td>Розширюваність</td>
    <td><code class=" language-none">final</code>(ні)</td>
    <td><code class=" language-none">final</code>(ні)</td>
    <td><code class=" language-none">final</code>(ні)</td>
   </tr>
   <tr>
    <td>Потокобезпека</td>
    <td>Так, за рахунок незмінності</td>
    <td>Так, за рахунок синхронізації</td>
    <td>Ні</td>
   </tr>
   <tr>
    <td>Коли використовувати</td>
    <td>При роботі з рядками, які рідко модифікуватимуться</td>
    <td>При роботі з рядками, які часто модифікуватимуться в багатопотоковому середовищі</td>
    <td>При роботі з рядками, які часто модифікуватимуться, в однопотоковому середовищі</td>
   </tr>
  </tbody>
 </table>
</div>Вивчити цю тему докладніше можна на другому рівні квесту Java Multithreading на курсі CodeGym: 
<ul>
 <a> </a>
 <li><a></a><a href="https://codegym.cc/quests/lectures/questmultithreading.level02.lecture03" target="_blank">Внутрішній пристрій String, метод substring</a></li>
 <li><a href="https://codegym.cc/quests/lectures/questmultithreading.level02.lecture08" target="_blank">StringBuilder, StringBuffer</a></li>
 <li><a href="https://codegym.cc/quests/lectures/questmultithreading.level02.lecture09" target="_blank">Завдання по StringBuilder, StringBuffer</a></li>
</ul>