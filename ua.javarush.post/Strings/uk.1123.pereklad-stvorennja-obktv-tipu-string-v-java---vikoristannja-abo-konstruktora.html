Переклад: Створення об'єктів типу String в Java - використання "" або конструктора?
<p>----------------------------------------</p>
Оригінал: By X Wang Java рядок може бути створена з використанням двох способів: У чому різниця між використанням подвійних лапок і використанням конструктора? На це запитання можна відповісти, розглянувши два прості приклади. Приклад 1: Іс
<p>----------------------------------------</p>
Оригінал: <a href="https://www.programcreek.com/2014/03/create-java-string-by-double-quotes-vs-by-constructor/" rel="nofollow" target="_blank">Create Java String Using ” ” or Constructor? </a>By X Wang <img data-id="43ce39eb-5dbe-4fa2-bca9-5c58eacd5793" data-max-width="850" alt="Переклад: Створення об'єктів типу String в Java - використання" src="https://cdn.javarush.com/images/article/43ce39eb-5dbe-4fa2-bca9-5c58eacd5793/800.jpeg" style="width: 850px;">Java рядок може бути створена з використанням двох способів: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">String</span></span> x <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"abc"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">String</span></span> y <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"abc"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> У чому різниця між використанням подвійних лапок і використанням конструктора? 
<h2>1. Подвійні лапки vs. Конструктор</h2>На це запитання можна відповісти, розглянувши два прості приклади. Приклад 1: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">String</span></span> a <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"abcd"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">String</span></span> b <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"abcd"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>a <span class="token operator"><span class="token operator">==</span></span> b<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>  <span class="token comment"><span class="token comment">// True</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>a<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">equals</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>b<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// True</span></span></code></pre><code class=" language-none">a==b</code>Істинно тому, що <code class=" language-none">a</code>й <code class=" language-none">b</code>посилаються на той самий об'єкт — рядок, оголошений як літерал (рядковий літерал далі) в області методів (відсилаємо читача до джерела на нашому ресурсі: <a href="https://codegym.cc/groups/posts/975-top-8-diagramm-dlja-ponimanija-java" target="_blank">Топ 8 діаграм для розуміння Java</a> , діаграма 8). Коли один і той же рядковий літерал створений більше одного разу, в пам'яті зберігається лише одна копія рядка, лише один його екземпляр (у нашому випадку "abcd"). Це називається "інтернування рядків". Усі строкові константи, що обробляються на етапі компіляції, Java інтернуються автоматично. Приклад 2: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">String</span></span> c <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"abcd"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">String</span></span> d <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"abcd"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>c <span class="token operator"><span class="token operator">==</span></span> d<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>  <span class="token comment"><span class="token comment">// False</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>c<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">equals</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>d<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// True</span></span></code></pre><code class=" language-none">c==d</code>помилково тому, що <code class=" language-none">c</code>і <code class=" language-none">d</code>посилаються на два різні об'єкти в пам'яті (у купі). Різні об'єкти мають різні посилання. Ця діаграма ілюструє дві вищеописані ситуації: <img data-id="5dd3a362-7638-42dc-b414-d40a20b67e32" data-max-width="650" alt="Переклад: Створення об'єктів типу String в Java - використання" src="https://cdn.javarush.com/images/article/5dd3a362-7638-42dc-b414-d40a20b67e32/512.jpeg" style="width: 650px;">
<h2>2. Інтернування рядків на етапі виконання програми</h2>Автор дякує LukasEder (коментар нижче належить йому): Інтернування рядків може відбуватися також і під час виконання програми, навіть якщо два рядки створені за допомогою конструкторів: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">String</span></span> c <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"abcd"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">intern</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">String</span></span> d <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"abcd"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">intern</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>c <span class="token operator"><span class="token operator">==</span></span> d<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>  <span class="token comment"><span class="token comment">// Now true</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>c<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">equals</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>d<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// True</span></span></code></pre>
<h2>3. Коли ж використовувати подвійні лапки і коли конструктори</h2>Внаслідок того, що літерал "abcd" має тип String, використання конструктора створить додатково непотрібний об'єкт. Таким чином, подвійні лапки повинні бути використані, якщо вам потрібно просто створити рядок. Якщо вам дійсно необхідно створити новий об'єкт у купі, ви маєте використовувати конструктор. <a href="https://www.programcreek.com/2013/09/the-substring-method-in-jdk-6-and-jdk-7/" rel="nofollow" target="_blank">Тут (оригінал)</a> показано варіанти використання. (Перекладений текст наводжу далі. Але все ж таки рекомендую ознайомитися з кодом коментаторів за цим посиланням.) 
<h2>Метод substring() в JDK 6 та JDK 7</h2><a href="https://www.programcreek.com/2013/09/the-substring-method-in-jdk-6-and-jdk-7/" rel="nofollow" target="_blank">The substring() Method in JDK 6 and JDK 7</a> By X Wang Метод <code class=" language-none">substring(int beginIndex, int endIndex)</code>JDK 6 і JDK 7 різняться. Знання цих відмінностей може допомогти вам краще використати цей метод. Задля зручності прочитання далі <code class=" language-none">substring()</code>будемо мати на увазі повний синтаксис, тобто. <code class=" language-none">substring(int beginIndex, int endIndex)</code>. 
<h3>1. Що робить substring()?</h3>Метод <code class=" language-none">substring(int beginIndex, int endIndex)</code>повертає рядок, який починається із символу під номером <code class=" language-none">beginIndex</code>та закінчується символом під номером <code class=" language-none">endIndex-1</code>. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">String</span></span> x <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"abcdef"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
x <span class="token operator"><span class="token operator">=</span></span> x<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">substring</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">,</span></span><span class="token number"><span class="token number">3</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>x<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre><strong>Output:</strong>
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java">bc</code></pre>
<h3>2. Що відбувається під час виклику substring()?</h3>Ви можете знати, що внаслідок незмінності <code class=" language-none">x</code>при присвоєнні x результату вказує на повністю новий рядок (див. діаграму): Однак, ця діаграма не повністю правильна <code class=" language-none">x.substring(1,3)</code>; вона не демонструє, що насправді відбувається у купі. Те, що дійсно відбувається, коли викликається , відрізняється в JDK 6 і JDK 7. <code class=" language-none">x</code><img data-id="933a0dba-7a5c-420d-a842-6005247de9ae" data-max-width="650" alt="Переклад: Створення об'єктів типу String в Java - використання" src="https://cdn.javarush.com/images/article/933a0dba-7a5c-420d-a842-6005247de9ae/512.jpeg" style="width: 650px;"><code class=" language-none">substring()</code>
<h3>3. substring() в JDK 6</h3>Строковий тип підтримується масивом типу <code class=" language-none">char</code>. У JDK 6 клас <code class=" language-none">String</code>містить 3 поля: <code class=" language-none">char value[]</code>, <code class=" language-none">int offset</code>, <code class=" language-none">int count</code>. Вони використовуються для збереження реального масиву символів, індексу першого символу в масиві, числа символів у рядку. Коли викликаний метод <code class=" language-none">substring()</code>, він створює новий рядок, але значення змінної все ще вказує на той самий масив у купі. Різниця між двома рядками полягає в їх числі символів та значення індексу початкового символу в масиві. <img data-id="c8bb798b-674a-4bce-966c-fef32de161fe" data-max-width="650" alt="Переклад: Створення об'єктів типу String в Java - використання" src="https://cdn.javarush.com/images/article/c8bb798b-674a-4bce-966c-fef32de161fe/512.jpeg" style="width: 650px;">Нижченаведений код спрощений і містить тільки основне для демонстрації проблеми. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token comment"><span class="token comment">//JDK 6</span></span>
<span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span> offset<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token keyword"><span class="token keyword">int</span></span> count<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token keyword"><span class="token keyword">char</span></span> value<span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
	<span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>value <span class="token operator"><span class="token operator">=</span></span> value<span class="token punctuation"><span class="token punctuation">;</span></span>
	<span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>offset <span class="token operator"><span class="token operator">=</span></span> offset<span class="token punctuation"><span class="token punctuation">;</span></span>
	<span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>count <span class="token operator"><span class="token operator">=</span></span> count<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">String</span></span> <span class="token function"><span class="token function">substring</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span> beginIndex<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token keyword"><span class="token keyword">int</span></span> endIndex<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
	<span class="token comment"><span class="token comment">//check boundary</span></span>
	<span class="token keyword"><span class="token keyword">return</span></span>  <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>offset <span class="token operator"><span class="token operator">+</span></span> beginIndex<span class="token punctuation"><span class="token punctuation">,</span></span> endIndex <span class="token operator"><span class="token operator">-</span></span> beginIndex<span class="token punctuation"><span class="token punctuation">,</span></span> value<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre>
<h3>4. Проблема, викликана substring() в JDK 6</h3>Якщо у вас є дуже довгий рядок, але вам потрібна тільки маленька її частина, яку ви отримуєте щоразу використовуючи <code class=" language-none">substring()</code>. Це викликає проблеми при виконанні, з того моменту, як вам потрібна маленька частина, ви все одно змушені зберігати весь рядок цілком. Для JDK 6 рішення полягає в наведеному коді, який приведе рядок до цього підрядку: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java">x <span class="token operator"><span class="token operator">=</span></span> x<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">substring</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>x<span class="token punctuation"><span class="token punctuation">,</span></span> y<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">+</span></span> <span class="token string"><span class="token string">""</span></span></code></pre> Користувач <em>STepeR</em> сформулював питання (див. його коментар), і видалося необхідним доповнити п.4. "Проблема, викликана <code class=" language-none">substring()</code>в JDK 6" найбільшим прикладом. Сподіваюся, це й буде відповіддю і допоможе іншим швидше розібратися, у чому суть проблеми. Ось код: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">String</span></span> a <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"aLongLongString"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">String</span></span> b <span class="token operator"><span class="token operator">=</span></span> a<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">substring</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">2</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">String</span></span> c <span class="token operator"><span class="token operator">=</span></span> a<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">substring</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">2</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">6</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Отже, в JDK 7 об'єкти типу <code class=" language-none">b</code>, створені в результаті виклику методу об'єкта типу , будуть посилатися на два новостворених масиву в хіпі - для , для . Ці два нових масиву будуть зберігатися в хіпі НАРЯД з вихідним масивом , на який посилається a. Тобто. вихідний масив нікуди зникає. Тепер повернемося до JDK 6. У JDK 6 в хіпі знаходиться один-єдиний масив . Після виконання рядків коду <code class=" language-none">с</code><code class=" language-none">String</code><code class=" language-none">substring()</code><code class=" language-none">String</code><code class=" language-none">L</code><code class=" language-none">b</code><code class=" language-none">ongL</code><code class=" language-none">c</code><code class=" language-none">aLongLongString</code><code class=" language-none">aLongLongString</code>
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">String</span></span> b <span class="token operator"><span class="token operator">=</span></span> a<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">substring</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">2</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token class-name"><span class="token class-name">String</span></span> c <span class="token operator"><span class="token operator">=</span></span> a<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">substring</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">2</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">6</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> об'єкти <code class=" language-none">b</code>, <code class=" language-none">c</code>посилаються все на той же масив у хіпі, відповідний об'єкту <code class=" language-none">a</code>: <code class=" language-none">b</code>- На елементи з 1-го індексу до 2-го, <code class=" language-none">c</code>- На елементи з 2-го індексу до 6-го (нумерація починається з 0-го, нагадування). Тобто. Очевидно, що будь-яке подальше звернення до змінним <code class=" language-none">b</code>або c в JDK 6 насправді призведе до "відрахування" потрібних елементів вихідного масиву в хіпі. У JDK 7 будь-яке подальше звернення до змінних <code class=" language-none">b</code>або c викликає звернення до потрібних масивів меншого розміру, які вже створені та "живуть" у хіпі. Тобто. явно JDK 7 у подібних ситуаціях використовує фізично більше пам'яті. Але давайте уявімо можливий варіант: змінним <code class=" language-none">b</code>і <code class=" language-none">c</code>присвоєні деякі підрядки змінної<code class=" language-none">a</code>, і надалі всі використовують лише їх - об'єкти <code class=" language-none">b</code>та <code class=" language-none">c</code>. До змінної a просто вже ніхто не звертається, на неї немає посилань (саме це має на увазі автор статті). У результаті в якийсь момент часу спрацьовує збирач сміття, і (в найзагальнішому вигляді, звичайно) отримуємо 2 різних ситуації: <strong>JDK 6</strong> : знищений (garbage collected) об'єкт <code class=" language-none">a</code>, АЛЕ - вихідний величезний масив у хіпі живий; його використовують <code class=" language-none">b</code>і <code class=" language-none">c</code>. <strong>JDK 7:</strong> знищено об'єкт a разом із вихідним масивом у хіпі. Ось цей момент у JDK 6 може призвести до витоку пам'яті (memory leak). 
<h3>5. substring() в JDK 7</h3>У JDK 7 метод покращено. У JDK 7 <code class=" language-none">substring()</code>дійсно створює новий масив у купі. <img data-id="0909e7ed-3010-4ed9-bef5-7f030f04ca83" data-max-width="650" alt="Переклад: Створення об'єктів типу String в Java - використання" src="https://cdn.javarush.com/images/article/0909e7ed-3010-4ed9-bef5-7f030f04ca83/512.jpeg" style="width: 650px;">
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token comment"><span class="token comment">//JDK 7</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">char</span></span> value<span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token keyword"><span class="token keyword">int</span></span> offset<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token keyword"><span class="token keyword">int</span></span> count<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
	<span class="token comment"><span class="token comment">//check boundary</span></span>
	<span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>value <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Arrays</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">copyOfRange</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>value<span class="token punctuation"><span class="token punctuation">,</span></span> offset<span class="token punctuation"><span class="token punctuation">,</span></span> offset <span class="token operator"><span class="token operator">+</span></span> count<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">String</span></span> <span class="token function"><span class="token function">substring</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span> beginIndex<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token keyword"><span class="token keyword">int</span></span> endIndex<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
	<span class="token comment"><span class="token comment">//check boundary</span></span>
	<span class="token keyword"><span class="token keyword">int</span></span> subLen <span class="token operator"><span class="token operator">=</span></span> endIndex <span class="token operator"><span class="token operator">-</span></span> beginIndex<span class="token punctuation"><span class="token punctuation">;</span></span>
	<span class="token keyword"><span class="token keyword">return</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>value<span class="token punctuation"><span class="token punctuation">,</span></span> beginIndex<span class="token punctuation"><span class="token punctuation">,</span></span> subLen<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre>