Debug в Intellij IDEA: гайд для новачків
<p>----------------------------------------</p>
Всім привіт, JavaRush співтовариство. Сьогодні поговоримо про дебати: що це таке і як дебатити в Intellij IDEA. Стаття розрахована на людей, які мають вже мінімальні знання Java Core. Тут не буде ні фреймворків, ні складних процесів публіка
<p>----------------------------------------</p>
Всім привіт, CodeGym співтовариство. Сьогодні поговоримо про дебати: що це таке і як дебатити в Intellij IDEA. <img data-max-width="850" alt="Debug в Intellij IDEA: гайд для новачків - 1" src="https://cdn.javarush.com/images/article/396ae080-5e3d-4a58-abae-ff4dfae92f62/original.jpeg">Стаття розрахована на людей, які мають вже мінімальні знання Java Core. Тут не буде ні фреймворків, ні складних процесів публікації бібліотек. Легка прогулянка. Тож розташовуйтеся зручніше – почнемо! 
<h2>Чому Debug тобі необхідний</h2>Давайте відразу прояснимо для себе: коду без багів не буває… Так влаштовано життя. Тому не варто одразу розкисати та кидати все, якщо код працює не так, як ми очікували. <img data-max-width="650" alt="Debug в Intellij IDEA: гайд для новачків - 2" src="https://cdn.javarush.com/images/article/92f58d13-65ef-4347-842a-49362d6dbd73/original.jpeg">Але що робити? Звичайно, можна наставити <code class=" language-none">System.out.println</code>скрізь, де тільки можна і потім розгрібати висновок у терміналі, сподіваючись на те, що вийде знайти помилку. Все-таки можна ... і це роблять, і роблять акуратно за допомогою логування (можна почитати про це <a href="https://codegym.cc/groups/posts/2388-logirovanie-chto-kak-gde-i-chem" target="_blank">тут</a> ). Але якщо є можливість запустити на локальній машині код, краще використовувати <span class="text-bold">Debug</span> . Відразу хочу зауважити, що в цій статті ми розглядатимемо дебаг проекту всередині Intellij IDEA. Якщо цікаво почитати про віддалений дебаг - ось, будь ласка, <a href="https://codegym.cc/groups/posts/621-intellij-idea-i-debug--ne-dayving-no-snorkling" target="_blank">стаття з нашого ресурсу</a> . 
<h2 id="topic2">Що таке Debug</h2><img data-max-width="650" alt="Debug в Intellij IDEA: гайд для новачків - 3" src="https://cdn.javarush.com/images/article/40b18e00-bf88-45ec-aaec-c470999fd538/original.jpeg">Debug — це процес налагодження (перевірки) коду, коли в процесі його виконання можна зупинитись у позначеному місці та подивитися за ходом виконання. Зрозуміти, у якому стані перебуває програма у певному місці. Це так само, якби можна було зупинити життя і подивитися на все збоку. Круто, правда? Наше завдання полягає в тому, щоб швидко і просто навчитися проводити налагодження додатків за допомогою всіх улюблених середовищ розробки Intellij IDEA. 
<h2 id="topic3">Що потрібно для початку налагодження</h2>Даю безкоштовну пораду: доки читаєте статтю, робіть все те, що тут буде описано, благо є все для цього. Що потрібно: 
<ol>
 <li>Середовище розробки Intellij IDEA версії 2019.3.1 та вище. На випадок, якщо у когось її немає, ось <a href="https://www.jetbrains.com/idea/download" rel="nofollow" target="_blank">посилання</a> , де можна завантажити. Завантажуйте Community Edition, тому що я використовуватиму саме її.</li>
 <li>Клонувати <a href="https://github.com/romankh3/debug-presentation" rel="nofollow" target="_blank">проект з GitHub</a> та імпортувати його через IDEA.</li>
</ol>Відкриваємо IDEA: <img data-max-width="850" alt="Debug в Intellij IDEA: гайд для новачків - 4" src="https://cdn.javarush.com/images/article/aedc31d6-2aa7-4915-b8fb-d28840eb98e9/original.jpeg">Вибираємо проект <span class="text-bold">debug-presentation</span> , натискаємо <span class="text-bold">OK</span> та отримуємо: <img data-max-width="850" alt="Debug в Intellij IDEA: гайд для новачків - 5" src="https://cdn.javarush.com/images/article/f596dcae-6c5a-47a9-af41-971fc9468078/original.jpeg">Залишаємо <span class="text-bold">import project from external sources, Maven</span> та натискаємо <span class="text-bold">Finish</span> . Імпортувавши проект, можемо описати процес на живому прикладі. 
<h2 id="topic4">Небагато теорії… обіцяю :D</h2>Щоб почати трохи бешкетувати, потрібно зрозуміти, що таке <span class="text-bold">breakPoint</span> і розібратися в декількох гарячих клавішах, які потрібні для початку. <span class="text-bold">BreakPoint</span> - це спеціальний маркер, який відображає місце або стан, на якому потрібно зупинити програму. Поставити breakpoint можна або натиснувши лівою кнопкою миші на ліву бічну панель, або клацнувши курсором за місцем коду і натиснувши <span class="text-bold">Ctrl+F8</span> . Breakpoint'и бувають трьох видів: мітка на рядок, мітка на змінну та мітка на метод. Виглядає це так: 
<ul>
 <li>
  <p>На рядок:</p><img data-max-width="650" alt="Debug в Intellij IDEA: гайд для новачків - 6" src="https://cdn.javarush.com/images/article/df3c6639-7d56-4214-83b6-aff62209035a/original.jpeg">
  <p>Якщо у виразі є лямбда, то IDEA пропонує вам вибір - поставити на всю лінію або конкретно в лямбда вираз:</p><img data-max-width="650" alt="Debug в Intellij IDEA: гайд для новачків - 7" src="https://cdn.javarush.com/images/article/f72bdda2-23bc-4d53-ad88-f6fca669d3b9/original.jpeg"></li>
 <li>
  <p>На метод:</p><img data-max-width="650" alt="Debug в Intellij IDEA: гайд для новачків - 8" src="https://cdn.javarush.com/images/article/9a1c4dbc-e76b-41e9-abe1-0d75a93cb32b/original.jpeg"></li>
 <li>
  <p>На клас</p><img data-max-width="650" alt="Debug в Intellij IDEA: гайд для новачків - 9" src="https://cdn.javarush.com/images/article/36c01cf3-5fe3-45ba-93ef-69e771280ac6/original.jpeg"></li>
</ul>Breakpoint'и можна видалити, виконавши ті ж дії, що і при їх додаванні. Бувають ситуації, коли потрібно зробити їх неактивними (зам'ятити). Для цього в Debug секції можна знайти значок <img data-max-width="30" class="img-fluid" alt="Debug в Intellij IDEA: гайд для новачків - 10" border="0" src="https://codegym-com.translate.goog/images/article/87e391e3-d739-45ba-92c7-5f81d14de5eb/original.jpeg">, який зробить все breakpoint'и неактивними. Щоб подивитися, які вже виставлені breakpoint'и, можна або зайти в Debug в лівому нижньому кутку і знайти іконку <img data-max-width="30" class="img-fluid" alt="Debug в Intellij IDEA: гайд для новачків - 11" src="https://codegym-com.translate.goog/images/article/acd2d26b-5913-4c0b-8d48-f87cea63135d/original.jpeg">, або натиснути <span class="text-bold">Ctrl+Shift+F8</span> : <img data-max-width="850" alt="Debug в Intellij IDEA: гайд для новачків - 12" src="https://cdn.javarush.com/images/article/76f7dbff-d5ec-4602-a29b-17a60cac514f/original.jpeg">Коли зайдемо до списку breakpoint'ів, побачимо: <img data-max-width="850" alt="Debug в Intellij IDEA: гайд для новачків - 13" src="https://cdn.javarush.com/images/article/7da6ff9e-eaf3-4cf2-820f-b9d5e2c36f55/original.jpeg">Тут є два preakpoint'a: 
<ul>
 <li>Bee.java:24 - у класі Bee на 24-му рядку</li>
 <li>Main.java:14 — у класі Main на 14-му рядку</li>
</ul>Хочу зауважити, що при клонуванні проекту до себе не буде цих BreakPoint'ів: їх потрібно виставити самостійно! Також є секція <span class="text-bold">Java Exception Breakpoints</span> . Дуже корисна річ. За допомогою її можна додати неявний breakpoint, щоб програма зупинялася перед викиданням будь-якого винятку чи якогось конкретного. Додамо для RuntimeException неявний breakpoint. Робиться це легко: у верхньому лівому кутку є плюс +. Натискаємо на нього і вибираємо <span class="text-bold">Java Exceptions Breakpoints</span> : <img data-max-width="850" alt="Debug в Intellij IDEA: гайд для новачків - 14" src="https://cdn.javarush.com/images/article/e81fc96c-4964-4a40-be23-81d3c86f63b7/original.jpeg">У вікні пишемо ім'я винятку, яке потрібно додати, вибираємо із запропонованого списку і натискаємо <span class="text-bold">OK</span> : <img data-max-width="850" alt="Debug в Intellij IDEA: гайд для новачків - 15" src="https://cdn.javarush.com/images/article/0f16887a-08dd-44a4-a3d8-e1ee2b709c5d/original.jpeg">На цьому лікнеп закінчуємо і переходимо до практики. 
<h2 id="topic4">Поїхали, вриватися в нетрі дебага</h2><img data-max-width="850" alt="Debug в Intellij IDEA: гайд для новачків - 16" src="https://cdn.javarush.com/images/article/6fd20645-bd78-4919-acb8-54d8d41898fb/original.jpeg">Так як я нащадковий бджоляр, для презентації налагодження створив проект, який описує процес збору нектару бджолами, переробки нектару в мед і отримання меду з вулика. На основі <s>документації</s> README файлу, який лежить в корені проекту, читаємо: <span class="text-bold">очікувана поведінка</span> - з усіх квіток, з яких збирають нектар (як <span class="text-bold">double</span> значення), буде зібрано кількість меду, що дорівнює половині зібраного нектару. У проекті є такі класи: 
<ul>
 <li>Bee - звичайна робоча бджола;</li>
 <li>BeeQueen – бджолина матка;</li>
 <li>BeeHive - вулик;</li>
 <li>HoneyPlant - медонос, з якого збирають мед;</li>
 <li>Main - де знаходиться <code class=" language-none">public static void main()</code>метод, в якому стартує проект.</li>
</ul>Якщо запустити метод <code class=" language-none">main()</code>, то виявиться, що мало того, що не вважається кількість меду, так ще й випадає помилка… <img data-max-width="850" alt="Debug в Intellij IDEA: гайд для новачків - 17" src="https://cdn.javarush.com/images/article/449d37fa-0b7c-4613-b8fe-4980fe5a6fa6/original.jpeg">Потрібно подивитися, що там не так. Зі стек трейсу в нижньому правому кутку, можемо побачити, що в <code class=" language-none">HoneyPlant.java:20</code>, викидається виняток RuntimeException: <img data-max-width="850" alt="Debug в Intellij IDEA: гайд для новачків - 18" src="https://cdn.javarush.com/images/article/a8331941-e503-4112-893e-1857b03e5a61/original.jpeg">Якраз наш випадок: є RuntimeException, додамо пошук такого виключення, як було описано вище, і запустимо <code class=" language-none">main()</code>метод в дебаг режимі. Для цього натиснемо на зелену стрілку-трикутник в Intellij IDEA перед способом <code class=" language-none">main()</code>: <img data-max-width="850" alt="Debug в Intellij IDEA: гайд для новачків - 19" src="https://cdn.javarush.com/images/article/f91b5167-57c4-4a12-9460-008c048adf83/original.jpeg">і отримаємо зупинену програму в останній момент перед тим, як спрацює виняток з таким значком <img data-max-width="30" class="img-fluid" alt="Debug в Intellij IDEA: гайд для новачків - 20" src="https://codegym-com.translate.goog/images/article/4c9e2958-0429-486c-80fb-f3da5a1b94e5/original.jpeg"><img data-max-width="850" alt="Debug в Intellij IDEA: гайд для новачків - 21" src="https://cdn.javarush.com/images/article/30cf4eba-c2ea-40dd-bbaf-5991f449cc76/original.jpeg">Щоб отримати повну інформацію, необхідно подивитися в секцію Debug. У ній є <span class="text-bold">Variables</span> , де показані всі змінні, доступні в цій частині програми: 
<ul>
 <li>nectar = 1.0;</li>
 <li>nectarCapacity = -1.0.</li>
</ul>Виняток викидається справедливо, оскільки значення кількості нектару, що є в медоносі, не може бути негативним. Але чому так відбувається? Адже є перевірка, що якщо нектар закінчився, то повертається нульове значення у рядках 15-17: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span> nectar <span class="token operator"><span class="token operator">==</span></span> <span class="token number"><span class="token number">0</span></span> <span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
         <span class="token keyword"><span class="token keyword">return</span></span> <span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Але проблема в тому, що перевіряє він не ту змінну ... і це помилка в коді. Замість того, щоб перевіряти значення нектару в квітці, що лежить у змінній <span class="text-bold">nectarCapacity</span> , програма перевіряє значення <span class="text-bold">nectar</span> , яке приходить у метод і є тією кількістю, яку хочуть взяти у нектару. Ось він, перший баг! Тому ставимо правильно і отримуємо вираз: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span> nectarCapacity <span class="token operator"><span class="token operator">==</span></span> <span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
         <span class="token keyword"><span class="token keyword">return</span></span> <span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Далі, запускаємо <code class=" language-none">main()</code>метод у звичайному режимі <code class=" language-none">(Run `Main.main()`)</code>і помилки більше немає, програма відпрацювала: Програма <img data-max-width="850" alt="Debug в Intellij IDEA: гайд для новачків - 22" src="https://cdn.javarush.com/images/article/76c7d9e8-0432-48b0-87a8-e0523c819c5d/original.jpeg">відпрацювала і видала відповідь: <span class="text-bold">“33.0 honey was produced by 7 bees from 2 honey plants”</span> Все було б добре, але відповідь неправильна <s>…</s> написано, що нектар переходить у мед із пропорцією 2 до 1: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class="  language-java">## <span class="token class-name"><span class="token class-name">Documentation</span></span>
<span class="token class-name"><span class="token class-name">Presentation</span></span> based on honey getting process<span class="token punctuation"><span class="token punctuation">.</span></span>

<span class="token operator"><span class="token operator">*</span></span><span class="token operator"><span class="token operator">*</span></span><span class="token class-name"><span class="token class-name">Note</span></span><span class="token operator"><span class="token operator">*</span></span><span class="token operator"><span class="token operator">*</span></span><span class="token operator"><span class="token operator">:</span></span> <span class="token number"><span class="token number">1</span></span> honey point <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">2</span></span> nectar points</code></pre> З головного методу видно, що є два медоноси, по 30 і 40 одиниць нектару відповідно, тому в результаті має вийти 35 одиниць меду. А пише, що 33. Куди поділися ще дві одиниці?... Зараз дізнаємося! Для цього потрібно поставити breakpoint у методі <code class=" language-none">Main.main()</code>на рядку №28, де виконується <code class=" language-none">beeHive.populateHoney()</code>та запускаємо <code class=" language-none">main</code>метод у режимі Debug: <img data-max-width="850" alt="Debug в Intellij IDEA: гайд для новачків - 23" src="https://cdn.javarush.com/images/article/f83da710-6b0b-4549-b159-d3dff49ccd8d/original.jpeg">Ось цей момент розглянемо докладніше. Програма зупинилася перед виконанням 28-го рядка. У нижній частині бачимо Debug секцію, де описана вся інформація по запущеному додатку. У частині Variables, як уже було сказано, є всі змінні та об'єкти, які доступні з цієї частини програми. У частині Frames показані кроки, які проходить програму, можна подивитися на попередній крок та отримати всі локальні дані. Щоб програма продовжила роботу, можна натиснути <span class="text-bold">F9</span> або зелену іконку, як показано нижче: Щоб зупинити програму , потрібно натиснути на <img data-max-width="850" alt="Debug в Intellij IDEA: гайд для новачків - 24" src="https://cdn.javarush.com/images/article/c42076d8-4775-40de-854e-ba8fa48d76f0/original.jpeg">червоний квадрат. клавіші: <img data-max-width="850" alt="Debug в Intellij IDEA: гайд для новачків - 25" src="https://cdn.javarush.com/images/article/39df8a60-d773-49ca-97bd-11db04a8f5b2/original.jpeg"><img data-max-width="850" alt="Debug в Intellij IDEA: гайд для новачків - 26" src="https://cdn.javarush.com/images/article/1d0541ac-92b1-415d-9c51-168ac2652192/original.jpeg">
<ul>
 <li>F8 - йти ділянкою коду і заходити у внутрішні методи;</li>
 <li>F7 - йти ділянкою коду і заходити у внутрішні методи.</li>
</ul>Тому нам, щоб зайти в роботу методу <code class=" language-none">beeHive.populateHoney()</code>, потрібно натиснути F7, і ми перейдемо далі: <img data-max-width="850" alt="Debug в Intellij IDEA: гайд для новачків - 27" src="https://cdn.javarush.com/images/article/78e3f83a-2c4f-4648-9382-95575fa835b3/original.jpeg">Далі, проходимо в режимі дебага використовуючи <span class="text-bold">F8</span> за цим методом до кінця і опишемо, що відбувається в цьому методі: 
<ul>
 <li>25-й рядок - використовується Stream API, щоб зібрати мед з усіх бджіл;</li>
 <li>26-й рядок - мед підсумовується вже з існуючим;</li>
 <li>27-й рядок - виділяється 2 одиниці меду для матки;</li>
 <li>28-й рядок - ці дві одиниці видаляються із загальної кількості меду;</li>
 <li>29-й рядок - матка з'їдає цей мед.</li>
</ul>Ось куди поділися ці дві одиниці, ура! Після спілкування з бізнес-аналітиком приходимо до висновку, що <s>документація</s> README файл містить помилку і його потрібно буде оновити. Обновимо README файл: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java">## <span class="token class-name"><span class="token class-name">Documentation</span></span>
<span class="token class-name"><span class="token class-name">Presentation</span></span> based on honey getting process<span class="token punctuation"><span class="token punctuation">.</span></span>

<span class="token operator"><span class="token operator">*</span></span><span class="token operator"><span class="token operator">*</span></span><span class="token class-name"><span class="token class-name">Note</span></span><span class="token operator"><span class="token operator">*</span></span><span class="token operator"><span class="token operator">*</span></span><span class="token operator"><span class="token operator">:</span></span>
<span class="token operator"><span class="token operator">*</span></span>  <span class="token number"><span class="token number">1</span></span> honey point <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">2</span></span> nectar points
<span class="token operator"><span class="token operator">*</span></span>  <span class="token number"><span class="token number">2</span></span> honey point queen bee eats every time when beehive populates the honey<span class="token punctuation"><span class="token punctuation">.</span></span></code></pre> І все: всі знайдені баги полагоджені, можемо спокійно продовжувати з розумним виглядом пити каву і читати статейки на <s>хабрі</s> CodeGym :) <a href="https://codegym.cc/welcome" target="_blank"><img id="click_banner1_articles" data-max-width="1024" data-id="4726d257-02d1-4318-bac9-5d55a1672500" class="img-fluid" alt="Debug в Intellij IDEA: гайд для новачків - 28" src="https://cdn.javarush.com/images/article/4726d257-02d1-4318-bac9-5d55a1672500/1024.jpeg" style="width: 1024px;"></a>
<h2 id="topic5">Підведемо підсумок</h2>За цю статтю ми розібралися, що: 
<ul>
 <li>роботи без помилок не буває і дебаг - це чудовий спосіб їх вирішити;</li>
 <li>що таке breakpoint і який він буває;</li>
 <li>як налаштувати exception breakpoint;</li>
 <li>як проводити навігацію в режимі дебагу.</li>
</ul>
<h2 id="topic6">Стаття для шанування</h2>
<ul>
 <li><a href="https://github.com/romankh3/debug-presentation" rel="nofollow" target="_blank">Проект, що використовується у статті</a></li>
 <li><a href="https://codegym.cc/groups/posts/621-intellij-idea-i-debug--ne-dayving-no-snorkling" target="_blank">IntelliJ IDEA і Debug: не дайвінг, але снорклінг</a></li>
 <li><a href="https://habr.com/ru/post/339356/" rel="nofollow" target="_blank">Гірка правда про програмування...</a></li>
 <li><a href="https://www.jetbrains.com/help/idea/debugging-code.html" rel="nofollow" target="_blank">Офіційна документація</a></li>
 <li><a href="https://www.jetbrains.com/help/idea/using-breakpoints.html#breakpoint-icons" rel="nofollow" target="_blank">Типи breakpoint'ів. Офіційна документація</a></li>
</ul><span class="text-bold">Дивіться також інші мої статті:</span>
<ul>
 <li><a href="https://codegym.cc/groups/posts/2367-kak-ja-napisal-open-source-biblioteku-kotoruju-ispoljhzujut-v-realjhnihkh-proektakh" target="_blank">Як тестове завдання на співбесіду перетворилося на open-source бібліотеку</a></li>
 <li><a href="https://codegym.cc/groups/posts/2400-sozdanie-sistemih-monitoringa-cen-na-aviabiletih-poshagovoe-rukovodstvo" target="_blank">Створення системи моніторингу цін на авіаквитки: покрокове керівництво [Частина 1]</a></li>
 <li><a href="https://codegym.cc/groups/posts/2430-gayd-po-sozdaniju-klienta-dlja-skyscanner-api-i-ego-publikacii-v-jcenver-i-maven-central" target="_blank">Гайд зі створення клієнта для Skyscanner API та його публікації в jCenter та Maven Central [Частина 1]</a></li>
 <li><a href="https://codegym.cc/groups/posts/2388-logirovanie-chto-kak-gde-i-chem" target="_blank">Логування: що, як, де та чим?</a></li>
</ul>