Створення найпростішого веб-проекту в IntelliJ Idea Enterprise. Покроково, з картинками
<p>----------------------------------------</p>
ви вже більш-менш розібралися з Java Core та хотіли б подивитися на JavaEE-технології та web-програмування. Логічніше, якщо ви зараз вивчаєте квест Java Collections, де розглядаються близькі статті теми. В даний час я використовую IntelliJ 
<p>----------------------------------------</p>
<em><strong>Рівень знань, необхідних для розуміння статті:</strong></em> ви вже більш-менш розібралися з Java Core та хотіли б подивитися на JavaEE-технології та web-програмування. Логічніше, якщо ви зараз вивчаєте квест Java Collections, де розглядаються близькі статті теми. <img data-id="83241661-c9a0-446f-8cc4-bfd0e92a8bce" data-max-width="850" alt="Створення найпростішого веб-проекту в IntelliJ Idea Enterprise.  Покроково, з картинками - 1" src="https://cdn.javarush.com/images/article/83241661-c9a0-446f-8cc4-bfd0e92a8bce/800.jpeg" style="width: 850px;">В даний час я використовую IntelliJ IDEA Enterprise Edition (це платна розширена версія IDE, її зазвичай використовують у професійній розробці, -<em><strong> прим. ред.</strong></em>.). У ній набагато простіше працювати з веб-проектами, ніж у безкоштовній Community Edition. Так, в Enterprise Edition буквально по одному клацанню мишки відбувається складання проекту, заливається в контейнер сервлетів, запускається сервер і навіть відкривається сторінка із запущеним проектом у браузері. У безкоштовній версії ідеї багато що з цього довелося б робити самостійно, так би мовити, «ручками». Для складання проекту та управління його життєвим циклом я користуюсь Apache Maven. У цьому я використав лише малу дещицю його можливостей (управління пакетами/залежностями). Як контейнер сервлетів/сервера додатків (Application server) я вибрав Apache Tomcat версії 9.0.0.М4. Я знаю, що вже є і новіші версії, але в мене встановлена ​​саме ця. 
<h3>Приступаємо</h3>Для початку відкриємо IntelliJ IDEA та створимо порожній Maven-проект. 
<center>
 <img data-id="4a8c9de2-3b6e-4cf9-bee2-37e2f4335ff1" data-max-width="850" alt="Створення найпростішого веб-проекту в IntelliJ Idea Enterprise.  Покроково, з картинками - 2" src="https://cdn.javarush.com/images/article/4a8c9de2-3b6e-4cf9-bee2-37e2f4335ff1/800.jpeg" style="width: 850px;">
</center> Тут зліва вибираємо Maven, перевіряємо, щоб зверху було вказано JDK для проекту. Якщо її немає, виберіть необхідну зі списку або натисніть New… і вибирайте безпосередньо з комп'ютера. Всередині вікна у мене крутиться анімація завантаження списку архетипів. Нам вони не потрібні, тому, не чекаючи завантаження, сміливо клацаєте Next внизу вікна. 
<center>
 <img data-id="9f01f05b-a81c-4143-a755-9829dadf7ca3" data-max-width="850" alt="Створення найпростішого веб-проекту в IntelliJ Idea Enterprise.  Покроково, з картинками - 3" src="https://cdn.javarush.com/images/article/9f01f05b-a81c-4143-a755-9829dadf7ca3/800.jpeg" style="width: 850px;">
</center> У цьому вікні необхідно вказати <a href="https://maven.apache.org/guides/mini/guide-naming-conventions.html" target="_blank">GroupId та ArtifactId</a> . Під GroupId мається на увазі унікальний ідентифікатор компанії, що випускає проект. Зазвичай прийнято використовувати доменне ім'я компанії лише у зворотному порядку. Не в сенсі, дзеркально, а якщо, наприклад, доменне ім'я компанії <strong>maven.apache.org</strong> , то її GroupId буде <strong>org.apache.maven</strong> . Тобто спочатку пишемо домен першого рівня, відокремлюємо крапкою, пишемо ім'я домену другого рівня, і таке інше. Це загальноприйнятий підхід. Якщо ви «пилюєте» проект самостійно, а не у складі компанії, пишіть сюди ваше особисте доменне ім'я (теж у зворотному порядку!). Якщо воно у вас, звичайно, є:). Якщо ні — не засмучуйтесь. Насправді сюди можна написати <em><strong>що завгодно</strong></em> . 
<div class="table-container">
 <table>
  <tbody>
   <tr>
    <td>Для компанії з доменним ім'ям vasya.pupkin.org GroupId буде org.pupkin.vasya. Такий підхід до імен потрібен для того, щоб відокремлювати проекти з однаковою назвою, але які випустабо різні компанії.</td>
   </tr>
  </tbody>
 </table>
</div>У цьому прикладі я використовуватиму вигадане доменне ім'я <strong>fatfaggy.info.codegym.cc</strong> . Відповідно, у полі <strong>GroupId</strong> я вписую <strong>com.codegym.info.fatfaggy</strong> . <strong>ArtefactId</strong> – це просто назва нашого проекту. Можна використовувати літери та деякі знаки (наприклад, дефіс) для розділення слів. Наш «артефакт» називатиметься саме так, як ми тут напишемо. У цьому прикладі я пишу <strong>my-super-project</strong> . Поле версії поки не чіпаємо, залишаємо як є. 
<center>
 <img data-id="25f04c63-3fb5-445c-a9d8-320c6fb9e8e9" data-max-width="850" alt="Створення найпростішого веб-проекту в IntelliJ Idea Enterprise.  Покроково, з картинками - 4" src="https://cdn.javarush.com/images/article/25f04c63-3fb5-445c-a9d8-320c6fb9e8e9/800.jpeg" style="width: 850px;">
</center> Ну і стандартне віконце IDEA під час створення нового проекту. Назвемо його за традицією <strong>my-super-project</strong> . 
<center>
 <img data-id="752f608e-a659-416b-be3f-49b0642a21b2" data-max-width="850" alt="Створення найпростішого веб-проекту в IntelliJ Idea Enterprise.  Покроково, з картинками - 5" src="https://cdn.javarush.com/images/article/752f608e-a659-416b-be3f-49b0642a21b2/800.jpeg" style="width: 850px;">
</center> Проект створено! 
<div class="table-container">
 <table>
  <tbody>
   <tr>
    <td>Перед нами одразу відкрився файл pom.xml. Це файл з налаштуваннями Maven. Якщо ми хочемо "розповісти" Maven'у, що і як робити або звідки щось брати, ми описуємо все це в цьому файлі pom.xml. Він знаходиться в корені проекту.</td>
   </tr>
  </tbody>
 </table>
</div>Бачимо, що в ньому вказані зараз ті дані, які ми вводабо при створенні Maven-прокту: <strong>groupId</strong> , <strong>artifactId</strong> і <strong>version</strong> (останній ми не чіпали). 
<h3>Структура нашого проекту</h3>Цей Maven-проект має певну структуру. 
<center>
 <img data-id="70c4c175-2a11-48ba-82c4-e5ebda083df7" data-max-width="850" alt="Створення найпростішого веб-проекту в IntelliJ Idea Enterprise.  Покроково, з картинками - 6" src="https://cdn.javarush.com/images/article/70c4c175-2a11-48ba-82c4-e5ebda083df7/800.jpeg" style="width: 850px;">
</center> Як бачимо, докорінно лежать: 
<ul>
 <li>директорія <strong>.idea</strong> , де знаходяться налаштування ідеї для поточного проекту;</li>
 <li>директорія <strong>src</strong> , в якій ми створюємо наші вихідники;</li>
 <li>файл <strong>my-super-project.iml</strong> , файл проекту, створений IDEA;</li>
 <li>файл <strong>pom.xml</strong> , той самий файл Maven-проекту, про який я говорив трохи вище, який у нас зараз відкритий. Якщо я десь згадуватиму pom.xml або «памятник», я матиму на увазі саме цей файл.</li>
</ul>У папці <strong>src</strong> у свою чергу лежать дві підпапки: 
<ul>
 <li>main - для нашого коду;</li>
 <li>test – для тестів для нашого коду.</li>
</ul>І в <strong>main</strong> , і в <strong>test</strong> є папка <strong>java</strong> . Вважайте, що це та сама папка, тільки та, що у <strong>main</strong> —для коду вихідних кодів, а та, що у <strong>test</strong> — для коду тестів відповідно. Папка <strong>resources</strong> нам поки що взагалі не потрібна, ми не будемо її використовувати. Але хай полежить. 
<h3>Перетворення на веб-проект</h3>Настав час наш перетворити наш Maven-проект на веб-проект. Для цього клацаємо правою кнопкою мишки за назвою проекту в цьому дереві та вибираємо пункт<strong> Add framework support…</strong>
<center>
 <img data-id="5db2ef67-0149-44a8-8258-58b6f6af0ea9" data-max-width="850" alt="Створення найпростішого веб-проекту в IntelliJ Idea Enterprise.  Покроково, з картинками - 7" src="https://cdn.javarush.com/images/article/5db2ef67-0149-44a8-8258-58b6f6af0ea9/800.jpeg" style="width: 850px;">
</center> Відкриється вікно, де ми можемо додати підтримку різних фреймворків для нашого проекту. Але нам потрібен лише один: <strong>Web Application</strong> . Його і вибираємо. 
<center>
 <img data-id="7b63fc8c-ab77-4032-8729-f79b7b6bf4c0" data-max-width="850" alt="Створення найпростішого веб-проекту в IntelliJ Idea Enterprise.  Покроково, з картинками - 8" src="https://cdn.javarush.com/images/article/7b63fc8c-ab77-4032-8729-f79b7b6bf4c0/800.jpeg" style="width: 850px;">
</center> Перевіряємо, що стоїть галочка навпроти <strong>Web Application</strong> , а в основній частині вікна зазначено, що ми хочемо, щоб для нас створабо одразу ще й файл <strong>web.xml</strong> (рекомендую поставити галочку, якщо її там немає). Після цього ми побачимо, що структура нашого проекту поповнилася папочкою <strong>web</strong> . 
<center>
 <img data-id="1922e606-11bb-44a3-8d43-0c371ae31030" data-max-width="850" alt="Створення найпростішого веб-проекту в IntelliJ Idea Enterprise.  Покроково, з картинками - 9" src="https://cdn.javarush.com/images/article/1922e606-11bb-44a3-8d43-0c371ae31030/800.jpeg" style="width: 850px;">
</center> Це корінь нашого веб-проекту з адресаою <strong>/</strong> . Тобто, якщо ми введемо в браузер адресау localhost (коли запустимо, звичайно ж), то це буде звернення саме сюди, в корінь веб-проекту. Якщо введемо <strong>localhost/addUser</strong> , то в папочці <strong>web</strong> буде шукатися ресурс з назвою <strong>addUser</strong> . 
<div class="table-container">
 <table>
  <tbody>
   <tr>
    <td>Головне, треба зрозуміти, що папка <strong>web</strong> – корінь нашого проекту, коли ми його заллємо на Tomcat. Зараз у нас є певна структура папок, але в готовому проекті, який ми заливатимемо, вона буде трохи іншою, і саме папочка <strong>web</strong> там буде коренем.</td>
   </tr>
  </tbody>
 </table>
</div>У <strong>web</strong> лежить обов'язкова папка з назвою <strong>WEB-INF</strong> , де знаходиться файл <strong>web.xml</strong> , який ми просабо створити на минулому кроці. Відкриємо його. 
<center>
 <img data-id="8e375cf3-f9e2-40e5-b71f-a1dedac7eae3" data-max-width="850" alt="Створення найпростішого веб-проекту в IntelliJ Idea Enterprise.  Покроково, з картинками - 10" src="https://cdn.javarush.com/images/article/8e375cf3-f9e2-40e5-b71f-a1dedac7eae3/800.jpeg" style="width: 850px;">
</center> Як бачимо, у ньому поки що немає нічого цікавого, одна лише «шапка». До речі, якби ми не просабо його створювати, нам, можливо, довелося б створювати його вручну, тобто набирати «ручками» всю цю «шапку», або, в крайньому випадку, шукати готовий варіант в інтернетах. Для чого потрібний <strong>web.xml</strong> ? Для мапінгу. Тут ми розпишемо для Tomcat, які url-запити передавати на якісь сервлети. Але це все пізніше, поки залишаємо його порожнім. Ще в татку <strong>web</strong> є файл <strong>index.jsp</strong> . Відкриємо його. 
<center>
 <img data-id="b164dac2-ae82-4c7b-934f-834f58c61c27" data-max-width="850" alt="Створення найпростішого веб-проекту в IntelliJ Idea Enterprise.  Покроково, з картинками - 11" src="https://cdn.javarush.com/images/article/b164dac2-ae82-4c7b-934f-834f58c61c27/800.jpeg" style="width: 850px;">
</center> Це файл, який буде виконано за умовчанням, так би мовити. Тобто коли ми запустимо проект, то саме його побачимо. По суті, <strong>jsp</strong> - звичайний html-файл з тією різницею, що в ньому можна виконувати java-код. 
<div class="email-subscription">
 <iframe frameborder="0" src="https://secure.esputnik.com.ua/4Q0Ef6d2SOs" width="100%" height="200" scrolling="no" data-savepage-key="0-2"></iframe>
</div>
<h2>Трохи про статичний та динамічний контент</h2>Статичний контент - такий, що не змінюється з часом. Все те, що ми написали в html файлі написали, то і буде відображатися без змін. Якщо ми написали hello world, то цей напис відобразиться і як тільки ми відкриємо сторінку, і через 5 хвабон, і завтра, і через тиждень, і через рік. Вона не зміниться. Але що якщо ми хочемо на сторінці вивести поточну дату? Якщо ми просто напишемо «27 жовтня 2017 року» — то й завтра ми побачимо таку саму дату, і за тиждень, і за рік. А хотілося б, щоб ця дата була таки актуальною. Саме тут нам і приходить на допомогу можливість виконувати якийсь код усередині сторінки. Ми можемо отримати об'єкт дати, привести його до потрібного виду і вивести на сторінці. Тоді кожен день коли б ми не відкрабо сторінку — дата завжди буде актуальною. Якщо нам потрібен лише статичний контент, то нам достатньо звичайного веб-сервера і html файлів. Жодної джави, мавенів, томкатів нам і не потрібно. Але якщо ми хочемо використовувати динамічний контент — ось тут нам все це і стане в нагоді. Але поки що повернемося до нашого<strong>index.jsp</strong> . Давайте вкажемо замість стандартного заголовка щось своє, наприклад My super web-app!, а в тілі напишемо наприклад I'm alive!. Ми вже майже готові до того, щоб запустити наш проект! Але, на жаль, звичний зелений трикутник для запуску програми у нас не активний. 
<center>
 <img data-id="bdc7b2aa-7245-474c-887d-60cc67276dbb" data-max-width="850" alt="Створення найпростішого веб-проекту в IntelliJ Idea Enterprise.  Покроково, з картинками - 12" src="https://cdn.javarush.com/images/article/bdc7b2aa-7245-474c-887d-60cc67276dbb/800.jpeg" style="width: 850px;">
</center> Натиснемо на кнопку ліворуч від нього (вказав на скрині червоною стрілочкою) і виберемо <strong>Edit configurations…</strong> Відкриється вікно, де нам пропонують натиснути на зелений плюсик, щоб додати якусь конфігурацію. Натиснемо на нього, він знаходиться у верхньому лівому кутку вікна. 
<center>
 <img data-id="03e419d5-4fe5-48cd-b375-7305e2a7a1ee" data-max-width="850" alt="Створення найпростішого веб-проекту в IntelliJ Idea Enterprise.  Покроково, з картинками - 13" src="https://cdn.javarush.com/images/article/03e419d5-4fe5-48cd-b375-7305e2a7a1ee/800.jpeg" style="width: 850px;">
</center> Виберемо пункт <strong>Tomcat Server</strong> та підпункт <strong>Local. </strong> Відкриється вікно з безліччю всіляких параметрів, але нас майже все влаштовує дефолтне. 
<center>
 <img data-id="a13241de-024c-4af8-a8a3-863cadc4cdf6" data-max-width="850" alt="Створення найпростішого веб-проекту в IntelliJ Idea Enterprise.  Покроково, з картинками - 14" src="https://cdn.javarush.com/images/article/a13241de-024c-4af8-a8a3-863cadc4cdf6/800.jpeg" style="width: 850px;">
</center> Можемо якось красиво назвати нашу конфігурацію замість стандартного <strong>Unnamed</strong> (у самому верху). Також необхідно перевірити, що ідея успішно знайшла томкат у нас в системі (ви ж його перед цим вже <a href="https://tomcat.apache.org/download-90.cgi" target="_blank">скачали і встановабо</a> , так?). Якщо не знайшла (що навряд чи) - натискаємо стрілку вниз і вибираємо де він у нас встановлений, ну або іншу версію, якщо у вас їх кілька. У мене він один і вже встановлений, тому виглядає так, як на скрині. І в самому низу вікна бачимо, що світиться попередження, що поки що немає жодного артефакту, призначеного для деплою на сервер. А праворуч від цього напису кнопочка, яка пропонує цей недолік виправити. Тиснемо на неї і бачимо, що ідея сама все знайшла, сама все створила, чого їй не вистачало, і сама всі налаштування проставила. 
<center>
 <img data-id="267aaf90-940b-4237-8b49-63cd5596a293" data-max-width="850" alt="Створення найпростішого веб-проекту в IntelliJ Idea Enterprise.  Покроково, з картинками - 15" src="https://cdn.javarush.com/images/article/267aaf90-940b-4237-8b49-63cd5596a293/800.jpeg" style="width: 850px;">
</center> Бачимо, що нас із вкладки <strong>Server</strong> перекинуло на вкладку <strong>Deployment</strong> , у розділі <strong>Deploy at the server startup</strong> у нас вже вказано артефакт, який треба деплоїти, а внизу вказано, що перед деплом цей артефакт буде білдитися. <strong>Apply, Ok. </strong> І бачимо, що по-перше, внизу вікна з'явився розділ з нашим локальним сервером томкат, який буде поміщений наш артефакт. Згорнути цей розділ можна, натиснувши на відповідну кнопку у правій частині вікна. 
<center>
 <img data-id="0fa0727d-3796-4626-a44d-e5bc38a611d9" data-max-width="850" alt="Створення найпростішого веб-проекту в IntelliJ Idea Enterprise.  Покроково, з картинками - 16" src="https://cdn.javarush.com/images/article/0fa0727d-3796-4626-a44d-e5bc38a611d9/800.jpeg" style="width: 850px;">
</center> Також бачимо, що зелений трикутник для запуску вже активний. Для тих, хто хоче все перевірити — можна натиснути кнопку з налаштуваннями проекту (праворуч від кнопок запуску, позначена червоною стрілкою), перейти в розділ <strong>Artifacts</strong> і переконатися, що артефакт дійсно створений. Його не було до того моменту, поки ми не натиснули кнопку <strong>Fix</strong> , але тепер все ок. І така конфігурація нас цілком влаштовує. Якщо двома словами чим відрізняється <strong>my-super-project:war</strong> від <strong>my-super-project:war exploded</strong> — то це тим, що <strong>my-super-project:war</strong> створить лише один файл <strong>war</strong> (який є просто архівом), а варіант з <strong>exploded</strong> - це просто <strong>"розпакований" war</strong>. І саме такий варіант особисто мені зручніший, тому що дозволяє швидше деплоїти дрібні зміни на сервер. По суті, артефакт — це і є наш проект, тільки вже скомпільований, і в якому змінено структуру папок так, щоб його можна було викладати прямо на томкат. Виглядатиме вона приблизно ось так: 
<center>
 <img data-id="775494db-ef67-4683-9632-2445a7a900ca" data-max-width="414" alt="Створення найпростішого веб-проекту в IntelliJ Idea Enterprise.  Покроково, з картинками - 17" src="https://cdn.javarush.com/images/article/775494db-ef67-4683-9632-2445a7a900ca/256.jpeg" style="width: 414px;">
</center> Що ж, тепер усе готове для запуску нашого проекту. <strong>Тиснемо заповітну зелену кнопочку запуску і насолоджуємося результатом! :)</strong>
<center>
 <img data-id="ff2de86b-38a5-4ca5-820c-8a4b3712c6c7" data-max-width="471" alt="Створення найпростішого веб-проекту в IntelliJ Idea Enterprise.  Покроково, з картинками - 18" src="https://cdn.javarush.com/images/article/ff2de86b-38a5-4ca5-820c-8a4b3712c6c7/256.jpeg" style="width: 471px;">
</center>
<div class="table-container">
 <table>
  <tbody>
   <tr>
    <th>
     <p>Що ще почитати:</p></th>
   </tr>
   <tr>
    <td>
     <p><a href="https://codegym.cc/groups/posts/328-sozdanie-prostogo-veb-prilozhenija-na-servletakh-i-jsp-chastjh-1" target="_blank">Створення простого веб-додатку на сервлетах та jsp (частина 1)</a></p>
     <p><a href="https://codegym.cc/groups/posts/136-reguljarnihe-vihrazhenija-v-java-chastjh-1" target="_blank">Регулярні вирази в Java, частина 1</a></p>
     <p><a href="https://codegym.cc/groups/posts/254-top-5-bibliotek-mashinnogo-obuchenija-dlja-java" target="_blank">Топ 5 бібліотек машинного навчання для Java</a></p></td>
   </tr>
  </tbody>
 </table>
</div>