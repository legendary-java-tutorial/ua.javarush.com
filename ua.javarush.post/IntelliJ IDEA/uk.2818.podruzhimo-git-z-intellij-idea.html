Подружимо Git із Intellij IDEA
<p>----------------------------------------</p>
За традицією, що склалася, вітаю вас, майбутні Senior Software Engineers. Сьогодні поговоримо про логічне продовження моєї статті про . Також я раджу прочитати матеріал про я опублікував раніше. У статті про Гіт я описав, як працювати з ним
<p>----------------------------------------</p>
За традицією, що склалася, вітаю вас, майбутні Senior Software Engineers. <img data-max-width="800" data-id="79ad25a0-a9cd-44c6-b9a1-46fac8b77c8e" alt="Подружимо Git з Intellij IDEA - 1" src="https://cdn.javarush.com/images/article/79ad25a0-a9cd-44c6-b9a1-46fac8b77c8e/800.jpeg" style="width: 800px;">Сьогодні поговоримо про логічне продовження моєї статті про <a href="https://codegym.cc/groups/posts/2683-nachalo-rabotih-s-git-podrobnihy-gayd-dlja-novichkov" target="_blank">Гіт</a> . Також я раджу прочитати матеріал про <a href="https://codegym.cc/groups/posts/2693-komandnaja-rabota-bez-putanicih-razbiraem-strategii-vetvlenija-v-gite" target="_blank">стратегії розгалуження</a>я опублікував раніше. У статті про Гіт я описав, як працювати з ним у командному рядку, а сьогодні покажу, як зробити все це в Intellij IDEA. На початку свого шляху як розробника я користувався саме командним рядком і думав, що мені нема чого використовувати UI для цієї справи. Адже все зрозуміло і так ... Але це було рівно до того моменту, поки я не почав використовувати Гіт в Intellij IDEA ... Хочу сказати відразу, що я описуватиму особистий досвід роботи. Є кілька варіантів вирішення тих самих завдань через Intellij IDEA, і якщо ви знаєте, як зробити краще те, що я опишу в статті — пишіть у коментарі, обговоримо. 
<h2>Необхідні вступні:</h2>
<ol>
 <li>Прочитати, повторити та зрозуміти <a href="https://codegym.cc/groups/posts/2683-nachalo-rabotih-s-git-podrobnihy-gayd-dlja-novichkov" target="_blank">статтю про гіт</a> . Це допоможе бути впевненим, що все вже налаштоване та готове до роботи</li>
 <li>Встановити Intellij IDEA.</li>
 <li>Виділити годинку особистого часу для повного засвоєння.</li>
</ol>Для роботи візьмемо <a href="https://github.com/romankh3/git-demo" rel="nofollow" target="_blank">демо-проект</a> , який я використав для статті про гіт. <mark>UPDATE:</mark>на момент публікації вже буде доступний новий UI гітхабу, і деякі іконки будуть не там, де це показано в статті. Ви не лякайтеся: просто потрібно буде не переходити на новий UI, або пошукати їх. 
<h2>Клонуємо проект локально</h2>Тут є два варіанти. 
<ol>
 <li>Якщо вже є гітхаб аккаунт і хочеться щось потім запушити, краще зробити форк проекту до себе і клонувати свою копію. Як зробити форк - я описував у цій статті на чолі <a href="https://codegym.cc/groups/posts/2693-komandnaja-rabota-bez-putanicih-razbiraem-strategii-vetvlenija-v-gite" target="_blank">приклад the forking workflow</a> .</li>
 <li>Клонувати з мого репозиторію і зробити все локально без можливості всю справу запустити на сервер. Адже це буде мій репозиторій))</li>
</ol>Щоб клонувати проект із гітхабу, потрібно скопіювати посилання на проект і передати його до IntelliJ IDEA: 
<ol>
 <li>
  <p>Копіюємо адресау проекту:</p><img data-max-width="1024" data-id="5515705b-3d6c-43ae-8160-00b9f9b8f26b" alt="Подружимо Git з Intellij IDEA - 2" src="https://cdn.javarush.com/images/article/5515705b-3d6c-43ae-8160-00b9f9b8f26b/1024.jpeg" style="width: 1024px;"></li>
 <li>
  <p>Відкриваємо Intellij IDEA і вибираємо Get from Version Control:</p><img data-max-width="800" data-id="6fb3851d-134c-491d-a5bd-78717760a8d9" alt="Подружимо Git з Intellij IDEA - 3" src="https://cdn.javarush.com/images/article/6fb3851d-134c-491d-a5bd-78717760a8d9/800.jpeg" style="width: 800px;"></li>
 <li>
  <p>Копіюємо вставляємо адресау на проект:</p><img data-max-width="800" data-id="463efaf8-0e14-4947-83cd-2465f3f3ddd0" alt="Подружимо Git з Intellij IDEA - 4" src="https://cdn.javarush.com/images/article/463efaf8-0e14-4947-83cd-2465f3f3ddd0/800.jpeg" style="width: 800px;"></li>
 <li>
  <p>Вам запропонують створити Intellij IDEA проект. Приймаємо пропозицію:</p><img data-max-width="800" data-id="4a748b9c-54ab-47f5-b8eb-f24240093676" alt="Подружимо Git з Intellij IDEA - 5" src="https://cdn.javarush.com/images/article/4a748b9c-54ab-47f5-b8eb-f24240093676/800.jpeg" style="width: 800px;"></li>
 <li>
  <p>Так як немає системи збирання, і це не входить в завдання статті, вибираємо <strong>Create project from existing sources</strong> :</p><img data-max-width="800" data-id="028c031b-6e91-44ea-bfce-4c1c77ba1865" alt="Подружимо Git з Intellij IDEA - 6" src="https://cdn.javarush.com/images/article/028c031b-6e91-44ea-bfce-4c1c77ba1865/800.jpeg" style="width: 800px;"></li>
 <li>
  <p>Далі буде така картина маслом: <img data-max-width="1024" data-id="abfdadea-7ce2-40e8-9e56-ac3510ff49ae" alt="Подружимо Git з Intellij IDEA - 7" src="https://cdn.javarush.com/images/article/abfdadea-7ce2-40e8-9e56-ac3510ff49ae/1024.jpeg" style="width: 1024px;">З клонуванням розібралися, тепер можна і озирнутися на всі боки.</p></li>
</ol>
<h2>Перший погляд на Intellij IDEA як на гіт UI</h2>Придивіться ще раз уважно на клонований проект: там вже можна отримати багато інформації про систему контролю версій. Перше – це <strong>Version Control</strong> панель у нижньому лівому кутку. У ній можна знайти всі локальні зміни та отримати список коммітів (аналог git log). Перейдемо в лекцію <strong>Log</strong> . Є певна візуальна складова, яка допомагає зрозуміти, як саме йшов процес розробки. Наприклад, видно, що створювалася нова гілка з коммітом <strong>added header to txt</strong> , який потім влився в майстер-гілку. Якщо натиснути на коміт, у правому кутку можна побачити всю інформацію про коміт: всі зміни та його метадані. <img data-max-width="1024" data-id="0d12b07c-1fa0-4ef7-b837-29ee73a7dd46" alt="Подружимо Git з Intellij IDEA - 8" src="https://cdn.javarush.com/images/article/0d12b07c-1fa0-4ef7-b837-29ee73a7dd46/1024.jpeg" style="width: 1024px;">Більше того, можна побачити, які були зроблені зміни. Тим більше, що там же був розрізнений конфлікт. Це IDEA теж чудово показує. Якщо натиснути два рази на файл, який був змінений за цей коміт, побачимо, як резолвували кофлікт: <img data-max-width="1024" data-id="b55f959b-47fb-40f5-b514-ddae78005840" alt="Подружимо Git з Intellij IDEA - 9" src="https://cdn.javarush.com/images/article/b55f959b-47fb-40f5-b514-ddae78005840/1024.jpeg" style="width: 1024px;">Помітно, що праворуч і ліворуч були два варіанти одного файлу, який потрібно було смержити в один. А посередині – результат, який у результаті вийшов. Коли в проекті безліч гілок, коммітів та користувачів, які працюють у проекті, необхідно пошукати окремо по гілці (branch), користувачеві (user) та даті (date): І останнє, що я хочу пояснити <img data-max-width="1024" data-id="de1d4f2d-6985-4519-b997-a9177064196b" alt="Подружимо Git з Intellij IDEA - 10" src="https://cdn.javarush.com/images/article/de1d4f2d-6985-4519-b997-a9177064196b/1024.jpeg" style="width: 1024px;">перед початком роботи – це те, як же зрозуміти, як і гілці ми. Даю хвабону на пошуки... знайшли? Здаєтеся? :D У правому нижньому кутку є кнопка <strong>Git: master</strong>, де після Git: показано, на якій гілці зараз проект. Якщо натиснути на кнопку, можна зробити безліч корисних речей: перейти на іншу гілку, створити нову, перейменувати існуючу, і так далі. <img data-max-width="1024" data-id="4ac0be8c-362a-4181-90dd-940bc52c919e" alt="Подружимо Git з Intellij IDEA - 11" src="https://cdn.javarush.com/images/article/4ac0be8c-362a-4181-90dd-940bc52c919e/1024.jpeg" style="width: 1024px;">
<h2>Робота з репозиторієм</h2>
<h3>Корисні гарячі клавіші</h3>Щоб далі працювати, потрібно запам'ятати кілька дуже корисних гарячих клавіш: 
<ol start="0">
 <li><strong>ctrl + t</strong> - отримати останні зміни з віддаленого репозиторію (git pull).</li>
 <li><strong>ctrl + k</strong> — зробити коміт/дивитись усі зміни, які є на даний момент. Сюди входять і untracked, і modified файли (дивись мою статтю про гіт, там описано) (git commit).</li>
 <li><strong>ctrl + shift + k</strong> – це команда для створення пуша змін на віддалений репозиторій. Всі коміти, які були створені локально і ще не віддалені, будуть запропоновані для пуша (git push).</li>
 <li><strong>alt + ctrl + z</strong> — відкотити у конкретному файлі зміни до стану останнього створеного комміта у локальному репозиторії. Якщо у верхньому лівому куті виділити весь проект, то можна буде відкотити зміни всіх файлів.</li>
</ol><img data-max-width="512" data-id="d773592d-9546-4996-ac8b-dae4f34e4497" alt="Подружимо Git з Intellij IDEA - 12" src="https://cdn.javarush.com/images/article/d773592d-9546-4996-ac8b-dae4f34e4497/512.jpeg" style="width: 512px;">
<h2>Що ми хочемо?</h2>Нам для роботи потрібно освоїти базовий сценарій, який використовується скрізь. Варто завдання реалізувати нову функціональність в окремій гілці та запушити її на віддалений репозиторій (далі потрібно створити ще пул-реквест на головну гілку, але це виходить за межі нашої статті). Що для цього потрібно зробити? 
<ol>
 <li>
  <p>Отримати всі зміни в основний гілці (master, наприклад).</p></li>
 <li>
  <p>На базі цієї основної створити окрему для своєї роботи.</p></li>
 <li>
  <p>реалізувати нову функціональність.</p></li>
 <li>
  <p>Перейти на основну гілку та перевірити, чи не було нових змін за час, поки працювали. Якщо не було, то все добре, а якщо було, то робимо таке: переходимо на працюючу гілку і робимо <a href="https://habr.com/ru/post/161009/" rel="nofollow" target="_blank">ребейз</a> змін з основної гілки в нашу. Якщо все пройшло успішно, то чудово. Але цілком можуть бути конфлікти. І їх якраз можна буде заздалегідь вирішити, не гаючи часу на віддаленому репозиторії.</p>
  <p><em>Здавалося б, навіщо це робити? Це правило гарного тону, яке запобігає виникненню конфліктів вже після пуша своєї гілки на локальний репозиторій (є, звичайно, ймовірність, що все одно вони будуть, але вона стає значно <strong>меншою</strong> ).</em></p></li>
 <li>Запустіть свої зміни на віддалений репозиторій.</li>
</ol>Далі вже залежить від ваших завдань та фантазії. 
<h3>Отримати зміни віддаленого сервера?</h3>Я додав опис у README новим коммітом і хочу ці зміни отримати. Пропонується вибір між мерджем та ребейзом у разі, якщо були зроблені зміни і в локальному репозиторії та на віддаленому. Вибираємо мерж. Вводимо <strong>ctrl + t</strong> : <img data-max-width="1024" data-id="15db0ed2-6e5b-4594-8001-1c30bee809f6" alt="Подружимо Git з Intellij IDEA - 13" src="https://cdn.javarush.com/images/article/15db0ed2-6e5b-4594-8001-1c30bee809f6/1024.jpeg" style="width: 1024px;">У результаті, видно змінився README, тобто. зміни з віддаленого репозиторію підтяглися, і в правому нижньому куті можна переглянути всі деталі змін, які прийшли з сервера. <img data-max-width="1024" data-id="26f88ea8-55e2-41c5-a239-090a52aac35d" alt="Подружимо Git з Intellij IDEA - 14" src="https://cdn.javarush.com/images/article/26f88ea8-55e2-41c5-a239-090a52aac35d/1024.jpeg" style="width: 1024px;">
<h3>Створити нову гілку на основі master</h3>Тут усе просто. 
<ol>
 <li>
  <p>Переходимо в правий нижній кут і натискаємо на <strong>Git: master</strong> , вибираємо <strong>+ New Branch</strong> .</p><img data-max-width="512" data-id="7e4e8e2d-1208-490f-a8a8-da9eee926849" alt="Подружимо Git з Intellij IDEA - 15" src="https://cdn.javarush.com/images/article/7e4e8e2d-1208-490f-a8a8-da9eee926849/512.jpeg" style="width: 512px;"></li>
 <p>Залишаємо галочку <strong>Checkout branch</strong> і пишемо ім'я нової гілки. Для мене це буде <strong>readme-improver</strong> .</p><img data-max-width="512" data-id="14191089-542b-46f2-ad46-36c6746df7c5" alt="Подружимо Git з Intellij IDEA - 16" src="https://cdn.javarush.com/images/article/14191089-542b-46f2-ad46-36c6746df7c5/512.jpeg" style="width: 512px;">
 <p>Після цього <strong>Git:master</strong> зміниться на <strong>Git:readme-improver</strong> .</p>
</ol>
<h3>Імітуємо паралельну роботу</h3>Щоб конфлікти з'явабося, їх хтось повинен створити :D Я через браузер відредагую README новим коммітом і таким чином зімітую паралельну роботу. Мовляв, хтось під час моєї роботи зробив зміни в тому ж файлі, що і я, що призведе до конфлікту. Я видалю слово "повністю" з 10 рядка. 
<h3>Реалізувати свою функціональність</h3>Завдання полягає в тому, щоб змінити README та додати опис до нової статті, тобто те, що робота в гіті йде через Intellij IDEA. Додаємо це: <img data-max-width="1024" data-id="9b5823ed-2cd2-42d2-a230-1b1029a7cd3e" alt="Подружимо Git з Intellij IDEA - 17" src="https://cdn.javarush.com/images/article/9b5823ed-2cd2-42d2-a230-1b1029a7cd3e/1024.jpeg" style="width: 1024px;">Зміни виконані, тепер можна створити коміт. Натискаємо гарячу клавішу <strong>ctrl + k</strong> , отримаємо: <img data-max-width="800" data-id="998b78eb-a1d9-4c36-8ebb-decc90f62bef" alt="Подружимо Git з Intellij IDEA - 18" src="https://cdn.javarush.com/images/article/998b78eb-a1d9-4c36-8ebb-decc90f62bef/800.jpeg" style="width: 800px;">Перш ніж створити коміт, потрібно уважно подивитися на те, що пропонується у цьому вікні. Я спеціально додав стрілочок, куди подивитись. Там багато цікавих речей. У секції <strong>Commit Message</strong> пишемо текст комміту, і, щоб він створився, потрібно натиснути кнопку <strong>Commit</strong>. Я так і не знайшов, як так зробити це гарячою клавішею, так що якщо хтось знайде — пишіть, я буду дуже радий. Пишемо, що README змінився та створюємо коміт. В результаті в лівому нижньому кутку спливає оповіщення, в якому буде ім'я комміта: <img data-max-width="512" data-id="83caecf9-c4a4-4bf4-a704-a8acf1f6b464" alt="Подружимо Git з Intellij IDEA - 19" src="https://cdn.javarush.com/images/article/83caecf9-c4a4-4bf4-a704-a8acf1f6b464/512.jpeg" style="width: 512px;">
<h3>Перевірити, чи не змінилася основна гілка</h3>Виконали завдання, вона працює, тести написали, все гаразд. Але перш ніж пушити на сервер, потрібно перевірити, чи не було змін в основній гілці за цей час. Як це могло статися? Дуже просто: комусь дали завдання після вас, і цей хтось зробив її швидше за вас. Тому переходимо на master гілку. Для цього потрібно в нижньому правому куті зробити те, що показано нижче на малюнку: <img data-max-width="512" data-id="13fd322e-a919-45ef-bb58-eb1f361c3b1e" alt="Подружимо Git з Intellij IDEA - 20" src="https://cdn.javarush.com/images/article/13fd322e-a919-45ef-bb58-eb1f361c3b1e/512.jpeg" style="width: 512px;">У master гілці натискаємо <strong>ctrl + t</strong> , щоб отримати її останні зміни з віддаленого сервера. Якщо подивитися, які були зміни, можна помітити, що сталося: <img data-max-width="1024" data-id="67156e54-3f92-4b50-9de1-feb251b9efae" alt="Подружимо Git з Intellij IDEA - 21" src="https://cdn.javarush.com/images/article/67156e54-3f92-4b50-9de1-feb251b9efae/1024.jpeg" style="width: 1024px;">Як бачимо, було видалено слово "повністю". Можливо, це був хтось із маркетингу і вирішив, що так не можна писати і дав розробникам завдання оновити це. Тепер у нас локально остання версія master гілки. Переходимо назад на<strong>readme-improver</strong> . Тепер потрібно забрати зміни з майстер гілки в нашу. Робимо: <img data-max-width="512" data-id="7973c5dd-5229-4801-abe3-bd3ef68d83a8" alt="Подружимо Git з Intellij IDEA - 22" src="https://cdn.javarush.com/images/article/7973c5dd-5229-4801-abe3-bd3ef68d83a8/512.jpeg" style="width: 512px;">Якщо ви все правильно виконували зі мною, в результаті повинен з'явитися конфлікт у файлі README: <img data-max-width="800" data-id="ae09746d-6358-4582-90d0-abef0b293113" alt="Подружимо Git з Intellij IDEA - 23" src="https://cdn.javarush.com/images/article/ae09746d-6358-4582-90d0-abef0b293113/800.jpeg" style="width: 800px;">Тут також багато інформації, яку потрібно б зрозуміти і ввібрати. Тут показано список (у разі з одного елемента) файлів, у яких конфлікти. Ми можемо вибрати три опції: 
<ol>
 <li>accept yours — прийняти лише зміни із readme-improver.</li>
 <li>accept theirs — прийняти лише зміни із master.</li>
 <li>merge самому вибрати, що потрібно залишити, а що прибрати.</li>
</ol>Незрозуміло, що там змінилося, і якщо вже зміни знаходяться в майстрі, значить вони потрібні там, і просто прийняти наші зміни не можна, тому вибираємо <strong>merge</strong> : <img data-max-width="1080" data-id="098abe65-1229-42c2-9bde-f5725614ac9a" alt="Подружимо Git з Intellij IDEA - 24" src="https://cdn.javarush.com/images/article/098abe65-1229-42c2-9bde-f5725614ac9a/1080.jpeg" style="width: 1080px;">Тут видно, що є три частини: 
<ol>
 <li>Це зміни з readme-improver.</li>
 <li>Результат. Поки що так, як було до змін.</li>
 <li>Зміни з master гілки.</li>
</ol>Нам потрібно таким чином зібрати результат, щоби він усіх задовольнив. Тому вивчабо, що зробабо ДО нас, зрозуміли, що просто прибрали слово "повністю". Ну, окей, без проблем. Значить, і ми його приберемо в результаті і додамо наші зміни. Як тільки виправимо результат, можна натиснути <strong>Apply</strong> . Після цього випливе сповіщення, що ребейз пройшов успішно: <img data-max-width="512" data-id="1690e40a-73bc-4e84-9215-fb6f92931d08" alt="Подружимо Git з Intellij IDEA - 25" src="https://cdn.javarush.com/images/article/1690e40a-73bc-4e84-9215-fb6f92931d08/512.jpeg" style="width: 512px;">Ось так ми зарезолвіли свій перший конфлікт через Intellij IDEA :D 
<h3>Запустити зміни на віддалений сервер</h3>Наступний крок – запустити зміни на віддалений сервер та створювати пул-реквест. Для цього просто натискаємо <strong>ctrl + shift + k</strong> , після чого отримаємо: <img data-max-width="800" data-id="8368b5c9-342f-4a4a-95a1-fbdbd0b5b3c0" alt="Подружимо Git з Intellij IDEA - 26" src="https://cdn.javarush.com/images/article/8368b5c9-342f-4a4a-95a1-fbdbd0b5b3c0/800.jpeg" style="width: 800px;">Зліва буде список коммітів, які не запущені на віддалений репозиторій, а праворуч будуть усі файли, які змінені. І все: натискаємо <strong>Push</strong> , і буде вам щастя:) При успішному пуші буде ось таке повідомлення в правому нижньому кутку: <img data-max-width="512" data-id="b7df13fa-99fb-476a-bfa3-6404bb21e58d" alt="Подружимо Git з Intellij IDEA - 27" src="https://cdn.javarush.com/images/article/b7df13fa-99fb-476a-bfa3-6404bb21e58d/512.jpeg" style="width: 512px;">
<h2>Бонусна частина</h2>Не хотів спочатку додавати створення пул-реквесту до статті, але виходить не дуже закінченою через це. Тому переходимо на гітхаб репозиторій (якщо він ваш, звичайно)))) і бачимо, що гітхаб вже знає, що нам запропонувати: <img data-max-width="1024" data-id="e177f128-6919-4a61-9ffb-0eab37f470f7" alt="Подружимо Git з Intellij IDEA - 28" src="https://cdn.javarush.com/images/article/e177f128-6919-4a61-9ffb-0eab37f470f7/1024.jpeg" style="width: 1024px;">Натискаємо на <strong>Compare &amp; pull request</strong> , після чого натискаємо <strong>Create pull request</strong> . Через те, що ми завчасно вирішували конфлікти, тепер при створенні пул-реквесту, його одразу можна мержити: <img data-max-width="1024" data-id="702efad8-c260-47c1-aed7-2df573f42d02" alt="Подружимо Git з Intellij IDEA - 29" src="https://cdn.javarush.com/images/article/702efad8-c260-47c1-aed7-2df573f42d02/1024.jpeg" style="width: 1024px;">Ось і все, що я хотів вам розповісти цього разу. Зрозуміло, я тільки відчинив вам двері і показав малу частину. Решту вже в міру потреби самі знайдете. Традиційно запрошую передплатити мій <a href="https://github.com/romankh3" rel="nofollow" target="_blank">GitHub аккаунт</a>, де я виставляю проекти напрацювання на різні технології, які використовую на роботі. У мене нещодавно було особисте досягнення — <a href="https://github.com/romankh3/image-comparison" rel="nofollow" target="_blank">мій проект</a> було оцінено вже більш ніж сотнею розробників. Це неймовірне почуття радості, що те, що ти зробив, хтось використовує. І використовує для користі. <a href="https://codegym.cc/welcome" target="_blank"><img id="click_banner1_articles" data-max-width="1024" data-id="d39a777d-b408-46b5-8d0c-037f8dca48c6" alt="Подружимо Git із Intellij IDEA - 30" src="https://cdn.javarush.com/images/article/d39a777d-b408-46b5-8d0c-037f8dca48c6/1024.jpeg" style="width: 1024px;"></a>
<h2>Корисні посилання</h2>
<ol>
 <li>CodeGym: <a href="https://codegym.cc/groups/posts/2683-nachalo-rabotih-s-git-podrobnihy-gayd-dlja-novichkov" target="_blank">Початок роботи з Git: докладний гайд для новачків</a></li>
 <li>GitHub: <a href="https://github.com/romankh3/git-demo" rel="nofollow" target="_blank">Демо-проект для роботи</a></li>
 <li>CodeGym: <a href="https://codegym.cc/groups/posts/2693-komandnaja-rabota-bez-putanicih-razbiraem-strategii-vetvlenija-v-gite" target="_blank">Розбираємо стратегії розгалуження у Гіті</a></li>
 <li><a href="https://www.jetbrains.com/help/idea/set-up-a-git-repository.html" rel="nofollow" target="_blank">JetBrains: Set up a Git Repository</a></li>
 <li>Habr: <a href="https://habr.com/ru/post/161009/" rel="nofollow" target="_blank">Git rebase</a></li>
 <li>GitHub: <a href="https://github.com/romankh3" rel="nofollow" target="_blank">Мій обліковий запис</a></li>
</ol>