Написання коду як математичний доказ
<p>----------------------------------------</p>
Суперечки про те, чи потрібна програмісту математика чи ні, ймовірно, не вщухнуть ніколи. Існує мільйон думок за і проти, але сьогодні йтиметься зовсім не про це. Пропонуємо до вашої уваги адаптований переклад (Spiro Sideris) в якому він мі
<p>----------------------------------------</p>
Суперечки про те, чи потрібна програмісту математика чи ні, ймовірно, не вщухнуть ніколи. Існує мільйон думок за і проти, але сьогодні йтиметься зовсім не про це. Пропонуємо до вашої уваги адаптований переклад <a href="https://hackernoon.com/writing-code-like-a-mathematical-proof-f5838fc27382" target="_blank">матеріалу Спіро Сідеріса</a> (Spiro Sideris) в якому він міркує, як можна написати код програми, дотримуючись логіки математичних доказів. 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="e87efef6-6020-4cf0-8a15-c6756ca1bdac" data-max-width="710" alt="Написання коду як математичний доказ." src="https://cdn.javarush.com/images/article/e87efef6-6020-4cf0-8a15-c6756ca1bdac/512.jpeg" style="width: 710px;">
 </div>
</div> Коли я починав програмувати, мені завжди було цікаво розглянути зв'язок формальної математики та процесу написання коду. З математики ми довідалися, як треба будувати докази, тобто як, виходячи з набору аксіом і визначень, можна логічно побудувати справжні твердження, щоб довести певну гіпотезу. Після доказу гіпотеза стає теоремою і її можна використовувати для доказу інших гіпотез. Такий ланцюжок доказів і перетворень із гіпотез на теореми чимось схожий на послідовність кроків при розробці програмного забезпечення. Ми починаємо з безлічі визначень (умовні оператори, цикли тощо), а також раніше доведених теорем (стандартні бібліотеки, сторонні бібліотеки тощо). Потім намагаємось об'єднати ці елементи для вирішення своїх завдань. Поєднання тверджень у програмному забезпеченні виконується буквально. Кожен рядок комп'ютерного коду оцінюється як логічна послідовність інструкцій під час роботи програми. Наступна цитата з підручника з основ математичного аналізу описує порівняння між написанням доказів та есе. Стівен Еббот, автор книги «Розуміння аналізу» пише: 
<div class="table-container">
 <table>
  <tbody>
   <tr>
    <td>«У певному роді доказ — це есе. Це набір ретельно продуманих думок, які при подальшому розвитку повинні повністю переконати читача в істинності цієї проблеми. Для досягнення цього результату необхідно, щоб кожен крок доказу логічно випливав з попереднього або виходив з іншого набору раніше узгоджених фактів. Крім цього, всі кроки доказу мають бути узгоджені між собою, щоб доказ був незаперечним».</td>
   </tr>
  </tbody>
 </table>
</div> Саме це порівняння побудови доказів та написання есе лежить в основі мого уявлення про аналогію між написанням доказів та написанням коду. Перш ніж ми почнемо, хочу пояснити, що я не намагаюся переконати читача «математизувати» код у дусі Дональда Кнута. Я просто хочу використовувати концепцію побудови хороших доказів для написання якісного коду. У цьому матеріалі я напишу кілька корисних прикладів доказів, розбір яких, можливо, допоможе покращити код програми. 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="cb520aa8-025d-47e2-91d3-31aea8b5cad1" data-max-width="710" alt="Написання коду як математичний доказ - 2" src="https://cdn.javarush.com/images/article/cb520aa8-025d-47e2-91d3-31aea8b5cad1/512.jpeg" style="width: 710px;">
 </div>
</div> Розглянемо один із них. Припустимо, нам необхідно довести, що сума двох послідовних цілих чисел завжди непарна. Як було зазначено раніше, ми будемо прагнути комбінувати послідовність логічних тверджень, починаючи з визначень або раніше доведених теорем, для отримання нашого доказу. Розглянемо приклад. <strong>Теорема</strong> Якщо <em><strong>a</strong></em> і <em><strong>b</strong></em> — цілі послідовні числа, то їх сума <em><strong>(a + b)</strong></em> — завжди є непарним цілим числом. <strong>Доказ</strong> Допустимо, <em><strong>a</strong></em> та <em><strong>b</strong></em> — послідовні цілі числа. За визначенням непарне число записується як <em><strong>2k+1</strong></em> де <em><strong>k</strong></em> – будь-яке ціле число. Оскільки a<em><strong></strong></em>і b<em><strong></strong></em>є послідовними числами, можемо записати: <em><strong>b=a+1</strong></em> . Таким чином, їхня сума <em><strong>(a + b)</strong></em> може бути записана як: 
<center>
 <div class="table-container">
  <table style="width:30%">
   <tbody>
    <tr>
     <td>
      <center>
       <p>a+b = a+(a+1) = a+a+1 = 2a+1</p>
      </center></td>
    </tr>
   </tbody>
  </table>
 </div>
</center> Оскільки <em><strong>a</strong></em> — ціле число, отже, <em><strong>2a+1</strong></em> — непарне число. Таким чином, і сума <em><strong>(a + b) = 2a+1</strong></em> – непарне число. Що й потрібно було довести. 
<h2>Знай свою цільову аудиторію</h2>Розберемо деякі важливі частини нашого доказу та деякі припущення щодо вас, читачів цього матеріалу. По-перше, я припустив, що читачі цієї статті розуміють, що таке цілі числа (через те, що йдеться про програмування). По-друге, я припустив, що читачам буде зручно працювати з алгеброю цілих чисел (оскільки операції з цілими числами найчастіше інтуїтивно зрозумілі). 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="1cebdbce-cc7f-442d-ac5c-74683ef9e1d4" data-max-width="710" alt="Написання коду як математичний доказ." src="https://cdn.javarush.com/images/article/1cebdbce-cc7f-442d-ac5c-74683ef9e1d4/512.jpeg" style="width: 710px;">
 </div>
</div> Але замість того, щоб припустити, що читач знає формальне визначення непарних цілих чисел, я ввів його визначення разом із доказом, щоб забезпечити узгоджений набір понять між автором та читачами. З кожним наступним припущенням та визначенням я створював доказ із використанням суворо дійсних тверджень і успішно довів теорему. Створення необхідних припущень про рівень аудиторії завжди буде необхідним кроком для написання формального доказу, оскільки це можна зробити по-різному. Наприклад, якщо припустити, що читачі спочатку знали формальні визначення парних і непарних чисел, я міг би їх не наводити в тексті, і тоді доказ був би дуже коротким. Натомість, я припустив, що хтось з моїх читачів не відвідував занять з математики, або це було так давно, що він уже забув усі визначення. Хороший автор, неважливо йдеться про написання математичного доказу чи гостросюжетного роману, завжди повинен розуміти, для кого він пише, які люди стануть його цільовою аудиторією. Якщо йдеться про підручник з основ математики для молодшої школи, то матеріал сприйматиметься легше, якщо вказати в ньому основні визначення. Якщо ж йдеться про статтю до спеціалізованого математичного журналу, автор, зрозуміло, може опустити елементарні визначення, по праву вважаючи, що його цільовою аудиторією є фахівці у цій галузі. Розуміння цільової аудиторії допоможе правильно сформулювати доказ та донести його до читачів. Ми можемо побудувати схожу схему не тільки при складанні доказів, але також під час написання програмного забезпечення. Коли більшість розробників пише програму, переважно вони намагаються написати виконуваний код. Однак якщо код виконується, це не гарантує його читабельності та зрозумілості. Швидше за все, ви чудово розберетеся у своїй (або чужій) невеликій програмці. Але що, якщо вам доведеться розбиратися в тоннах чужого коду мільйона рядків? Щоб написати зрозумілий код, завжди ставте питання про те, хто ваша цільова аудиторія. Який їхній рівень підготовки? Які базові знання вони повинні мати, щоб прочитати написану вами функцію. якщо вам доведеться розбиратися в тоннах чужого коду мільйона рядків? Щоб написати зрозумілий код, завжди ставте питання про те, хто ваша цільова аудиторія. Який їхній рівень підготовки? Які базові знання вони повинні мати, щоб прочитати написану вами функцію. якщо вам доведеться розбиратися в тоннах чужого коду мільйона рядків? Щоб написати зрозумілий код, завжди ставте питання про те, хто ваша цільова аудиторія. Який їхній рівень підготовки? Які базові знання вони повинні мати, щоб прочитати написану вами функцію. 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="b7720130-7be5-4807-acce-886ed84a8885" data-max-width="710" alt="Написання коду як математичний доказ." src="https://cdn.javarush.com/images/article/b7720130-7be5-4807-acce-886ed84a8885/512.jpeg" style="width: 710px;">
 </div>
</div> Крім того, існують відмінності в семантиці між мовами програмування, тому знання кращих практик і стилів мов програмування гарантують, що ваш код вийде легко читати для розробників, що спеціалізуються в цій мові програмування. Коли ви збираєтеся писати наступну функцію, пам'ятайте про слова, які ви використовуєте для опису ваших змінних та методів. Наприклад, якщо ви назвете змінну <em><strong>minimum</strong></em> для позначення мінімальної межі певної множини, більшість зрозуміє, що ви маєте на увазі. А ось при використанні для тієї ж змінної специфічніше, хоч і правильне, <em><strong>infimum</strong></em>, вас зрозуміють або математики, або ті, хто нещодавно вивчав початки аналізу. Зверніть увагу на те, як ви структуруєте свої коментарі та код. Створення керівництва за стилем проекту або дотримання вже існуючого керівництва також допоможе полегшити розуміння вашого коду і «джунам», і досвідченим розробникам. Якщо ви дотримуватиметеся цього принципу, ваш код буде легко читатися і зменшить зусилля ваших послідовників, які будуть також розбиратися у вашому коді. 
<h2>Пишіть чітко та коротко</h2>Сьогодні під час написання коду ми маємо можливість перевіряти код за допомогою вбудованих в IDE та текстових редакторів інструментів. У разі порушення валідності хороша IDE видасть нам помилку компіляції або виняток <em><strong>під час виконання</strong></em> (runtime exception). Конструювання доказів, на жаль, не передбачають таких перевірок. Перевіряти доказ математики на валідність буде читач або студент. Щоб переконати читача у вірності отриманого результату, автор доказу повинен його сформулювати найзрозумілішим і найкоротшим чином. Довгі та безладні роздуми про сутність буття не зможуть донести до читача сенс доказу. 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="7e3a7b33-b8c1-4fe3-a063-1942d8d1cb5a" data-max-width="710" alt="Написання коду як математичний доказ." src="https://cdn.javarush.com/images/article/7e3a7b33-b8c1-4fe3-a063-1942d8d1cb5a/512.jpeg" style="width: 710px;">
 </div>
</div> Я пропоную писати код так, щоб він не просто був здійсненним, але також був прозорим - переконував читача в істинності тверджень. Як і добрий доказ, код має бути написаний уважно та ретельно. Ми повинні обов'язково скоротити надлишкові дані, які не дають читачеві додатковий зиск, а лише заплутують його. Навіщо писати сто рядків коду, якщо для виконання завдання достатньо вісімдесят, шістдесят чи менше? Мертвий код, як і мертві фрази, надмірно напружують читача. Найчастіше вирішення проблеми займе багато часу та сил. Поверніться та спробуйте відредагувати написане вами, спростивши його для розуміння. При цьому я не закликаю вас "зменшити кількість коду" у всьому проекті. Крайності не доречні, і в цьому випадку вони також завдадуть більше шкоди, ніж користі. Іноді створення нової, 
<h2>Перевірте всі варіанти</h2>Дуже часто підтвердження гіпотез починається з використання приватного прикладу, а потім відбувається перенесення на загальний випадок. У наведеній вище теоремі про послідовні числа ми можемо взяти для перевірки два цілих послідовних числа 2 і 3, дійсно, їх сума 5 непарне число. Використовуючи цей приклад, ми можемо екстраполювати та подивитися, як даний шаблон застосовується далі. Звичайно, ми шукаємо спільне рішення, але це не означає, що ми не можемо використати практичні приклади для отримання необхідного результату. Однак, зосередивши свою увагу лише на практичних прикладах, ми можемо припуститися помилки. Іноді ми можемо забути перевірити певний випадок, який порушує загальне рішення. У прикладі ми розглянули два позитивних цілих числа. А як негативні числа? Що буде, якщо ми використовуємо нейтральний елемент (у випадку з<em><strong>integer</strong></em> , це<em><strong> 0</strong></em> )? На щастя, у цьому конкретному прикладі доказ залишиться вірним і негативних чисел, й у нейтрального елемента. На жаль, це завжди так. 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="41e377f8-340a-4196-96d3-7a0e29706a51" data-max-width="710" alt="Написання коду як математичний доказ." src="https://cdn.javarush.com/images/article/41e377f8-340a-4196-96d3-7a0e29706a51/512.jpeg" style="width: 710px;">
 </div>
</div> Простий шкільний приклад. Припустимо, нам необхідно довести, що кожен квадратний корінь цілого числа існує у дійсних числах. Якщо ви намагалися взяти для прикладу √2, √4 або навіть √0, то вважаєте, що результат є вірним. Однак, що буде, якщо ми спробуємо знайти квадратний корінь будь-якого негативного числа? Фактично математикам довелося створити цілий новий набір чисел — комплексних чисел — щоб знайти квадратне коріння негативних цілих чисел. Включивши до розгляду, начебто, простий варіант негативних чисел, історія математики змінилася. І це не єдиний випадок, коли математика розширювалася, щоб відповідати новим вимогам. У програмному забезпеченні варіанти, за яких програма працює інакше, ми виділяємо в групу окремих випадків і називаємо їх <em><strong>edge case</strong></em>(Крайові випадки). Розробники програмного забезпечення регулярно стикаються з такими крайовими випадками, особливо при написанні функції, яка вводить введення користувача: необхідно забезпечити її працездатність, якщо користувач не ввів даних, або ввів їх занадто багато, або ці дані не такі, як очікувалося ... Фантазія інших користувачів безмежна . Інженери-програмісти регулярно скаржаться на крайові випадки і багато хто з них нехтує, що призводить до збоїв у роботі програми. Хоча при назві крайових випадків, ми намагаємося позначити їх як «рідкісні», на практиці вони зустрічаються не так і рідко, і їх обов'язково потрібно враховувати. <strong>Розробники не завжди обробляють крайові випадки у своїх пропозиціях, і ось чому:</strong>
<ol>
 <li>Вони не врахували крайового випадку, оскільки не знають, що такий варіант можливий;</li>
 <li>Вони знають, що такий варіант можливий, але не пишуть код, який із ним взаємодіє.</li>
</ol> Перший пункт відноситься до ряду важкорозв'язних задач. Проте, як математики мають рецензенти доказів, розробники мають <em><strong>code review</strong></em> (огляд коду, в російськомовних країнах зазвичай так і кажуть — код ревью) для перевірки тестових прикладів. 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="8b63f30b-09ea-4f8f-be25-2e724b26cd16" data-max-width="710" alt="Написання коду як математичний доказ - 7" src="https://cdn.javarush.com/images/article/8b63f30b-09ea-4f8f-be25-2e724b26cd16/512.jpeg" style="width: 710px;">
 </div>
</div> Існують способи тестування коду за допомогою модульних тестів, інтеграційних тестів або перевірки моделі, наприклад, <em><strong>TLA+</strong></em>. Крім того, нам часто допомагає особистий досвід, щоб заздалегідь дізнатися про додаткову інформацію про варіанти потенційних тестів. Чим більше програм ви пишете, тим частіше вам доведеться стикатися з такими випадками, і ваші знання можуть бути використані у пізніших розробках. Повертаючись до наших двох причин, зауважу, що якщо перший пункт — це проблема незнання, то другий — значно підступніший. Це відбувається, якщо розробник знає про можливість виникнення крайового випадку, але не намагається розібратися з варіантами захисту від нього. Це може бути пов'язане або з обмеженням термінів проекту, поспіхом або звичайною лінню. Кожна спроба раціоналізації пов'язана з необхідністю збільшити кількість часу для роботи над проектом або шматком коду з помилкою. Чого, в принципі, не повинно бути в інших випадках. Мало того, що це погано впливає на програмне забезпечення, яке ви створюєте, логічно неправильно ігнорувати такі випадки. І хоча я розумію почуття розробника, якому необхідно витратити додатковий час для пошуку нової проблеми, я вважаю, що не можна сидіти склавши руки, поки проблема не буде вирішена. 
<div class="table-container">
 <table>
  <tbody>
   <tr>
    <td>Подібно до вченого, який повинен створити абсолютно новий розділ математики, ввівши негативні цілі числа, хороший розробник повинен витратити свій час для вирішення edge cases або крайових випадків у своїй програмі.</td>
   </tr>
  </tbody>
 </table>
</div> Якщо розробник створить тести, які врахують крайові випадки, він отримає сильний код, який працюватиме чітко як вірний доказ математичної теореми. 
<h2>Підведемо підсумки</h2>У цьому матеріалі я постарався знайти три найбільш відповідні відповідності між написанням математичних доказів та написанням програмного коду. Звичайно, ці три варіанти не єдині, але мені здається, вони найбільш корисні для написання програми. 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="c1ca2cc3-7ad6-4cf5-bfa8-d1578dd0ed2d" data-max-width="710" alt="Написання коду як математичний доказ - 8" src="https://cdn.javarush.com/images/article/c1ca2cc3-7ad6-4cf5-bfa8-d1578dd0ed2d/512.jpeg" style="width: 710px;">
 </div>
</div> Світ математики і світ програмування знаходяться набагато ближче один від одного, ніж здається більшості людей. І вивчення математики може допомогти вам у майбутньому програмувати краще. Якщо тема цієї статті здалася вам цікавою, можливо, варто спробувати відкрити найпростішу книгу про докази та прошерстити її. Сподіваюся, що задоволення від доведеної з нуля теореми для вас, як і для мене, буде порівняно із задоволенням від написання гарної програми. 
<div class="table-container">
 <table>
  <tbody>
   <tr>
    <th>
     <p>Що ще почитати:</p></th>
   </tr>
   <tr>
    <td>
     <p><a href="https://codegym.cc/groups/posts/287-programmirovanie--ehto-slozhno-imenno-poehtomu-stoit-ego-izuchatjh" target="_blank">Програмування – це складно. Саме тому варто його вивчати</a></p>
     <p><a href="https://codegym.cc/groups/posts/285-to-speak-or-not-to-speak-kak-aytishniku-vihuchitjh-angliyskiy" target="_blank">Не говори чи не говоримо? Як айтішнику вивчити англійську</a></p>
     <p><a href="https://codegym.cc/groups/posts/32-ehmpatija-kak-sekretnaja-supersila-razrabotchika-" target="_blank">Емпатія як секретна суперсила розробника</a></p></td>
   </tr>
  </tbody>
 </table>
</div>