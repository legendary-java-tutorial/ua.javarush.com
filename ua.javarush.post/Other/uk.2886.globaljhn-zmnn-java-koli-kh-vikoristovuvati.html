Глобальні змінні Java: коли їх використовувати?
<p>----------------------------------------</p>
Вітання! У цій статті ми поговоримо про глобальні змінні, про їх оголошення та приклади доречного використання. Невелика примітка: ми не розглядатимемо глобальні змінні класу, тобто ті, доступ до яких є в рамках одного класу. Будемо говорит
<p>----------------------------------------</p>
Вітання! У цій статті ми поговоримо про глобальні змінні, про їх оголошення та приклади доречного використання. Невелика примітка: ми не розглядатимемо глобальні змінні класу, тобто ті, доступ до яких є в рамках одного класу. Будемо говорити про глобальні змінні всього додатка — тих, доступ до яких є в рамках цілої програми. <img data-max-width="800" data-id="224fee1c-d7d9-4c3c-9447-fc0c1fe4f684" alt="Глобальні змінні Java: коли їх використовувати?  - 1" src="https://cdn.javarush.com/images/article/224fee1c-d7d9-4c3c-9447-fc0c1fe4f684/800.jpeg" style="width: 800px;">
<h2>Як створювати глобальні змінні</h2>Глобальні змінні — це змінні, які доступні у програмі. Інакше кажучи, їх область видимості — вся програма. Щоб створити таку змінну Java, необхідно в публічному класі створити публічну статичну змінну: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Example</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">int</span></span> a<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">int</span></span> b<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token class-name"><span class="token class-name">String</span></span> str<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Змінні <code class=" language-none">a</code>, <code class=" language-none">b</code>і <code class=" language-none">str</code>стали глобальними. Ми можемо отримати до них прямий доступ з інших класів усередині програми: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">GlobalVarsDemo</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">Example</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>a <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">4</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">Example</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>b <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">5</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">Example</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>str <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Global String variable value"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

        <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Example</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>a<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Example</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>b<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Example</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>str<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Якщо ми запустимо метод <code class=" language-none">main</code>, то побачимо наступний висновок: 
<pre class=" language-none" tabindex="0"><code class=" language-none">
4
5
Global String variable value</code></pre> Глобальні змінні можна розділити на 2 типи:
<ul>
 <li>змінні, які можна редагувати;</li>
 <li>змінні, які можна лише зчитувати.</li>
</ul>Останні називають глобальними константами. Для того, щоб створити глобальну константу, необхідно зробити змінну <code class=" language-none">final</code>і надати їй значення при визначенні змінної: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Constants</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token keyword"><span class="token keyword">double</span></span> PI <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">3.1415926535897932384626433832795</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> HELLO_WORLD_STR <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Hello, World!"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> За згодою про ім'я в ЯП Java, всі константи необхідно назвати у верхньому регістрі, розділяючи слова символом нижнього підкреслення. Отже, ми створабо константи, і тепер ми не зможемо змінювати їх значення: <img data-max-width="800" data-id="661dd6cc-91b6-4655-8fe0-ec54cfe89633" alt="Глобальні змінні Java: коли їх використовувати?  - 2" src="https://cdn.javarush.com/images/article/661dd6cc-91b6-4655-8fe0-ec54cfe89633/800.jpeg" style="width: 800px;">Однак ми можемо зчитувати їх значення: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">HelloWorld</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Constants</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>HELLO_WORLD_STR<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Висновок: 
<pre class=" language-none" tabindex="0"><code class=" language-none">
Hello, World!</code></pre>
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">ConstantsDemo</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">double</span></span> r <span class="token operator"><span class="token operator">=</span></span> <span class="token number"><span class="token number">10</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">String</span></span> message <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">format</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Площадь круга с радиусом %f=%f"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> r<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token function"><span class="token function">getCircleSquare</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>r<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>message<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">double</span></span> <span class="token function"><span class="token function">getCircleSquare</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">double</span></span> r<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> <span class="token class-name"><span class="token class-name">Constants</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>PI <span class="token operator"><span class="token operator">*</span></span> r <span class="token operator"><span class="token operator">*</span></span> r<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Висновок: 
<pre class=" language-none" tabindex="0"><code class=" language-none">
Площадь круга с радиусом 10,000000=314,159265</code></pre>
<h2>Чи варто використовувати глобальні змінні</h2>В інтернеті багато статей, основне посилання яких таке: глобальні змінні - це зло, погано і жахливо. Чи це так насправді? Спробуємо навести плюси та мінуси глобальних змінних, щоб кожен міг зробити висновок самостійно. <img data-max-width="800" data-id="eb7de254-2bdb-4374-bab2-96e7f3b67302" alt="Глобальні змінні Java: коли їх використовувати?  - 3" src="https://cdn.javarush.com/images/article/eb7de254-2bdb-4374-bab2-96e7f3b67302/800.jpeg" style="width: 800px;">Почнемо з мінусів. Уявімо додаток, у якому є клас із глобальними змінними, доступними для читання та редагування. Згодом у проекті зростає кількість класів, кількість глобальних змінних та методів, які використовують глобальні змінні, а іншими словами залежать від них. Згодом, кожна глобальна змінна зчитується в різних частинах системи для різних цілей. У різних частинах системи значення змінної може оновлюватися. Загальна картина світу цього додатка істотно ускладнюється, і звідси випливають <span class="text-bold">такі мінуси</span> :
<ol>
 <li>Зниження читабельності та збільшення складності розуміння коду.</li>
 <li>Збільшення складності супроводу коду.</li>
 <li>Для зміни однієї глобальної змінної необхідно проаналізувати весь код, щоб не задати змінної невалідне для інших частин системи значення.</li>
 <li>Збільшення помилок, які дуже складно налагоджувати. 
  <p>Уявімо глобальну змінну, масив об'єктів. В одній частині системи в даному масиві очікуються рядки, а в іншій частині системи хтось вирішив використовувати числа з плаваючою точкою. Навряд чи комусь захочеться в такому розумітися.</p></li>
 <li>Імена змінних можуть збігтися, якщо ви використовуєте у своєму коді глобальні змінні, а також деякі бібліотеки, в яких також використовуються глобальні змінні. Це може призвести до помилок як на стороні вашої програми, так і на стороні бібліотеки, що використовується.</li>
 <li>Збільшується зв'язок між різними частинами системи, які використовують глобальні змінні. Прагнути потрібно навпаки до слабкої зв'язаності коду. Краще мати багато маленьких підсистем, слабко пов'язаних один з одним, ніж одну велику фіговину. Тому що мозку легше розбиратися з кількома простими речами, ніж із однією надто складною та заплутаною штукою.</li>
 <li>Написання юніт-тестів ускладнюється, оскільки тесту не відомо, які глобальні змінні потрібні і як їх необхідно проініціалізувати.</li>
 <li>У багатопотокових додатках використання глобальних змінних різними потоками призводить до зростання помилок, які складно налагоджувати, та до зростання складності проекту. Через це необхідно налаштовувати доступ до таких змінних більш правильно, обвішуючи їх синхронізаціями та блокуваннями. У майбутньому це може призвести до замкнених блокувань. Наприклад, потік А заблокував для своєї роботи змінну X, а потік B заблокував для своєї роботи змінну Y, а потоку А тепер потрібна змінна Y, а потоку B змінна X. У результаті програма зависне.</li>
</ol>Але все це неточно. Це опис ризиків, ймовірність яких збільшується зі зростанням проекту та зростанням кількості глобальних змінних у ньому. <span class="text-bold">Перейдемо до плюсів</span> :
<ol>
 <li>У маленьких проектах глобальні змінні — найпростіша річ задля досягнення працездатності проекту.</li>
 <li>Іноді страх використання глобальних змінних призводить до ще більшого ускладнення проекту. Тоді програмісти починають створювати синглтони та вдаватися до інших шаблонів проектування.</li>
 <li>У програмуванні часто буває потрібно спиратися деякі незмінні значення. 
  <p>Найрозумніше — записати такі значення у вигляді константи, бо лише константи дають гарантію, що значення змінної не зміниться з часом. Такі константи можна зустріти часто-густо ( <code class=" language-none">Integer.MAX_VALUE</code>, <code class=" language-none">Integer.MIN_VALUE</code>, <code class=" language-none">Boolean.TRUE</code>, <code class=" language-none">Collections.EMPTY_LIST</code>та ін.). Але програмування не обмежується використанням стандартних бібліотек. Часто буває потрібно писати якусь унікальну логіку, в якій необхідно буде спиратися на свої унікальні константи. Тому часом використання констант (глобальних змінних, доступних лише читання) справді спрощує життя.</p></li>
</ol>Загалом не варто зловживати глобальними змінними, по можливості використовувати лише константи. Раніше було сказано, що використовувати глобальні змінні у маленьких проектах – це непогано. Але розробнику-початківцю краще взагалі їх не використовувати. З двох причин:
<ol>
 <li>Все, що пише розробник-початківець — по суті невеликий проект. І використання у його проектах глобальних змінних привчить його до використання глобальних змінних скрізь.</li>
 <li>Краще навчитися спочатку обходитися без «заборонених приймачів». А з досвідом розуміння, коли такі приймачі доречно застосовувати, прийде саме.</li>
</ol><a href="https://codegym.cc/welcome" target="_blank"><img id="click_banner3_1_articles" data-max-width="1080" data-id="72a5a88f-849d-4ef7-894f-3d74cd7b21d1" alt="Глобальні змінні Java: коли їх використовувати?  - 4" src="https://cdn.javarush.com/images/article/72a5a88f-849d-4ef7-894f-3d74cd7b21d1/1080.jpeg" style="width: 1080px;"></a>