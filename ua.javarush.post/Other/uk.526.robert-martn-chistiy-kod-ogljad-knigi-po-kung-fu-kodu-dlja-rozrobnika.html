Роберт Мартін, "Чистий Код". Огляд книги по «кунг-фу коду» для розробника
<p>----------------------------------------</p>
Привіт Джаварашівці! Ця стаття присвячена огляду книги «Чистий код» Роберта Мартіна. Ми разом розглянемо методи поліпшення та оптимізації вашого коду, а також наприкінці вас чекає маленьке, але цікаве завдання. Щодня відкриваючи редактор ва
<p>----------------------------------------</p>
Привіт Джаварашівці! Ця стаття присвячена огляду книги «Чистий код» Роберта Мартіна. Ми разом розглянемо методи поліпшення та оптимізації вашого коду, а також наприкінці вас чекає маленьке, але цікаве завдання. 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="df609859-cd6b-44f4-8fc7-3f5cfd996e91" data-max-width="600" alt="&quot;Чистий Код&quot;, Роберт Мартін.  Огляд книги по «кунг-фу коду» для розробника." src="https://cdn.javarush.com/images/article/df609859-cd6b-44f4-8fc7-3f5cfd996e91/512.jpeg" style="width: 600px;">
 </div>
</div>Щодня відкриваючи редактор вашого коду, ми стикаємося з безліччю класів, функцій та змінних. Найкращий варіант, якщо це ваш код написаний з нуля, написаний один раз, у ньому трохи рядків, ви над ним працює одні, немає правок та подальшого супроводу з боку замовника. АЛЕ! Як показує практика, та я думаю ви й самі розумієте, що такого не буває. В основному нам доведеться якось взаємодіяти з членами своєї команди, супроводжувати «індуський» код, і розбирати продукти в мільйони рядків. Я часто чув від колег з навчання відповіді такого плану «Цей код написаний мною, і я його не збираюся нікому показувати», але коли я бачу прохання на Хелпі про допомогу з таким кодом, то доводиться дуже довго (іноді дійсно доооолго) вникати і розуміти чого людина хотіла мені сказати, навіть хочеться сказати «зітри і перепиши заново»! Цінуйте час, і сабо людей, які хочуть вам допомогти, пишіть правильно, а якщо не вмієте, то навчиться ніколи не пізно. Книга Роберта Мартіна серед книг такого формату вигідно відрізняється тим, що в ній є безліч прикладів Java. Може трохи фанатичний вислів з моєї сторони, але вона написана в стилі ООП, а саме в написанні частин і розділів. Проста для розуміння та читання книга легко читається у дорозі або ввечері перед сном. "Чистий код" розділений на 3 частини. У першій частині нам пропонують пройтися по теорії книги, дізнатися про патерни проектування та правила хорошого тону. Друга частина нам пропонує попрактикуватися в рефакторинг і написання, ну а третина є фінальним вичавлюванням «запахів» коду в прикладах. Що ж автор торкнувся безліч тем для знання яких вам в основному знадобиться знання Java Core, але є і розділи присвячені Модульним тестам JUnit, Логування log4j, знання найпростіших патернів у проектуванні (але як я сказав вище їх небагато, і все незрозуміле успішно гуглиться, та й розбираючи на курсі CodeGym). Всі розділи книги не пов'язані один з одним, ви успішно можете почати читати з того розділу, який вам до душі. Коротка вичавка основних ідей, які я підкреслив з книги. Буду вдячний за коментарі до них, де ви зможете поділитися власним баченням цих висловлювань. Коротка вичавка основних ідей, які я підкреслив з книги. Буду вдячний за коментарі до них, де ви зможете поділитися власним баченням цих висловлювань. Коротка вичавка основних ідей, які я підкреслив з книги. Буду вдячний за коментарі до них, де ви зможете поділитися власним баченням цих висловлювань. 
<h3>1. Коментарі == зло.</h3>У більшості випадків коментарі — це мабоці, якими ми намагаємося прикрити наш поганий код. А в деяких випадках вони ще й брешуть про призначення методів, або змінних, якщо відбувається постійний рефакторинг коду. 
<h3>2. Закоментований код, мертвий код.</h3>Залишати дані шматки коду у вашому додатку — рівнозначно сміттю. Код, що не використовується, з часом накопичується і заважає чистоті вашого додатка, час від часу перевіряйте код на такі ось модулі. 
<h3>3. Заголовки методів, класів та змінних.</h3>Коштує окремих статей для розгляду цієї теми. Не полінуйтеся і пишіть імена, які можуть розповісти про своє призначення. Вивчіть деякі стандарти у написанні назв. Ця тема «Мастхев» для детального вивчення. 
<h3>4. Кожному методу та змінній своє місце в ієрархії класу.</h3>Зазвичай у класі можуть бути змінні та методи (статичні та не статичні), конструтор, вкладені та внутрішні класи, енуми. Одним словом інформації багато, і необхідно визначити кожному своє місце у класі. Якщо ви заглянете в java core класи, то побачите, що структура чітко структурована, ми можемо побачити кожну частину на своєму місці, звичайно, у ваших проектах вона може змінюватися в рамках проекту, але не в кожному класі. Для себе я визначив таку структуру побудови: На початку класу у мене статик змінні, потім змінні об'єкта + Енуми якщо вони є. Після змінних я визначаю констуктори класу. Потім пишу методи роботи із класом. Після методів я пишу гетери та сетери. І в самому кінці в мене є внутрішні класи. Можете скористатися моєю структурою або написати в коментарях свою. 
<h3>5. Рівень абстракції методів.</h3>Для мене це було відкриттям №1. Кожен метод містить оператори лише одного рівня абстракції. Не варто заважати у купі різнорівневі операції. 
<h3>6. Обробка помилок.</h3>Checked або Uncheked Exceptions, що краще краще використовувати в проекті (а ви як думаєте?, пишіть коментарі)? Я прихильник checked, але книга допомагає подивитися з боку та на Неперевірені винятки. Дійсно unchecked Exception не спотворює сигнатуру методу, особливо якщо враховувати, що виключення «пробивають» відразу кілька шарів. Незручність у дрібній зміні призводить до перевизначення всього ланцюжка методів до її відлову, що вкрай незручно для розробки у багатьох випадках. 
<h3>7. Форматування коду.</h3>Правильно відформатований код є не тільки красивим, але й добре читаним. Відразу складається уявлення про дужки і дії всередині. На прикладі умов у конструкціях if, else – не варто писати все в один рядок, краще перенесіть довгі ланцюжки. 
<h3>8. Заперечення за умови.</h3>Намагайтеся уникати заперечення в умовах, це більше психологічний фактор, наш мозок погано сприймає заперечення та й ! перед виразом можна й не помітити. Наприклад, заперечення if (!condition.isTrue) краще переписати метод, це істотно полегшить ось так(condition.isFalse) 
<h3>9. Функції мають виконувати одну операцію.</h3>Якщо у вас метод виконує безліч операцій, діліть їх на одноопераційні методи. Дані методи дуже легко підтримуються, їх легко тестувати, і при нагоді замінювати або видаляти. 
<h3>10. Не повторюйтесь.</h3>Не повторюйте код DRY (Don`t repeat yourself). Це одне з основних правил, яке скоротить у рази ваш код, постійно пам'ятайте. Намагайтеся всі ваші шматки коду, що повторюються, винести в окрему функцію. Звичайно можна ще багато говорити про DRY, KISS (Keep it simple Stupid), <a href="https://codegym.cc/groups/posts/osnovnye-principy-dizajna-klassov-solid-v-java" target="_blank">SOLID</a> , YAGNI. Дані терміни необхідні розуміння і проектування. Вони стоять окремої статті, можливо я ще напишу про них, тому що ця стаття присвячена огляду книги «Чистий код». 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="f3332009-ed4d-4a60-a3e3-f29e98837362" data-max-width="700" alt="&quot;Чистий Код&quot;, Роберт Мартін.  Огляд книги по «кунг-фу коду» для розробника - 2" src="https://cdn.javarush.com/images/article/f3332009-ed4d-4a60-a3e3-f29e98837362/512.jpeg" style="width: 700px;">
 </div>
</div>Як і обіцяв, невелике і легке завдання для вас. Програма повинна обчислювати Індекс Ожиріння за даними. Пишіть у коментарях кількість помилок та виправлень у коді. П.С. код робочий і виконує свою функцію, якщо його правильно використовувати. 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token comment">//Weight in kg.</span>
<span class="token comment">//Height in metres.</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> sample <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        humanIMB humanIMB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">humanIMB</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token number">1.52</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">humanIMB<span class="token punctuation">.</span></span>Result</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> humanIMB <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token class-name">W</span><span class="token punctuation">;</span> <span class="token comment">//Weight Human</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token class-name">H</span><span class="token punctuation">;</span> <span class="token comment">// Height Human</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">double</span> imb<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token function">humanIMB</span><span class="token punctuation">(</span><span class="token keyword">double</span> w<span class="token punctuation">,</span> <span class="token keyword">double</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">W</span> <span class="token operator">=</span> w<span class="token punctuation">;</span>
        <span class="token class-name">H</span> <span class="token operator">=</span> h<span class="token punctuation">;</span>
        imb <span class="token operator">=</span> <span class="token class-name">W</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token class-name">H</span> <span class="token operator">*</span> <span class="token class-name">H</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">takeW</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">W</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">putW</span><span class="token punctuation">(</span><span class="token keyword">double</span> w<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">W</span> <span class="token operator">=</span> w<span class="token punctuation">;</span>
        imb <span class="token operator">=</span> <span class="token class-name">W</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token class-name">H</span> <span class="token operator">*</span> <span class="token class-name">H</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">takeH</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">H</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">putH</span><span class="token punctuation">(</span><span class="token keyword">double</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">H</span> <span class="token operator">=</span> h<span class="token punctuation">;</span>
        imb <span class="token operator">=</span> <span class="token class-name">W</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token class-name">H</span> <span class="token operator">*</span> <span class="token class-name">H</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">double</span> <span class="token function">takeImt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> imb<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span>  string <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>imb <span class="token operator">&gt;=</span><span class="token number">18.5</span> <span class="token operator">&amp;</span> imb <span class="token operator">&lt;</span><span class="token number">25</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            string <span class="token operator">=</span><span class="token string">"Норма, ты в форме!"</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>imb <span class="token operator">&gt;=</span><span class="token number">25</span> <span class="token operator">&amp;</span> imb <span class="token operator">&lt;</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            string <span class="token operator">=</span><span class="token string">"Предожирение. Эй, поосторожнее с пирожными "</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>imb <span class="token operator">&gt;=</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            string <span class="token operator">=</span><span class="token string">"Ожирение. SCHWEINE! Хватит жрать, иди на треню!"</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>imb <span class="token operator">&lt;</span><span class="token number">18.5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            string <span class="token operator">=</span><span class="token string">"Дефицит массы тела. В модели решил переквалифицироваться?"</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> string<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>