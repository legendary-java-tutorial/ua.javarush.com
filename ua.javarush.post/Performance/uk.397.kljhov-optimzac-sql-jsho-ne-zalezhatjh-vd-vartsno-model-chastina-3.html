Кльові оптимізації SQL, що не залежать від вартісної моделі. Частина 3
<p>----------------------------------------</p>
Це цікава можливість, на яку я колись спіткнувся, помилково припустивши, що моя СУБД на таке здатна. Розглянемо наступний запит: Очевидно, що два предикати перетинаються і їх можна злити докупи. Очікується, що база даних перетворює наведени
<p>----------------------------------------</p>
<a href="https://codegym.cc/groups/posts/292-kljevihe-optimizacii-sql-ne-zavisjajshie-ot-stoimostnoy-modeli" target="_blank">Кльові оптимізації SQL, що не залежать від вартісної моделі. Частина 1</a> <a href="https://codegym.cc/groups/posts/331-kljevihe-optimizacii-sql-ne-zavisjajshie-ot-stoimostnoy-modeli-chastjh-2" target="_blank"> Кльові оптимізації SQL, які не залежать від вартісної моделі. Частина 2</a> <img data-id="2ed50f4d-fa3a-4d5f-9e07-b968f60ba4f3" data-max-width="850" alt="Кльові оптимізації SQL, що не залежать від вартісної моделі.  Частина 3 - 1" src="https://cdn.javarush.com/images/article/2ed50f4d-fa3a-4d5f-9e07-b968f60ba4f3/800.jpeg" style="width: 850px;">
<h2>6. Злиття предикатів</h2>Це цікава можливість, на яку я колись спіткнувся, помилково припустивши, що моя СУБД на таке здатна. Розглянемо наступний запит: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class=" language-java">SELECT <span class="token operator">*</span>
FROM actor
WHERE actor_id IN <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
AND actor_id IN <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> Очевидно, що два предикати перетинаються і їх можна злити докупи. Очікується, що база даних перетворює наведений вище запит на наступне: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class=" language-java">SELECT <span class="token operator">*</span>
FROM actor
WHERE actor_id IN <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> Виглядає цілком очевидним, правда? Це складніший випадок транзитивного замикання. Ще один випадок — злиття двох діапазонів. Під час виконання запиту: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class=" language-java">SELECT <span class="token operator">*</span>
FROM film
WHERE film_id BETWEEN <span class="token number">1</span> AND <span class="token number">100</span>
AND film_id BETWEEN <span class="token number">99</span> AND <span class="token number">200</span></code></pre> ми сподіваємося, що база даних перепише запит таким чином: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class=" language-java">SELECT <span class="token operator">*</span>
FROM film
WHERE film_id BETWEEN <span class="token number">99</span> AND <span class="token number">100</span></code></pre> Кардинальність другого варіанту дорівнюватиме 2 рядкам, але в першому база даних може не зрозуміти, що діапазони можна об'єднати, і вибере повний перегляд таблиці, хоча мала б скористатися індексом. <strong><em>Які ж бази даних здатні ці оптимізації?</em></strong>
<h3>DB2</h3><em>Злиття предикатів IN</em> Так 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token class-name">Explain</span> <span class="token class-name">Plan</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
ID <span class="token operator">|</span> <span class="token class-name">Operation</span>         <span class="token operator">|</span>               <span class="token class-name">Rows</span> <span class="token operator">|</span> <span class="token class-name">Cost</span>
 <span class="token number">1</span> <span class="token operator">|</span> RETURN            <span class="token operator">|</span>                    <span class="token operator">|</span>   <span class="token number">11</span>
 <span class="token number">2</span> <span class="token operator">|</span>  FETCH ACTOR      <span class="token operator">|</span>   <span class="token number">2</span> of <span class="token number">2</span> <span class="token punctuation">(</span><span class="token number">100.00</span><span class="token operator">%</span><span class="token punctuation">)</span> <span class="token operator">|</span>   <span class="token number">11</span>
 <span class="token number">3</span> <span class="token operator">|</span>   IXSCAN PK_ACTOR <span class="token operator">|</span> <span class="token number">2</span> of <span class="token number">200</span> <span class="token punctuation">(</span>  <span class="token number">1.00</span><span class="token operator">%</span><span class="token punctuation">)</span> <span class="token operator">|</span>    <span class="token number">0</span>

<span class="token class-name">Predicate</span> <span class="token class-name">Information</span>
<span class="token number"></span><strong><span class="token number">3</span> <span class="token operator">-</span> SARG <span class="token class-name">Q3<span class="token punctuation">.</span>ACTOR_ID</span> IN <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></strong><span class="token punctuation"></span></code></pre><em>Злиття діапазонних предикатів</em> Так (але нехай план не вводить вас в оману!) 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token class-name">Explain</span> <span class="token class-name">Plan</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
ID <span class="token operator">|</span> <span class="token class-name">Operation</span>        <span class="token operator">|</span>                <span class="token class-name">Rows</span> <span class="token operator">|</span> <span class="token class-name">Cost</span>
 <span class="token number">1</span> <span class="token operator">|</span> RETURN           <span class="token operator">|</span>                     <span class="token operator">|</span>   <span class="token number">13</span>
 <span class="token number">2</span> <span class="token operator">|</span>  FETCH FILM      <span class="token operator">|</span>    <span class="token number">2</span> of <span class="token number">2</span> <span class="token punctuation">(</span><span class="token number">100.00</span><span class="token operator">%</span><span class="token punctuation">)</span> <span class="token operator">|</span>   <span class="token number">13</span>
<strong> <span class="token number">3</span> <span class="token operator">|</span>   IXSCAN PK_FILM <span class="token operator">|</span> <span class="token number">2</span> of <span class="token number">1000</span> <span class="token punctuation">(</span>   <span class="token number">.20</span><span class="token operator">%</span><span class="token punctuation">)</span> <span class="token operator">|</span>    <span class="token number">6</span></strong><span class="token number"></span>

<span class="token class-name">Predicate</span> <span class="token class-name">Information</span>
<span class="token number"></span><strong><span class="token number">3</span> <span class="token operator">-</span> START <span class="token punctuation">(</span><span class="token number">99</span> <span class="token operator">&lt;=</span> Q1<span class="token punctuation">.</span>FILM_ID<span class="token punctuation">)</span>
      STOP <span class="token punctuation">(</span>Q1<span class="token punctuation">.</span>FILM_ID <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">)</span></strong><span class="token punctuation"></span>
      SARG <span class="token punctuation">(</span>Q1<span class="token punctuation">.</span>FILM_ID <span class="token operator">&lt;=</span> <span class="token number">200</span><span class="token punctuation">)</span>
      SARG <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;=</span> Q1<span class="token punctuation">.</span>FILM_ID<span class="token punctuation">)</span></code></pre> Як ви можете бачити, предикат оптимізували не повністю. Фільтр (SARG), що перевіряє на потрапляння між нижньою та верхньою межами об'єднаного діапазону, на місці, але важливіші операції START та STOP, що вказують на швидкий доступ за індексом. Крім того, кардинальність теж така, якою і має бути. Якщо хочете переконатися, виконайте запит з наступним неможливим предикатом 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class=" language-java">SELECT <span class="token operator">*</span>
FROM film
WHERE film_id BETWEEN <span class="token number">1</span> AND <span class="token number">2</span>
AND film_id BETWEEN <span class="token number">199</span> <span class="token class-name">AND</span> <span class="token number">200</span><span class="token punctuation">;</span></code></pre> і ви отримаєте правильний план: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token class-name">Explain</span> <span class="token class-name">Plan</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
ID <span class="token operator">|</span> <span class="token class-name">Operation</span>      <span class="token operator">|</span>   <span class="token class-name">Rows</span> <span class="token operator">|</span> <span class="token class-name">Cost</span>
 <span class="token number">1</span> <span class="token operator">|</span> RETURN         <span class="token operator">|</span>        <span class="token operator">|</span>    <span class="token number">0</span>
 <span class="token number">2</span> <span class="token operator">|</span>  TBSCAN GENROW <span class="token operator">|</span> <span class="token number">0</span> of <span class="token number">0</span> <span class="token operator">|</span>    <span class="token number">0</span>

<span class="token class-name">Predicate</span> <span class="token class-name">Information</span>
 <span class="token number">2</span> <span class="token operator">-</span> RESID <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span></code></pre>
<h3>MySQL</h3><em>Злиття предикатів IN</em> Знову ж таки, на жаль, MySQL погано відображає інформацію про предикат. Плани для обох запитів збігаються: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class=" language-java">ID  TABLE  TYPE   KEY      ROWS  FILTERED  EXTRA
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token number">1</span>   actor  range  PRIMARY  <span class="token number">2</span>     <span class="token number">100.00</span>    <span class="token class-name">Using</span> where</code></pre> Двічі одна кардинальність, двічі <em><strong>"Using where"</strong></em> без будь-якого натяку на те, що насправді відбувається всередині <em><strong>"where"</strong></em> . Але з кардинальності, ми можемо дійти невтішного висновку, що перетворення було виконано правильно. Можна поглянути на це з іншого боку, навіщо виконаємо запит: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class=" language-java">SELECT <span class="token operator">*</span> FROM actor
WHERE actor_id IN <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
AND actor_id IN <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> Який має бути перетворений на таке: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class=" language-java">SELECT <span class="token operator">*</span> FROM actor
<span class="token class-name">WHERE</span> actor_id <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span></code></pre> І справді, це і відбувається: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class=" language-java">ID  TABLE  TYPE   KEY      ROWS  FILTERED  EXTRA
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token number">1</span>   actor  <span class="token keyword">const</span>  PRIMARY  <span class="token number">1</span>     <span class="token number">100.00</span></code></pre> TYPE=range змінився на TYPE=const. Отже, можемо зробити висновок, що так, MySQL виконує цю оптимізацію. <em>Злиття діапазонних предикатів</em> Знову ж таки, план запиту нічого не дає: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class=" language-java">ID  TABLE  TYPE   KEY      ROWS  FILTERED  EXTRA
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token number">1</span>   film   range  PRIMARY  <span class="token number">2</span>     <span class="token number">100.00</span>    <span class="token class-name">Using</span> where</code></pre> Але можна підтвердити виконання оптимізації за допомогою наступного "неможливого" предикату: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class=" language-java">SELECT <span class="token operator">*</span>
FROM film
WHERE film_id BETWEEN <span class="token number">1</span> AND <span class="token number">2</span>
AND film_id BETWEEN <span class="token number">199</span> AND <span class="token number">200</span></code></pre> у разі якого план змінюється на такий: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class=" language-java">ID  TABLE  EXTRA
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token number">1</span>          no matching row in <span class="token keyword">const</span> table</code></pre> Отже, знову добрі новини щодо MySQL. 
<h3>Oracle</h3><em>Злиття предикатів IN</em> Так 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">|</span> <span class="token class-name">Id</span>  <span class="token operator">|</span> <span class="token class-name">Operation</span>                    <span class="token operator">|</span> <span class="token class-name">Name</span>     <span class="token operator">|</span> <span class="token class-name">E</span><span class="token operator">-</span><span class="token class-name">Rows</span> <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">|</span>   <span class="token number">0</span> <span class="token operator">|</span> SELECT STATEMENT             <span class="token operator">|</span>          <span class="token operator">|</span>        <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span>  INLIST ITERATOR             <span class="token operator">|</span>          <span class="token operator">|</span>        <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span>   TABLE ACCESS BY INDEX ROWID<span class="token operator">|</span> ACTOR    <span class="token operator">|</span>      <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">|</span><span class="token operator">*</span>  <span class="token number">3</span> <span class="token operator">|</span>    INDEX UNIQUE SCAN         <span class="token operator">|</span> PK_ACTOR <span class="token operator">|</span>      <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>

<span class="token class-name">Predicate</span> <span class="token class-name">Information</span> <span class="token punctuation">(</span>identified by operation id<span class="token punctuation">)</span><span class="token operator">:</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>

<strong>   <span class="token number">3</span> <span class="token operator">-</span> <span class="token function">access</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">"ACTOR_ID"</span><span class="token operator">=</span><span class="token number">2</span> OR <span class="token string">"ACTOR_ID"</span><span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span></strong><span class="token punctuation"></span></code></pre> Застосований предикат включає тільки значення <em><strong>2</strong></em> і <em><strong>3</strong></em> так що перетворення спрацювало правильно. <em>Злиття діапазонних предикатів</em> Знову ж таки — так: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">|</span> <span class="token class-name">Id</span>  <span class="token operator">|</span> <span class="token class-name">Operation</span>                           <span class="token operator">|</span> <span class="token class-name">Name</span>    <span class="token operator">|</span> <span class="token class-name">E</span><span class="token operator">-</span><span class="token class-name">Rows</span> <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">|</span>   <span class="token number">0</span> <span class="token operator">|</span> SELECT STATEMENT                    <span class="token operator">|</span>         <span class="token operator">|</span>        <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span>  TABLE ACCESS BY INDEX ROWID BATCHED<span class="token operator">|</span> FILM    <span class="token operator">|</span>      <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">|</span><span class="token operator">*</span>  <span class="token number">2</span> <span class="token operator">|</span>   INDEX RANGE SCAN                  <span class="token operator">|</span> PK_FILM <span class="token operator">|</span>      <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>

<span class="token class-name">Predicate</span> <span class="token class-name">Information</span> <span class="token punctuation">(</span>identified by operation id<span class="token punctuation">)</span><span class="token operator">:</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>

<strong>   <span class="token number">2</span> <span class="token operator">-</span> <span class="token function">access</span><span class="token punctuation">(</span><span class="token string">"FILM_ID"</span><span class="token operator">&gt;=</span><span class="token number">99</span> AND <span class="token string">"FILM_ID"</span><span class="token operator">&lt;=</span><span class="token number">100</span><span class="token punctuation">)</span></strong><span class="token punctuation"></span></code></pre>
<h3>PostgreSQL</h3><em>Злиття предикатів IN</em> На жаль, ні, оптимізації не відбувається! 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class=" language-java">QUERY PLAN
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token class-name">Seq</span> <span class="token class-name">Scan</span> on actor  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">0.00</span><span class="token punctuation">.</span><span class="token number">.5</span><span class="token number">.50</span> rows<span class="token operator">=</span><span class="token number">1</span> width<span class="token operator">=</span><span class="token number">25</span><span class="token punctuation">)</span>
  <span class="token class-name">Filter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>actor_id <span class="token operator">=</span> ANY <span class="token punctuation">(</span><span class="token string">'{2,3,4}'</span><span class="token operator">::</span><span class="token function">integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> AND <span class="token punctuation">(</span>actor_id <span class="token operator">=</span> ANY <span class="token punctuation">(</span><span class="token string">'{1,2,3}'</span><span class="token operator">::</span><span class="token function">integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre> Обидва предикати, як і раніше, присутні в плані виконання, та й оцінка кардинальності помилкова, має бути <em><strong>2</strong></em> , а не <em><strong>1</strong></em> . Якщо перетворити запит вручну, ми отримали наступний план запиту: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class=" language-java">QUERY PLAN
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token class-name">Seq</span> <span class="token class-name">Scan</span> on actor  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">0.00</span><span class="token punctuation">.</span><span class="token number">.4</span><span class="token number">.50</span> rows<span class="token operator">=</span><span class="token number">2</span> width<span class="token operator">=</span><span class="token number">25</span><span class="token punctuation">)</span>
  <span class="token class-name">Filter</span><span class="token operator">:</span> <span class="token punctuation">(</span>actor_id <span class="token operator">=</span> ANY <span class="token punctuation">(</span><span class="token string">'{2,3}'</span><span class="token operator">::</span><span class="token function">integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre> Зокрема, ми бачимо неправильний план у разі, коли два предикати не перетинаються та формується "неможливий" предикат: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java">SELECT <span class="token operator">*</span>
FROM actor
WHERE actor_id IN <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
AND actor_id IN <span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>
Опять неправильный план<span class="token operator">:</span>
QUERY PLAN
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token class-name">Seq</span> <span class="token class-name">Scan</span> on actor  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">0.00</span><span class="token punctuation">.</span><span class="token number">.5</span><span class="token number">.50</span> rows<span class="token operator">=</span><span class="token number">1</span> width<span class="token operator">=</span><span class="token number">25</span><span class="token punctuation">)</span>
  <span class="token class-name">Filter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>actor_id <span class="token operator">=</span> ANY <span class="token punctuation">(</span><span class="token string">'{2,3,4}'</span><span class="token operator">::</span><span class="token function">integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> AND <span class="token punctuation">(</span>actor_id <span class="token operator">=</span> ANY <span class="token punctuation">(</span><span class="token string">'{7,8,9}'</span><span class="token operator">::</span><span class="token function">integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre> Облом! <em>Злиття діапазонних предикатів</em> Виглядає не краще: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class=" language-java">QUERY PLAN
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token class-name">Index</span> <span class="token class-name">Scan</span> using film_pkey on film  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">0.28</span><span class="token punctuation">.</span><span class="token number">.8</span><span class="token number">.30</span> rows<span class="token operator">=</span><span class="token number">1</span> width<span class="token operator">=</span><span class="token number">386</span><span class="token punctuation">)</span>
  <span class="token class-name">Index</span> <span class="token class-name">Cond</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>film_id <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> AND <span class="token punctuation">(</span>film_id <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">)</span> AND <span class="token punctuation">(</span>film_id <span class="token operator">&gt;=</span> <span class="token number">99</span><span class="token punctuation">)</span> AND <span class="token punctuation">(</span>film_id <span class="token operator">&lt;=</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre> Важко сказати, вийшло чи ні. Зрештою, ми отримали правильний план з розумною кардинальністю, тому все може працювати, як і на DB2. Але що станеться, знову ж таки, якщо створити "неможливий" предикат? 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class=" language-java">SELECT <span class="token operator">*</span>
FROM film
WHERE film_id BETWEEN <span class="token number">1</span> AND <span class="token number">2</span>
AND film_id BETWEEN <span class="token number">199</span> <span class="token class-name">AND</span> <span class="token number">200</span><span class="token punctuation">;</span></code></pre> План став гіршим: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class=" language-java">QUERY PLAN
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token class-name">Index</span> <span class="token class-name">Scan</span> using film_pkey on film  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">0.28</span><span class="token punctuation">.</span><span class="token number">.8</span><span class="token number">.42</span> rows<span class="token operator">=</span><span class="token number">5</span> width<span class="token operator">=</span><span class="token number">386</span><span class="token punctuation">)</span>
  <span class="token class-name">Index</span> <span class="token class-name">Cond</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>film_id <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> AND <span class="token punctuation">(</span>film_id <span class="token operator">&gt;=</span> <span class="token number">2</span><span class="token punctuation">)</span> AND <span class="token punctuation">(</span>film_id <span class="token operator">&gt;=</span> <span class="token number">199</span><span class="token punctuation">)</span> AND <span class="token punctuation">(</span>film_id <span class="token operator">&gt;=</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre> Кардинальність підвищилася замість того, щоб знизитися. І, зрештою, такий запит взагалі не повинен виконуватись. Жирний мінус PostgreSQL 
<h3>SQL Server</h3><em>Злиття предикатів IN</em> Так, все працює: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class=" language-java"><span class="token operator">|</span><span class="token operator">--</span><span class="token class-name">Nested</span> <span class="token class-name">Loops</span><span class="token punctuation">(</span><span class="token class-name">Inner</span> <span class="token class-name">Join</span><span class="token punctuation">)</span>
     <span class="token operator">|</span><span class="token operator">--</span><span class="token class-name">Index</span> <span class="token class-name">Seek</span><span class="token punctuation">(</span>SEEK<span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">[</span>actor_id<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> OR <span class="token punctuation">[</span>actor_id<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
     <span class="token operator">|</span><span class="token operator">--</span>RID <span class="token class-name">Lookup</span><span class="token punctuation">(</span>OBJECT<span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">[</span>actor<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><em>Злиття діапазонних предикатів</em> Знову ж таки схоже на випадок DB2: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class=" language-java"><span class="token operator">|</span><span class="token operator">--</span><span class="token class-name">Nested</span> <span class="token class-name">Loops</span><span class="token punctuation">(</span><span class="token class-name">Inner</span> <span class="token class-name">Join</span><span class="token punctuation">)</span>
     <span class="token operator">|</span><span class="token operator">--</span><span class="token class-name">Index</span> <span class="token class-name">Seek</span><span class="token punctuation">(</span>SEEK<span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">[</span>film_id<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> AND <span class="token punctuation">[</span>film_id<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> <span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> WHERE<span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">[</span>film_id<span class="token punctuation">]</span><span class="token operator">&gt;=</span><span class="token punctuation">(</span><span class="token number">99</span><span class="token punctuation">)</span> AND <span class="token punctuation">[</span>film_id<span class="token punctuation">]</span><span class="token operator">&lt;=</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
     <span class="token operator">|</span><span class="token operator">--</span>RID <span class="token class-name">Lookup</span><span class="token punctuation">(</span>OBJECT<span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">[</span>film<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre> На жаль, зверніть увагу на різницю між <em><strong>SEEK</strong></em> і <em><strong>WHERE</strong></em> . Хотілося б бачити діапазон <em><strong>[99, 100]</strong></em> у <em><strong>SEEK</strong></em> , як у DB2, оскільки <em><strong>SEEK</strong></em> виконується швидко завдяки доступу за індексом за час <em><strong>O(log N)</strong></em> , у той час як час доступу <em><strong>WHERE</strong></em> зростає лінійно, порядку <em><strong>O(N)</strong></em> . Облом! Мені здається, що це програмна помилка, адже неможливий предикат призводить до більш обґрунтованого: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class=" language-java"><span class="token operator">|</span><span class="token operator">--</span><span class="token class-name">Constant</span> <span class="token class-name">Scan</span></code></pre>
<h3>Резюме</h3> Не забувайте, що є безліч предикатів, які правильно зливаються в одних базах даних, а в інших – ні. Якщо сумніваєтеся – обов'язково перевірте план виконання! 
<div class="table-container">
 <table style="text-align: center">
  <thead>
   <tr>
    <th style="text-align: center">База даних</th>
    <th style="text-align: center">Злиття IN</th>
    <th style="text-align: center">Злиття діапазонів</th>
   </tr>
  </thead>
  <tbody>
   <tr>
    <td>DB2 LUW 10.5</td>
    <td>Так</td>
    <td>Так</td>
   </tr>
   <tr>
    <td>MySQL 8.0.2</td>
    <td>Так</td>
    <td>Так</td>
   </tr>
   <tr>
    <td>Oracle 12.2.0.1</td>
    <td>Так</td>
    <td>Так</td>
   </tr>
   <tr>
    <td>PostgreSQL 9.6</td>
    <td>Ні</td>
    <td>Ні</td>
   </tr>
   <tr>
    <td>SQL Server 2014</td>
    <td>Так</td>
    <td>Ні</td>
   </tr>
  </tbody>
 </table>
</div>
<h2>7. Доводимо порожні множини</h2>Це особливо крута нагода. Ми вже бачабо вище <a href="https://codegym.cc/groups/posts/292-kljevihe-optimizacii-sql-ne-zavisjajshie-ot-stoimostnoy-modeli" target="_blank">неможливі предикати та непотрібні звернення до таблиць</a> . Що якщо виконати це знову, але тепер за допомогою <em><strong>JOIN</strong></em> ? Чи спрацює тут усунення <em><strong>JOIN</strong></em> ? Спробуємо виконати наступні запити: Предикат <em><strong>IS NULL</strong></em> на стовпці з обмеженням <em><strong>NOT NULL</strong></em> Предикат у пропозиції <em><strong>WHERE</strong></em> не може дорівнювати <em><strong>TRUE</strong></em> , оскільки на стовпці <em><strong>FILM_ID</strong></em> встановлено обмеження <em><strong>NOT NULL</strong></em> . 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token class-name">SELECT</span> first_name<span class="token punctuation">,</span> last_name
FROM actor a
JOIN <span class="token punctuation">(</span>
  SELECT <span class="token operator">*</span>
  FROM film_actor
  WHERE film_id <span class="token class-name">IS</span> NULL
<span class="token punctuation">)</span> fa ON a<span class="token punctuation">.</span>actor_id <span class="token operator">=</span> fa<span class="token punctuation">.</span>actor_id<span class="token punctuation">;</span></code></pre> Похідна таблиця <em><strong>FA</strong></em> не поверне жодного стовпця, адже через обмеження <em><strong>NOT NULL</strong></em> на стовпці <em><strong>FA.FILM_ID</strong></em> вона порожня. А оскільки <em><strong>INNER JOIN</strong></em> з порожньою таблицею теж жодних рядків не повертає, звертатися до таблиці <em><strong>ACTOR</strong></em> необхідності немає, так що вищенаведений запит має бути переписаний приблизно так: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class=" language-java">SELECT NULL <span class="token class-name">AS</span> first_name<span class="token punctuation">,</span> NULL AS last_name
<span class="token class-name">WHERE</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></code></pre> Перетин стовпців, що допускають невизначене значення, зі стовпцями з обмеженням <em><strong>NOT NULL</strong></em> У принципі, це еквівалентно попередньому прикладу, тільки з трохи заплутаним синтаксисом: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java">SELECT <span class="token operator">*</span>
FROM actor a
JOIN <span class="token punctuation">(</span>
  <span class="token class-name">SELECT</span> actor_id<span class="token punctuation">,</span> film_id
  FROM film_actor
  INTERSECT
  <span class="token class-name">SELECT</span> NULL<span class="token punctuation">,</span> NULL
  <span class="token class-name">FROM</span> dual
<span class="token punctuation">)</span> fa ON a<span class="token punctuation">.</span>actor_id <span class="token operator">=</span> fa<span class="token punctuation">.</span>actor_id<span class="token punctuation">;</span></code></pre> В силу обмежень <em><strong>NOT NULL</strong></em> на обох стовпцях <em><strong>FA.ACTOR_ID</strong></em> і <em><strong>FA.FILM_ID</strong></em> їх перетин з кортежем <em><strong>(NULL, NULL)</strong></em> жодних результатів не поверне, так що похідна таблиця доказово порожня, і, отже, внутрішнє з'єднання можна усунути. І ще раз, з підзапитом <em><strong>EXISTS</strong></em> Нарешті, повторимо наведений вище запит, але цього разу <a href="https://blog.jooq.org/2017/01/12/a-probably-incomplete-comprehensive-guide-to-the-many-different-ways-to-join-tables-in-sql/" target="_blank">з напівз'єднанням замість внутрішнього з'єднання</a> . Спочатку з неможливим предикатом: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java">SELECT <span class="token operator">*</span>
FROM actor a
WHERE a<span class="token punctuation">.</span>actor_id IN <span class="token punctuation">(</span>
  SELECT actor_id
  FROM film_actor
  WHERE actor_id <span class="token class-name">IS</span> NULL
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> ... а потім знову з перетином. 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java">SELECT <span class="token operator">*</span>
FROM actor a
WHERE a<span class="token punctuation">.</span>actor_id IN <span class="token punctuation">(</span>
  SELECT actor_id
  FROM film_actor
  INTERSECT
  SELECT NULL
  FROM sysibm<span class="token punctuation">.</span>dual
<span class="token punctuation">)</span></code></pre> Уперед. Подивимося, які бази даних можуть виконувати ці оптимізації. 
<h3>DB2</h3><em>З'єднання доведено порожньої множини (предикат <em><strong>IS NULL</strong></em> ):</em>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token class-name">Explain</span> <span class="token class-name">Plan</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token operator">*</span>ID <span class="token operator">|</span> <span class="token class-name">Operation</span>      <span class="token operator">|</span>   <span class="token class-name">Rows</span> <span class="token operator">|</span> <span class="token class-name">Cost</span>
 <span class="token number">1</span> <span class="token operator">|</span> RETURN         <span class="token operator">|</span>        <span class="token operator">|</span>    <span class="token number">0</span>
 <span class="token number">2</span> <span class="token operator">|</span>  TBSCAN GENROW <span class="token operator">|</span> <span class="token number">0</span> of <span class="token number">0</span> <span class="token operator">|</span>    <span class="token number">0</span>

<span class="token class-name">Predicate</span> <span class="token class-name">Information</span>
 <span class="token number">2</span> <span class="token operator">-</span> RESID <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span></code></pre><em>З'єднання доведено порожньої множини <em><strong>(INTERSECT)</strong></em> :</em>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token class-name">Explain</span> <span class="token class-name">Plan</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
ID <span class="token operator">|</span> <span class="token class-name">Operation</span>      <span class="token operator">|</span>   <span class="token class-name">Rows</span> <span class="token operator">|</span> <span class="token class-name">Cost</span>
 <span class="token number">1</span> <span class="token operator">|</span> RETURN         <span class="token operator">|</span>        <span class="token operator">|</span>    <span class="token number">0</span>
 <span class="token number">2</span> <span class="token operator">|</span>  TBSCAN GENROW <span class="token operator">|</span> <span class="token number">0</span> of <span class="token number">0</span> <span class="token operator">|</span>    <span class="token number">0</span>

<span class="token class-name">Predicate</span> <span class="token class-name">Information</span>
 <span class="token number">2</span> <span class="token operator">-</span> RESID <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span></code></pre><em>Напівз'єднання доказно порожньої множини (предикат <em><strong>IS NULL</strong></em> ):</em>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token class-name">Explain</span> <span class="token class-name">Plan</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
ID <span class="token operator">|</span> <span class="token class-name">Operation</span>      <span class="token operator">|</span>   <span class="token class-name">Rows</span> <span class="token operator">|</span> <span class="token class-name">Cost</span>
 <span class="token number">1</span> <span class="token operator">|</span> RETURN         <span class="token operator">|</span>        <span class="token operator">|</span>    <span class="token number">0</span>
 <span class="token number">2</span> <span class="token operator">|</span>  TBSCAN GENROW <span class="token operator">|</span> <span class="token number">0</span> of <span class="token number">0</span> <span class="token operator">|</span>    <span class="token number">0</span>

<span class="token class-name">Predicate</span> <span class="token class-name">Information</span>
 <span class="token number">2</span> <span class="token operator">-</span> RESID <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span></code></pre><em>Напівз'єднання доведено порожньої множини <em><strong>(INTERSECT)</strong></em> :</em>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token class-name">Explain</span> <span class="token class-name">Plan</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
ID <span class="token operator">|</span> <span class="token class-name">Operation</span>      <span class="token operator">|</span>   <span class="token class-name">Rows</span> <span class="token operator">|</span> <span class="token class-name">Cost</span>
 <span class="token number">1</span> <span class="token operator">|</span> RETURN         <span class="token operator">|</span>        <span class="token operator">|</span>    <span class="token number">0</span>
 <span class="token number">2</span> <span class="token operator">|</span>  TBSCAN GENROW <span class="token operator">|</span> <span class="token number">0</span> of <span class="token number">0</span> <span class="token operator">|</span>    <span class="token number">0</span>

<span class="token class-name">Predicate</span> <span class="token class-name">Information</span>
 <span class="token number">2</span> <span class="token operator">-</span> RESID <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span></code></pre> Вау круто! Схоже, переможець забігу! 
<h3>MySQL</h3><em>З'єднання доведено порожньої множини (предикат <em><strong>IS NULL</strong></em> ):</em>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class=" language-java">ID  TABLE   EXTRA
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token number">1</span>           <span class="token class-name">Impossible</span> WHERE</code></pre> Круто, я не очікував! <em>З'єднання доказно порожньої множини <em><strong>(INTERSECT)</strong></em> :</em> На жаль, MySQL не підтримує <em><strong>INTERSECT</strong></em> . <em>Напівз'єднання доказно порожньої множини (предикат <em><strong>IS NULL</strong></em> ):</em>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class=" language-java">ID  TABLE   EXTRA
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token number">1</span>           <span class="token class-name">Impossible</span> WHERE</code></pre><em>Напівз'єднання доказно порожньої множини <em><strong>(INTERSECT)</strong></em> :</em> На жаль, MySQL не підтримує <em><strong>INTERSECT</strong></em> . Але все одно MySQL демонструє відмінний результат! 
<h3>Oracle</h3><em>З'єднання доведено порожньої множини (предикат <em><strong>IS NULL</strong></em> ): </em>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token operator">|</span> <span class="token class-name">Id</span>  <span class="token operator">|</span> <span class="token class-name">Operation</span>              <span class="token operator">|</span> <span class="token class-name">Name</span>          <span class="token operator">|</span> <span class="token class-name">Starts</span> <span class="token operator">|</span> <span class="token class-name">E</span><span class="token operator">-</span><span class="token class-name">Rows</span> <span class="token operator">|</span> <span class="token class-name">A</span><span class="token operator">-</span><span class="token class-name">Rows</span> <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token operator">|</span>   <span class="token number">0</span> <span class="token operator">|</span> SELECT STATEMENT       <span class="token operator">|</span>               <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>        <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">|</span><span class="token operator">*</span>  <span class="token number">1</span> <span class="token operator">|</span>  FILTER                <span class="token operator">|</span>               <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>        <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">|</span><span class="token operator">*</span>  <span class="token number">2</span> <span class="token operator">|</span>   HASH JOIN            <span class="token operator">|</span>               <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>   <span class="token number">5462</span> <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">3</span> <span class="token operator">|</span>    TABLE ACCESS FULL   <span class="token operator">|</span> ACTOR         <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>    <span class="token number">200</span> <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">4</span> <span class="token operator">|</span>    INDEX FAST FULL SCAN<span class="token operator">|</span> PK_FILM_ACTOR <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>   <span class="token number">5462</span> <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>

<span class="token class-name">Predicate</span> <span class="token class-name">Information</span> <span class="token punctuation">(</span>identified by operation id<span class="token punctuation">)</span><span class="token operator">:</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>

   <span class="token number">1</span> <span class="token operator">-</span> <span class="token function">filter</span><span class="token punctuation">(</span>NULL IS <span class="token class-name">NOT</span> NULL<span class="token punctuation">)</span>
   <span class="token number">2</span> <span class="token operator">-</span> <span class="token function">access</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">.</span><span class="token string">"ACTOR_ID"</span><span class="token operator">=</span><span class="token string">"FILM_ACTOR"</span><span class="token punctuation">.</span><span class="token string">"ACTOR_ID"</span><span class="token punctuation">)</span></code></pre> Знову ж таки, дуже дивний план виконання в Oracle, але фільтр <em><strong>NULL IS NOT NULL</strong></em> на місці, і він знаходиться перед іншими операціями, які, таким чином, не виконуються. <em>З'єднання доведено порожньої множини <em><strong>(INTERSECT)</strong></em> :</em>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token operator">|</span> <span class="token class-name">Id</span>  <span class="token operator">|</span> <span class="token class-name">Operation</span>                    <span class="token operator">|</span> <span class="token class-name">Name</span>          <span class="token operator">|</span> <span class="token class-name">Starts</span> <span class="token operator">|</span> <span class="token class-name">E</span><span class="token operator">-</span><span class="token class-name">Rows</span> <span class="token operator">|</span> <span class="token class-name">A</span><span class="token operator">-</span><span class="token class-name">Rows</span> <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token operator">|</span>   <span class="token number">0</span> <span class="token operator">|</span> SELECT STATEMENT             <span class="token operator">|</span>               <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>        <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span>  NESTED LOOPS                <span class="token operator">|</span>               <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span>   NESTED LOOPS               <span class="token operator">|</span>               <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">3</span> <span class="token operator">|</span>    VIEW                      <span class="token operator">|</span>               <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">4</span> <span class="token operator">|</span>     INTERSECTION             <span class="token operator">|</span>               <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>        <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">5</span> <span class="token operator">|</span>      SORT UNIQUE             <span class="token operator">|</span>               <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">5462</span> <span class="token operator">|</span>   <span class="token number">5463</span> <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">6</span> <span class="token operator">|</span>       INDEX FAST FULL SCAN   <span class="token operator">|</span> PK_FILM_ACTOR <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">5462</span> <span class="token operator">|</span>   <span class="token number">5463</span> <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">7</span> <span class="token operator">|</span>      FAST DUAL               <span class="token operator">|</span>               <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span><span class="token operator">*</span>  <span class="token number">8</span> <span class="token operator">|</span>    INDEX UNIQUE SCAN         <span class="token operator">|</span> PK_ACTOR      <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">9</span> <span class="token operator">|</span>   TABLE ACCESS BY INDEX ROWID<span class="token operator">|</span> ACTOR         <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>

<span class="token class-name">Predicate</span> <span class="token class-name">Information</span> <span class="token punctuation">(</span>identified by operation id<span class="token punctuation">)</span><span class="token operator">:</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>

   <span class="token number">8</span> <span class="token operator">-</span> <span class="token function">access</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">.</span><span class="token string">"ACTOR_ID"</span><span class="token operator">=</span><span class="token string">"FA"</span><span class="token punctuation">.</span><span class="token string">"ACTOR_ID"</span><span class="token punctuation">)</span></code></pre> Кумедно. Як бачимо, у цьому плані виконання відбувається перегляд всього первинного ключа таблиці <em><strong>FILM_ACTOR</strong></em> . Це може позбавити від звернення до таблиці <em><strong>ACTOR</strong></em> і індексу первинного ключа, оскільки спочатку обробляється похідна таблиця (у якій немає жодного рядка), але операцій з Id = 5 і 6 все ж таки тут бути не повинно. Облом! <em>Напівз'єднання доказно порожньої множини (предикат <em><strong>IS NULL</strong></em> ):</em> А це знову виконується правильно: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token operator">|</span> <span class="token class-name">Id</span>  <span class="token operator">|</span> <span class="token class-name">Operation</span>              <span class="token operator">|</span> <span class="token class-name">Name</span>                    <span class="token operator">|</span> <span class="token class-name">Starts</span> <span class="token operator">|</span> <span class="token class-name">E</span><span class="token operator">-</span><span class="token class-name">Rows</span> <span class="token operator">|</span> <span class="token class-name">A</span><span class="token operator">-</span><span class="token class-name">Rows</span> <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token operator">|</span>   <span class="token number">0</span> <span class="token operator">|</span> SELECT STATEMENT       <span class="token operator">|</span>                         <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>        <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">|</span><span class="token operator">*</span>  <span class="token number">1</span> <span class="token operator">|</span>  FILTER                <span class="token operator">|</span>                         <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>        <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">|</span><span class="token operator">*</span>  <span class="token number">2</span> <span class="token operator">|</span>   HASH JOIN SEMI       <span class="token operator">|</span>                         <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>    <span class="token number">200</span> <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">3</span> <span class="token operator">|</span>    TABLE ACCESS FULL   <span class="token operator">|</span> ACTOR                   <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>    <span class="token number">200</span> <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">4</span> <span class="token operator">|</span>    INDEX FAST FULL SCAN<span class="token operator">|</span> IDX_FK_FILM_ACTOR_ACTOR <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>   <span class="token number">5462</span> <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>

<span class="token class-name">Predicate</span> <span class="token class-name">Information</span> <span class="token punctuation">(</span>identified by operation id<span class="token punctuation">)</span><span class="token operator">:</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>

   <span class="token number">1</span> <span class="token operator">-</span> <span class="token function">filter</span><span class="token punctuation">(</span>NULL IS <span class="token class-name">NOT</span> NULL<span class="token punctuation">)</span>
   <span class="token number">2</span> <span class="token operator">-</span> <span class="token function">access</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">.</span><span class="token string">"ACTOR_ID"</span><span class="token operator">=</span><span class="token string">"ACTOR_ID"</span><span class="token punctuation">)</span></code></pre> ... з тим же дивним планом виконання, що містить піддерево, що не виконується. <em>Напівз'єднання доведено порожньої множини <em><strong>(INTERSECT)</strong></em> :</em> Знову ж таки, ніякої оптимізації: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token operator">|</span> <span class="token class-name">Id</span>  <span class="token operator">|</span> <span class="token class-name">Operation</span>                    <span class="token operator">|</span> <span class="token class-name">Name</span>                    <span class="token operator">|</span> <span class="token class-name">Starts</span> <span class="token operator">|</span> <span class="token class-name">E</span><span class="token operator">-</span><span class="token class-name">Rows</span> <span class="token operator">|</span> <span class="token class-name">A</span><span class="token operator">-</span><span class="token class-name">Rows</span> <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token operator">|</span>   <span class="token number">0</span> <span class="token operator">|</span> SELECT STATEMENT             <span class="token operator">|</span>                         <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>        <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span>  NESTED LOOPS                <span class="token operator">|</span>                         <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span>   NESTED LOOPS               <span class="token operator">|</span>                         <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">3</span> <span class="token operator">|</span>    VIEW                      <span class="token operator">|</span> VW_NSO_1                <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">4</span> <span class="token operator">|</span>     INTERSECTION             <span class="token operator">|</span>                         <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>        <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">5</span> <span class="token operator">|</span>      SORT UNIQUE             <span class="token operator">|</span>                         <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">5462</span> <span class="token operator">|</span>    <span class="token number">200</span> <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">6</span> <span class="token operator">|</span>       INDEX FAST FULL SCAN   <span class="token operator">|</span> IDX_FK_FILM_ACTOR_ACTOR <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">5462</span> <span class="token operator">|</span>   <span class="token number">5463</span> <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">7</span> <span class="token operator">|</span>      FAST DUAL               <span class="token operator">|</span>                         <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span><span class="token operator">*</span>  <span class="token number">8</span> <span class="token operator">|</span>    INDEX UNIQUE SCAN         <span class="token operator">|</span> PK_ACTOR                <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">9</span> <span class="token operator">|</span>   TABLE ACCESS BY INDEX ROWID<span class="token operator">|</span> ACTOR                   <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>

<span class="token class-name">Predicate</span> <span class="token class-name">Information</span> <span class="token punctuation">(</span>identified by operation id<span class="token punctuation">)</span><span class="token operator">:</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>

   <span class="token number">8</span> <span class="token operator">-</span> <span class="token function">access</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">.</span><span class="token string">"ACTOR_ID"</span><span class="token operator">=</span><span class="token string">"ACTOR_ID"</span><span class="token punctuation">)</span></code></pre> Не надто добрі результати! 
<h3>PostgreSQL</h3>На превелике розчарування, PostgreSQL у цьому експерименті показує себе не з кращого боку! <em>З'єднання доказно порожньої множини (предикат <em><strong>IS NULL</strong></em> ):</em> Не-а: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java">QUERY PLAN
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token class-name">Hash</span> <span class="token class-name">Join</span>  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">8.31</span><span class="token punctuation">.</span><span class="token number">.13</span><span class="token number">.07</span> rows<span class="token operator">=</span><span class="token number">1</span> width<span class="token operator">=</span><span class="token number">13</span><span class="token punctuation">)</span>
  <span class="token class-name">Hash</span> <span class="token class-name">Cond</span><span class="token operator">:</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>actor_id <span class="token operator">=</span> film_actor<span class="token punctuation">.</span>actor_id<span class="token punctuation">)</span>
  <span class="token operator">-&gt;</span>  <span class="token class-name">Seq</span> <span class="token class-name">Scan</span> on actor a  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">0.00</span><span class="token punctuation">.</span><span class="token number">.4</span><span class="token number">.00</span> rows<span class="token operator">=</span><span class="token number">200</span> width<span class="token operator">=</span><span class="token number">17</span><span class="token punctuation">)</span>
  <span class="token operator">-&gt;</span>  <span class="token class-name">Hash</span>  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">8.30</span><span class="token punctuation">.</span><span class="token number">.8</span><span class="token number">.30</span> rows<span class="token operator">=</span><span class="token number">1</span> width<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span>  <span class="token class-name">Index</span> <span class="token class-name">Scan</span> using idx_fk_film_id on film_actor  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">0.28</span><span class="token punctuation">.</span><span class="token number">.8</span><span class="token number">.30</span> rows<span class="token operator">=</span><span class="token number">1</span> width<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
              <span class="token class-name">Index</span> <span class="token class-name">Cond</span><span class="token operator">:</span> <span class="token punctuation">(</span>film_id <span class="token class-name">IS</span> NULL<span class="token punctuation">)</span></code></pre><em>З'єднання доведено порожньої множини <em><strong>(INTERSECT)</strong></em> :</em> Ще гірше: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java">QUERY PLAN
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token class-name">Hash</span> <span class="token class-name">Join</span>  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">166.60</span><span class="token punctuation">.</span><span class="token number">.171</span><span class="token number">.36</span> rows<span class="token operator">=</span><span class="token number">1</span> width<span class="token operator">=</span><span class="token number">29</span><span class="token punctuation">)</span>
  <span class="token class-name">Hash</span> <span class="token class-name">Cond</span><span class="token operator">:</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>actor_id <span class="token operator">=</span> fa<span class="token punctuation">.</span>actor_id<span class="token punctuation">)</span>
  <span class="token operator">-&gt;</span>  <span class="token class-name">Seq</span> <span class="token class-name">Scan</span> on actor a  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">0.00</span><span class="token punctuation">.</span><span class="token number">.4</span><span class="token number">.00</span> rows<span class="token operator">=</span><span class="token number">200</span> width<span class="token operator">=</span><span class="token number">25</span><span class="token punctuation">)</span>
  <span class="token operator">-&gt;</span>  <span class="token class-name">Hash</span>  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">166.59</span><span class="token punctuation">.</span><span class="token number">.166</span><span class="token number">.59</span> rows<span class="token operator">=</span><span class="token number">1</span> width<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span>  <span class="token class-name">Subquery</span> <span class="token class-name">Scan</span> on fa  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">0.00</span><span class="token punctuation">.</span><span class="token number">.166</span><span class="token number">.59</span> rows<span class="token operator">=</span><span class="token number">1</span> width<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>
              <span class="token operator">-&gt;</span>  <span class="token class-name">HashSetOp</span> <span class="token class-name">Intersect</span>  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">0.00</span><span class="token punctuation">.</span><span class="token number">.166</span><span class="token number">.58</span> rows<span class="token operator">=</span><span class="token number">1</span> width<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span>  <span class="token class-name">Append</span>  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">0.00</span><span class="token punctuation">.</span><span class="token number">.139</span><span class="token number">.26</span> rows<span class="token operator">=</span><span class="token number">5463</span> width<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span>
                          <span class="token operator">-&gt;</span>  <span class="token class-name">Subquery</span> <span class="token class-name">Scan</span> on <span class="token string">"*SELECT* 2"</span>  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">0.00</span><span class="token punctuation">.</span><span class="token number">.0</span><span class="token number">.02</span> rows<span class="token operator">=</span><span class="token number">1</span> width<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span>
                                <span class="token operator">-&gt;</span>  <span class="token class-name">Result</span>  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">0.00</span><span class="token punctuation">.</span><span class="token number">.0</span><span class="token number">.01</span> rows<span class="token operator">=</span><span class="token number">1</span> width<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>
                          <span class="token operator">-&gt;</span>  <span class="token class-name">Subquery</span> <span class="token class-name">Scan</span> on <span class="token string">"*SELECT* 1"</span>  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">0.00</span><span class="token punctuation">.</span><span class="token number">.139</span><span class="token number">.24</span> rows<span class="token operator">=</span><span class="token number">5462</span> width<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span>
                                <span class="token operator">-&gt;</span>  <span class="token class-name">Seq</span> <span class="token class-name">Scan</span> on film_actor  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">0.00</span><span class="token punctuation">.</span><span class="token number">.84</span><span class="token number">.62</span> rows<span class="token operator">=</span><span class="token number">5462</span> width<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span></code></pre><em>Напівз'єднання доказно порожньої множини (предикат <em><strong>IS NULL</strong></em> )</em> : Так само, як і у випадку з внутрішнім з'єднанням: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java">QUERY PLAN
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token class-name">Hash</span> <span class="token class-name">Semi</span> <span class="token class-name">Join</span>  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">6.06</span><span class="token punctuation">.</span><span class="token number">.10</span><span class="token number">.60</span> rows<span class="token operator">=</span><span class="token number">1</span> width<span class="token operator">=</span><span class="token number">25</span><span class="token punctuation">)</span>
  <span class="token class-name">Hash</span> <span class="token class-name">Cond</span><span class="token operator">:</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>actor_id <span class="token operator">=</span> film_actor<span class="token punctuation">.</span>actor_id<span class="token punctuation">)</span>
  <span class="token operator">-&gt;</span>  <span class="token class-name">Seq</span> <span class="token class-name">Scan</span> on actor a  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">0.00</span><span class="token punctuation">.</span><span class="token number">.4</span><span class="token number">.00</span> rows<span class="token operator">=</span><span class="token number">200</span> width<span class="token operator">=</span><span class="token number">25</span><span class="token punctuation">)</span>
  <span class="token operator">-&gt;</span>  <span class="token class-name">Hash</span>  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">6.05</span><span class="token punctuation">.</span><span class="token number">.6</span><span class="token number">.05</span> rows<span class="token operator">=</span><span class="token number">1</span> width<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span>  <span class="token class-name">Index</span> <span class="token class-name">Only</span> <span class="token class-name">Scan</span> using film_actor_pkey on film_actor  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">0.28</span><span class="token punctuation">.</span><span class="token number">.6</span><span class="token number">.05</span> rows<span class="token operator">=</span><span class="token number">1</span> width<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
              <span class="token class-name">Index</span> <span class="token class-name">Cond</span><span class="token operator">:</span> <span class="token punctuation">(</span>actor_id <span class="token class-name">IS</span> NULL<span class="token punctuation">)</span></code></pre><em>Напівз'єднання доказно порожньої множини <em><strong>(INTERSECT)</strong></em></em> : Як і очікувалося: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java">QUERY PLAN
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token class-name">Hash</span> <span class="token class-name">Semi</span> <span class="token class-name">Join</span>  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">152.94</span><span class="token punctuation">.</span><span class="token number">.157</span><span class="token number">.48</span> rows<span class="token operator">=</span><span class="token number">1</span> width<span class="token operator">=</span><span class="token number">25</span><span class="token punctuation">)</span>
  <span class="token class-name">Hash</span> <span class="token class-name">Cond</span><span class="token operator">:</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>actor_id <span class="token operator">=</span> <span class="token string">"ANY_subquery"</span><span class="token punctuation">.</span>actor_id<span class="token punctuation">)</span>
  <span class="token operator">-&gt;</span>  <span class="token class-name">Seq</span> <span class="token class-name">Scan</span> on actor a  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">0.00</span><span class="token punctuation">.</span><span class="token number">.4</span><span class="token number">.00</span> rows<span class="token operator">=</span><span class="token number">200</span> width<span class="token operator">=</span><span class="token number">25</span><span class="token punctuation">)</span>
  <span class="token operator">-&gt;</span>  <span class="token class-name">Hash</span>  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">152.93</span><span class="token punctuation">.</span><span class="token number">.152</span><span class="token number">.93</span> rows<span class="token operator">=</span><span class="token number">1</span> width<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span>  <span class="token class-name">Subquery</span> <span class="token class-name">Scan</span> on <span class="token string">"ANY_subquery"</span>  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">0.00</span><span class="token punctuation">.</span><span class="token number">.152</span><span class="token number">.93</span> rows<span class="token operator">=</span><span class="token number">1</span> width<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
              <span class="token operator">-&gt;</span>  <span class="token class-name">HashSetOp</span> <span class="token class-name">Intersect</span>  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">0.00</span><span class="token punctuation">.</span><span class="token number">.152</span><span class="token number">.92</span> rows<span class="token operator">=</span><span class="token number">1</span> width<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span>  <span class="token class-name">Append</span>  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">0.00</span><span class="token punctuation">.</span><span class="token number">.139</span><span class="token number">.26</span> rows<span class="token operator">=</span><span class="token number">5463</span> width<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span>
                          <span class="token operator">-&gt;</span>  <span class="token class-name">Subquery</span> <span class="token class-name">Scan</span> on <span class="token string">"*SELECT* 2"</span>  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">0.00</span><span class="token punctuation">.</span><span class="token number">.0</span><span class="token number">.02</span> rows<span class="token operator">=</span><span class="token number">1</span> width<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span>
                                <span class="token operator">-&gt;</span>  <span class="token class-name">Result</span>  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">0.00</span><span class="token punctuation">.</span><span class="token number">.0</span><span class="token number">.01</span> rows<span class="token operator">=</span><span class="token number">1</span> width<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
                          <span class="token operator">-&gt;</span>  <span class="token class-name">Subquery</span> <span class="token class-name">Scan</span> on <span class="token string">"*SELECT* 1"</span>  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">0.00</span><span class="token punctuation">.</span><span class="token number">.139</span><span class="token number">.24</span> rows<span class="token operator">=</span><span class="token number">5462</span> width<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span>
                                <span class="token operator">-&gt;</span>  <span class="token class-name">Seq</span> <span class="token class-name">Scan</span> on film_actor  <span class="token punctuation">(</span>cost<span class="token operator">=</span><span class="token number">0.00</span><span class="token punctuation">.</span><span class="token number">.84</span><span class="token number">.62</span> rows<span class="token operator">=</span><span class="token number">5462</span> width<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span></code></pre>
<h3>SQL Server</h3>SQL Server тут у всій красі, як і DB2! <em>З'єднання доведено порожньої множини (предикат <em><strong>IS NULL</strong></em> )</em> : 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class=" language-java"><span class="token operator">|</span><span class="token operator">--</span><span class="token class-name">Constant</span> <span class="token class-name">Scan</span></code></pre><em>З'єднання доведено порожньої множини <em><strong>(INTERSECT)</strong></em></em> : 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class=" language-java"><span class="token operator">|</span><span class="token operator">--</span><span class="token class-name">Constant</span> <span class="token class-name">Scan</span></code></pre><em>Напівз'єднання доказно порожньої множини (предикат <em><strong>IS NULL</strong></em> )</em> : 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class=" language-java"><span class="token operator">|</span><span class="token operator">--</span><span class="token class-name">Constant</span> <span class="token class-name">Scan</span></code></pre><em>Напівз'єднання доведено порожньої множини <em><strong>(INTERSECT)</strong></em></em> : 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class=" language-java"><span class="token operator">|</span><span class="token operator">--</span><span class="token class-name">Constant</span> <span class="token class-name">Scan</span></code></pre>
<h3>Резюме</h3>
<div class="table-container">
 <table style="text-align: center">
  <thead>
   <tr>
    <th style="text-align: center">База даних</th>
    <th style="text-align: center">JOIN/NULL</th>
    <th style="text-align: center">JOIN/INTERSECT</th>
    <th style="text-align: center">SEMI JOIN/NULL</th>
    <th style="text-align: center">SEMI JOIN/INTERSECT</th>
   </tr>
  </thead>
  <tbody>
   <tr>
    <td>DB2 LUW 10.5</td>
    <td>Так</td>
    <td>Так</td>
    <td>Так</td>
    <td>Так</td>
   </tr>
   <tr>
    <td>MySQL 8.0.2</td>
    <td>Так</td>
    <td>Не підтримується</td>
    <td>Так</td>
    <td>Не підтримується</td>
   </tr>
   <tr>
    <td>Oracle 12.2.0.1</td>
    <td>Так</td>
    <td>Ні</td>
    <td>Так</td>
    <td>Ні</td>
   </tr>
   <tr>
    <td>PostgreSQL 9.6</td>
    <td>Ні</td>
    <td>Ні</td>
    <td>Ні</td>
    <td>Ні</td>
   </tr>
   <tr>
    <td>SQL Server 2014</td>
    <td>Так</td>
    <td>Так</td>
    <td>Так</td>
    <td>Так</td>
   </tr>
  </tbody>
 </table>
</div>Зауважимо, що це можна виконати і багатьма іншими способами. Не соромтеся коментувати і пропонувати власні варіанти створення "доказово порожніх множин", щоб перевірити оптимізацію їх цими базами даних. 
<div class="table-container">
 <table>
  <tbody>
   <tr>
    <th>Що ще почитати?</th>
   </tr>
   <tr>
    <td>
     <p><a href="https://codegym.cc/groups/posts/273-problemih-s-proizvoditeljhnostjhju-sql-voznikajujshie-iz-za-nenuzhnoy-no-objazateljhnoy-rabotih" target="_blank">Проблеми з продуктивністю SQL, що виникають через "непотрібну, але обов'язкову роботу"</a></p>
     <p><a href="https://codegym.cc/groups/posts/414-kljevihe-optimizacii-sql-ne-zavisjajshie-ot-stoimostnoy-modeli-chastjh-4-" target="_blank">Кльові оптимізації SQL, що не залежать від вартісної моделі. Частина 4</a></p></td>
   </tr>
  </tbody>
 </table>
</div>