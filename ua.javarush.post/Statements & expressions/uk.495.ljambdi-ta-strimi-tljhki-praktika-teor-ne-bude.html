Лямбди та стрими, тільки практика, теорії не буде
<p>----------------------------------------</p>
Всім привіт. З нагоди конкурсу я вирішив тут написати не статтю, але невеликий урок. Він буде про лямбди та стрими (stream) у Java. Якщо ви вже знайомі і використовуєте їх, то мотайте відразу до кінця статті, там буде невелика добірка задач
<p>----------------------------------------</p>
Всім привіт. З нагоди конкурсу я вирішив тут написати не статтю, але невеликий урок. Він буде про лямбди та стрими (stream) у Java. Якщо ви вже знайомі і використовуєте їх, то мотайте відразу до кінця статті, там буде невелика добірка задач з CodeGym, на яких можна потренуватися. Потрібна java 8 і вище, гарт від JR, буде мало подробиць і багато незрозумілого, сильне бажання розібратися. Почнемо з того, що я не пояснюватиму історію появи лямбд і стриму, просто сам її не знаю. Знаю тільки те, що прийшли вони з функціонального стилю програмування, до нашого ООП'шного. За мій короткий досвід навчання, просто показував, як і що, деяким людям важко зрозуміти ідею, тому просто запам'ятовуйте, як пишеться, зрозумієте потім. 
<h2>Лямбди</h2><img data-id="7fd8a424-2f83-4382-b73e-7da1e2f5d080" data-max-width="270" alt="Лямбди та стрими, тільки практика, теорії не буде." src="https://cdn.javarush.com/images/article/7fd8a424-2f83-4382-b73e-7da1e2f5d080/256.jpeg" style="width: 270px;"><img data-id="587a5ea5-5a9e-4759-ab41-c9c426f922c1" data-max-width="344" alt="Лямбди та стрими, тільки практика, теорії не буде." src="https://cdn.javarush.com/images/article/587a5ea5-5a9e-4759-ab41-c9c426f922c1/256.jpeg" style="width: 344px;"><strong>Якщо ви зовсім не знаєте, що таке лямбди, то:</strong> Лямбда виглядає так: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token punctuation"><span class="token punctuation">(</span></span>a<span class="token punctuation"><span class="token punctuation">,</span></span> b<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">-&gt;</span></span> a<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">compareTo</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>b<span class="token punctuation"><span class="token punctuation">)</span></span>
<span class="token punctuation"><span class="token punctuation">(</span></span>переменные<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">-&gt;</span></span> действие</code></pre> Цього поки що достатньо. Почитати теорію можна тут: <a href="https://codegym.cc/groups/posts/264-populjarno-o-ljambda-vihrazhenijakh-v-java-s-primerami-i-zadachami-chastjh-1-" target="_blank" rel="nofollow">посилання разів</a> , <a href="https://codegym.cc/groups/posts/283-populjarno-o-ljambda-vihrazhenijakh-v-java-s-primerami-i-zadachami-chastjh-2-" target="_blank" rel="nofollow">посилання два</a> , але мені здається практика набагато веселіше. Пропоную вам вирішити таке завдання: Напишіть калькулятор одним способом. Метод повинен набувати 2 цифрових значень і дещо ще. Код ваш виглядатиме приблизно так: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Lambda</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> main <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
	<span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">double</span></span> <span class="token function"><span class="token function">calculate</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
       	<span class="token keyword"><span class="token keyword">return</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Вам треба вписати 3 параметри в сигнатуру методу <code class=" language-none">calculate</code>, дописати 1 команду <code class=" language-none">return</code>і протестувати виклик цього методу <code class=" language-none">main</code>. <strong>Що має вміти цей метод</strong>
<ul>
 <li>Складати;</li>
 <li>множити;</li>
 <li>ділити;</li>
 <li>віднімати;</li>
 <li>обчислювати корінь;</li>
 <li>зводити у ступінь;</li>
 <li>зводити до міри суму аргументів поділену на перше число + 117;</li>
 <li>та всі будь-які інші операції, які зможете придумати.</li>
</ul><strong>Що не можна використовувати:</strong>
<ul>
 <li><code class=" language-none">if-else</code>;</li>
 <li><code class=" language-none">char</code>як покажчик операції;</li>
 <li><code class=" language-none">switch-case</code>;</li>
 <li>і все інше що вам спаде на думку.</li>
</ul><strong>Що можна використати:</strong>
<ul>
 <li>Тільки лямбди, завдання на них.</li>
</ul>- Що? І це все? — Та це все, бо дописати треба буквально 3 рядки, якщо я підкажу хоч один, решта буде написана на автоматі. А за бажання ви зможете нагуглити приклади, спробувати зрозуміти. Перевіряти кінцеві ви будете себе самі і якщо схитріть ніхто не впізнає, але тоді навіщо? Вирішивши таке просте завдання, всі мої 1,5 учня набули зразкового розуміння, що таке лямбди і як ними користуватися. Це буде дуже потрібне для стримувань. Якщо є бажання похвалитися результатом і дізнатися, чи правильно ви зробабо, код кидайте в личку. У коментарі не треба, туди можете кинути цікаві підказки (але так, щоб не надто полегшувати завдання). Повторюся, вирішивши цей приклад, ви повинні приблизно зрозуміти, як користуватися лямбдами. 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="229db17e-518b-4e20-a9ed-e216ddd0f96d" data-max-width="650" alt="Лямбди та стрими, тільки практика, теорії не буде - 3" src="https://cdn.javarush.com/images/article/229db17e-518b-4e20-a9ed-e216ddd0f96d/512.jpeg" style="width: 650px;">
 </div>
</div>Тепер перейдемо до стриму (java streams). Це не ті стримані про які ти, читач можливо подумав. Ні це не <code class=" language-none">inputStream</code>і не <code class=" language-none">OutputStream</code>. Це інше, це цікавіше. Стрими прийшли на заміну циклам, не повністю, але все ж таки. Подаються вони з девізом "не пояснюй, як робити, пояснюй, що робити". Невеликий приклад стриму: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> myList <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Arrays</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">asList</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"a1"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"a2"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"b1"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"c2"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"c1"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

myList<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">stream</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">filter</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>s <span class="token operator"><span class="token operator">-&gt;</span></span> s<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">startsWith</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"c"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">map</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token operator"><span class="token operator">::</span></span><span class="token function"><span class="token function">toUpperCase</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">sorted</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">forEach</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token operator"><span class="token operator">::</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Що тут відбувається? Додамо коментарі: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java">myList<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">stream</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token comment"><span class="token comment">// получить поток</span></span>
    <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">filter</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>s <span class="token operator"><span class="token operator">-&gt;</span></span> s<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">startsWith</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"c"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token comment"><span class="token comment">//отфильтровать значения, оставить те, что начинаются с «с»</span></span>
    <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">map</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token operator"><span class="token operator">::</span></span><span class="token function"><span class="token function">toUpperCase</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>  <span class="token comment"><span class="token comment">// преобразовать все значения, перевести в верхний регистр</span></span>
    <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">sorted</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token comment"><span class="token comment">// отсортировать по порядку (дефолтный порядо)</span></span>
    <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">forEach</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token operator"><span class="token operator">::</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// вывести каждый элемент на экран</span></span></code></pre> Порівняємо із звичайним циклом: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> toSort <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ArrayList</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">for</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> s <span class="token operator"><span class="token operator">:</span></span> myList<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
     <span class="token keyword"><span class="token keyword">if</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>s<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">startsWith</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"c"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
         toSort<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>s<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">toUpperCase</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
     <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span>

<span class="token class-name"><span class="token class-name">Collections</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">sort</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>toSort<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">for</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> s <span class="token operator"><span class="token operator">:</span></span> toSort<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
     <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>ouy<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>s<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Коли читаєш код, все виглядає страшно, а з коментарями так простіше? Це нормально, я їх також довго не розумів. Ключ до розуміння – практика. Тому починаємо читати сторонні статті та шукати відповіді на свої запитання, можете їх так само задавати тут у коментарі, повноцінну відповідь не дам, але вкажу напрямок. <strong>Список завдань від CodeGym, які, я вважаю, чудово підходять для практики стримувань:</strong>
<ul>
 <li>
  <p>2208 можна вирішити 1 стримом і 1 return, тобто. тіло методу буде починатися з <code class=" language-none">return</code>і далі буде 1 цілий стриму. Вимога <code class=" language-none">StringBuilder</code>опустимо.</p></li>
 <li>
  <p>1908 - так само можна вирішити 1 стриму і 1 return. Починаючи з прочитання файлу. Запис у файл через стрими, як зробити я не знаю (якщо це можливо), поки робимо ручками. Тобто. Відкриваємо лише 2 потоки (консоль та запис у файл). Читання файлу проводимо через методи, які повернуть нам або аркуш, або одразу стриманий (google і javadoc).</p></li>
 <li>
  <p>1907 - за ідеєю теж можна вирішити в один стрим. На вході стримується ім'я файлу, на виході кількість слів world.</p></li>
</ul>На цьому все. Якщо зможу напишу ще просто розповідь. На мій погляд, читати про щось круте без можливості це спробувати, якось нудно. А після калькулятора і 3 завдань думаю ви вже непогано ладнаєте з лямбдами і стримами, щоб почитати вже про всі можливості, якщо ще не прочитали. UPD: 
<ul>
 <li>
  <p>1016 - трохи збоченим способом можна вирішити в 1 стриму і 1 return;</p></li>
 <li>
  <p>1821 - дуже легко і в 1 стриму і 1 return.</p>
  <p>Ці 2 завдання познайомлять вас із ще одним методом стримувань і ще одним колектором.</p></li>
 <li>
  <p>1925 - можна одним стримом отримати рядок зі словами і потім записати його у файл (чи можна писати у файл зі стриму я не знаю)</p></li>
</ul>