Створення простого веб-додатку на сервлетах та jsp (частина 1)
<p>----------------------------------------</p>
ви вже більш-менш розібралися з Java Core та хотіли б подивитися на JavaEE-технології та web-програмування. Логічніше, якщо ви зараз вивчаєте квест Java Collections, де розглядаються близькі статті теми. Цей матеріал є логічним продовженням
<p>----------------------------------------</p>
<strong>Рівень знань, необхідних для розуміння статті:</strong> ви вже більш-менш розібралися з Java Core та хотіли б подивитися на JavaEE-технології та web-програмування. Логічніше, якщо ви зараз вивчаєте квест Java Collections, де розглядаються близькі статті теми. <img width="800" height="500" data-id="cff67aff-083d-4165-a175-178ba92ac938" alt="Створення простого веб-додатку на сервлетах та jsp (частина 1) - 1" src="https://cdn.javarush.com/images/article/cff67aff-083d-4165-a175-178ba92ac938/1080.jpeg">Цей матеріал є логічним продовженням моєї статті <a href="https://codegym.cc/groups/posts/305-sozdanie-prosteyshego-web-proekta-v-intellij-idea-enterprise-edition-poshagovo-s-kartinkami" target="_blank" rel="nofollow">Створення найпростішого веб-проекту IntelliJ Idea Enterprise</a> . У ній я продемонстрував, як створити шаблон веб-проекту, що працює. Цього разу я покажу, як створити простий, але цілком симпатичний веб-додаток за допомогою технологій Java Servlet API та JavaServer Pages API. В нашому додатку буде головна сторінка з двома посиланнями: 
<ul>
 <li>на сторінку додавання користувача;</li>
 <li>на сторінку перегляду списку користувачів.</li>
</ul>Я як і раніше використовуватиму IntelliJ Idea Enterprise Edition, Apache Maven (просто підключимо кілька залежностей) і Apache Tomcat. Наприкінці «прикрасимо» наш додаток використовуючи фреймворк <a href="https://www.w3schools.com/w3css/" target="_blank" rel="nofollow">W3.CSS</a> . Вважатимемо, що зараз у вас вже є порожній проект, який ми і будемо тут розвивати. Якщо ж нема — пройдіться за першою статтею і зробіть його. Це займе лише кілька хвабон :) 
<h3>Трохи про структуру майбутнього додатку</h3>Головна сторінка ( <strong>/</strong> ) у нас буде найзвичайнішою статичною html-сторінкою з шапкою та двома посиланнями/кнопками: 
<ul>
 <li>додати нового користувача (відправлятиме на адресау <strong>/add</strong> );</li>
 <li>переглянути список користувачів (надсилає на адресау <strong>/list</strong> ).</li>
</ul>Запити за цими адресаами Tomcat ловитиме і відправлятиме на один із двох сервлетів, які ми зробимо (мапінг ми розпишемо у файлі <strong>web.xml</strong> ). А сервлети, у свою чергу, будуть обробляти запити, готувати дані (або зберігати їх у разі додавання користувача), та передавати управління у відповідні jsp-файли, які вже «малюватимуть» результат. Дані будемо зберігати у звичайному списку (List). 
<h3>Створимо статичну головну сторінку</h3>Якщо у вас у папці web лежить <strong>index.jsp</strong> – видаляйте його. Замість нього в цій папці створимо простий html-файл з ім'ям <strong>index.html</strong> : 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">!</span></span>DOCTYPE html<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span>html lang<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"en"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>head<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>meta charset<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"UTF-8"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>title<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">My</span></span> <span class="token keyword"><span class="token keyword">super</span></span> project<span class="token operator"><span class="token operator">!</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>title<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>head<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>body<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">!</span></span><span class="token operator"><span class="token operator">--</span></span> header <span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>div<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
        <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>h1<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Super</span></span> app<span class="token operator"><span class="token operator">!</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token comment"><span class="token comment">//h1&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>div<span class="token operator"><span class="token operator">&gt;</span></span>

    <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>div<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>       <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">!</span></span><span class="token operator"><span class="token operator">--</span></span> content <span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
        <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>div<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>    <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">!</span></span><span class="token operator"><span class="token operator">--</span></span> buttons holder <span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
            <span class="token operator"><span class="token operator">&lt;</span></span>button onclick<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"location.href='/list'"</span></span><span class="token operator"><span class="token operator">&gt;</span></span><span class="token class-name"><span class="token class-name">List</span></span> users<span class="token operator"><span class="token operator">&lt;</span></span><span class="token comment"><span class="token comment">//button&gt;</span></span>
            <span class="token operator"><span class="token operator">&lt;</span></span>button onclick<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"location.href='/add'"</span></span><span class="token operator"><span class="token operator">&gt;</span></span><span class="token class-name"><span class="token class-name">Add</span></span> user<span class="token operator"><span class="token operator">&lt;</span></span><span class="token comment"><span class="token comment">//button&gt;</span></span>
        <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>div<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>div<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>body<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>html<span class="token operator"><span class="token operator">&gt;</span></span></code></pre> Тут нічого складного. У title вказуємо заголовок нашої сторінки. У тілі сторінки ми маємо два основних дива: header (шапка) і content (контент). У контенті у нас холдер для наших кнопок, та й власне дві кнопки, які за натисканням відправляють на відповідні адресаи. Можете запустити проект і подивитися, як він зараз виглядає. Якщо натискати на кнопки, відкриваються сторінки з помилкою 404, тому що у нас їх поки що немає. Але це свідчить, що кнопки працюють. Зауважу, це не найуніверсальніший варіант, оскільки якщо у вас раптом відключений JavaScript, в браузері від цих кнопок ніякого сенсу. Але вважатимемо, що ніхто JavaScript не відключав:). Ясно, що можна було б обійтися простими посиланнями, але мені більше до вподоби кнопочки. Ви робіть, як вам більше подобається. І не дивіться, що в моїх прикладах буде багато <strong>div</strong>-ів. Потім ми їх наповнимо стилями, і все виглядатиме красивіше:). 
<h3>Створюємо jsp-файли для відображення результату</h3>У тій же директорії <strong>web</strong> створимо папку, куди складатимемо наші <strong>jsp-файли</strong> . Я назвав її views, а ви, знову-таки, можете поімпровізувати. У цій папці створимо два jsp-файли: 
<ul>
 <li><strong>add.jsp</strong> - сторінка для додавання користувачів;</li>
 <li><strong>list.jsp</strong> — сторінка для відображення списку користувачів.</li>
</ul>Проставимо відповідні заголовки сторінки. Щось на кшталт "Add new user" і "Users list", і поки так і залишимо. 
<h3>Створимо два сервлети</h3>Сервлети прийматимуть та оброблятимуть запити, які їм передаватиме Tomcat. У папці <strong>src/main/java</strong> створимо пакет <strong>app</strong> , у якому лежатимуть наші вихідники. Там у нас буде ще різних пакетів. Тому, щоб ці пакети не створювалися всередині один одного, давайте створимо в пакеті <strong>app</strong> якийсь клас (потім видалимо). Тепер створимо в пакеті <strong>app</strong> три різні пакети: 
<ul>
 <li><strong>entities</strong> - тут лежатимуть наші сутності (сам клас, який описуватиме об'єкти користувачів);</li>
 <li><strong>model</strong> - тут буде наша модель (про це трохи згодом);</li>
 <li><strong>servlets</strong> – ну а тут будуть наші сервлети.</li>
</ul>Після цього той клас із пакета <strong>app</strong> можна спокійно видаляти (якщо ви його, звичайно, створювали). У пакеті <strong>servlets</strong> створимо два класи: 
<ul>
 <li><strong>AddServlet</strong> - оброблятиме запити, що надійшли за адресаою <strong>/add</strong> ;</li>
 <li><strong>ListServlet</strong> — оброблятиме запити, що надійшли за адресаою <strong>/list</strong> .</li>
</ul>
<h3>Підключення залежностей у Maven</h3>Tomcat версії 9.* реалізує специфікації Servlet версії 4.0 та JavaServer Pages версії 2.3. Про це написано в офіційній документації 9-го Tomcat у першому абзаці в другому рядку. Це означає, що якщо ви, як і я, використовуєте цю версію Tomcat, то наш код, який ми напишемо та відправимо виконувати, буде використовувати саме вказані версії. Але нам хотілося б мати ці специфікації і в нашому проекті, щоб наш код, який їх використовує, хоча б успішно компілювався. А для цього нам треба їх підвантажити до себе у проект. Ось тут і приходить на допомогу Maven. 
<p><em>Загальне правило таке: якщо вам треба підключити щось до вашого проекту, використовуючи Maven:</em></p>
<ul>
 <li>йдете на сайт репозиторію від Maven;</li>
 <li>шукайте там потрібну вам бібліотеку потрібної версії;</li>
 <li>отримуєте код залежності, який треба вставити у ваш pom.xml;</li>
 <li>вставляєте! :)</li>
</ul> Отже, починаємо. Для початку, підготуємо <strong>pom-файл</strong> . Десь після запису <strong>/version</strong> , але до <strong>/project</strong> вставляєте наступне: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class="  language-java"><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>dependencies<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>

<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>dependencies<span class="token operator"><span class="token operator">&gt;</span></span></code></pre> Тим самим ми вказали, що всередині цих тегів ми перерахуємо необхідні нам залежності. Тепер заходьте на <strong>mvnrepository.com</strong>, там нагорі буде поле пошуку. Для початку вбиваєте в пошук Servlet. Перший же результат, де понад сім тисяч використань, нам і підходить. Пам'ятаємо, що нам потрібна версія 4.0 (для 9 Tomcat, для інших версій, можливо, підійдуть і більш старі реалізації). Це досить свіжа версія, тому використання не так вже й багато, але нам потрібна саме вона. Відкриється сторінка, звідки можна взяти код цієї залежності для різноманітних менеджерів пакетів і навіть можна просто завантажити. Але оскільки ми хочемо підключити її за допомогою Maven, то код вибираємо на вкладці Maven. Копіюємо та вставляємо в наш pom-файл усередину розділу із залежностями. Якщо у правому нижньому кутку IDEA вилізе повідомлення, де запитають, чи хочемо ми включити автоімпорт, погоджуємось. Якщо випадково відмовабося, заходьте до «Налаштувань» та увімкніть автоімпорт вручну:<strong>Settings (Ctrl + Alt + S) -&gt; Build, Execution, Deployment -&gt; Maven -&gt; Importing</strong> Це дозволить тримати <strong>pom-файл</strong> та файли налаштування IDEA для цього проекту синхронізованими. Тепер за тим же принципом знайдемо та підключимо JavaServer Pages версії 2.3 (у пошуку вбиваєте jsp). І якщо ми вже взялися за Maven, давайте відразу вкажемо йому, що наші вихідні коди відповідають синтаксису Java 8, і що компілювати їх потрібно в байткод тієї ж версії. Після всіх цих маніпуляцій наш <strong>pom.xml</strong> виглядатиме приблизно так: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">?</span></span>xml version<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"1.0"</span></span> encoding<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"UTF-8"</span></span><span class="token operator"><span class="token operator">?</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span>project xmlns<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"http://maven.apache.org/POM/4.0.0"</span></span>
         xmlns<span class="token operator"><span class="token operator">:</span></span>xsi<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"http://www.w3.org/2001/XMLSchema-instance"</span></span>
         xsi<span class="token operator"><span class="token operator">:</span></span>schemaLocation<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>modelVersion<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token number"><span class="token number">4.0</span></span><span class="token number"><span class="token number">.0</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>modelVersion<span class="token operator"><span class="token operator">&gt;</span></span>

    <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>groupId<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>ru<span class="token punctuation"><span class="token punctuation">.</span></span>codegym<span class="token punctuation"><span class="token punctuation">.</span></span>info<span class="token punctuation"><span class="token punctuation">.</span></span>fatfaggy<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>groupId<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>artifactId<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>my<span class="token operator"><span class="token operator">-</span></span><span class="token keyword"><span class="token keyword">super</span></span><span class="token operator"><span class="token operator">-</span></span>project<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>artifactId<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>version<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token number"><span class="token number">1.0</span></span><span class="token operator"><span class="token operator">-</span></span>SNAPSHOT<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>version<span class="token operator"><span class="token operator">&gt;</span></span>

    <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>properties<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
        <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>maven<span class="token punctuation"><span class="token punctuation">.</span></span>compiler<span class="token punctuation"><span class="token punctuation">.</span></span>source<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token number"><span class="token number">1.8</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>maven<span class="token punctuation"><span class="token punctuation">.</span></span>compile<span class="token punctuation"><span class="token punctuation">.</span></span>source<span class="token operator"><span class="token operator">&gt;</span></span>
        <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>maven<span class="token punctuation"><span class="token punctuation">.</span></span>compiler<span class="token punctuation"><span class="token punctuation">.</span></span>target<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token number"><span class="token number">1.8</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>maven<span class="token punctuation"><span class="token punctuation">.</span></span>compile<span class="token punctuation"><span class="token punctuation">.</span></span>target<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>properties<span class="token operator"><span class="token operator">&gt;</span></span>

    <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>dependencies<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
        <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">!</span></span><span class="token operator"><span class="token operator">--</span></span> <span class="token class-name"><span class="token class-name">Servlet</span></span> API <span class="token number"><span class="token number">4.0</span></span> <span class="token keyword"><span class="token keyword">for</span></span> tomcat <span class="token number"><span class="token number">9</span></span> <span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
        <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>dependency<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
            <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>groupId<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>javax<span class="token punctuation"><span class="token punctuation">.</span></span>servlet<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>groupId<span class="token operator"><span class="token operator">&gt;</span></span>
            <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>artifactId<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>javax<span class="token punctuation"><span class="token punctuation">.</span></span>servlet<span class="token operator"><span class="token operator">-</span></span>api<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>artifactId<span class="token operator"><span class="token operator">&gt;</span></span>
            <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>version<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token number"><span class="token number">4.0</span></span><span class="token number"><span class="token number">.0</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>version<span class="token operator"><span class="token operator">&gt;</span></span>
            <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>scope<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>provided<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>scope<span class="token operator"><span class="token operator">&gt;</span></span>
        <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>dependency<span class="token operator"><span class="token operator">&gt;</span></span>

        <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">!</span></span><span class="token operator"><span class="token operator">--</span></span> <span class="token class-name"><span class="token class-name">JavaServer</span></span> <span class="token class-name"><span class="token class-name">Pages</span></span> API <span class="token number"><span class="token number">2.3</span></span> <span class="token keyword"><span class="token keyword">for</span></span> tomcat <span class="token number"><span class="token number">9</span></span> <span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
        <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>dependency<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
            <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>groupId<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>javax<span class="token punctuation"><span class="token punctuation">.</span></span>servlet<span class="token punctuation"><span class="token punctuation">.</span></span>jsp<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>groupId<span class="token operator"><span class="token operator">&gt;</span></span>
            <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>artifactId<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>javax<span class="token punctuation"><span class="token punctuation">.</span></span>servlet<span class="token punctuation"><span class="token punctuation">.</span></span>jsp<span class="token operator"><span class="token operator">-</span></span>api<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>artifactId<span class="token operator"><span class="token operator">&gt;</span></span>
            <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>version<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token number"><span class="token number">2.3</span></span><span class="token number"><span class="token number">.1</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>version<span class="token operator"><span class="token operator">&gt;</span></span>
            <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>scope<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>provided<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>scope<span class="token operator"><span class="token operator">&gt;</span></span>
        <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>dependency<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>dependencies<span class="token operator"><span class="token operator">&gt;</span></span>

<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>project<span class="token operator"><span class="token operator">&gt;</span></span></code></pre>
<h3>Робимо з наших сервлетів справжні сервлети</h3>Наразі пара створених нами сервлетів насправді є звичайними класами. Вони не мають ніякої функціональності. Але тепер ми підключабо до нашого проекту Servlet API, а, раз так, ми можемо використовувати класи звідти. Щоб зробити наші сервлети справжніми сервлетами, досить просто успадкувати їх від класу <strong>HttpServlet</strong> . 
<h2>Мапінг або розмітка</h2>Тепер було б непогано розповісти Tomcat, щоб запити з адресаи <strong>/add</strong> оброблялися нашим сервлетом <strong>AddServlet</strong> , і, відповідно, запити за адресаою <strong>/list</strong> оброблялися сервлетом <strong>ListServlet</strong> . <strong><em>Саме цей процес і називається мапінгом (розміткою)</em></strong> . Робиться це у файлі <strong>web.xml</strong> за таким принципом: 
<ul>
 <li>спочатку описуємо сервлет (даємо якесь ім'я та вказуємо шлях до самого класу);</li>
 <li>Потім прив'язуємо цей сервлет до конкретної адресаи (вказуємо ім'я сервлета, яке ми йому тільки-но дали і вказуємо адресау, запити з якої варто надсилати на цей сервлет).</li>
</ul>Описуємо сервлет: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>servlet<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>servlet<span class="token operator"><span class="token operator">-</span></span>name<span class="token operator"><span class="token operator">&gt;</span></span>add<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>servlet<span class="token operator"><span class="token operator">-</span></span>name<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>servlet<span class="token operator"><span class="token operator">-</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token operator"><span class="token operator">&gt;</span></span><span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">app<span class="token punctuation"><span class="token punctuation">.</span></span>servlets<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>AddServlet</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>servlet<span class="token operator"><span class="token operator">-</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>servlet<span class="token operator"><span class="token operator">&gt;</span></span></code></pre> Тепер прив'язуємо його на адресау: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token operator"><span class="token operator">&lt;</span></span>servlet<span class="token operator"><span class="token operator">-</span></span>mapping<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>servlet<span class="token operator"><span class="token operator">-</span></span>name<span class="token operator"><span class="token operator">&gt;</span></span>add<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>servlet<span class="token operator"><span class="token operator">-</span></span>name<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>url<span class="token operator"><span class="token operator">-</span></span>pattern<span class="token operator"><span class="token operator">&gt;</span></span><span class="token operator"><span class="token operator">/</span></span>add<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>url<span class="token operator"><span class="token operator">-</span></span>pattern<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>servlet<span class="token operator"><span class="token operator">-</span></span>mapping<span class="token operator"><span class="token operator">&gt;</span></span></code></pre> Як бачимо, <strong>servlet-name</strong> в обох випадках однакове. Завдяки цьому Tomcat знає, що якщо надійшов запит на адресау <strong>/add</strong> , його потрібно передати в сервлет <strong>app.servlets.AddServlet</strong> . З другим сервлет проробляємо те ж саме. У результаті наш <strong>web.xml</strong> має приблизно такий зміст: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">?</span></span>xml version<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"1.0"</span></span> encoding<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"UTF-8"</span></span><span class="token operator"><span class="token operator">?</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span>web<span class="token operator"><span class="token operator">-</span></span>app xmlns<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span>
         xmlns<span class="token operator"><span class="token operator">:</span></span>xsi<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"http://www.w3.org/2001/XMLSchema-instance"</span></span>
         xsi<span class="token operator"><span class="token operator">:</span></span>schemaLocation<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"</span></span>
         version<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"3.1"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>

    <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">!</span></span><span class="token operator"><span class="token operator">--</span></span> add servlet <span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>servlet<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
        <span class="token operator"><span class="token operator">&lt;</span></span>servlet<span class="token operator"><span class="token operator">-</span></span>name<span class="token operator"><span class="token operator">&gt;</span></span>add<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>servlet<span class="token operator"><span class="token operator">-</span></span>name<span class="token operator"><span class="token operator">&gt;</span></span>
        <span class="token operator"><span class="token operator">&lt;</span></span>servlet<span class="token operator"><span class="token operator">-</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token operator"><span class="token operator">&gt;</span></span><span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">app<span class="token punctuation"><span class="token punctuation">.</span></span>servlets<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>AddServlet</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>servlet<span class="token operator"><span class="token operator">-</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>servlet<span class="token operator"><span class="token operator">&gt;</span></span>

    <span class="token operator"><span class="token operator">&lt;</span></span>servlet<span class="token operator"><span class="token operator">-</span></span>mapping<span class="token operator"><span class="token operator">&gt;</span></span>
        <span class="token operator"><span class="token operator">&lt;</span></span>servlet<span class="token operator"><span class="token operator">-</span></span>name<span class="token operator"><span class="token operator">&gt;</span></span>add<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>servlet<span class="token operator"><span class="token operator">-</span></span>name<span class="token operator"><span class="token operator">&gt;</span></span>
        <span class="token operator"><span class="token operator">&lt;</span></span>url<span class="token operator"><span class="token operator">-</span></span>pattern<span class="token operator"><span class="token operator">&gt;</span></span><span class="token operator"><span class="token operator">/</span></span>add<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>url<span class="token operator"><span class="token operator">-</span></span>pattern<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>servlet<span class="token operator"><span class="token operator">-</span></span>mapping<span class="token operator"><span class="token operator">&gt;</span></span>

    <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">!</span></span><span class="token operator"><span class="token operator">--</span></span> list servlet <span class="token operator"><span class="token operator">--</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>servlet<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
        <span class="token operator"><span class="token operator">&lt;</span></span>servlet<span class="token operator"><span class="token operator">-</span></span>name<span class="token operator"><span class="token operator">&gt;</span></span>list<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>servlet<span class="token operator"><span class="token operator">-</span></span>name<span class="token operator"><span class="token operator">&gt;</span></span>
        <span class="token operator"><span class="token operator">&lt;</span></span>servlet<span class="token operator"><span class="token operator">-</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token operator"><span class="token operator">&gt;</span></span><span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">app<span class="token punctuation"><span class="token punctuation">.</span></span>servlets<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>ListServlet</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>servlet<span class="token operator"><span class="token operator">-</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>servlet<span class="token operator"><span class="token operator">&gt;</span></span>

    <span class="token operator"><span class="token operator">&lt;</span></span>servlet<span class="token operator"><span class="token operator">-</span></span>mapping<span class="token operator"><span class="token operator">&gt;</span></span>
        <span class="token operator"><span class="token operator">&lt;</span></span>servlet<span class="token operator"><span class="token operator">-</span></span>name<span class="token operator"><span class="token operator">&gt;</span></span>list<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>servlet<span class="token operator"><span class="token operator">-</span></span>name<span class="token operator"><span class="token operator">&gt;</span></span>
        <span class="token operator"><span class="token operator">&lt;</span></span>url<span class="token operator"><span class="token operator">-</span></span>pattern<span class="token operator"><span class="token operator">&gt;</span></span><span class="token operator"><span class="token operator">/</span></span>list<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>url<span class="token operator"><span class="token operator">-</span></span>pattern<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>servlet<span class="token operator"><span class="token operator">-</span></span>mapping<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>web<span class="token operator"><span class="token operator">-</span></span>app<span class="token operator"><span class="token operator">&gt;</span></span></code></pre> До речі, ми не створабо розмітку для головної сторінки (за адресаою <strong>/</strong> ). Справа в тому, що в цьому випадку він нам і не потрібний. Наша головна сторінка – простий <strong>html-файл</strong> , який просто відображає дві кнопки. Там немає динамічного контенту, тому нам немає сенсу заводити під нього окремий сервлет, на який будуть передаватися запити з адресаи <strong>/</strong> , і який нічого не робитиме, крім передачі виконання на якусь <strong>jsp</strong> (яку теж довелося б завести), яка й малювала б нам дві кнопки. Нам це не потрібно, нас влаштовує статичний ресурс. Tomcat коли отримає запит, перевірить, що немає жодного сервлета, який зміг би обробити запит на таку адресау, а потім побачить що на цій адресаі власне лежить вже готовий<strong>html-файл</strong> , який він успішно і віддасть. Можемо запустити нашу програму знову (перезапустити сервер або задеплоїти повторно, як вам більше хочеться) і переконатися, що головна сторінка малюється, нічого не зламалося, коли натискаємо на кнопки — то переходи відбуваються, але поки що теж пишеться помилка. До речі, якщо до цього у нас була помилка 404, то тепер 405. Значить мапінг спрацював, сервлети знайшлися, але тільки не знайшлося в них потрібних способів щоб обробити запит. Якщо у вас на цьому етапі все одно 404я помилка, хоча все зроблено правильно - можливо вам варто поправити конфігурацію деплою в ідеї. для цього треба зайти в Edit configurations (там угорі біля кнопки запуску), там перейти у правій частині вікна на вкладку Deployment і зробити так, щоб у Application context було вказано просто / 
<h3>Короткий ліричний відступ: що відбувається під капотом?</h3>Ви, напевно, вже встигли задуматися, яким чином наша програма працює у Tomcat? Що там взагалі відбувається? І де метод <strong>main()</strong> ? Як тільки ви вбиваєте в браузері <strong>localhost:8080</strong> і переходите на цю адресау, браузер відправляє на цю адресау запит за протоколом <strong>http</strong> . Сподіваюся, ви вже знаєте, що запити можуть бути різних «типів», найпопулярніші — <strong>GET</strong> і <strong>POST</strong> . На кожен запит має бути відповідь. <strong>GET-запит</strong> очікує, що у відповідь йому віддадуть готовий <strong>html-код</strong> , який повернеться в браузер, а браузер вже цей код красиво замінить на будь-які літери, кнопочки, формочки. <strong>POST-запит</strong>трохи цікавіше, оскільки він із собою ще несе інформацію. Наприклад, у формі реєстрації або авторизації користувача ви ввели свої дані та натиснули «надіслати». У цей момент на сервер відправився<strong> POST-запит</strong> із власною інформацією всередині. Сервер цю інформацію прийняв, обробив і повернув якусь відповідь (наприклад, <strong>html-сторінку</strong> з вашим профілем). Принципова відмінність між ними в тому, що <strong>GET-запити</strong> призначені лише для отримання даних із сервера, а <strong>POST-запити</strong>що не вміє обробляти такий тип, Tomcat кидає клієнту у відповідь код 405. Що і сталося тільки-но у нас. Але якщо знайшовся і підходящий сервлет, і він має підходящий метод, Tomcat створює об'єкт цього сервлета, запускає їх у новому треді (<strong>thread</strong> ), що дозволяє сервлет працювати в окремому потоці, а Tomcat продовжує працювати і далі у своєму, приймати і відправляти запити. Крім того, Tomcat створює ще два об'єкти: один типу <strong>HttpServletRequest</strong> (коротко я його називатиму далі запитом), а другий — типу <strong>HttpServletResponse</strong>(Зватиму відповіддю). У перший об'єкт вона поміщає всі дані, що прийшли у запиті від клієнта, таким чином з цього об'єкта всі ці дані можна буде витягнути. Ну і після всього цього передає ці два об'єкти в відповідний метод того сервлета, який запущений в окремому потоці. Як тільки сервлет закінчить роботу і в нього буде готова відповідь, яку треба відправити клієнту, він піднімає прапор Tomcat'у, мовляв, «я закінчив, все готове». Tomcat приймає відповідь і надсилає її клієнту. Це дозволяє Tomcat не відволікаючись приймати запити та надсилати відповіді, а всю роботу роблять сервлети, які крутяться в окремих потоках. Відповідно, коли ми пишемо код сервлета, ми визначаємо ту роботу, яка виконуватиметься. І так, можете вважати, що метод <strong>main()</strong>знаходиться в самому Tomcat (так, він написаний на Java), і коли ми запускаємо Tomcat, запускається метод <code class=" language-none">main()</code>. 
<div class="email-subscription">
 <iframe frameborder="0" src="https://secure.esputnik.com.ua/4Q0Ef6d2SOs" width="100%" height="200" scrolling="no" data-savepage-key="0-2"></iframe>
</div>
<h3>Ловимо сервлетами GET-методи та відправляємо найпростіші відповіді</h3>В даний момент у наших сервлетах немає відповідних методів (GET), тому Tomcat нам повертає помилку 405. Зробимо їх! У класі <strong>HttpServlet</strong> , від якого ми успадкували наші сервлети, визначено різні методи. Для того, щоб задати якийсь код для методів, ми їх просто випереджаємо. У разі нам треба перевизначити метод <strong>doGet()</strong> в обох сервлетах. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
<span class="token keyword"><span class="token keyword">protected</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">doGet</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">HttpServletRequest</span></span> req<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">HttpServletResponse</span></span> resp<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">throws</span></span> <span class="token class-name"><span class="token class-name">ServletException</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">IOException</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Як бачимо, цей метод приймає два об'єкти: <strong>req</strong> (запит) та <strong>resp</strong> (відповідь). Це ті самі об'єкти, які створить та наповнить нам Tomcat, коли викличе відповідний метод у цьому сервлеті. Спочатку давайте зробимо найпростіші відповіді. Для цього візьмемо об'єкт <strong>resp</strong> і отримаємо з нього об'єкт <strong>PrintWriter</strong> -а, яким можна складати відповіді. Ну і за допомогою нього виведемо якийсь простий рядок. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
<span class="token keyword"><span class="token keyword">protected</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">doGet</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">HttpServletRequest</span></span> req<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">HttpServletResponse</span></span> resp<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">throws</span></span> <span class="token class-name"><span class="token class-name">ServletException</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">IOException</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token class-name"><span class="token class-name">PrintWriter</span></span> writer <span class="token operator"><span class="token operator">=</span></span> resp<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getWriter</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    writer<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Method GET from AddServlet"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Щось подібне зробимо і в сервлеті <strong>ListServlet</strong> , після чого запустимо наш сервер знову. Як бачимо, все працює! При натисканні на кнопки відкриваються сторінки з тим текстом, який ми записали <strong>PrintWriter-</strong> ом. Ось тільки ті наші <strong>jsp</strong> , які ми підготували для формування сторінок з відповідями, ніяк не використовуються. Це тому, що виконання до них просто не доходить. Сервелет сам у нас зараз формує відповідь і закінчує роботу, сигналізуючи Tomcat, що у нього готова відповідь клієнту. Tomcat просто бере цю відповідь і відправляє її назад клієнту. Передаємо управління з сервлетів в <strong>jsp</strong> Змінимо код наших методів таким чином: 
<ul>
 <li>отримуємо з об'єкта запиту об'єкт диспетчера запитів, куди передаємо адресау <strong>jsp</strong> сторінки, якою хочемо передати управління;</li>
 <li>використовуючи отриманий об'єкт - передаємо управління у вказану <strong>jsp</strong> сторінку, і не забуваємо вкласти туди ті об'єкти запиту та відповіді, які ми отримали від Tomcat.</li>
</ul>
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
<span class="token keyword"><span class="token keyword">protected</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">doGet</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">HttpServletRequest</span></span> req<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">HttpServletResponse</span></span> resp<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">throws</span></span> <span class="token class-name"><span class="token class-name">ServletException</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">IOException</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token class-name"><span class="token class-name">RequestDispatcher</span></span> requestDispatcher <span class="token operator"><span class="token operator">=</span></span> req<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getRequestDispatcher</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"views/add.jsp"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    requestDispatcher<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">forward</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>req<span class="token punctuation"><span class="token punctuation">,</span></span> resp<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> У тілі <strong>jsp-сторінок</strong> (всередині тега body) можна щось написати, щоб ми могли чітко бачити, яка сторінка відображається. Після цього перезапускаємо сервер та перевіряємо. Кнопочки на головній сторінці натискаються, сторінки відкриваються, а значить, запити в сервлети передаються, після чого керування передається в jsp сторінки, які вже і малюються. На цьому все. У <a href="https://codegym.cc/groups/posts/356-sozdanie-prostogo-veb-prilozhenija-na-servletakh-i-jsp-chastjh-2" target="_blank" rel="nofollow">наступній частині</a> статті ми займемося функціональністю нашої програми. 
<p>Що ще почитати:</p>
<p><a href="https://codegym.cc/groups/posts/305-sozdanie-prosteyshego-web-proekta-v-intellij-idea-enterprise-edition-poshagovo-s-kartinkami" target="_blank" rel="nofollow">Створення найпростішого веб-проекту в IntelliJ Idea Enterprise. Покроково, з картинками</a></p>
<br><a href="https://codegym.cc/groups/posts/147-moy-chat-" target="_blank" rel="nofollow">Мій чат</a>