Що таке Mapstruct і як правильно налаштувати його для модульного тестування у SpringBoot додатках
<p>----------------------------------------</p>
Всім привіт, мої дорогі друзі та читачі! Перед тим, як писатимемо статтю, трохи передісторії… Нещодавно зіткнувся з однією проблемою в роботі з бібліотекою , яку швидко описав у своєму телеграм-каналі . У коментарях проблему до запису виріш
<p>----------------------------------------</p>
<h2>Передісторія</h2>Всім привіт, мої дорогі друзі та читачі! Перед тим, як писатимемо статтю, трохи передісторії… Нещодавно зіткнувся з однією проблемою в роботі з бібліотекою <a href="https://github.com/mapstruct" rel="nofollow" target="_blank">Mapstruct</a> , яку швидко описав у своєму телеграм-каналі <a href="https://t.me/romankh3/88" rel="nofollow" target="_blank">тут</a> . У коментарях проблему до запису вирішабо, у цьому допоміг мій колега за минулим проектом. <img data-max-width="800" data-id="7e40f4d6-eb67-4d3f-a79a-82d98e37e979" alt="Що таке Mapstruct і як правильно налаштувати його для модульного тестування у SpringBoot додатках.  Частина 1 - 1" src="https://cdn.javarush.com/images/article/7e40f4d6-eb67-4d3f-a79a-82d98e37e979/800.jpeg" style="width: 800px;">Після цього я вирішив написати на цю тему статтю, але ми звичайно ж не будемо вузько дивитися і постараємося спочатку увійти в курс справи, зрозуміти, що таке Mapstruct і навіщо він потрібен, і вже на реальному прикладі розберемо ситуацію, що виникла, і як її вирішити. Тому рекомендую зробити всі викладки паралельно читання статті, щоб відчути все на практиці. <span class="text-bold"><em>Перед початком – підпишись на <a href="https://t.me/romankh3" rel="nofollow" target="_blank">мій телеграм-канал</a>я там збираю свою діяльність, пишу думки про розробку на Java і IT в цілому. </em></span> Підписався? Чудово! Ну, що ж, тепер поїхали! 
<h2>Mapstruct, чаво?</h2><span class="text-bold"><em>A code generator for fast type-safe bean mappings. </em></span> Перше наше завдання – розібратися, що таке Mapstruct і навіщо він нам. Загалом і загалом можна почитати про нього на офіційному сайті. На головній сторінці сайту написано три відповіді на запитання: що це таке? навіщо? як? Постараємось і ми так зробити: 
<h2>Що це таке?</h2>Mapstruct - це бібліотека, яка допомагає зіставляти (маппит, в цілому, так завжди і кажуть: маппит, замапит і т.д.) об'єкти однієї сутності в об'єкти іншої сутності за допомогою згенерованого коду на основі конфігурацій, що описуються через інтерфейси. 
<h2>Навіщо?</h2>Здебільшого ми розробляємо багатошарові програми (шар роботи з базою, шар бізнес логіки, шар взаємодії програми із зовнішнім світом) і кожен шар має свої об'єкти для зберігання та обробки даних. І ці дані потрібно передавати із шару в шар шляхом переведення з однієї сутності до іншої. Для тих, хто не працював із таким підходом, це може здатися дещо складним. Наприклад, ми маємо сутність до бази даних Student. Коли дані цієї сутності переходять у шар бізнес-логіки (сервісів), нам потрібно перевести дані із класу Student до класу StudentModel. Далі, після всіх маніпуляцій з бізнес-логікою, дані потрібно видати назовні. І для цього ми маємо клас StudentDto. Зрозуміло, нам потрібно передати дані з класу StudentModel до StudentDto. Писати руками щоразу методи, які переноситимуть, трудомістко. Плюс це зайвий код кодової бази, який потрібно підтримувати. Можна припуститися помилки. А Mapstruct такі методи генерує на етапі компіляції та зберігає у generated-sources. 
<h2>Як?</h2>За допомогою анотацій. Нам необхідно просто створити інструкцію, в якій буде головна інструкція Mapper, яка скаже бібліотеці, що методи в цьому інтерфейсі можна використовувати для перекладу з одних об'єктів в інші. Як я сказав раніше про студентів, у нашому випадку це буде інтерфейс StudentMapper, в якому будуть кілька методів перегонки даних з одного шару в інший: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>
   <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token class-name">String</span> firstName<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token class-name">String</span> lastName<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentDTO</span> <span class="token punctuation">{</span>
   <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token class-name">String</span> firstName<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token class-name">String</span> lastName<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentModel</span> <span class="token punctuation">{</span>
   <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token class-name">String</span> firstName<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token class-name">String</span> lastName<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre> Для цих класів створюємо маппер (тут і далі так ми називатимемо інтерфейс, який описує що ми хочемо перевести і куди): 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token annotation punctuation">@Mapper</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentMapper</span> <span class="token punctuation">{</span>
   <span class="token class-name">StudentModel</span> <span class="token function">toModel</span><span class="token punctuation">(</span><span class="token class-name">StudentDTO</span> dto<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">Student</span> <span class="token function">toEntity</span><span class="token punctuation">(</span><span class="token class-name">StudentModel</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">StudentModel</span> <span class="token function">toModel</span><span class="token punctuation">(</span><span class="token class-name">Student</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">StudentDTO</span> <span class="token function">toDto</span><span class="token punctuation">(</span><span class="token class-name">StudentModel</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre> Краса цього підходу в тому, що якщо в різних класах імена та тип полів збігаються (як у нашому випадку), то налаштувань для Mapstruct вистачить, щоб на підставі інтерфейсу StudentMapper на етапі компіляції згенерувати потрібну реалізацію, яка перекладатиме. Так стало зрозуміліше, так? Підемо далі, і на реальному прикладі розберемо роботу в Spring Boot додатку. 
<h2>Приклад роботи Spring Boot та Mapstruct</h2>Перше, що нам потрібно, це створити Spring Boot проект і додати до нього Mapstruct. Для цієї справи я маю <a href="https://github.com/template-repository/springboot-template-repository" rel="nofollow" target="_blank">організацію в GitHub</a> з шаблонами для репозиторіїв і старт для Spring Boot один з них. На його основі створюємо новий проект: <img data-max-width="800" data-id="07385967-ec66-4c22-86c0-fadfddb5ab5d" alt="Що таке Mapstruct і як правильно налаштувати його для модульного тестування у SpringBoot додатках.  Частина 1 - 2" src="https://cdn.javarush.com/images/article/07385967-ec66-4c22-86c0-fadfddb5ab5d/800.jpeg" style="width: 800px;">Далі отримаємо <a href="https://github.com/romankh3/spring-boot-mapstruct-example" rel="nofollow" target="_blank">проект</a> . <em>Так, друзі, ставте <a href="https://github.com/romankh3/spring-boot-mapstruct-example" rel="nofollow" target="_blank">зірку проекту</a> , якщо знайшли його корисним, то я знатиму, що роблю це не дарма. </em> У цьому проекті розкриємо ситуацію, яку я отримав на роботі та описав у <a href="https://t.me/romankh3/88" rel="nofollow" target="_blank">пості у себе в телеграм-каналі</a>. Коротко змалюю ситуацію для тих, хто не в темі: коли пишемо тести на мапери (тобто на ті реалізації інтерфейсів, про які ми говорабо раніше) хочеться, щоб тести проходабо якнайшвидше. Найпростіший варіант з маперами - це під час запуску тесту використовувати анотацію SpringBootTest, яка підніме весь ApplicationContext Spring Boot програми та ін'єктує потрібний для тесту мапер всередину тесту. Але цей варіант ресурсомісткий і займає значно більше часу, тому він не підходить. Нам потрібно писати модульний (unit) тест, який просто створив потрібний маппер і перевірив, що його методи працюють саме так, як ми очікуємо. Навіщо потрібно, щоб швидше йшли тести? Якщо тести проходять довго, це уповільнює весь процес розробки. Поки тести не пройдуть на новому коді, цей код не можна вважати вірним і його не візьмуть у тестування, а отже, його не візьмуть у продакшн і означає, що роботу розробник не виконав. Здавалося б, навіщо писати тест на бібліотеку, робота якої не підлягає сумніву? І все ж писати тест потрібно, тому що ми тестуємо те, наскільки правильно описали маппер і чи робить він те, що ми очікуємо. Насамперед, щоб полегшити нам роботу, додамо Lombok в наш проект, шляхом додавання ще однієї залежності в pom.xml: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
   <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>projectlombok<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
   <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>lombok<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
   <span class="token generics"><span class="token punctuation">&lt;</span>scope<span class="token punctuation">&gt;</span></span>provided<span class="token operator">&lt;</span><span class="token operator">/</span>scope<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span></code></pre> У нашому проекті нам потрібно буде перевести з model класів (які використовуються для роботи з бізнес-логікою) до класів DTO, які використовуємо для комунікації із зовнішнім світом. У нашому спрощеному варіанті ми будемо припускати, що поля не змінюються і наші мапери будуть простими. Але якщо буде бажання, можна буде написати більш розгорнуту статтю про те, як працювати з Mapstruct, як його налаштовувати, як користуватися його перевагами. Але потім, оскільки ця стаття вийде чималенькою. Припустимо, у нас є студент зі списком лекцій та лекторів, які він відвідує. Створимо пакет <span class="text-bold">model</span> . На основі цього створимо просту модель: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>dto</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentDTO</span> <span class="token punctuation">{</span>

   <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

   <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

   <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureDTO</span><span class="token punctuation">&gt;</span></span> lectures<span class="token punctuation">;</span>

   <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LecturerDTO</span><span class="token punctuation">&gt;</span></span> lecturers<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre> його лекції 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>dto</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LectureDTO</span> <span class="token punctuation">{</span>

   <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

   <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre> та лектори 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>dto</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LecturerDTO</span> <span class="token punctuation">{</span>

   <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

   <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre> І створимо пакет <span class="text-bold">dto</span> поруч із пакетом <span class="text-bold">model</span> : 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>dto</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentDTO</span> <span class="token punctuation">{</span>

   <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

   <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

   <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureDTO</span><span class="token punctuation">&gt;</span></span> lectures<span class="token punctuation">;</span>

   <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LecturerDTO</span><span class="token punctuation">&gt;</span></span> lecturers<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre> лекції 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>dto</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LectureDTO</span> <span class="token punctuation">{</span>

   <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

   <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre> та лектори 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>dto</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LecturerDTO</span> <span class="token punctuation">{</span>

   <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

   <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre> Тепер створимо маппер, який перекладатиме колекцію моделей лекцій до колекції DTO лекцій. Перше, що потрібно зробити – це додати Mapstruct у проект. Для цього скористаємося їх <a href="https://mapstruct.org/documentation/installation/" rel="nofollow" target="_blank">офіційним сайтом</a> , там все описано. Тобто нам потрібно додати одну залежність і плагін до нашого пам'ятника (якщо є питання про те, що таке пам'ятник, — ось, будь ласка, <a href="https://codegym.cc/groups/posts/3119-java-proekt-ot-a-do-ja-vse-chto-vih-khoteli-znatjh-o-maven" target="_blank">Стаття1</a> та <a href="https://codegym.cc/groups/posts/3120-java-proekt-ot-a-do-ja-vse-chto-vih-khoteli-znatjh-o-maven-chastjh-2" target="_blank">Стаття2</a> ): 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
   <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>mapstruct<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
   <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>mapstruct<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
   <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.4</span><span class="token number">.2</span><span class="token punctuation">.</span>Final<span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span></code></pre> і в пам'ятнику блоку &lt;build/&gt;. якого в нас ще не було: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token generics"><span class="token punctuation">&lt;</span>build<span class="token punctuation">&gt;</span></span>
   <span class="token generics"><span class="token punctuation">&lt;</span>plugins<span class="token punctuation">&gt;</span></span>
       <span class="token generics"><span class="token punctuation">&lt;</span>plugin<span class="token punctuation">&gt;</span></span>
           <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>maven<span class="token punctuation">.</span>plugins<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
           <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>maven<span class="token operator">-</span>compiler<span class="token operator">-</span>plugin<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
           <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">3.5</span><span class="token number">.1</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
           <span class="token generics"><span class="token punctuation">&lt;</span>configuration<span class="token punctuation">&gt;</span></span>
               <span class="token generics"><span class="token punctuation">&lt;</span>source<span class="token punctuation">&gt;</span></span><span class="token number">1.8</span><span class="token operator">&lt;</span><span class="token operator">/</span>source<span class="token operator">&gt;</span>
               <span class="token generics"><span class="token punctuation">&lt;</span>target<span class="token punctuation">&gt;</span></span><span class="token number">1.8</span><span class="token operator">&lt;</span><span class="token operator">/</span>target<span class="token operator">&gt;</span>
               <span class="token generics"><span class="token punctuation">&lt;</span>annotationProcessorPaths<span class="token punctuation">&gt;</span></span>
                   <span class="token generics"><span class="token punctuation">&lt;</span>path<span class="token punctuation">&gt;</span></span>
                       <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>mapstruct<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
                       <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>mapstruct<span class="token operator">-</span>processor<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
                       <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.4</span><span class="token number">.2</span><span class="token punctuation">.</span>Final<span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
                   <span class="token operator">&lt;</span><span class="token operator">/</span>path<span class="token operator">&gt;</span>
               <span class="token operator">&lt;</span><span class="token operator">/</span>annotationProcessorPaths<span class="token operator">&gt;</span>
           <span class="token operator">&lt;</span><span class="token operator">/</span>configuration<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span><span class="token operator">/</span>plugin<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>plugins<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>build<span class="token operator">&gt;</span></code></pre> Далі створимо пакет <span class="text-bold">mapper</span> поряд з <span class="text-bold">dto</span> та <span class="text-bold">model</span> . На основі тих класів, що ми показали раніше, потрібно буде створити ще п'ять маперів:
<ul>
 <li>Мапер LectureModel &lt;-&gt; LectureDTO</li>
 <li>Мапер List&lt;LectureModel&gt; &lt;-&gt; List&lt;LectureDTO&gt;</li>
 <li>Мапер LecturerModel &lt;-&gt; LecturerDTO</li>
 <li>Мапер List&lt;LecturerModel&gt; &lt;-&gt; List&lt;LecturerDTO&gt;</li>
 <li>Мапер StudentModel &lt;-&gt; StudentDTO</li>
</ul>Поїхали: 
<h4>LectureMapper</h4>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">LectureDTO</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">LecturerDTO</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">LectureModel</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>mapstruct<span class="token punctuation">.</span></span><span class="token class-name">Mapper</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Mapper</span><span class="token punctuation">(</span>componentModel <span class="token operator">=</span> <span class="token string">"spring"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">LectureMapper</span> <span class="token punctuation">{</span>
   <span class="token class-name">LectureDTO</span> <span class="token function">toDTO</span><span class="token punctuation">(</span><span class="token class-name">LectureModel</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token class-name">LectureModel</span> <span class="token function">toModel</span><span class="token punctuation">(</span><span class="token class-name">LecturerDTO</span> dto<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<h4>LectureListMapper</h4>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">LectureDTO</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">LectureDTO</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">LectureModel</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>mapstruct<span class="token punctuation">.</span></span><span class="token class-name">Mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Mapper</span><span class="token punctuation">(</span>componentModel <span class="token operator">=</span> <span class="token string">"spring"</span><span class="token punctuation">,</span> <span class="token keyword">uses</span> <span class="token operator">=</span> <span class="token class-name">LectureMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">LectureListMapper</span> <span class="token punctuation">{</span>
   <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureModel</span><span class="token punctuation">&gt;</span></span> <span class="token function">toModelList</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureDTO</span><span class="token punctuation">&gt;</span></span> dtos<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureDTO</span><span class="token punctuation">&gt;</span></span> <span class="token function">toDTOList</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureModel</span><span class="token punctuation">&gt;</span></span> models<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<h4>LecturerMapper</h4>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">LectureDTO</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">LectureModel</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>mapstruct<span class="token punctuation">.</span></span><span class="token class-name">Mapper</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Mapper</span><span class="token punctuation">(</span>componentModel <span class="token operator">=</span> <span class="token string">"spring"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">LectureMapper</span> <span class="token punctuation">{</span>
   <span class="token class-name">LectureDTO</span> <span class="token function">toDTO</span><span class="token punctuation">(</span><span class="token class-name">LectureModel</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token class-name">LectureModel</span> <span class="token function">toModel</span><span class="token punctuation">(</span><span class="token class-name">LectureDTO</span> dto<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<h4>LecturerListMapper</h4>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">LecturerDTO</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">LecturerModel</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>mapstruct<span class="token punctuation">.</span></span><span class="token class-name">Mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Mapper</span><span class="token punctuation">(</span>componentModel <span class="token operator">=</span> <span class="token string">"spring"</span><span class="token punctuation">,</span> <span class="token keyword">uses</span> <span class="token operator">=</span> <span class="token class-name">LecturerMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">LecturerListMapper</span> <span class="token punctuation">{</span>
   <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LecturerModel</span><span class="token punctuation">&gt;</span></span> <span class="token function">toModelList</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LecturerDTO</span><span class="token punctuation">&gt;</span></span> dloList<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LecturerDTO</span><span class="token punctuation">&gt;</span></span> <span class="token function">toDTOList</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LecturerModel</span><span class="token punctuation">&gt;</span></span> modelList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<h4>StudentMapper</h4>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">StudentDTO</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">StudentModel</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>mapstruct<span class="token punctuation">.</span></span><span class="token class-name">Mapper</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Mapper</span><span class="token punctuation">(</span>componentModel <span class="token operator">=</span> <span class="token string">"spring"</span><span class="token punctuation">,</span> <span class="token keyword">uses</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">LectureListMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">LecturerListMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentMapper</span> <span class="token punctuation">{</span>
   <span class="token class-name">StudentDTO</span> <span class="token function">toDTO</span><span class="token punctuation">(</span><span class="token class-name">StudentModel</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">StudentModel</span> <span class="token function">toModel</span><span class="token punctuation">(</span><span class="token class-name">StudentDTO</span> dto<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre> Потрібно окремо відзначити, що в Мапер ми посилаємося на інші Мапер. Робиться це за допомогою поля <span class="text-bold">uses</span> в анотації Mapper, як це зроблено в StudentMapper: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class=" language-java"><span class="token annotation punctuation">@Mapper</span><span class="token punctuation">(</span>componentModel <span class="token operator">=</span> <span class="token string">"spring"</span><span class="token punctuation">,</span> <span class="token keyword">uses</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">LectureListMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">LecturerListMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre> Тут ми використовуємо два маппери, щоб правильно замапити список лекцій та список лекторів. Тепер потрібно скомпілювати наш код та подивитися, що там і як. Зробити це можна за допомогою команди <span class="text-bold">mvn clean compile</span> . Але, як виявилося, при створенні реалізацій для Mapstruct наших маперів реалізації маперів не перезаписували поля. Чому? Виявилося, що не вдалося підхопити інструкцію Data від Lombok. І щось треба було робити… Тож у нас у статті з'явився новий розділ. 
<h2>Зв'язуємо Lombok та Mapstruct</h2>Після декількох хвабон пошуку, з'ясувалося, що потрібно певним чином з'єднати Lombok та Mapstruct. У документації Mapstruct є <a href="https://mapstruct.org/faq/#Can-I-use-MapStruct-together-with-Project-Lombok" rel="nofollow" target="_blank">інформація про це</a> . Після дослідження прикладу, який запропонували розробники з Mapstruct, оновимо наш pom.xml: Додамо окремо версії: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class=" language-java">​​<span class="token generics"><span class="token punctuation">&lt;</span>properties<span class="token punctuation">&gt;</span></span>
   <span class="token generics"><span class="token punctuation">&lt;</span>org<span class="token punctuation">.</span>mapstruct<span class="token punctuation">.</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.4</span><span class="token number">.2</span><span class="token punctuation">.</span>Final<span class="token operator">&lt;</span><span class="token operator">/</span>org<span class="token punctuation">.</span>mapstruct<span class="token punctuation">.</span>version<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>lombok<span class="token operator">-</span>mapstruct<span class="token operator">-</span>binding<span class="token punctuation">.</span>version<span class="token operator">&gt;</span><span class="token number">0.2</span><span class="token number">.0</span><span class="token operator">&lt;</span><span class="token operator">/</span>lombok<span class="token operator">-</span>mapstruct<span class="token operator">-</span>binding<span class="token punctuation">.</span>version<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>properties<span class="token operator">&gt;</span></code></pre> Додамо недостатню залежність: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
   <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>projectlombok<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
   <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>lombok<span class="token operator">-</span>mapstruct<span class="token operator">-</span>binding<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
   <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span>$<span class="token punctuation">{</span>lombok<span class="token operator">-</span>mapstruct<span class="token operator">-</span>binding<span class="token punctuation">.</span>version<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span></code></pre> І оновимо наш компайлер-плагін, щоб він таки зміг поєднати Lombok та Mapstruct: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token generics"><span class="token punctuation">&lt;</span>plugin<span class="token punctuation">&gt;</span></span>
   <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>maven<span class="token punctuation">.</span>plugins<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
   <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>maven<span class="token operator">-</span>compiler<span class="token operator">-</span>plugin<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
   <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">3.5</span><span class="token number">.1</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
   <span class="token generics"><span class="token punctuation">&lt;</span>configuration<span class="token punctuation">&gt;</span></span>
       <span class="token generics"><span class="token punctuation">&lt;</span>source<span class="token punctuation">&gt;</span></span><span class="token number">1.8</span><span class="token operator">&lt;</span><span class="token operator">/</span>source<span class="token operator">&gt;</span>
       <span class="token generics"><span class="token punctuation">&lt;</span>target<span class="token punctuation">&gt;</span></span><span class="token number">1.8</span><span class="token operator">&lt;</span><span class="token operator">/</span>target<span class="token operator">&gt;</span>
       <span class="token generics"><span class="token punctuation">&lt;</span>annotationProcessorPaths<span class="token punctuation">&gt;</span></span>
           <span class="token generics"><span class="token punctuation">&lt;</span>path<span class="token punctuation">&gt;</span></span>
               <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>mapstruct<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
               <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>mapstruct<span class="token operator">-</span>processor<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
               <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span>$<span class="token punctuation">{</span>org<span class="token punctuation">.</span>mapstruct<span class="token punctuation">.</span>version<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
           <span class="token operator">&lt;</span><span class="token operator">/</span>path<span class="token operator">&gt;</span>
           <span class="token generics"><span class="token punctuation">&lt;</span>path<span class="token punctuation">&gt;</span></span>
               <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>projectlombok<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
               <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>lombok<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
               <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span>$<span class="token punctuation">{</span>lombok<span class="token punctuation">.</span>version<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
           <span class="token operator">&lt;</span><span class="token operator">/</span>path<span class="token operator">&gt;</span>
           <span class="token generics"><span class="token punctuation">&lt;</span>path<span class="token punctuation">&gt;</span></span>
               <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>projectlombok<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
               <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>lombok<span class="token operator">-</span>mapstruct<span class="token operator">-</span>binding<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
               <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span>$<span class="token punctuation">{</span>lombok<span class="token operator">-</span>mapstruct<span class="token operator">-</span>binding<span class="token punctuation">.</span>version<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
           <span class="token operator">&lt;</span><span class="token operator">/</span>path<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span><span class="token operator">/</span>annotationProcessorPaths<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>configuration<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>plugin<span class="token operator">&gt;</span></code></pre> Після цього має все вийти. Ще раз скомпілюємо наш проект. Але ж де шукати класи, які згенерував Mapstruct? Вони лежать у generated-sources: <span class="text-bold">${projectDir}/target/generated-sources/annotations/</span> <img data-max-width="800" data-id="4de513a9-4011-488f-9e4b-64252fcbd2b5" alt="Що таке Mapstruct і як правильно налаштувати його для модульного тестування у SpringBoot додатках.  Частина 1 - 3" src="https://cdn.javarush.com/images/article/4de513a9-4011-488f-9e4b-64252fcbd2b5/800.jpeg" style="width: 800px;"> Тепер, коли ми підготувалися до того, щоб усвідомити моє розчарування з посту про Mapstruct, спробуємо створити тести на мапери. 
<h2>Пишемо тести на наші мапери</h2>Я створимо швидкий і простий тест, який протестував би один з маперів у разі, коли ми створюємо інтеграційний тест і не морочимося про час його проходження: 
<h4>LectureMapperTest</h4>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">LectureDTO</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">LectureModel</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Assertions</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SpringBootTest</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">LectureMapperTest</span> <span class="token punctuation">{</span>

   <span class="token annotation punctuation">@Autowired</span>
   <span class="token keyword">private</span> <span class="token class-name">LectureMapper</span> mapperUnderTest<span class="token punctuation">;</span>

   <span class="token annotation punctuation">@Test</span>
   <span class="token keyword">void</span> <span class="token function">shouldProperlyMapModelToDto</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">//given</span>
       <span class="token class-name">LectureModel</span> model <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LectureModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       model<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">11L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       model<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"lecture name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token comment">//when</span>
       <span class="token class-name">LectureDTO</span> dto <span class="token operator">=</span> mapperUnderTest<span class="token punctuation">.</span><span class="token function">toDTO</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token comment">//then</span>
       <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertNotNull</span><span class="token punctuation">(</span>dto<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span>model<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dto<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span>model<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dto<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token annotation punctuation">@Test</span>
   <span class="token keyword">void</span> <span class="token function">shouldProperlyMapDtoToModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">//given</span>
       <span class="token class-name">LectureDTO</span> dto <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LectureDTO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       dto<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">11L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       dto<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"lecture name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token comment">//when</span>
       <span class="token class-name">LectureModel</span> model <span class="token operator">=</span> mapperUnderTest<span class="token punctuation">.</span><span class="token function">toModel</span><span class="token punctuation">(</span>dto<span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token comment">//then</span>
       <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertNotNull</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span>dto<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> model<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span>dto<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> model<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> Тут анотацією SpringBootTest ми запускаємо весь applicationContext і вже з нього за допомогою анотації Autowired отримуємо необхідний клас для тестування. З точки зору швидкості та легкості написання тесту – це дуже добре. Тест успішно проходить, все гаразд. Але ми підемо іншою дорогою і напишемо модульний тест на маппер, наприклад, на LectureListMapper. 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">LectureDTO</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">LectureModel</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Assertions</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collections</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">LectureListMapperTest</span> <span class="token punctuation">{</span>

   <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">LectureListMapper</span> lectureListMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LectureListMapperImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token annotation punctuation">@Test</span>
   <span class="token keyword">void</span> <span class="token function">shouldProperlyMapListDtosToListModels</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">//given</span>
       <span class="token class-name">LectureDTO</span> dto <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LectureDTO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       dto<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">12L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       dto<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"I'm BATMAN!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureDTO</span><span class="token punctuation">&gt;</span></span> dtos <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonList</span><span class="token punctuation">(</span>dto<span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token comment">//when</span>
       <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureModel</span><span class="token punctuation">&gt;</span></span> models <span class="token operator">=</span> lectureListMapper<span class="token punctuation">.</span><span class="token function">toModelList</span><span class="token punctuation">(</span>dtos<span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token comment">//then</span>
       <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertNotNull</span><span class="token punctuation">(</span>models<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> models<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span>dto<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> models<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span>dto<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> models<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> Так як реалізації, які генерує Mapstruct лежать в одному класпасі, що і наш проект, ми спокійно можемо використовувати їх у наших тестах. Виглядає все чудово - ніяких анотацій, створюємо найпростішим способом клас, що нам потрібний і все. Але коли ми запустимо тест, то зрозуміємо, що він впаде і в консолі буде NullPointerException… Все тому, що реалізація мапера LectureListMapper має вигляд: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">LectureDTO</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">LectureModel</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Generated</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Generated</span><span class="token punctuation">(</span>
   value <span class="token operator">=</span> <span class="token string">"org.mapstruct.ap.MappingProcessor"</span><span class="token punctuation">,</span>
   date <span class="token operator">=</span> <span class="token string">"2021-12-09T21:46:12+0300"</span><span class="token punctuation">,</span>
   comments <span class="token operator">=</span> <span class="token string">"version: 1.4.2.Final, compiler: javac, environment: Java 15.0.2 (N/A)"</span>
<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LectureListMapperImpl</span> <span class="token keyword">implements</span> <span class="token class-name">LectureListMapper</span> <span class="token punctuation">{</span>

   <span class="token annotation punctuation">@Autowired</span>
   <span class="token keyword">private</span> <span class="token class-name">LectureMapper</span> lectureMapper<span class="token punctuation">;</span>

   <span class="token annotation punctuation">@Override</span>
   <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureModel</span><span class="token punctuation">&gt;</span></span> <span class="token function">toModelList</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureDTO</span><span class="token punctuation">&gt;</span></span> dtos<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span> dtos <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>

       <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureModel</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureModel</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span> dtos<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token class-name">LectureDTO</span> lectureDTO <span class="token operator">:</span> dtos <span class="token punctuation">)</span> <span class="token punctuation">{</span>
           list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> lectureMapper<span class="token punctuation">.</span><span class="token function">toModel</span><span class="token punctuation">(</span> lectureDTO <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>

       <span class="token keyword">return</span> list<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token annotation punctuation">@Override</span>
   <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureDTO</span><span class="token punctuation">&gt;</span></span> <span class="token function">toDTOList</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureModel</span><span class="token punctuation">&gt;</span></span> models<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span> models <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>

       <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureDTO</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureDTO</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span> models<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token class-name">LectureModel</span> lectureModel <span class="token operator">:</span> models <span class="token punctuation">)</span> <span class="token punctuation">{</span>
           list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> lectureMapper<span class="token punctuation">.</span><span class="token function">toDTO</span><span class="token punctuation">(</span> lectureModel <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>

       <span class="token keyword">return</span> list<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> Якщо ми подивимося, то NPE (скорочення від NullPointerException), ми отримуємо саме від змінної <span class="code">lectureMapper</span>, яка виявляється не ініціалізована. Але в нас у реалізації немає і конструктора, за допомогою якого ми могли б ініціалізувати змінну. Тут якраз закопано причину, чому Mapstruct реалізував маппер саме так! У Spring можна декількома способами додавати бины в класи, можна ін'єктувати через поле разом із анотацією Autowired, як зроблено вище, і можна ін'єктувати через конструктор. У такій проблемній ситуації я опинився на роботі, коли потрібно оптимізувати час виконання тестів. Я думав, що зробити з цим нічого не можна і вабов свій біль на своєму телеграм-каналі. І тут мені у коментарях допомогли, сказали, що є можливість налаштувати стратегію ін'єктування. В інтерфейсі Mapper є поле <span class="text-bold">injectionStrategy</span> , яке якраз і приймає інам <span class="code">InjectionStrategy</span>у якого два значення: <span class="text-bold">FIELD</span> та <span class="text-bold">CONSTRUCTOR</span> . Тепер, знаючи про це, додамо в наші мапери це налаштування, покажу на прикладі <span class="code">LectureListMapper</span> : 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token annotation punctuation">@Mapper</span><span class="token punctuation">(</span>componentModel <span class="token operator">=</span> <span class="token string">"spring"</span><span class="token punctuation">,</span> <span class="token keyword">uses</span> <span class="token operator">=</span> <span class="token class-name">LectureMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> injectionStrategy <span class="token operator">=</span> <span class="token class-name">InjectionStrategy</span><span class="token punctuation">.</span>CONSTRUCTOR<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">LectureListMapper</span> <span class="token punctuation">{</span>
   <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureModel</span><span class="token punctuation">&gt;</span></span> <span class="token function">toModelList</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureDTO</span><span class="token punctuation">&gt;</span></span> dtos<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureDTO</span><span class="token punctuation">&gt;</span></span> <span class="token function">toDTOList</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureModel</span><span class="token punctuation">&gt;</span></span> models<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre> Виділив жирним частину, що додав. Додамо цю опцію для всіх інших і перекомпілюємо проект, щоб згенерувалися мапери вже з новим рядком. Коли це здійснимо, подивимося як змінилася реалізація мапера для <span class="code">LectureListMapper</span> (виділив жирним ту частину, що нам потрібна): 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">LectureDTO</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">LectureModel</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Generated</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Generated</span><span class="token punctuation">(</span>
   value <span class="token operator">=</span> <span class="token string">"org.mapstruct.ap.MappingProcessor"</span><span class="token punctuation">,</span>
   date <span class="token operator">=</span> <span class="token string">"2021-12-09T22:25:37+0300"</span><span class="token punctuation">,</span>
   comments <span class="token operator">=</span> <span class="token string">"version: 1.4.2.Final, compiler: javac, environment: Java 15.0.2 (N/A)"</span>
<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LectureListMapperImpl</span> <span class="token keyword">implements</span> <span class="token class-name">LectureListMapper</span> <span class="token punctuation">{</span>

   <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">LectureMapper</span> lectureMapper<span class="token punctuation">;</span>

   <span class="token annotation punctuation">@Autowired</span>
   <span class="token keyword">public</span> <span class="token class-name">LectureListMapperImpl</span><span class="token punctuation">(</span><span class="token class-name">LectureMapper</span> lectureMapper<span class="token punctuation">)</span> <span class="token punctuation">{</span>

       <span class="token keyword">this</span><span class="token punctuation">.</span>lectureMapper <span class="token operator">=</span> lectureMapper<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token annotation punctuation">@Override</span>
   <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureModel</span><span class="token punctuation">&gt;</span></span> <span class="token function">toModelList</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureDTO</span><span class="token punctuation">&gt;</span></span> dtos<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span> dtos <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>

       <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureModel</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureModel</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span> dtos<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token class-name">LectureDTO</span> lectureDTO <span class="token operator">:</span> dtos <span class="token punctuation">)</span> <span class="token punctuation">{</span>
           list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> lectureMapper<span class="token punctuation">.</span><span class="token function">toModel</span><span class="token punctuation">(</span> lectureDTO <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>

       <span class="token keyword">return</span> list<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token annotation punctuation">@Override</span>
   <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureDTO</span><span class="token punctuation">&gt;</span></span> <span class="token function">toDTOList</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureModel</span><span class="token punctuation">&gt;</span></span> models<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span> models <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>

       <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureDTO</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureDTO</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span> models<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token class-name">LectureModel</span> lectureModel <span class="token operator">:</span> models <span class="token punctuation">)</span> <span class="token punctuation">{</span>
           list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> lectureMapper<span class="token punctuation">.</span><span class="token function">toDTO</span><span class="token punctuation">(</span> lectureModel <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>

       <span class="token keyword">return</span> list<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> І тепер Mapstruct реалізував ін'єктування маппера через конструктор. Власне, чого ми і домагалися. Тепер наш тест перестане компілюватися, оновимо його та отримаємо: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">LectureDTO</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>romankh3<span class="token punctuation">.</span>templaterepository<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">LectureModel</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Assertions</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collections</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">LectureListMapperTest</span> <span class="token punctuation">{</span>

   <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">LectureListMapper</span> lectureListMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LectureListMapperImpl</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LectureMapperImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token annotation punctuation">@Test</span>
   <span class="token keyword">void</span> <span class="token function">shouldProperlyMapListDtosToListModels</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">//given</span>
       <span class="token class-name">LectureDTO</span> dto <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LectureDTO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       dto<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">12L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       dto<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"I'm BATMAN!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureDTO</span><span class="token punctuation">&gt;</span></span> dtos <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonList</span><span class="token punctuation">(</span>dto<span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token comment">//when</span>
       <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LectureModel</span><span class="token punctuation">&gt;</span></span> models <span class="token operator">=</span> lectureListMapper<span class="token punctuation">.</span><span class="token function">toModelList</span><span class="token punctuation">(</span>dtos<span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token comment">//then</span>
       <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertNotNull</span><span class="token punctuation">(</span>models<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> models<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span>dto<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> models<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span>dto<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> models<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> Тепер, якщо ми запустимо тест, то все спрацює так, як належить, тому що в LectureListMapperImpl ми передаємо необхідний йому LectureMapper… Перемога! Вам не складно, а мені приємно: <span class="text-bold"><em>Друзі, як завжди, підписуйтесь на мій <a href="http://github.com/romankh3" rel="nofollow" target="_blank">гітхаб-аккаунт</a> , на <a href="http://t.me/romankh3" rel="nofollow" target="_blank">телеграм-аккаунт</a> . Там я викладаю результат своєї діяльності, є реально корисні речі) Особливо запрошую вступити до групи <a href="https://t.me/romankh3_chat" rel="nofollow" target="_blank">обговорень телеграм-каналу</a> . Так склалося, що якщо хтось має технічне питання, там можна отримати відповідь. Такий формат цікавий для всіх, можна почитати хто що вміє і набратися досвіду.</em></span>
<h2>Висновок</h2>У рамках цієї статті ми познайомабося з таким потрібним продуктом, що часто використовується як Mapstruct. Розібрали, що це, навіщо і як. На реальному прикладі помацали, що можна робити і як можна міняти. Також розібрали як налаштувати ін'єктування бінів через конструктор, щоб була можливість нормально проводити тестування маперів. Колеги з Mapstruct надали користувачам їхнього продукту вибирати яким саме способом ін'єктувати маппери, за що їм, безперечно, дякую. АЛЕ, незважаючи на те, що Spring рекомендує ін'єктувати бін через конструктор, хлопці з Mapstruct поставабо за умовчанням ін'єктування через поле. Чому так? Нема відповіді. Я підозрюю, що можуть бути причини, про які ми просто не знаємо, і тому вони так зробабо. І щоб дізнатися про них, я створив <a href="https://github.com/mapstruct/mapstruct/issues/2672" rel="nofollow" target="_blank">GitHub issue</a>в їхньому офіційному репозиторії продукту. 
<div class="table-container">
 <table>
  <tbody>
   <tr>
    <th>Корисні посилання:</th>
   </tr>
   <tr>
    <td>
     <ul>
      <li><a href="http://mapstruct.org/" rel="nofollow" target="_blank">Офіційний сайт Mapstruct</a></li>
      <li><a href="https://github.com/template-repository/springboot-template-repository" rel="nofollow" target="_blank">Шаблон для створення SpringBoot додатків</a></li>
      <li><a href="https://github.com/mapstruct/mapstruct/issues/2672" rel="nofollow" target="_blank">Питання до розробників Mapstruct</a></li>
      <li><a href="https://mapstruct.org/documentation/installation/" rel="nofollow" target="_blank">Як додати Mapstruct у проект</a></li>
      <li><a href="https://mapstruct.org/faq/#Can-I-use-MapStruct-together-with-Project-Lombok" rel="nofollow" target="_blank">Як зв'язати Lombok та Mapstruct</a></li>
     </ul></td>
   </tr>
  </tbody>
 </table>
</div><a href="https://codegym.cc/login/signup" target="_blank"><img id="click_banner5_articles" data-max-width="1080" data-id="e3a73d74-4ef7-4b79-9d28-063aeded07bc" alt="Що таке Mapstruct і як правильно налаштувати його для модульного тестування у SpringBoot додатках.  Частина 1 - 4" src="https://cdn.javarush.com/images/article/e3a73d74-4ef7-4b79-9d28-063aeded07bc/1080.jpeg" style="width: 1080px;"></a>