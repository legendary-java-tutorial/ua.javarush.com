Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 1)
<p>----------------------------------------</p>
Добридень. У цій статті я хотів би поділитися своїм першим знайомством з такими речами як Maven, Spring, Hibernate, MySQL та Tomcat у процесі створення простого CRUD програми. Це перша частина з чотирьох. іншими незнайомими словами. Знайомс
<p>----------------------------------------</p>
Добридень. У цій статті я хотів би поділитися своїм першим знайомством з такими речами як Maven, Spring, Hibernate, MySQL та Tomcat у процесі створення простого CRUD програми. Це перша частина з чотирьох. іншими незнайомими словами. <img data-id="0caeb7d5-9b00-4c3e-be38-347ec1793208" data-max-width="850" alt="Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 1) - 1" src="https://cdn.javarush.com/images/article/0caeb7d5-9b00-4c3e-be38-347ec1793208/800.jpeg" style="width: 850px;">
<h3>Зміст:</h3>
<ul>
 <li><a href="https://codegym.cc/groups/posts/2253#%D0%92%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5" rel="nofollow">Вступ</a></li>
 <li><a href="https://codegym.cc/groups/posts/2253#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B0" rel="nofollow">Створення проекту</a></li>
 <li><a href="https://codegym.cc/groups/posts/2253#%D0%9F%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-Spring-MVC" rel="nofollow">Підключення Spring MVC</a></li>
 <li><a href="https://codegym.cc/groups/posts/2253#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86-%D0%B8-%D0%BA%D0%BE%D0%BD%D1%82%D1%80%D0%BE%D0%BB%D0%BB%D0%B5%D1%80%D0%B0" rel="nofollow">Створення сторінок та контролера</a></li>
 <li><a href="https://codegym.cc/groups/posts/2253#%D0%9A%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D1%8F" rel="nofollow">Конфігурація</a></li>
 <li><a href="https://codegym.cc/groups/posts/2253#%D0%9C%D0%BE%D0%B4%D0%B5%D0%BB%D1%8C" rel="nofollow">Модель</a></li>
 <li><a href="https://codegym.cc/groups/posts/2253#Model-View-Controller" rel="nofollow">Model-View-Controller</a></li>
</ul>
<h2 id="Введение">Вступ</h2>Знайомство з новими для мене технологіями та фреймворками я починав з вивчення різних прикладів, в яких вони використовувалися, тому що зазвичай я найкраще щось розумію, коли бачу роботу на прикладі повноцінної програми. Зазвичай як такі приклади виступають<strong> CRUD</strong> -додатки ( <strong>C</strong> reate, <strong>R</strong> ead, <strong>U</strong> pdate, <strong>D</strong>elete), в інтернеті повно таких прикладів різного ступеня складності. Проблема в тому, що там зазвичай не докладно пояснюють як, що і навіщо там зроблено, чому додано таку залежність, чому потрібен саме такий клас і т.д. Найчастіше беруть вже повністю готовий додаток, з підсумковим POM файлом, з кінцевими варіантами класів і просто пробігають по кожному, не загострюючи уваги на дрібницях, які для досвідченої людини, напевно, здаються очевидними. Я багато таких прикладів розібрав і зазвичай начебто і зрозуміло, як там усе працює, але як до цього дійшли не зовсім ясно. Тому я вирішив буде не зайвим такий приклад не з позиції досвідченого розробника, а з позиції новачка, який жодного разу не мав справу зі Spring, Hibernate та іншими речами. 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="00848041-84c5-4b7c-be7d-d52950aec902" data-max-width="431" alt="Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 1) - 2" src="https://cdn.javarush.com/images/article/00848041-84c5-4b7c-be7d-d52950aec902/256.jpeg" style="width: 431px;">
 </div>
</div>Я постараюся якомога докладніше (наскільки дозволить мені моє розуміння) описати весь свій шлях створення програми CRUD, починаючи з чогось найпростішого рівня Hello World. Насамперед я це роблю для себе, бо коли щось намагаєшся описати, розповісти, пояснити, воно й у своїй голові набагато краще засвоюється і впорядковується. Але якщо комусь це буде корисно і допоможе з чимось розібратися буду дуже радий. У цьому прикладі спробуємо створити простий CRUD додаток з використанням <strong>Maven</strong> , <strong>Tomcat</strong> , <strong>Spring</strong> , <strong>Hibernate</strong> та <strong>MySQL</strong> . Попередні кроки, такі як установка <strong>Maven</strong> , <strong>MySQL</strong> , використання <strong>Ultimate</strong>версії ідеї та ін. думаю немає потреби докладно розписувати, із цим проблем виникнути не повинно. Варто зазначити, що в цьому прикладі налаштування конфігурації відбуватиметься за допомогою джаву класів (що називається JavaConfig) без використання xml. 
<h2 id="створення-проекта">Створення проекту</h2>Отже, оскільки я новенький, то використати якихось незрозумілих архетипів не будемо. Spring initializr так і зовсім поки що звучить надто страшно. Тому створимо звичайнісінький простий Maven проект. У мене немає доменного імені, так що в groupid напишу просто <code class=" language-none">testgroup</code>, а artifactid напишу назву, ну наприклад, <code class=" language-none">filmography</code>(це буде список фільмів). Створюємо проект та обираємо<code class=" language-none">Enable auto-import</code>коли ідея це запропонує. Завдяки цьому щоразу, коли ми будемо вносити будь-які зміни до POM файлу (Project Object Model, у цьому файлі описується вся структура Maven проекту) все відразу автоматично будемо застосовуватися до проекту. Бібліотеки будуть братися з нашого локального репозиторію, якщо вони вже є у нас, або якщо будемо використовувати якісь нові залежності, з якими раніше справ не мали, то Maven просто скачає їх через інтернет з центрального репозиторію. Ще у Maven є функція завантажувати вихідні коди та документацію (Download Sources and/or Documentation). Теж дуже зручно, якщо щось не зрозуміло з якимось класом чи методом, можна зайти у вихідні джерела та подивитися, як воно там все всередині влаштоване. Додамо пару деталей. Це буде веб-додаток, і ми будемо використовувати <strong>Tomcat</strong>. Для розгортання (deploy) програми Tomcat потрібно передати його туди у вигляді war архіву (Web Application Resource, спеціальний формат для веб-додатків). Для цього додамо в POM файл такий рядок, щоб програма збиралася в war архів: 
<pre class="inline-block  language-java" tabindex="0"><code class="  language-java"><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>packaging<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>war<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>packaging<span class="token operator"><span class="token operator">&gt;</span></span></code></pre> Ну і ще знадобиться спеціальна директорія для веб-вихідників, у нашому випадку там лежатимуть <strong>jsp</strong> сторінки, якісь веб-ресурси. Створимо в <code class=" language-none">main</code>директорію <code class=" language-none">webapp</code>. Вона повинна називатися саме так і знаходитися саме в <code class=" language-none">main</code>, так само як <code class=" language-none">java</code>і <code class=" language-none">resources</code>, тому що це стандартна структура каталогів Maven. Коли ми встановабо упаковку <code class=" language-none">war</code>і тим самим визначабо, що це веб-проект, директорія<code class=" language-none">webapp</code>буде автоматично позначена як Web application sources (на ній буде блакитна точка) і все, що стосується веб, шукатиметься у цій папці. І ще один момент. За замовчуванням Maven використовує версію мови 1.5, але я хочу використовувати, наприклад, версію 1.8 - Java 8 (Можна і 10 взяти, або 11, але все одно ніякі фішки звідти використовувати не планується, так що нехай буде 8). Вирішується це дуже просто, пишемо в гугле щось на зразок "Maven java 8" і дивимося, що потрібно додати в POM файл, щоб Maven компілював наші класи для потрібної версії. У результаті маємо таке: <img data-id="0fdea46a-ef86-426f-8b52-4777a3987605" data-max-width="850" alt="Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 1) - 3" src="https://cdn.javarush.com/images/article/0fdea46a-ef86-426f-8b52-4777a3987605/800.jpeg" style="width: 850px;">
<h2 id="Подключение-Spring-MVC">Підключення Spring MVC</h2>Потрібно з чогось розпочати. За планом ми будемо підключати базу даних, використовувати Hibernate, але це все поки що звучить якось надто страшно. Потрібно спершу зайнятися чимось простим. Spring MVC, це вже краще, з MVC патерном вже давно знайомі, він використовувався в половині великих завдань курсу. Звідси й почнемо танцювати. Для створення веб-додатку зі Spring MVC нам також знадобиться Servlet-API, тобто. та штука, за допомогою якої відбуватиметься взаємодія запит-відповідь. Спробуймо підключити це. Заходимо в гугл, шукаємо потрібні залежності в <a href="https://mvnrepository.com/" target="_blank" rel="nofollow">репозиторії Maven</a> і додаємо в <code class=" language-none">pom.xml</code>. <img data-id="7337bd9c-7fec-4697-a312-dc44cda36052" data-max-width="850" alt="Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 1) - 4" src="https://cdn.javarush.com/images/article/7337bd9c-7fec-4697-a312-dc44cda36052/800.jpeg" style="width: 850px;">У розділі External Libraries видно, що підвантажилася не тільки <em>spring-webmvc</em> , але й купа чогось ще. Тобто. нам не потрібно додатково підключати залежності для <em>spring core</em>, <em>context</em> , <em>beans</em> і т.д. які нам знадобляться, все необхідне підтягнулося саме разом зі <em>spring-webmvc</em> . 
<div class="table-container">
 <table class="table table--striped">
  <tbody>
   <tr>
    <td>
     <p>Потрібно зробити невелике застереження. Зазвичай рекомендується все одно окремо додавати залежність для кожної бібліотеки, що використовується, навіть якщо вони і так йдуть в комплекті з вже доданими, т.к. це може допомогти уникнути деяких проблем та глюків.</p>
     <p>Простий приклад. Допустимо ми додали залежність, яка використовує якесь API, і заразом вона підтягне для цього API якусь реалізацію. А потім ми додали іншу залежність, яка використовує те саме API і теж підтягує для цього якусь його реалізацію, але вже іншу. Таким чином у нас буде 2 різні реалізації одного і того ж API. І якщо ми самі захочемо десь використовувати якісь методи цього API, тоді й виникне проблема, адже система не знатиме, яку саме реалізацію потрібно використовувати, вона вибере випадково, можливо, не ту, на яку ми очікували. А якщо явно вказати залежність для однієї з реалізацій, пріоритет буде відданий саме їй.</p>
     <p>Однак це не така сувора рекомендація, це стосується переважно великих проектів, де використовується безліч різних бібліотек від різних компаній. Тут ми так робити не будемо, щоб не завантажувати занадто сильно POM файл, якихось проблем не передбачається. Але все ж варто мати це на увазі.</p>
     <p></p></td>
   </tr>
  </tbody>
 </table>
</div>Ще одне зауваження. Що означає <code class=" language-none">provided</code>в залежності <code class=" language-none">javax.servlet-api</code>. <strong>Scope</strong> — це область дії залежності, <code class=" language-none">provided</code>що залежність буде доступна на етапі компіляції та тестування програми, але в архів вона поміщена не буде. Справа в тому, що для розгортання (deploy) програми ми використовуватимемо контейнер сервлетів, Tomcat, а в нього всередині вже є такі бібліотеки, тому немає потреби передавати їх туди і обтяжувати архів зайвим вантажем. Забігаючи вперед, з тієї ж причини ми обійдемося без звичного методу <code class=" language-none">main</code>, тому що він уже є всередині Tomcat. 
<h2 id="створення-страниц-и-контроллера">Створення сторінок та контролера</h2>Спробуємо тепер приготувати щось простеньке. Спочатку створимо <code class=" language-none">webapp</code>додаткову директорію, наприклад <code class=" language-none">pages</code>, у якій зберігатимуться наші уявлення (view), тобто. jsp-сторінки і створимо пару сторінок. Нам знадобиться сторінка, на якій у майбутньому буде відображатися список фільмів, припустимо <code class=" language-none">films.jsp</code>, і ще, мабуть, можна зробити окрему сторінку для редагування, хай це буде <code class=" language-none">editPage.jsp</code>. Поки нічим серйозним їх не заповнюватимемо, просто для проби зробимо на одній сторінці посилання на іншу. <img data-id="893b3d7c-f355-418b-b064-750bbcea7744" data-max-width="850" alt="" src="https://cdn.javarush.com/images/article/893b3d7c-f355-418b-b064-750bbcea7744/800.jpeg" style="width: 850px;">Тепер потрібен клас, який оброблятиме запити, тобто. контролер. Додамо новий пакет <code class=" language-none">controller</code>та створимо в ньому клас<code class=" language-none">FilmController</code>(Взагалі не обов'язково розфасовувати все по різних пакетах, ця програма буде дуже маленька і проста, але в нормальному проекті може бути багато контролерів, класів конфігурації, моделей і т.д., тому навіть починаючи з маленьких проектів краще відразу звикати робити все впорядковано і структуровано, щоб не було каші). У цьому класі створимо методи, які повертатимуть наші уявлення у відповідь на запити. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">testgroup<span class="token punctuation"><span class="token punctuation">.</span></span>filmography<span class="token punctuation"><span class="token punctuation">.</span></span>controller</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>stereotype<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Controller</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>web<span class="token punctuation"><span class="token punctuation">.</span></span>bind<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">RequestMapping</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>web<span class="token punctuation"><span class="token punctuation">.</span></span>bind<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">RequestMethod</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>web<span class="token punctuation"><span class="token punctuation">.</span></span>servlet<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">ModelAndView</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token annotation punctuation"><span class="token annotation punctuation">@Controller</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">FilmController</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@RequestMapping</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>value <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"/"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> method <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">RequestMethod</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>GET<span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">ModelAndView</span></span> <span class="token function"><span class="token function">allFilms</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">ModelAndView</span></span> modelAndView <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ModelAndView</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        modelAndView<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setViewName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"films"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> modelAndView<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@RequestMapping</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>value <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"/edit"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> method <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">RequestMethod</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>GET<span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">ModelAndView</span></span> <span class="token function"><span class="token function">editPage</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">ModelAndView</span></span> modelAndView <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ModelAndView</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        modelAndView<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setViewName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"editPage"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> modelAndView<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Що тут до чого? У Spring MVC є така штука, як <code class=" language-none">DispatcherServlet</code>. Це як би головний контролер, всі запити проходять через нього і він вже далі передає їх конкретному контролеру. Інструкція <code class=" language-none">@Controller</code>саме і повідомляє Spring MVC, що цей клас є контролером (ну логічно загалом-то), диспетчер перевірятиме інструкції <code class=" language-none">@RequestMapping</code>щоб викликати відповідний спосіб. Анотація <code class=" language-none">@RequestMapping</code>дозволяє задати адресаи методам контролера, якими вони будуть доступні у клієнті (браузер). Її можна застосовувати також і до класу контролера, щоб задати, так би мовити, кореневу адресау для всіх методів. Для методу <code class=" language-none">allFilms()</code>параметр <code class=" language-none">value</code>" <code class=" language-none">/</code>", тому він буде викликаний відразу, коли в браузері буде набрано комбінацію <em>http://host:port/</em> (тобто за замовчуванням це<em>http://localhost:8080/</em> або <em>http://127.0.0.1:8080/</em> ). Параметр <code class=" language-none">method</code>вказує на тип запиту підтримується (GET, POST, PUT і т.д.). Оскільки тут ми тільки отримуємо дані, то використовується GET. Пізніше, коли з'являться методи для додавання та редагування, там вже будуть POST запити. (До речі замість інструкції <code class=" language-none">@RequestMapping</code>із зазначенням методу, можна використовувати інструкції <code class=" language-none">@GetMapping</code>, <code class=" language-none">@PostMapping</code>і т.д. <code class=" language-none">@GetMapping</code>еквівалентно <code class=" language-none">@RequestMapping(method = RequestMethod.GET</code>)). У наших методах створюємо об'єкт <code class=" language-none">ModelAndView</code>та встановлюємо ім'я уявлення, яке потрібно повернути. 
<h2 id="Конфигурация">Конфігурація</h2>Перейдемо до конфігурації. Створимо в пакеті <code class=" language-none">config</code>клас <code class=" language-none">WebConfig</code>. У ньому буде тільки один метод, що повертає об'єкт типу <code class=" language-none">ViewResolver</code>, це такий інтерфейс, необхідний для знаходження подання на ім'я. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">testgroup<span class="token punctuation"><span class="token punctuation">.</span></span>filmography<span class="token punctuation"><span class="token punctuation">.</span></span>config</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>context<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Bean</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>context<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">ComponentScan</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>context<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Configuration</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>web<span class="token punctuation"><span class="token punctuation">.</span></span>servlet<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">ViewResolver</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>web<span class="token punctuation"><span class="token punctuation">.</span></span>servlet<span class="token punctuation"><span class="token punctuation">.</span></span>config<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">EnableWebMvc</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>web<span class="token punctuation"><span class="token punctuation">.</span></span>servlet<span class="token punctuation"><span class="token punctuation">.</span></span>view<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">InternalResourceViewResolver</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token annotation punctuation"><span class="token annotation punctuation">@Configuration</span></span>
<span class="token annotation punctuation"><span class="token annotation punctuation">@EnableWebMvc</span></span>
<span class="token annotation punctuation"><span class="token annotation punctuation">@ComponentScan</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>basePackages <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"testgroup.filmography"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">WebConfig</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Bean</span></span>
    <span class="token class-name"><span class="token class-name">ViewResolver</span></span> <span class="token function"><span class="token function">viewResolver</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">InternalResourceViewResolver</span></span> viewResolver <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">InternalResourceViewResolver</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        viewResolver<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setPrefix</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"/pages/"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        viewResolver<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setSuffix</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">".jsp"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> viewResolver<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre><code class=" language-none">@Configuration</code>повідомляє Spring що цей клас є конфігураційним і містить визначення та залежності <code class=" language-none">bean</code>-компонентів. <strong>Біни (bean)</strong> - це об'єкти, які управляються Spring'ом. Для визначення бина використовується інструкція <code class=" language-none">@Bean</code>. <code class=" language-none">@EnableWebMvc</code>дозволяє імпортувати конфігурацію Spring MVC із класу <code class=" language-none">WebMvcConfigurationSupport</code>. Можна також реалізувати, наприклад, інтерфейс <code class=" language-none">WebMvcConfigurer</code>, у якого є ціла купа методів, і налаштувати все на свій смак, але нам нема чого поки що в це заглиблюватися, вистачить і стандартних налаштувань. <code class=" language-none">@ComponentScan</code>повідомляє Spring де шукати компоненти, якими має керувати, тобто. класи, позначені анотацією <code class=" language-none">@Component</code>або її похідними, такими як <code class=" language-none">@Controller</code>, <code class=" language-none">@Repository</code>, <code class=" language-none">@Service</code>. Ці інструкції автоматично визначають бін класу. У методі<code class=" language-none">viewResolver()</code>ми створюємо його реалізацію та визначаємо де саме шукати уявлення у <code class=" language-none">webapp</code>. Тому коли методі контролера ми встановлювали ім'я " <code class=" language-none">films</code>" уявлення знайдеться як " <code class=" language-none">/pages/films.jsp</code>" Отже, клас зміни ми, але поки що це просто якийсь окремий клас, вона сама собою і наш додаток не впливає. Нам потрібно зареєструвати цю конфігурацію у контексті Spring. Для цього потрібен клас <code class=" language-none">AbstractAnnotationConfigDispatcherServletInitializer</code>. У пакеті <code class=" language-none">config</code>створюємо його спадкоємця, допустимо <em>AppInitializer</em> і реалізуємо його методи. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">testgroup<span class="token punctuation"><span class="token punctuation">.</span></span>filmography<span class="token punctuation"><span class="token punctuation">.</span></span>config</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>web<span class="token punctuation"><span class="token punctuation">.</span></span>servlet<span class="token punctuation"><span class="token punctuation">.</span></span>support<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">AbstractAnnotationConfigDispatcherServletInitializer</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">AppInitializer</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">AbstractAnnotationConfigDispatcherServletInitializer</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">protected</span></span> <span class="token class-name"><span class="token class-name">Class</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token operator"><span class="token operator">?</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> <span class="token function"><span class="token function">getRootConfigClasses</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Class</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">]</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">protected</span></span> <span class="token class-name"><span class="token class-name">Class</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token operator"><span class="token operator">?</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> <span class="token function"><span class="token function">getServletConfigClasses</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Class</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span><span class="token punctuation"><span class="token punctuation">{</span></span><span class="token class-name"><span class="token class-name">WebConfig</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token punctuation"><span class="token punctuation">}</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">protected</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> <span class="token function"><span class="token function">getServletMappings</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span><span class="token punctuation"><span class="token punctuation">{</span></span><span class="token string"><span class="token string">"/"</span></span><span class="token punctuation"><span class="token punctuation">}</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> В останньому способі реєструються адресаи і є ще 2 способи для реєстрації класів конфігурації. Веб-конфігурації, де визначаються <code class=" language-none">ViewResolver</code>тощо, поміщаємо в <code class=" language-none">getServletConfigClasses()</code>. Про все це краще почитати в документації і різних гайдах, але в нашому випадку не обов'язково поки що в це заглиблюватися, наш у <code class=" language-none">WebConfig</code>принципі можна і <code class=" language-none">RootClasses</code>визначити, можна навіть і в обох відразу, все одно працюватиме. Ще один момент. Можливо будуть проблеми з кодуванням, коли при відправці з форми значень з російськими символами в результаті виходитимуть каракулі. Для вирішення цієї проблеми додамо фільтр, який займатиметься попередньою обробкою запитів. Заходимо до класу <em>AppInitializer</em> і перевизначаємо метод<code class=" language-none">getServletFilters</code>, в якому вкажемо потрібне кодування, вона повинна бути такою ж як і скрізь, як на сторінках і в базі даних: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">protected</span></span> <span class="token class-name"><span class="token class-name">Filter</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> <span class="token function"><span class="token function">getServletFilters</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">CharacterEncodingFilter</span></span> characterEncodingFilter <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">CharacterEncodingFilter</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        characterEncodingFilter<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setEncoding</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"UTF-8"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        characterEncodingFilter<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setForceEncoding</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token boolean"><span class="token boolean">true</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Filter</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>characterEncodingFilter<span class="token punctuation"><span class="token punctuation">}</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Ну начебто все налаштували, можна спробувати запустити та подивитися, що вийшло. <em>Run</em> -&gt; <em>Run</em> -&gt; <em>Edit Configurations</em> -&gt; <em>Add New Configuration</em> -&gt; <em>Tomcat Server</em> -&gt; <em>Local</em> Далі потрібно вибрати артефакт для розгортання. Ідея сама підкаже <em>Warning: No artifacts marked for deployment</em> . Тиснемо кнопку <em>fix</em> і вибираємо <em>...: war exploded</em> . Або можна зайти в <em>Deployment</em> -&gt; <em>add</em> -&gt; <em>Artifact</em> -&gt; <em>...: war exploded</em> . <img data-id="57eaadff-20ae-4ed5-8794-0853b0163512" data-max-width="850" alt="Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 1) - 5" src="https://cdn.javarush.com/images/article/57eaadff-20ae-4ed5-8794-0853b0163512/800.jpeg" style="width: 850px;">І ще потрібно зайти до <em>Deployment</em> та встановити у полі<em>Applecation context</em> (це буде частиною url адресаи, за якою програма буде доступна в браузері) значення " <code class=" language-none">/</code>". <img data-id="c835d547-f45b-492e-bb43-5f40574773c2" data-max-width="850" alt="Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 1) - 6" src="https://cdn.javarush.com/images/article/c835d547-f45b-492e-bb43-5f40574773c2/800.jpeg" style="width: 850px;">Тоді наш додаток буде відразу доступний за адресаою <em>http://localhost:8080/</em> (але також можна вказати там щось, ну наприклад " <code class=" language-none">/filmography</code>", і тоді просто потрібно буде додавати це до всіх адреса, тобто наприклад буде не <em>" http://localhost:8080/edit"</em> , а буде <em>"http://localhost:8080/filmography/edit"</em> ). Натискаємо <em>Run</em> і чекаємо, поки запуститься. Ось що в мене вийшло: <img data-id="1af1d654-f8f1-4400-925b-7d6f3326ab71" data-max-width="850" alt="Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 1) - 7" src="https://cdn.javarush.com/images/article/1af1d654-f8f1-4400-925b-7d6f3326ab71/800.jpeg" style="width: 850px;">Начебто все добре, але є тут один нюанс. Справа в тому, що наші сторінки зараз є загальнодоступними і доступ до них можна отримати безпосередньо, написавши шлях в адресаному рядку. Вводимо<em>http://localhost:8080/pages/films.jsp</em> і ось ми без відома контролера отримали нашу сторінку. Якось це не дуже правильно, тому ми створимо <code class=" language-none">webapp</code>спеціальну директорію <code class=" language-none">WEB-INF</code>. Те, що всередині буде приховано для публіки і отримати доступ можна буде тільки через контролер. Поміщаємо директорію з нашими уявленнями ( <code class=" language-none">pages</code>) в <code class=" language-none">WEB-INF</code>, а <code class=" language-none">ViewResolver</code>відповідно додаємо її до префіксу: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java">viewResolver<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setPrefix</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"/WEB-INF/pages/"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Тепер за адресаою <em>http://localhost:8080</em> отримуємо нашу сторінку, а якщо спробувати безпосередньо <em>http://localhost:8080/WEB-INF/pages/films.jsp,</em> то отримаємо помилку 404. Ну от, чудово, у нас вийшло найпростіше веб -Додаток, Hello World що називається. Структура проекту на даний момент виглядає так: 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="1b42e7ce-b6a0-4bc9-bad9-1b4d874cff9b" data-max-width="293" alt="Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 1) - 8" src="https://cdn.javarush.com/images/article/1b42e7ce-b6a0-4bc9-bad9-1b4d874cff9b/256.jpeg" style="width: 293px;">
 </div>
</div>
<h2 id="Модель">Модель</h2>У нас вже є уявлення та контролер, але в MVC є ще й 3-я буква, тому для повноти картини додамо ще й модель. У пакеті <code class=" language-none">model</code>створимо клас <code class=" language-none">Film</code>ну, наприклад, з такими полями: <code class=" language-none">int id</code>, <code class=" language-none">String title</code>(назва), <code class=" language-none">int year</code>(рік виходу), <code class=" language-none">String genre</code>(жанр) і <code class=" language-none">boolean watched</code>(тобто дивабося вже цей фільм чи ні). 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">testgroup<span class="token punctuation"><span class="token punctuation">.</span></span>filmography<span class="token punctuation"><span class="token punctuation">.</span></span>model</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Film</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">int</span></span> id<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> title<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">int</span></span> year<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> genre<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">boolean</span></span> watched<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token comment"><span class="token comment">// + Getters and setters</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Нічого особливого, звичайнісінький клас, приватні поля, гетери та сеттери. Об'єкти таких класів називають <code class=" language-none">POJO</code>(Plain Old Java Object), ну тобто. "Простий джава об'єкт". Спробуємо створити такий об'єкт і вивести його на сторінці. Поки не будемо особливо паритися, як його створювати, ініціалізувати. Для проби просто тупо створимо його прямо в контролері, наприклад, ось так: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">FilmController</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token class-name"><span class="token class-name">Film</span></span> film<span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token keyword"><span class="token keyword">static</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        film <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Film</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        film<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setTitle</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Inception"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        film<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setYear</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">2010</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        film<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setGenre</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"sci-fi"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        film<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setWatched</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token boolean"><span class="token boolean">true</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> І додамо цей об'єкт у наш <code class=" language-none">ModelAndView</code>за допомогою методу <code class=" language-none">addObject</code>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token annotation punctuation"><span class="token annotation punctuation">@RequestMapping</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>method <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">RequestMethod</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>GET<span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">ModelAndView</span></span> <span class="token function"><span class="token function">allFilms</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">ModelAndView</span></span> modelAndView <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ModelAndView</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        modelAndView<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setViewName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"films"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <strong>modelAndView<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">addObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"film"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> film<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></strong><span class="token punctuation"></span><span class="token punctuation"></span>
        <span class="token keyword"><span class="token keyword">return</span></span> modelAndView<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Тепер ми зможемо вивести цей об'єкт на нашій сторінці. Натомість <code class=" language-none">films.jsp</code>Hello World напишемо <code class=" language-none">${film}</code>і сюди підставиться об'єкт, якому відповідає ім'я атрибута " <code class=" language-none">film</code>". Спробуємо запустити і подивитися що вийшло (для зрозумілого виведення об'єкта у класу <code class=" language-none">Film</code>було перевизначено <code class=" language-none">toString()</code>): 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="0f14ca97-1438-4f8a-84f9-24c6b6079f55" data-max-width="385" alt="Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 1) - 9" src="https://cdn.javarush.com/images/article/0f14ca97-1438-4f8a-84f9-24c6b6079f55/256.jpeg" style="width: 385px;">
 </div>
</div>
<h2 id="Model-View-Controller">Model-View-Controller</h2>На даному етапі ми вже, начебто, маємо повноцінний Spring MVC додаток. Перш ніж рухатися далі, добре б ще раз окинути все поглядом і розібратися як воно все працює. В інтернеті з цього приводу можна знайти безліч картинок та схем, мені подобається ось ця: 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="1cd58636-db65-43f5-9dee-fb4dbe172c11" data-max-width="602" alt="Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 1) - 10" src="https://cdn.javarush.com/images/article/1cd58636-db65-43f5-9dee-fb4dbe172c11/512.jpeg" style="width: 602px;">
 </div>
</div>Коли ми пишемо в рядку браузера запит, його приймає <code class=" language-none">Dispatcher Servlet</code>, далі він знаходить для обробки цього запиту відповідний контролер за допомогою <code class=" language-none">HandlerMapping</code>(це такий інтерфейс для вибору контролера, перевіряє в якому з наявних контролерів є метод, який приймає таку адресау), викликається відповідний метод і <code class=" language-none">Controller</code>повертає інформацію про подання, потім диспетчер знаходить потрібне уявлення на ім'я за допомогою <code class=" language-none">ViewResolver</code>'а, після чого на це уявлення передаються дані моделі і на вихід ми отримуємо нашу сторінку. Якось так. <em><strong>Далі буде...</strong></em> Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 1) <a href="https://codegym.cc/groups/posts/2252-znakomstvo-s-maven-spring-mysql-hibernate-i-pervoe-crud-prilozhenie-chastjh-2" target="_blank" rel="nofollow">Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 2)</a> <a href="https://codegym.cc/groups/posts/2251-znakomstvo-s-maven-spring-mysql-hibernate-i-pervoe-crud-prilozhenie-chastjh-3" target="_blank" rel="nofollow">Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 3) </a> <a href="https://codegym.cc/groups/posts/2250-znakomstvo-s-maven-spring-mysql-hibernate-i-pervoe-crud-prilozhenie-chastjh-4" target="_blank" rel="nofollow">Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 4)</a>