Розбираємо бази даних та мову SQL. (Частина 3) - "Java-проект від А до Я"
<p>----------------------------------------</p>
Здоров'я бажаю, пані та панове, продовжуємо говорити про БД, SQL та інше. У сьогоднішньому матеріалі буде частина теорії та частина практики. Нагадаю, що ми поговорили про те, як налаштувати все, як створити БД, таблицю і отримати з неї дан
<p>----------------------------------------</p>
<em>Стаття із серії про створення Java-проекту (посилання на інші матеріали – наприкінці). Її мета — аналіз ключових технологій, результат — написання телеграм-бота.</em>
<ul>
 <li><a href="https://codegym.cc/groups/posts/2977#topic1">Перевірка домашнього завдання</a>
  <ul>
   <li><a href="https://codegym.cc/groups/posts/2977#topic2">Додаємо первинний ключ</a></li>
   <li><a href="https://codegym.cc/groups/posts/2977#topic3">Додаємо Молдову</a></li>
   <li><a href="https://codegym.cc/groups/posts/2977#topic4">Створюємо таблицю cities</a></li>
   <li><a href="https://codegym.cc/groups/posts/2977#topic5">Додаємо зовнішній ключ до cities</a></li>
   <li><a href="https://codegym.cc/groups/posts/2977#topic6">Бонусна частина. Тестування</a></li>
  </ul></li>
 <li><a href="https://codegym.cc/groups/posts/2977#topic7">Оператор SELECT</a>
  <ul>
   <li><a href="https://codegym.cc/groups/posts/2977#topic8">Параметр WHERE</a></li>
   <li><a href="https://codegym.cc/groups/posts/2977#topic9">Параметр ORDER BY</a></li>
   <li><a href="https://codegym.cc/groups/posts/2977#topic10">Параметр GROUP BY</a></li>
  </ul></li>
 <li><a href="https://codegym.cc/groups/posts/2977#topic11">Домашнє завдання</a></li>
 <li><a href="https://codegym.cc/groups/posts/2977#topic12">Висновок</a></li>
</ul><img data-max-width="800" data-id="1007352f-f38d-4a91-9299-5b13a161c005" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL.  Частина 3 - 1" src="https://cdn.javarush.com/images/article/1007352f-f38d-4a91-9299-5b13a161c005/800.jpeg" style="width: 800px;">Здоров'я бажаю, пані та панове, продовжуємо говорити про БД, SQL та інше. У сьогоднішньому матеріалі буде частина теорії та частина практики. Нагадаю, що <a href="https://codegym.cc/groups/posts/2957-java-proekt-ot-a-do-ja-razbiraem-bazih-dannihkh-i-jazihk-sql-chastjh-2" target="_blank">минулого разу</a> ми поговорабо про те, як налаштувати все, як створити БД, таблицю і отримати з неї дані. Настав час подивитися, чи вийшло щось із ДЗ. За моїми відчуттями, половину можна було зробити лише ґрунтуючись на минулій статті. Виявилося, щоб нормально зібрати додаток і зробити все більш-менш красиво, потрібно розповісти про бази даних, а щоб про них розповісти, потрібно витратити багато часу.
<h2 id="topic1">Перевірка домашнього завдання</h2><img data-max-width="512" data-id="4b1f58fd-8edf-41ad-a214-93552d63d6f9" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL.  Частина 3 - 2" src="https://cdn.javarush.com/images/article/4b1f58fd-8edf-41ad-a214-93552d63d6f9/512.jpeg" style="width: 512px;">Усім, хто успішно зробив завдання, — величезний респект. Це означає, що ви розумієте, що це потрібно тільки вам і допомагає це тільки вам. Тим, хто знехтував моє завдання, нагадаю умову:<em>
 <ol>
  <li>Потрібно додати у схему таблиці country первинний ключ (PRIMARY KEY) із поля ID.</li>
  <li>Додати до таблиці country ще одну країну – Молдову.</li>
  <li>За схемою попередньої статті створити таблицю city, де будуть всі поля, що описані. Імена полів будуть наступні: id, name, country_id, population.</li>
  <li>Додати первинний ключ у таблиці city.</li>
  <li>Додати зовнішній ключ до таблиці city.</li>
 </ol></em>Щоб почати, скористаємося першою частиною минулої статті та зайдемо до терміналу бази даних.
<h3 id="topic2">Додаємо первинний ключ</h3>Додати первинний ключ (PRIMARY KEY) можна двома способами: відразу ж після створення таблиці, і навіть після створення, використовуючи ALTER TABLE.
<h4>Первинний ключ під час створення таблиці</h4>Так як у нас вже створена таблиця, і без її видалення ми не зможемо показати цей підхід у рамках цієї бази даних, просто створимо тимчасову базу даних test, в якій все зробимо. Введемо такі команди:
<ul>
 <li>
  <p>створюємо нову базу даних:</p>
  <p><span class="text-bold">$ CREATE DATABASE test;</span></p></li>
 <li>
  <p>створюємо таблицю з додаванням первинного ключа:</p>
  <p><span class="text-bold">$ CREATE TABLE country (id INT, name VARCHAR (30), PRIMARY KEY (id));</span></p></li>
</ul>Загалом нічого складного. Після оголошення змінних додається наступна частина <span class="text-bold">PRIMARY KEY (id)</span> , де у дужках передається ім'я поля, яке буде первинним ключем. І дивимося, як змінилася схема таблиці: <span class="text-bold">$DESC country; </span><img data-max-width="512" data-id="90ed247f-fc84-42c0-b431-abd87f61aaa0" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL.  Частина 3 - 3" src="https://cdn.javarush.com/images/article/90ed247f-fc84-42c0-b431-abd87f61aaa0/512.jpeg" style="width: 512px;">Як бачимо, поле <span class="text-bold">Key</span> для запису id з'явилося значення <span class="text-bold">PRI</span> .
<h4>Первинний ключ після створення таблиці</h4>Як я вже говорив раніше, перший ключ після створення таблиці можна присвоїти за допомогою <span class="text-bold">ALTER TABLE</span> . Цей приклад ми і виконаємо в нашій базі даних <span class="text-bold">cities</span> :
<ul>
 <li>
  <p>перейдемо в нашу БД із тестової:</p>
  <p><span class="text-bold">$ USE cities;</span></p></li>
 <li>
  <p>перевіримо, що ми точно в нашій БД (там має бути ще одне поле – population). Для цього напишемо:</p>
  <p><span class="text-bold">$ DESC population;</span></p></li><l>
  <p>все правильно, таблиця наша. Напишемо таке:</p>
  <p><span class="text-bold">$ ALTER TABLE country ADD PRIMARY KEY (id);</span></p>
  <li>
   <p>і перевіримо відразу ж командою:</p><span class="text-bold">$DESC country;</span>
   <p></p></li>
 </l>
</ul><img data-max-width="512" data-id="bf26701f-eb02-42c9-9c7d-208ce7645566" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL.  Частина 3 - 4" src="https://cdn.javarush.com/images/article/bf26701f-eb02-42c9-9c7d-208ce7645566/512.jpeg" style="width: 512px;">Як видно з картинки, все правильно, значення <span class="text-bold">PRI</span> знаходиться саме там, де має бути. До речі, ми позаймалися з тестової БД. Тепер її треба видалити: навіщо нам захаращувати сервер, вірно? Для цього використовуємо вже досить відому команду: <span class="text-bold">$ DROP DATABASE test;</span><img data-max-width="512" data-id="8be43b5e-e9c5-458f-b55e-209aa7deac09" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL.  Частина 3 – 5" src="https://cdn.javarush.com/images/article/8be43b5e-e9c5-458f-b55e-209aa7deac09/512.jpeg" style="width: 512px;">
<h3 id="topic3">Додаємо Молдову</h3>Для початку потрібно визначитися, що ми записуватимемо. Наступний ID у нас буде 4. Ім'я буде Moldova, а її населення становить 3550900. Тому виконуємо вже відому нам команду INSERT INTO: <span class="text-bold">$INSERT INTO country VALUES (4, 'Moldova', 3550900); </span> І перевіряємо, чи це значення є в БД: <span class="text-bold">$ SELECT * FROM country WHERE id = 4; </span><img data-max-width="512" data-id="b5be7736-2721-4846-8436-fa183b0ee8bd" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL.  Частина 3 - 6" src="https://cdn.javarush.com/images/article/b5be7736-2721-4846-8436-fa183b0ee8bd/512.jpeg" style="width: 512px;">У запиті на отримання даних я відразу визначив, яким полем буде виконуватися пошук, тому ми отримали тільки один запис, який нам і був потрібний.
<h3 id="topic4">Створюємо таблицю cities</h3>За схемою з <a href="https://codegym.cc/groups/posts/2946-java-proekt-ot-a-do-ja-razbiraem-bazih-dannihkh-i-jazihk-sql" target="_blank">першої статті</a> про БД отримаємо потрібну інформацію про таблицю. У ній будуть такі поля:
<ul>
 <li>id – унікальний ідентифікатор;</li>
 <li>name - ім'я міста;</li>
 <li>country_id – зовнішній ключ країни;</li>
 <li>population – населення міста.</li>
</ul>Щоразу писати унікальний ID якось напружено, ви не знаходите? Хочеться віддати це на відкуп <s>владі</s> MySQL. І такий спосіб є - <span class="text-bold">AUTO INCREMENT</span> . Потрібно це додати в цифрове поле, і якщо ми не передаватимемо явно значення, MySQL сам збільшить ID на одиницю в порівнянні з попереднім. Тому створення таблиці виглядатиме так: <span class="text-bold">$ CREATE TABLE city (id INT AUTO_INCREMENT, name VARCHAR(30), country_id INT, population INT, PRIMARY KEY (id)); </span> Подивимося на схему таблиці, чи правильно зробабо: <span class="text-bold">$ DESC city;</span><img data-max-width="512" data-id="a25cb30d-463e-4791-b883-2c2e684ecee9" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL.  Частина 3 - 7" src="https://cdn.javarush.com/images/article/a25cb30d-463e-4791-b883-2c2e684ecee9/512.jpeg" style="width: 512px;">Як видно зі схеми таблиці, у нас з'явився новий опис поля id — auto_increment. Виходить, ми все правильно зробабо. Перевіримо дані вже повністю налаштованої таблиці. Для цього зробимо останню частину завдання зовнішній ключ.
<h3 id="topic5">Додаємо зовнішній ключ до cities</h3>Для зовнішнього ключа буде така команда: <span class="text-bold">$ ALTER TABLE city ADD FOREIGN KEY (country_id) REFERENCES country(id); </span> І відразу перевіримо, що там зі схемою таблиці: чи не змінилася вона годиною? <span class="text-bold">$ DESC city;</span> <img data-max-width="512" data-id="849aadf4-9186-4943-90c1-644a35298fcb" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL.  Частина 3 - 8" src="https://cdn.javarush.com/images/article/849aadf4-9186-4943-90c1-644a35298fcb/512.jpeg" style="width: 512px;">
<h3 id="topic6">Бонусна частина. Тестування</h3>Забув я додати завдання — заповнити даними, які були в скрині першої частини. Забув, отже, зараз сам зроблю. А тим, кому цікаво, можете самі зробити це без мене і потім звіримо ;) Там були Харків, Київ, Мінськ, Одеса, Воронеж і ще додамо Кишинів. Але цього разу ID-шники не будемо передавати, пропустимо їх: <span class="text-bold">$ INSERT INTO city (name, country_id, population) 3, 2545500), ('Odessa', 1, 1017699), ('Voronezh', 2, 1058261), ('Kishinev', 4, 695400); </span> Як бачимо, можна через одну команду INSERT INTO робити кілька записів одночасно. Зручна річ, запам'ятовуйте) І відразу подивимося, що там у таблиці: <span class="text-bold">$ SELECT * FROM city; </span><img data-max-width="512" data-id="175eb32e-68d8-4c74-afd1-1a6bb49b0985" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL.  Частина 3 - 9" src="https://cdn.javarush.com/images/article/175eb32e-68d8-4c74-afd1-1a6bb49b0985/512.jpeg" style="width: 512px;"><span class="text-bold">AUTO_INCREMENT</span>- Спрацював саме так, як ми хотіли. ID-шники всі заповнені, хоч ми їх і не передавали. Зовнішній ключ – штука залежна. Щоб перевірити, чи правильно вона працює, можна спробувати записати зовнішній ключ, якого у зовнішній таблиці немає. Припустимо, ми вирішабо, що id = 5 – це Казахстан. Але реально їх у таблиці країн немає. І щоб перевірити, що БД лаятиметься, додамо місто — Астана: <span class="text-bold">VALUES ('Astana', 5, 1136156); </span> І ми закономірно отримуємо помилку: <img data-max-width="512" data-id="997a7f4d-3d9d-4c35-a9f4-9354802cbc8d" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL.  Частина 3 - 10" src="https://cdn.javarush.com/images/article/997a7f4d-3d9d-4c35-a9f4-9354802cbc8d/512.jpeg" style="width: 512px;">Ось тепер зовнішній ключ слідкує за тим, щоб ми не спробували привласнити місту країну, якої немає в нашій БД. На цьому частину за домашнім завданням можна вважати завершеною - вперед до нового:) 
<div class="email-subscription">
 <iframe frameborder="0" src="https://secure.esputnik.com.ua/4Q0Ef6d2SOs" width="100%" height="200" scrolling="no" data-savepage-key="0-2"></iframe>
</div>
<h2 id="topic7">Оператор SELECT</h2>Ну що, все вже не здається таким страшним, га? Хочу ще раз відзначити, що для Java-розробників знання БД це must have. Без БД нікуди. Так, вже хочеться почати писати додаток, згоден. Але це потрібне. Тому так і продовжуватимемо. За допомогою оператора SELECT ми отримуємо дані із БД. Тобто це типова DML операція (забули вже, що це?...))) Перечитайте статті ДО). Чим хороші реляційні бази даних? У них величезна функціональність з агрегації та отримання даних. Для цієї справи використовується оператор SELECT. Здавалося б, що там може бути складного, так? А ось виявляється, що розумітися ще пристойно) Нам важливо зрозуміти основи, від яких вже можна буде відштовхуватися. Найпростіший запит із оператором SELECT - вибрати всі дані з однієї таблиці. Мені дуже сподобався опис з вікі про те, 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java">SELECT
  <span class="token punctuation">[</span>DISTINCT <span class="token operator">|</span> DISTINCTROW <span class="token operator">|</span> ALL<span class="token punctuation">]</span>
  select_expression<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
FROM table_references
<span class="token punctuation">[</span>WHERE where_definition<span class="token punctuation">]</span>
<span class="token punctuation">[</span>GROUP BY <span class="token punctuation">{</span>unsigned_integer <span class="token operator">|</span> col_name <span class="token operator">|</span> formula<span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span>HAVING where_definition<span class="token punctuation">]</span>
<span class="token punctuation">[</span>ORDER BY <span class="token punctuation">{</span>unsigned_integer <span class="token operator">|</span> col_name <span class="token operator">|</span> formula<span class="token punctuation">}</span> <span class="token punctuation">[</span>ASC <span class="token operator">|</span> DESC<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span></code></pre> Тут видно, що не можна спочатку поставити оператор GROUP BY, а потім вже WHERE. Це потрібно запам'ятати, щоб потім не було образи за помилки, які незрозуміло, звідки беруться. <span class="text-bold">$SELECT * FROM city; </span><img data-max-width="512" data-id="69a252d6-a115-40d3-a3b4-e8c6ef85a133" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL.  Частина 3 - 11" src="https://cdn.javarush.com/images/article/69a252d6-a115-40d3-a3b4-e8c6ef85a133/512.jpeg" style="width: 512px;">Але вигребти всі дані для нас не прикольно. Це так само, якби ми хотіли цвяхи забивати мікроскопом <a href="https://lurkmore.to/%D0%97%D0%B0%D0%B1%D0%B8%D0%B2%D0%B0%D1%82%D1%8C_%D0%B3%D0%B2%D0%BE%D0%B7%D0%B4%D0%B8_%D0%BC%D0%B8%D0%BA%D1%80%D0%BE%D1%81%D0%BA%D0%BE%D0%BF%D0%BE%D0%BC" rel="nofollow" target="_blank">[1]</a> , <a href="https://lurkmore.to/%D0%A4%D0%B0%D0%B9%D0%BB:Ballistic-banya.jpg" rel="nofollow" target="_blank">[2]</a> . Так як БД робить набагато швидше операції фільтрації, сортування та агрегації, ніж Java-код, краще це справа і залишити БД на відкуп. Тому шляхом ускладнення завдань відкриватимемо новий функціонал.
<h3 id="topic8">Параметр WHERE</h3>Щоб відфільтрувати вибірку, використовується слово <span class="text-bold">WHERE</span> . Тлумачити це потрібно так: SELECT * FROM tablename (вибрати всі поля з таблиці tablename) WHERE talbe_row = 1 (де в записах поле table_row дорівнює 1). Важливо, що порядок ключових слів у запиті є важливим. Не можна написати WHERE a =1 FROM table_name SELECT *. Для російської мови це ок, і деяким може здатися не таким зашкваром, але для SQL це неприпустимо. Пишемо наступний запит: <span class="text-bold">$ SELECT * FROM city WHERE country_id = 1; </span><img data-max-width="512" data-id="64c1c2a4-f353-443c-bdf2-7807cedc8691" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL.  Частина 3 - 12" src="https://cdn.javarush.com/images/article/64c1c2a4-f353-443c-bdf2-7807cedc8691/512.jpeg" style="width: 512px;">І ми обрали українські міста. Непогано, правда? А якщо ми хочемо не лише українців, а й білоруських? Для цієї справи ми можемо перерахувати колекцію значень, які може набувати поле: <span class="text-bold">$ SELECT * FROM city WHERE country_id IN (1, 3);</span><img data-max-width="512" data-id="eb93ad61-df6d-41fc-875f-bd02adc38a20" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL.  Частина 3 - 13" src="https://cdn.javarush.com/images/article/eb93ad61-df6d-41fc-875f-bd02adc38a20/512.jpeg" style="width: 512px;">І вже у відповіді у нас міста із двох країн. А якщо є кілька умов для фільтрації? Допустимо, ми хочемо міста з населенням понад два мільйони? Для цього використовують слова <span class="text-bold">OR</span> та <span class="text-bold">AND</span> : <span class="text-bold">$ SELECT * FROM city WHERE country_id IN (1, 3) AND population &gt; 2000000; </span><img data-max-width="512" data-id="d16bf286-1f19-4282-9a9e-90169ba76d6b" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL.  Частина 3 - 14" src="https://cdn.javarush.com/images/article/d16bf286-1f19-4282-9a9e-90169ba76d6b/512.jpeg" style="width: 512px;">Відмінно, а якщо нам потрібно додати ще одну умову — з пошуку імен через регулярне вираження (описувати регулярки тут я не буду: ось людина <a href="https://codegym.cc/groups/posts/2679-regex-20-korotkikh-shagov-dlja-osvoenija-reguljarnihkh-vihrazheniy-chastjh-1" target="_blank">“коротко” в 4 частинах</a> зробив це)? Наприклад, ми пам'ятаємо, як пишеться місто, але не повністю ... Для цього у виразі фільтрації можна додати ключове слово <span class="text-bold">LIKE </span><span class="text-bold">:</span><img data-max-width="512" data-id="dbd76a6d-8391-4f48-b7cb-012b1c8ba4cb" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL.  Частина 3 - 15" src="https://cdn.javarush.com/images/article/dbd76a6d-8391-4f48-b7cb-012b1c8ba4cb/512.jpeg" style="width: 512px;">І в такий спосіб ми отримали ще й Харків. За підсумками можемо сказати, що в нас дуже непоганий пошук вийшов. Але хотілося б відсортувати не по ID-шнику, а по населенню, але як? Так дуже просто.
<h3 id="topic9">Параметр ORDER BY</h3>За допомогою ORDER BY ми можемо відсортувати записи, які отримали за певним полем. Сортує як числа, так і рядки. Розширимо попередній запит, відсортуємо за населенням, додавши ORDER BY population: <span class="text-bold">$ SELECT * FROM city WHERE country_id IN (1, 3) AND population &gt; 2000000 OR name LIKE “%hark%” ORDER BY population; </span><img data-max-width="512" data-id="d56b1e63-707f-44a0-bf5b-d6d17d413fe9" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL.  Частина 3 - 16" src="https://cdn.javarush.com/images/article/d56b1e63-707f-44a0-bf5b-d6d17d413fe9/512.jpeg" style="width: 512px;">Як бачимо, сортування відбулося натуральному порядку, тобто за зростанням. А якщо ми хочемо навпаки? Для цього потрібно додати слово DESC: <span class="text-bold">$ SELECT * FROM city WHERE country_id IN (1, 3) AND population &gt; 2000000 OR name LIKE “%hark%” ORDER BY population DESC; </span><img data-max-width="512" data-id="ab95b26c-0911-4da1-b13a-b05e3a50f0a3" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL.  Частина 3 - 17" src="https://cdn.javarush.com/images/article/ab95b26c-0911-4da1-b13a-b05e3a50f0a3/512.jpeg" style="width: 512px;">Наразі сортування йде щодо зменшення населення. І робить це БД дуже швидко: ніякі там <span class="text-bold">Collections.sort</span>не йдуть у порівняння. Тепер відсортуємо за рядками, на ім'я у зворотному порядку: <span class="text-bold">$ SELECT * FROM city WHERE country_id IN (1, 3) AND population &gt; 2000000 OR name LIKE “%hark%” ORDER BY name DESC;</span><img data-max-width="512" data-id="7a699b20-7880-436e-8617-9e44791c063e" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL.  Частина 3 - 18" src="https://cdn.javarush.com/images/article/7a699b20-7880-436e-8617-9e44791c063e/512.jpeg" style="width: 512px;">
<h3 id="topic10">Параметр GROUP BY</h3>Використовується для групування записів на певних полях. Зазвичай це потрібно, щоб застосовувати агрегатні функції… А що таке агрегатні функції?)) Є сенс групувати якимись полями, якщо вони однакові для різних записів. Розберемо, що мають на увазі, на прикладі. Скажімо, у містах є зовнішні ключі – ID-шники країн. Так ось, ID однаковий для міст із однієї країни. Тому можна взяти та згрупувати записи за ними: <span class="text-bold">$SELECT country_id, COUNT(*) FROM city GROUP BY country_id; </span><img data-max-width="512" data-id="37498854-5efc-4e52-a390-8dc20d931618" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL.  Частина 3 - 19" src="https://cdn.javarush.com/images/article/37498854-5efc-4e52-a390-8dc20d931618/512.jpeg" style="width: 512px;">Але без агрегуючих функцій це виглядає якось блякло, погодьтеся. Тому розглянемо кілька найпоширеніших функцій:
<ul>
 <li>COUNT — кількість записів, які можна без групування, використовують як <span class="text-bold">COUNT(*)</span> . У разі ж угруповання з якогось поля — COUNT(groupped_field);</li>
 <li>MAX - знаходить максимальне значення за певним полем;</li>
 <li>MIN - знаходить мінімальне значення за певним полем;</li>
 <li>SUM - знаходить суму за певним полем;</li>
 <li>AVG – знаходить середнє значення.</li>
</ul>Взагалі, ці функції можна використовувати і без угруповання, тільки тоді буде виведено лише одне поле. Спробуємо їх для населення міст: <span class="text-bold">$ SELECT COUNT(*) FROM city; </span><img data-max-width="512" data-id="5511ea55-b948-41cc-8810-c745a7d2935a" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL.  Частина 3 - 20" src="https://cdn.javarush.com/images/article/5511ea55-b948-41cc-8810-c745a7d2935a/512.jpeg" style="width: 512px;">Що попросабо, те й одержали. Просто кількість записів. Іноді це корисно. Наприклад, якщо нам потрібно дізнатися про кількість статей якогось автора. Не треба вигрібати їх із БД і вже рахувати. Можна просто використовувати COUNT(). <span class="text-bold">$ SELECT AVG(population) FROM city; </span><img data-max-width="512" data-id="bc0faf7b-6c64-49e2-817e-4f43997aa5ad" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL.  Частина 3 - 21" src="https://cdn.javarush.com/images/article/bc0faf7b-6c64-49e2-817e-4f43997aa5ad/512.jpeg" style="width: 512px;"><span class="text-bold">$ SELECT MIN (population) FROM city; </span> І тут уже набирає чинності угруповання. Наприклад, стоїть завдання отримати найменше місто в країні. Чи знаєте, як це зробити? Спробуйте самі, потім дивіться: <span class="text-bold">$ SELECT country_id as Країна, MIN(population) FROM city WHERE GROUP BY country_id;</span><img data-max-width="512" data-id="00a33cc6-110a-4b09-83b4-b776efae46da" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL.  Частина 3 - 22" src="https://cdn.javarush.com/images/article/00a33cc6-110a-4b09-83b4-b776efae46da/512.jpeg" style="width: 512px;">Поки що ми бачимо лише ID-шник країни, але це не біда — наступного разу все зробимо. А так вже є результат, і ми отримали, що хотіли — найменше місто країни з ID = 1. З іншими функціями буде те саме. Важливо відзначити, що вигрібати всі поля через * при використанні угруповання та агрегації не вдасться! Подумайте над цим;)
<h2 id="topic11">Домашнє завдання</h2>За підсумками попередніх статей видно, що домашнє завдання заходить, тому продовжимо)) Так, всі хто зробить ДЗ - продовжуємо ставити "+" у коментарях. Це важливо для мене, що тема домашнього завдання цікава вам, щоб я продовжував її робити далі. Так, я читаю ваші коментарі регулярно. Відповідаю, звісно, ​​рідше. Я бачив, що просабо давати складніше завдання SQL. Поки ми не вивчимо джоїни, цікавих завдань не буде, тому будуть ті, які мені потрібні для подальшого матеріалу.
<h3>Завдання:</h3>
<ol>
 Розібратися з оператором <span class="text-bold">HAVING</span> та написати приклад запиту для таблиць з нашого прикладу. Якщо потрібно додати якісь поля чи ще значень, щоб було наочніше, додавайте. Хто хоче, пишіть у коментарях свій приклад рішення: так я його ще й перевірити зможу, якщо встигну. 
 <li>Встановити MySQL Workbench для роботи з базою даних через UI. Я думаю, ми вже досить практикувалися із роботою з консолі. Підключитись до БД. Якщо ви використовуєте щось інше для роботи з БД, сміливо скипайте це завдання. Тут і далі я використовуватиму тільки MySQL Workbench.</li>
 <li>Написати запити на отримання за нашими даними:
  <ol tab="a">
   <li>найменш-/чисельної країни;</li>
   <li>середня кількість жителів країни;</li>
   <li>середня кількість жителів у країнах, чиї імена закінчуються на “a”;</li>
   <li>кількість країн, у яких населення більше чотирьох мільйонів;</li>
   <li>відсортувати країни щодо зменшення кількості мешканців;</li>
   <li>відсортувати країни на ім'я в натуральному порядку.</li>
  </ol></li>
</ol><a href="https://codegym.cc/welcome" target="_blank"><img id="click_banner1_articles" data-max-width="1080" data-id="a27b7388-7969-4bc1-92e2-b779b65c64cf" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL.  Частина 3 - 23" src="https://cdn.javarush.com/images/article/a27b7388-7969-4bc1-92e2-b779b65c64cf/1080.jpeg" style="width: 1080px;"></a>
<h2 id="topic12">Висновок</h2>Сьогодні ми детально розібрали домашнє завдання минулого уроку. Причому, я вважаю це важливим і для тих, хто не зробив його, і для тих, хто зробив. Для перших це можливість дізнатися про відповідь, а для других — звірити зі своїм результатом. <span class="text-bold">Підписуйтесь на <a href="https://github.com/romankh3" rel="nofollow" target="_blank">мій аккаунт гітхаб</a> , щоб бути в курсі змін по проекту. Я там вестиму всю кодову базу. Все проходитиме в цій <a href="https://github.com/CodeGymCommunity" rel="nofollow" target="_blank">організації</a> .</span> Далі ми обговорабо оператор SELECT. Він найважливіший для нас. Саме по ньому проходитимуть усі запити на отримання даних, і ми маємо його розуміти. Найголовніше – пам'ятати порядок додавання параметрів (WHERE, ORDER BY, GROUP BY тощо). Так, я не розповів всього, що можна, але я і мети такої не ставив перед собою. Так, я знаю, що ви вже хочете писати додаток. Наберіться терпіння, це все потрібно. І для проекту, і для вашого професійного зростання. Поки чекаєте, переконайтеся, що Гіт вже знайомий вам. Я його використовуватиму вже за умовчанням, як відомий інструмент. Дякую всім за прочитання. У наступній статті поговоримо про зв'язки у БД та джоїнах. Ось там і будуть круті завдання)) 
<h4><a href="https://codegym.cc/groups/posts/2935-java-proekt-ot-a-do-ja-pishem-realjhnihy-proekt-dlja-portfolio#articles" target="_blank">Список всіх матеріалів серії на початку цієї статті.</a></h4>