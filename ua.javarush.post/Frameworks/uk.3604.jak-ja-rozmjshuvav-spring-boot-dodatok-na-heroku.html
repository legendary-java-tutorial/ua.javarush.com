Як я розміщував Spring-Boot додаток на Heroku
<p>----------------------------------------</p>
Вирішив спробувати запустити простий додаток на хмарі. За основу я взяв цю статтю Якщо ти її прочитав(-ла) і все заробило без питань, то текст нижче не для тебе. Особисто у мене виникло кілька доповнень: 1. У пунктах 5, 6 і 7 показується, я
<p>----------------------------------------</p>
<strong><u><a href="https://codegym.cc/groups/posts/3092-spring-ehto-nestrashno" target="_blank" rel="nofollow">ЗМІСТ ЦИКЛУ СТАТТІВ</a></u></strong> Вирішив спробувати запустити простий додаток на хмарі. За основу я взяв цю статтю<a href="https://skillbox.ru/media/base/kak-razmestit-spring-boot-prilozhenie-na-heroku-com-poshagovaya-instruktsiya/" target="_blank" rel="nofollow">Як розмістити Spring-Boot-додаток на heroku.com. Покрокова інструкція </a> Якщо ти її прочитав(-ла) і все заробило без питань, то текст нижче не для тебе. Особисто у мене виникло кілька доповнень: 1. У пунктах 5, 6 і 7 показується, як використовувати в додатку хмарну базу даних, прочитати це все цікаво. Але якщо тобі, як і мені, це здалося зайвим, то можна використовувати<a href="https://www.baeldung.com/spring-boot-h2-database" target="_blank" rel="nofollow">СУБД H2</a> (включи гугл трасліт). Тут показаний приклад як заповнити БД за допомогою файлу data.sql і скриптів. Я використовував не скрипти, а<a href="https://zetcode.com/springboot/commandlinerunner/" target="_blank" rel="nofollow">CommandLineRunner</a>який надає метод run. Потрібно просто реалізувати клас, наприклад MyRunner навісити на нього java-конфігурацію та імплементувати інтерфейс. Нижче приклад використання: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRunner</span> <span class="token keyword">implements</span> <span class="token class-name">CommandLineRunner</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">CityRepository</span> repository<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        repository<span class="token punctuation">.</span><span class="token function">deleteAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        repository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">City</span><span class="token punctuation">(</span><span class="token string">"Bratislava"</span><span class="token punctuation">,</span> <span class="token number">432000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        repository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">City</span><span class="token punctuation">(</span><span class="token string">"Budapest"</span><span class="token punctuation">,</span> <span class="token number">1759000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        repository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">City</span><span class="token punctuation">(</span><span class="token string">"Prague"</span><span class="token punctuation">,</span> <span class="token number">1280000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> Метод виконатися в момент запуску програми та збереже сутності у БД. <strong>Важливо: з пункту 7 основної статті, до application.properties (або application.yaml) необхідно додати налаштування server.port=${PORT:8080} – дефолтний порт позбавить поширеної проблеми: heroku[router]: at=error code=H20 desc="App boot timeout" method=GET</strong> 2. У пункті 8 показується, як публікувати додаток. Там досить цікаво написано про особливості використання додатків на версії Java 11, як старообрядник використовую восьму Java, тому файл system.properties мені не потрібен. Якщо в тебе Java 9+ не забудь створити згаданий файл і додати версію Java. Автор пропонує наступний порядок публікації: &lt;samp&gt;Для цього виконаємо наступні кроки: • Відкриємо папку з репозиторієм проекту у терміналі Git Bash. • Знайдемо посилання на віддалений репозиторій heroku для вашої програми в Settings — у розділі App Information → Heroku git URL. • Додамо новий віддалений репозиторій до вашого Git.&lt;/samp&gt; Я використав порядок, описаний на сайті Heroku. У створеному на сайті додатку потрібно знайти вкладку Deploy, прочитати все, що там написано. <img width="800" height="500" data-id="44ba0b64-1f43-4133-8039-21557c004aa3" alt="Як я розміщував Spring-Boot додаток на Heroku - 1" src="https://cdn.javarush.com/images/article/44ba0b64-1f43-4133-8039-21557c004aa3/1080.jpeg"> У структурі проекту IDEA має бути файл . gitignore та папка target повинна бути виключена з відстеження Git. В якості консолі я використав Terminal IDEA, просто в тому ж проекті, який хочу запустити в хмару, відкрив вкладку Terminal, ось так вона виглядає: Тому не мені треба <img width="800" height="500" data-id="ccf1c3d2-bdab-4803-8404-e1ecaf5e68d2" alt="Як я розміщував Spring-Boot додаток на Heroku - 2" src="https://cdn.javarush.com/images/article/ccf1c3d2-bdab-4803-8404-e1ecaf5e68d2/1080.jpeg"> шукати потрібну директорію. ( <em>cd my-project/</em> ) <em>heroku login</em> - ми вже зробабо (якщо ні, то саме час). Далі копіюю і виконую по черзі гіт команди: Спочатку створюю гіт репозиторій git <em>init </em> <em>heroku </em><em>. </em> <em>git commit -am "make it better" </em> <em>git push heroku master</em> У консолі будуть з'являтися логи: що програма почала складання, що Maven викачує залежності і в кінці: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java">remote<span class="token operator">:</span>        https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>from<span class="token operator">-</span>java<span class="token operator">-</span>rush<span class="token punctuation">.</span>herokuapp<span class="token punctuation">.</span>com<span class="token operator">/</span> deployed <span class="token keyword">to</span> <span class="token class-name">Heroku</span>
remote<span class="token operator">:</span>
remote<span class="token operator">:</span> <span class="token class-name">Verifying</span> deploy<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token class-name"><span class="token namespace">done<span class="token punctuation">.</span></span>
To</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>git<span class="token punctuation">.</span>heroku<span class="token punctuation">.</span>com<span class="token operator">/</span>from<span class="token operator">-</span>java<span class="token operator">-</span>rush<span class="token punctuation">.</span>git
 <span class="token operator">*</span> <span class="token punctuation">[</span><span class="token keyword">new</span> branch<span class="token punctuation">]</span>      master <span class="token operator">-&gt;</span> master</code></pre> Де вказано посилання https://from-java-rush.herokuapp.com/, у тебе буде своє посилання, ось у нього і тицьни. Само собою, якщо у тебе немає графічного інтерфейсу в додатку, а лише набір rest методів, потрібно після посилання вказати через слєш назву методу, наприклад так: <a href="https://from-java-rush.herokuapp.com/heroku/city" target="_blank" rel="nofollow">https://from-java-rush.herokuapp.com/heroku/city</a> (треба почекати поки контейнер прокинеться, якщо не прокинувся, то значить я видалив додаток) Тепер ти можеш вносити зміни до розгорнутої програми на heroku, прямо з IDEA, використовуючи консольні Git команди git <em>add . </em> <em>Або звичні </em> <em>,</em> але менш інформативні кнопки інтерфейсу <img width="800" height="500" data-id="4ceb1e3a-6940-43dc-a4cc-c67af46b1385" alt="Як я розміщував Spring-Boot додаток на Heroku - 3" src="https://cdn.javarush.com/images/article/4ceb1e3a-6940-43dc-a4cc-c67af46b1385/1080.jpeg">