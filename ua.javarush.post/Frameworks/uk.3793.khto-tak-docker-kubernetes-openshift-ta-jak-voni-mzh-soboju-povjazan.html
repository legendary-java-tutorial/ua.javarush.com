Хто такі Docker, Kubernetes, OpenShift та як вони між собою пов'язані?
<p>----------------------------------------</p>
У промисловій розробці є необхідність «упаковки» зібраного додатка, наприклад, щоб його можна було передати на той сервер, де воно працюватиме, у тому вигляді, в якому розробник зібрав його у себе на комп'ютері, така «упаковка» повинна бути
<p>----------------------------------------</p>
<strong>Все починається із упаковки.</strong> У промисловій розробці є необхідність «упаковки» зібраного додатка, наприклад, щоб його можна було передати на той сервер, де воно працюватиме, у тому вигляді, в якому розробник зібрав його у себе на комп'ютері, така «упаковка» повинна бути ніби захистом . Це виключає сюрпризи, на кшталт тих, коли під час тесту додаток працює, а при перенесенні до робочого середовища — ламається. Так само «упаковка» ізолює один додаток, від іншого, що знаходиться на тому самому сервері, така ізоляція дозволяє одному додатку не заважати роботі іншого (наприклад: один додаток не зможе забрати собі всю оперативну пам'ять сервера, залишивши другий додаток напризволяще). Особливо помітні плюси "упаковки" при мікросервісній архітектурі, воно і зрозуміло, багато мікросервісів - багато невеликих додатків, які повинні спілкуватися між собою, але при цьому не повинні заважати один одному. У приклад можна навести комод (сервер), в якому багато різних ящиків, і ми можемо спокійно перекладати різні шкарпетки з одного ящика в інший, і при цьому вони не змішуватимуться ні один з одним, ні з труселями. <img width="800" height="500" data-id="d41c6e52-110b-4cfc-8361-5c5cdcc8da1e" alt="Хто такі Docker, Kubernetes, OpenShift та як вони між собою пов'язані?  - 1" src="https://cdn.javarush.com/images/article/d41c6e52-110b-4cfc-8361-5c5cdcc8da1e/1080.jpeg"> Упаковка створюється засобам віртуалізації. Колись давно, як «упаковку» використовувалися віртуальні машини (VM). Олди згадають, як розгортали Windows XP на Vista на віртуальній машині. Зараз VM для упаковки додатків – це минуле століття. Світ захопабо контейнери. Тому що вони: легші, продуктивніші та безпечніші. <a href="https://wiki.merionet.ru/servernye-resheniya/35/chem-docker-on-otlichaetsya-ot-virtualnoj-mashiny/" target="_blank" rel="nofollow">Докладніше: чим контейнер відрізняється від віртуальної машини? </a> <img width="800" height="500" data-id="cd1ec6cd-caea-46ea-adfd-88fb76b1c45e" alt="Хто такі Docker, Kubernetes, OpenShift та як вони між собою пов'язані?  - 2" src="https://cdn.javarush.com/images/article/cd1ec6cd-caea-46ea-adfd-88fb76b1c45e/1080.jpeg"> Потрібно запам'ятати деякі переваги контейнерів: • мають менший розмір (займають менше пам'яті на сервері); • мають доступ до загальних ресурсів сервера (оперативна пам'ять, обчислювальний час процесора); • мають кращу переносимість в інше середовище (з тестового в промислове); • забезпечують вищу швидкість запуску (оскільки контейнер легковаген, те й запускається швидше). <strong>Docker – мати контейнерів. </strong> Коли говорять контейнер, мають на увазі Docker. Docker — програмне забезпечення для автоматизації розгортання та керування програмами в середовищах з підтримкою контейнеризації. Якщо на прикладах, то Docker це така суміш онлайн конструктора і 3D принтера з краном. Тобто він може спочатку спроектувати шаблон для контейнера, надрукувати контейнер за заданими умовами, а потім перемістити його куди треба. Замість важелів використовується Dockerfile. Процес керування простий: пишеш файли, команди - запускаєш - дивишся що вийшло. <img width="800" height="500" data-id="2fad62f7-6dda-4270-8a54-101e768d429d" alt="Хто такі Docker, Kubernetes, OpenShift та як вони між собою пов'язані?  - 3" src="https://cdn.javarush.com/images/article/2fad62f7-6dda-4270-8a54-101e768d429d/1080.jpeg"> <a href="https://habr.com/ru/company/ruvds/blog/438796/" target="_blank" rel="nofollow">Перше знайомство з Docker </a> <strong>Docker Compose - прокачаний Docker</strong> Тепер давайте розглянемо сценарій, коли потрібна робота кількох контейнерів у місці. Для цього служить утиліта – Docker Compose. Docker Compose — інструментальний засіб, що входить до складу Docker. Воно призначене для вирішення завдань, пов'язаних із розгортанням проектів. Різниця між Docker та Docker Compose: Docker застосовується для керування окремими контейнерами. Docker Compose використовується для одночасного керування кількома контейнерами. Цей інструмент пропонує також можливості, що і Docker, але дозволяє працювати з більш складними структурами. <img width="800" height="500" data-id="28505e49-f815-49db-a87b-fd7bc2ac5baa" alt="Хто такі Docker, Kubernetes, OpenShift та як вони між собою пов'язані?  - 4" src="https://cdn.javarush.com/images/article/28505e49-f815-49db-a87b-fd7bc2ac5baa/1080.jpeg"> Типовий сценарій використання Docker Compose: Уявіть собі, що ви є розробником веб-проекту. Цей проект включає два веб-сайти. Перший дозволяє людям, які займаються бізнесом, створювати всього в кілька клацань мишею інтернет-магазини. Другий націлений на підтримку клієнтів. Ці два сайти взаємодіють з однією базою даних. Ваш проект стає все популярнішим, і виявляється, що потужності сервера, на якому він працює, вже недостатньо. В результаті ви вирішуєте перевести весь проект на іншу машину. Якщо щось на зразок Docker Compose ви не використовували, то вам доведеться переносити та переналаштовувати контейнери по одному, сподіваючись на те, що ви, в процесі цієї роботи, нічого не забудете. Якщо ж ви використовуєте Docker Compose, то перенесення вашого проекту на новий сервер це питання, який вирішується виконанням кількох команд. Для того, щоб завершити перенесення проекту на нове місце, вам потрібно лише виконати деякі налаштування та завантажити на новий сервер резервну копію бази даних. Типовий Докеркомпоузер: <img width="800" height="500" data-id="a2dd772b-e8d1-4bc8-8d13-5ca759da91a1" alt="Хто такі Docker, Kubernetes, OpenShift та як вони між собою пов'язані?  - 5" src="https://cdn.javarush.com/images/article/a2dd772b-e8d1-4bc8-8d13-5ca759da91a1/1080.jpeg"> Що тут треба запам'ятати: <em>Контейнери – це основний засіб для «упакування» додатків. Контейнерами займається Docker, створює образи контейнерів, піднімає та переміщує контейнери. Для одночасного керування пачкою контейнерів використовується Docker Compose, який входить до складу Docker. Ці програми – є вільно розповсюджуваним програмним забезпеченням (халява – одним словом) </em> <strong>Kubernetes (K8s) – автоматизація Docker</strong> І так ми розгорнули контейнери, знаємо, чим переносити їх «пачками» з машини на машину. Але раптом один із контейнерів упав! Що робити? Хто його підніме знову? <img width="800" height="500" data-id="99fd65d5-9d9d-4736-8013-7d1a63465d26" alt="Хто такі Docker, Kubernetes, OpenShift та як вони між собою пов'язані?  - 6" src="https://cdn.javarush.com/images/article/99fd65d5-9d9d-4736-8013-7d1a63465d26/1080.jpeg"> Звичайно, можна це зробити руками, через Docker. Але це ж треба щось робити, щось писати, потрібен якийсь інструмент для автоматизації. Ось тут на сцену виходить Kubernetes (скорочено K8s), він також займеться управлінням та оркестрацією (автоматизоване управління пов'язаними сутностями) контейнерів. Маючи у розпорядженні K8s не треба вдень і вночі стежити за контейнерами. Досить визначити сценарій поведінки, а K8s зробить усе сам. Основні можливості Kubernetes 1. Забезпечує масштабування та керування вашою конфігурацією. 2. Ви можете описати, що ви хочете отримати при розгортанні кластера, і К8s це зробить. Наприклад, вказати кількість <a href="https://habr.com/ru/company/flant/blog/427819/" target="_blank" rel="nofollow">подов</a>скільки пам'яті на них виділити, вказати кількість реплік(екземплярів) додатків, розгорнутих (у контейнерах) на подах. 3. Відповідає за підтримку системи у певному стані, якщо щось упало, то К8s це підніме, відповідно до встановленої конфігурації. Що тут слід запам'ятати: <em>Kubernetes – інструмент для оркестрації контейнеризованих додатків – автоматизації їх розгортання, масштабування та координації за умов кластера. Підтримує основні технології контейнеризації, включаючи Docker. K8s є відкритим програмним забезпеченням. <img width="800" height="500" data-id="009ff723-5ab4-4387-9a79-623c2b948747" alt="Хто такі Docker, Kubernetes, OpenShift та як вони між собою пов'язані?  - 7" src="https://cdn.javarush.com/images/article/009ff723-5ab4-4387-9a79-623c2b948747/1080.jpeg"></em> <strong>OpenShift – ферарі у світі віртуалізації, круто, швидко та дорого</strong> Розвиваючи тему, далі переходимо до OpenShift. <a href="https://habr.com/ru/company/redhatrussia/blog/494254/" target="_blank" rel="nofollow">OpenShift – це надбудова над Kubernetes, що пропонує додаткові функції.</a> Він відразу ж готовий до використання, його не треба довго і болісно налаштовувати, можна негайно пускати в продакшн. Дивіться скільки іконок, над Kubernetes. І кожна їх робить свої круті штуки. <img width="800" height="500" data-id="2ba3cbe2-9864-4fcf-8cd5-c21549b1f9a5" alt="Хто такі Docker, Kubernetes, OpenShift та як вони між собою пов'язані?  - 8" src="https://cdn.javarush.com/images/article/2ba3cbe2-9864-4fcf-8cd5-c21549b1f9a5/1080.jpeg"> Основні моменти OpenShift: Це платний продукт, на відміну від K8s; • DevOps із «коробки», підтримка основних сценаріїв розгортання blue/green, canary; • Вбудована підтримка Jenkins; • Надає зручні інструменти для адміністрування та роботи з кластером; • Має більш строгу модель безпеки та вбудований моніторинг. Варто ще раз звернути увагу, що OpenShift є платним продуктом, на відміну від Kubernetes. Різниця в наступному: якщо ми беремо голий Kubernetes, всі проблеми ми вирішуємо самі. Якщо говорити про OpenShift, то це продукт компанії Red Hat, яка в рамках платної підтримки вирішує проблеми, що виникають. Підіб'ємо загальні підсумки: <em>У промисловій розробці є необхідність «упаковки» програми, цей підхід особливо актуальний у мікросервісній архітектурі. Контейнери – це основний засіб для «упаковування» програм. Контейнерами займається Docker, створює образи контейнерів, піднімає та переміщує контейнери. Для одночасного керування пачкою контейнерів використовується Docker Compose, який входить до складу Docker. Ці програми є вільно розповсюдженим ПЗ. Kubernetes(K8s) – інструмент для оркестрування контейнеризованих програм — автоматизації їх розгортання, масштабування та координації в умовах кластера. Підтримує основні технології контейнеризації, включаючи Docker. K8s є відкритим програмним забезпеченням. OpenShift – це надбудова над Kubernetes, що пропонує додаткові функції. Це платний продукт, на відміну від K8s, призначений для корпоративного використання. Надає DevOps з «коробки»: підтримка основних сценаріїв розгортання blue/green, canary, має вбудовану підтримку Jenkins та надає зручні інструменти для адміністрування та роботи з кластером. Має більш строгу модель безпеки та вбудований моніторинг.</em> Тим, у кого сверблять руки покодити: <a href="https://skillbox.ru/media/base/kak_rabotat_s_docker_upakovka_spring_boot_prilozheniya_v_konteyner/" target="_blank" rel="nofollow">Упакувати Spring Boot додаток в контейнер </a> <a href="https://codegym.cc/groups/posts/3688-kak-razvernutjh-postgres-v-docker-i-podkljuchitjh-ee-k-spring-boot-prilozheniju" target="_blank" rel="nofollow">Як розгорнути Postgres в Docker і підключити до Spring-Boot додатку </a> <a href="https://codegym.cc/groups/posts/3684-videouikend-105-znakomimsja-s-rabotoy-konteynerov-na-java-i-tipichnihmi-zadachami-dlja-dzhunior" target="_blank" rel="nofollow">Вебінар: Docker - Як працювати з контейнерами? - Backend-розробка на Java</a>