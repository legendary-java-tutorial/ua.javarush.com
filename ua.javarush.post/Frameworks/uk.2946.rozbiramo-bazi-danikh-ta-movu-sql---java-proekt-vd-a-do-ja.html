Розбираємо бази даних та мову SQL - "Java-проект від А до Я"
<p>----------------------------------------</p>
Алоха, інженери-програмісти. Сьогодні говоримо про бази даних та мову SQL. На кого розраховано цю статтю? Та на всіх, кому цікаво. Одні можуть розпочати свій шлях із цієї статті, інші зможуть освіжити в пам'яті цікаві факти. Ця частина буде
<p>----------------------------------------</p>
<em>Стаття із серії про створення Java-проекту. Її мета — аналіз ключових технологій, результат — написання телеграм-бота. Вступна частина - <a href="https://codegym.cc/groups/posts/2935-java-proekt-ot-a-do-ja-pishem-realjhnihy-proekt-dlja-portfolio" target="_blank">тут</a> . </em> Алоха, інженери-програмісти. Сьогодні говоримо про бази даних та мову SQL. <img data-max-width="800" data-id="9f277c28-24c5-435f-9b0b-e875955ec272" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL - 1" src="https://cdn.javarush.com/images/article/9f277c28-24c5-435f-9b0b-e875955ec272/800.jpeg" style="width: 800px;">На кого розраховано цю статтю? Та на всіх, кому цікаво. Одні можуть розпочати свій шлях із цієї статті, інші зможуть освіжити в пам'яті цікаві факти. Ця частина буде суто теоретичною. Перш ніж розповідати, що таке бази даних та SQL-синтаксис, потрібно зрозуміти та визначити, для чого ми їх вивчатимемо. На даному етапі говоритимемо <span class="text-bold">ТІЛЬКИ</span> про SQL бази даних: NoSQL у цьому циклі статей розглядати не будемо.
<h2>База даних: що це</h2><img data-max-width="800" data-id="ca82157c-becb-4585-9d40-0498b7508086" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL - 2" src="https://cdn.javarush.com/images/article/ca82157c-becb-4585-9d40-0498b7508086/800.jpeg" style="width: 800px;">База даних (далі БД) - це місце, де зберігаються<span class="text-bold"> структуровані дані</span>, які можна отримати за допомогою мови запитів. Бази даних вміють не тільки зберігати, а й обробляти та змінювати інформацію у великих обсягах. Для ремарки: спробуйте швидко змінити Excel набір значень за якимись ознаками. У принципі нічого складного. Не те що у нашому неоцифрованому реальному світі. Наприклад, перейменування провулків, вулиць, міст. Було б усе віртуально і занесено до БД, була б вона нормалізована, це була б дрібниця. А так страждає безліч носіїв даних, які не можуть автоматично змінитись. У цьому контексті SQL для баз даних – це мова, яка БД розуміє та реагує відповідно. Скажімо, перейменувати місто не склало б труднощів, перейменування Дніпропетровська в Дніпро виглядало б приблизно так: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class=" language-java">UPDATE city <span class="token class-name">SET</span> name <span class="token operator">=</span> “Днипро” <span class="token class-name">WHERE</span> id <span class="token operator">=</span> <span class="token number">1231</span><span class="token punctuation">;</span></code></pre> Всі наступні запити в систему вже видавали б ім'я, яке нам потрібне.
<h2>Навіщо потрібні бази даних</h2>Як я вже казав, за допомогою баз даних можна зберігати дані. Але що це за дані? Щоб зрозуміти на життєвому прикладі, можна поговорити про якусь програму. Наприклад, про той же телеграм-бот. Ми хочемо знати, скільки людей користується ботом. Як це можна продати? У звичайному Java-додатку можна створити безліч унікальних елементів - Set, яке буде зберігати nickname користувача або ID-шник чату. Це працюватиме? Буде. Рівно доки Java-додаток не зупинять, а як тільки його запустять знову, то безліч унікальних елементів буде порожнім. Тобто дані, які зберігалися у працюючому додатку, просто зникли. Що з цим зробити? Можна винести зберігання стану системи (дані) з Java-програми кудись в інше місце. Можна зберігати це у форматі CSV у звичайному файлі на комп'ютері. Можна взагалі одним рядком в окремому файлі. Це можна зробити, і потім перезаписувати ці дані перед тим, як Java-програма зупиниться. Хоча гарантія, що запис буде успішним, далеко не близька до 100%, тому що банально можна висмикнути шнур живлення сервера, і запис не відбудеться. У цьому підході є суттєвий недолік: немає ніякої функціональності щодо отримання, агрегування та пошуку інформації на рівні файлів. Так, звичайно, можна вичитати файл, створити під нього об'єкти, але при цьому доведеться щоразу викачувати додаток всі дані. А їх може бути багато, наприклад пара гігабайт. Цього можна уникнути, якщо зберігати дані у БД. Яким чином? Через таблиці та відносини між ними. На цьому всі реляційні бази даних стоять. як Java-додаток зупиниться. Хоча гарантія, що запис буде успішним, далеко не близька до 100%, тому що банально можна висмикнути шнур живлення сервера, і запис не відбудеться. У цьому підході є суттєвий недолік: немає ніякої функціональності щодо отримання, агрегування та пошуку інформації на рівні файлів. Так, звичайно, можна вичитати файл, створити під нього об'єкти, але при цьому доведеться щоразу викачувати додаток всі дані. А їх може бути багато, наприклад пара гігабайт. Цього можна уникнути, якщо зберігати дані у БД. Яким чином? Через таблиці та відносини між ними. На цьому всі реляційні бази даних стоять. як Java-додаток зупиниться. Хоча гарантія, що запис буде успішним, далеко не близька до 100%, тому що банально можна висмикнути шнур живлення сервера, і запис не відбудеться. У цьому підході є суттєвий недолік: немає ніякої функціональності щодо отримання, агрегування та пошуку інформації на рівні файлів. Так, звичайно, можна вичитати файл, створити під нього об'єкти, але при цьому доведеться щоразу викачувати додаток всі дані. А їх може бути багато, наприклад пара гігабайт. Цього можна уникнути, якщо зберігати дані у БД. Яким чином? Через таблиці та відносини між ними. На цьому всі реляційні бази даних стоять. немає жодної функціональності з отримання, агрегування та пошуку інформації на рівні файлів. Так, звичайно, можна вичитати файл, створити під нього об'єкти, але при цьому доведеться щоразу викачувати додаток всі дані. А їх може бути багато, наприклад пара гігабайт. Цього можна уникнути, якщо зберігати дані у БД. Яким чином? Через таблиці та відносини між ними. На цьому всі реляційні бази даних стоять. немає жодної функціональності з отримання, агрегування та пошуку інформації на рівні файлів. Так, звичайно, можна вичитати файл, створити під нього об'єкти, але при цьому доведеться щоразу викачувати додаток всі дані. А їх може бути багато, наприклад пара гігабайт. Цього можна уникнути, якщо зберігати дані у БД. Яким чином? Через таблиці та відносини між ними. На цьому всі реляційні бази даних стоять.
<h2>SQL: мова, яку розуміють бази даних</h2>Існують Системи Управління Базами Даних (далі – СУБД) та мова, яку вони розуміють – SQL. SQL - мова програмування для маніпулювання та управління базами даних. Для розуміння, як це працює, подивимося на малюнок:<img data-max-width="800" data-id="c207fb5c-f0af-4175-a5e3-ca9108698563" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL - 3" src="https://cdn.javarush.com/images/article/c207fb5c-f0af-4175-a5e3-ca9108698563/800.jpeg" style="width: 800px;">Користувач надсилає SQL-запити в СУБД, СУБД розуміє, що потрібно зробити, робить це, і якщо запит був на отримання даних, то повертає їх. Тому нам як розробникам необхідно освоїти мову запитів SQL. Ви можете подумати: «О, ще одна мова. Я тут Java з божою допомогою ледве розумію, а ви мені ще одну мову відразу пропонуєте». Це не так: SQL був придуманий як мова-специфікація для СУБД так, щоб писати цією мовою могли бухгалтери, які дуже далекі від баз даних та програмування загалом. Це означає, що вивчити його буде не так вже й складно. Головне – ПРАКТИКА-ПРАКТИКА-ПРАКТИКА. Сьогодні буде теорія, але наступна стаття буде про практику. Так як реляційна база даних - це набір двовимірних-масивів-таблиць і відносини між ними, то і робота йтиме навколо них. Якщо говорити про приклад,<img data-max-width="512" data-id="1fa24117-1787-4c18-818e-4c3163faa95d" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL - 4" src="https://cdn.javarush.com/images/article/1fa24117-1787-4c18-818e-4c3163faa95d/512.jpeg" style="width: 512px;">Для нас на даному етапі важливо зрозуміти, що записи в таблиці – це дані про якийсь об'єкт із Java-світу. Наприклад, ці дві таблиці через Java можна описати так: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Country</span> <span class="token punctuation">{</span>
   <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">City</span> <span class="token punctuation">{</span>

   <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token class-name">Country</span> country<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token class-name">Integer</span> population<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre> Ну чи не краса, га? У базі даних може зберігатися скільки завгодно таблиць. У нашому випадку їх дві.
<h2>Структура таблиці</h2>Я думаю, що всі так чи інакше стикалися з excel-таблицями, і вам зрозумілі терміни <span class="text-bold">рядок</span> і <span class="text-bold">стовпець</span> . В рамках баз даних ми більше говоримо про записи та поля: <img data-max-width="512" data-id="1a8fef0a-353b-4f16-a8fd-9819dcb03712" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL - 5" src="https://cdn.javarush.com/images/article/1a8fef0a-353b-4f16-a8fd-9819dcb03712/512.jpeg" style="width: 512px;">Таким чином виходить, що кожен об'єкт класу City - це запис у таблиці в базі даних.
<h2>Первинний ключ</h2><img data-max-width="512" data-id="f58a3471-54fd-4fe8-a6d4-519fe324ed00" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL - 6" src="https://cdn.javarush.com/images/article/f58a3471-54fd-4fe8-a6d4-519fe324ed00/512.jpeg" style="width: 512px;">Часто буває так, що поля бази даних мають однакові значення. Наприклад, соцмережі, де на ім'я, прізвище і навіть по-батькові може знайтися більше однієї людини. А реляційні бази даних вимагають наявності унікального поля, яким можна було б отримати доступ до запису. Ось це і називається перший ключ або Primary Key. Зазвичай як такий ключ використовують поле ID(id) — скорочення від identifier. Саме тому до кожної таблиці потрібно додати поле <span class="text-bold">ID</span> .<img data-max-width="512" data-id="5c93584c-3f61-4f6d-94e7-4145ea6679d0" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL - 7" src="https://cdn.javarush.com/images/article/5c93584c-3f61-4f6d-94e7-4145ea6679d0/512.jpeg" style="width: 512px;">
<h2>Зовнішній ключ</h2>У прикладі таке поле є у таблиці City, яка використовує ключ від Country. І працює це так: кожне місто знає унікальний ідентифікатор інформації по своїй країні, і якщо взяти його та створити запит до БД, ми отримаємо вичерпну інформацію про країну. Як видно на картинці, є зв'язок між двома таблицями: <img data-max-width="512" data-id="c71c8084-2a78-41df-a397-b6d94e55d1ab" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL - 8" src="https://cdn.javarush.com/images/article/c71c8084-2a78-41df-a397-b6d94e55d1ab/512.jpeg" style="width: 512px;">Тут показаний принцип зовнішнього ключа.
<h2>Які розділи є в SQL</h2>На співбесідах, до речі, часто запитують, які операції є в SQL:
<ul>
 <li>DDL (Data Definition Language) — група операторів, що змінюють/створюють таблиці, їхню структуру та інше. Тобто створення таблиці, її видалення, створення/видалення полів у таблицях; створення нового первинного ключа тощо;</li>
 <li>DML (Data Manipulation Language) – група операторів, що управляють зміною даних. Це всі операції, які змінюють дані в БД: додавання, отримання, зміна та видалення;</li>
 <li>DCL (Data Control Language) – засоби підтвердження прав користувача на виконання дій. Операції з надання доступу та прав для конкретного користувача, щоб він міг виконувати DDL/DML операції.</li>
</ul><a href="https://codegym.cc/welcome" target="_blank"><img id="click_banner4_1_articles" data-max-width="1080" data-id="4d8a59b8-3b5b-480a-b034-328940cc2886" alt="“" src="https://cdn.javarush.com/images/article/4d8a59b8-3b5b-480a-b034-328940cc2886/1080.jpeg" style="width: 1080px;"></a>
<h2>Які типи даних є в SQL</h2>Таблиці можуть зберігати та обробляти певні типи даних. Тут буде все схоже на те, що ми використовуємо в Java. Поговоримо про основні. Їх всього три, інші вже будемо додавати за потребою та/або за бажанням: <img data-max-width="512" data-id="2781e8e1-b13d-4082-8f43-fad7021b1fb8" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL - 9" src="https://cdn.javarush.com/images/article/2781e8e1-b13d-4082-8f43-fad7021b1fb8/512.jpeg" style="width: 512px;">Як видно з картинки, це:
<ul>
 <li><span class="text-bold">INT</span> - Цілочисленні значення. Використовуються для унікального ідентифікатора і просто цілого числа;</li>
 <li><span class="text-bold">VARCHAR</span> - це наш <span class="text-bold">String</span> ;</li>
 <li><span class="text-bold">DATE</span> це наш LocalDate.</li>
</ul>Поки що все просто так? Типи полів задаються під час створення таблиці. Зрозуміло, що не можна буде записати у полі значення іншого типу.
<h2>Хто такі SQL оператори</h2>Оператор - це окрема команда, яка справляє якусь дію. Оператори складаються із пропозицій, ті, у свою чергу, із ключових слів, які використовуються у запитах. Подивимося на приклад: <img data-max-width="512" data-id="987795e8-470d-47d9-9574-a1ec6e01c249" alt="&quot;Java-проект від А до Я&quot;: розбираємо бази даних та мову SQL - 10" src="https://cdn.javarush.com/images/article/987795e8-470d-47d9-9574-a1ec6e01c249/512.jpeg" style="width: 512px;">Тут уже цікавіше, тут уже збудовано запит. Що там роблять? Все просто, там говориться: "Взяти три поля (Name, Age та CreatedDate) з таблиці Clients, вибрати тільки ті записи, де name дорівнює Roman".
<h2>Висновок</h2>У цій статті ми почали вивчати бази даних. Ми зрозуміли, що це таке, і навіщо воно нам. Далі пробіглися за першими ознаками SQL, про які детальніше поговоримо вже в наступній статті. Традиційно пропоную зареєструватися на GitHub і підписатися на <a href="https://github.com/romankh3" rel="nofollow" target="_blank">мій обліковий запис</a> , щоб стежити за цією серією та іншими моїми проектами, які я веду там.
<h2>Домашнє завдання</h2>Щоб додати інтерес до цієї серії статей на JRTB, час від часу будуть домашні завдання. Наприклад, без сьогоднішнього завдання наступну статтю вже значно складніше зрозуміти, адже там буде багато практики. Тому завдання: встановити СУБД MySQL собі на комп'ютер і увійти до бази даних чи через консоль, чи інші рішення. Дякую всім за прочитання, до швидких зустрічей! 
<h4><a href="https://codegym.cc/groups/posts/2935-java-proekt-ot-a-do-ja-pishem-realjhnihy-proekt-dlja-portfolio#articles" target="_blank">Список всіх матеріалів серії на початку цієї статті.</a></h4>