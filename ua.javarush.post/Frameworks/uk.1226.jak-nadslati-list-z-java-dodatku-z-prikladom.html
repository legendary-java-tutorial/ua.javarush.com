Як надіслати лист із Java-додатку (з прикладом)
<p>----------------------------------------</p>
Надсилання електронного повідомлення з Java-програми це поширена вимога. Не має значення чи працюєш ти над core Java-додатком, веб-додатком або enterprise Java-додатком, тобі може знадобиться відправити лист для оповіщення персоналу з тех.п
<p>----------------------------------------</p>
Надсилання електронного повідомлення з Java-програми це поширена вимога. Не має значення чи працюєш ти над core Java-додатком, веб-додатком або enterprise Java-додатком, тобі може знадобиться відправити лист для оповіщення персоналу з тех.підтримки про помилки, або просто відправити лист користувачам при реєстрації, відновити пароль або попросити їх підтвердити адресау електронної пошти після реєстрації. Є дуже багато сценаріїв, коли тобі потрібна можливість відправити електронні листи з Java-додатка. <img data-id="c5dc5ad4-191e-49aa-8b80-4bb15657aff3" data-max-width="850" alt="Як надіслати лист з Java-додатку (з прикладом) - 1" src="https://cdn.javarush.com/images/article/c5dc5ad4-191e-49aa-8b80-4bb15657aff3/800.jpeg" style="width: 850px;">У готових додатках у тебе вже є модуль або бібліотека, що працює з усіма функціями для надсилання електронних листів, наприклад, можливість відправляти вкладення, зображення, включаючи підписи та форматований текст в електронних листах, але якщо тобі потрібно написати щось з нуля, тоді<strong> Java Mail API</strong> це чудовий варіант. У цій статті ми навчимося як надсилати електронні листи з Java-програми, використовуючи поштовий API ( <strong>javax.mail</strong> ). Перед написанням коду ти повинен знати деякі основи роботи електронної пошти, наприклад, тобі потрібний <strong>сервер </strong><strong>SMTP</strong> (простий протокол передачі пошти) . Якщо ти запускаєш свій Java-додаток під Linux, тоді ти маєш знати, що <strong>SMTP демон</strong> (<strong></strong><strong></strong><em>прим. "комп'ютерна програма в системах класу UNIX, що запускається самою системою і працює у фоновому режимі без прямої взаємодії з користувачем")</em> використовує порт 25. Ти можеш використовувати будь-який поштовий сервер для відправки повідомлень застосовуючи Java, включаючи загальнодоступні поштові сервери, такі як GMail, Yahoo або будь-який інший постачальник послуг, все, що вам потрібно, це деталі їх <strong>SMTP сервера</strong> , наприклад, ім'я хоста, порт, параметри з'єднання і т.д. Також ти можеш використовувати <strong>SSL</strong> ( <em>англ. secure sockets layer — рівень захищених сокетів</em> ), <strong>TLS</strong> ( <em>англ. Transport Layer Security — безпека транспортного рівня)</em>) для безпечного з'єднання та відправлення листів, але цей приклад ми зробабо простим і сфокусувалися на мінімальній логіці для надсилання листа з Java-програми. У подальших статтях ми навчимося як надсилати лист використовуючи вкладення, як відправляти форматований за допомогою HTML лист, як прикріпити зображення в лист, використовувати SSL автентифікацію для з'єднання з сервером GMail і надсилання листів і т.д. А тепер, давай зрозуміємо (розберемо) цей простий приклад <strong>Java Mail API</strong> . 
<h2>Приклад Java-коду для надсилання електронного повідомлення</h2>Для надсилання листа з Java-програми тобі потрібні <strong>Java Mail API</strong> та <strong>Java Activation Framework (JAF)</strong> ; якщо точніше, то тобі знадобляться <em>mail-1.4.5.jar</em> , <em>smtp-1.4.4.jar</em> , і <em>activation-1.1.jar</em> . Тобі потрібно завантажити ці JAR файли та включити їх у твій <em>Classpath</em> для запуску цієї програми. В якості альтернативи ти можеш використовувати Maven для керування залежностями та увімкнути всі залежності там. Як тільки у тебе будуть всі ці JAR файли, просто слідуй крокам нижче для створення та надсилання електронного листа за допомогою Java. 
<ol>
 <li>
  <p>Створи об'єкт <code class=" language-none">Session</code>викликаючи <code class=" language-none">Session.getDefaultInstance(properties)</code>, де <code class=" language-none">properties</code>містить всі важливі властивості, наприклад, ім'я хоста SMTP сервера.</p></li>
 <li>
  <p>Створи об'єкт <code class=" language-none">MimeMessage</code>, передаючи йому об'єкт <code class=" language-none">Session</code>, отриманий на попередньому кроці. Ми маємо набір різних властивостей у цьому об'єкті, таких як одержувач листи, тема, тіло повідомлення, вкладення і т.д.</p></li>
 <li>
  <p>Використовуй <code class=" language-none">javax.mail.Transport</code>для надсилання листа викликаючи статичний метод <code class=" language-none">send(email)</code>, де email може бути об'єктом <code class=" language-none">MimeMessage</code>.</p></li>
</ol>Кількість властивостей, які ти передаєш для створення об'єкта, <code class=" language-none">Session</code>залежить від типу SMTP сервера, наприклад, якщо ти використовуєш SMTP сервер, який не вимагає жодної аутентифікації, ти можеш створити об'єкт <code class=" language-none">Session</code>тільки з однією властивістю, наприклад, smtp.mail.host, і тобі не потрібно вказувати порт, тому що він має порт 25 за промовчанням. З іншого боку, якщо ти підключаєшся до SMTP сервера, який вимагає TLS або SSL автентифікацію, наприклад, GMail's SMTP Host, тоді тобі потрібно надати трохи більше властивостей, наприклад, mail.smtp.port=547 для TLS та mail.smtp.port= 457 для SSL. Це закінчена Java-програма, яка з'єднується зі стандартним SMTP сервером без автентифікації та надсилає текстовий лист, використовуючи Java Mail API. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Properties</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">javax<span class="token punctuation"><span class="token punctuation">.</span></span>mail<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Message</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">javax<span class="token punctuation"><span class="token punctuation">.</span></span>mail<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">MessagingException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">javax<span class="token punctuation"><span class="token punctuation">.</span></span>mail<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Session</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">javax<span class="token punctuation"><span class="token punctuation">.</span></span>mail<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Transport</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">javax<span class="token punctuation"><span class="token punctuation">.</span></span>mail<span class="token punctuation"><span class="token punctuation">.</span></span>internet<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">InternetAddress</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">javax<span class="token punctuation"><span class="token punctuation">.</span></span>mail<span class="token punctuation"><span class="token punctuation">.</span></span>internet<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">MimeMessage</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">/**
* Java Program to send text mail using default SMTP server and without authentication.
* You need mail.jar, smtp.jar and activation.jar to run this program.
*
* @author Javin Paul
*/</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">EmailSender</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>
     <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> args<span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span>

           <span class="token class-name"><span class="token class-name">String</span></span> <span class="token keyword"><span class="token keyword">to</span></span> <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"receive@abc.om"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>         <span class="token comment"><span class="token comment">// sender email</span></span>
           <span class="token class-name"><span class="token class-name">String</span></span> from <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"sender@abc.com"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>       <span class="token comment"><span class="token comment">// receiver email</span></span>
           <span class="token class-name"><span class="token class-name">String</span></span> host <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"127.0.0.1"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>            <span class="token comment"><span class="token comment">// mail server host</span></span>

           <span class="token class-name"><span class="token class-name">Properties</span></span> properties <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getProperties</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
           properties<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"mail.smtp.host"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> host<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

           <span class="token class-name"><span class="token class-name">Session</span></span> session <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Session</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getDefaultInstance</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>properties<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// default session</span></span>

           <span class="token keyword"><span class="token keyword">try</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                <span class="token class-name"><span class="token class-name">MimeMessage</span></span> message <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">MimeMessage</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>session<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// email message</span></span>

                message<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setFrom</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">InternetAddress</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>from<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// setting header fields</span></span>

                message<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">addRecipient</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Message<span class="token punctuation"><span class="token punctuation">.</span></span>RecipientType</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>TO<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">InternetAddress</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">to</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

                message<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setSubject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Test Mail from Java Program"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token comment"><span class="token comment">// subject line</span></span>

                <span class="token comment"><span class="token comment">// actual mail body</span></span>
                message<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setText</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"You can send mail from Java program by using mail API, but you need"</span></span> <span class="token operator"><span class="token operator">+</span></span>
                                <span class="token string"><span class="token string">"couple of more JAR files e.g. smtp.jar and activation.jar"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

                <span class="token comment"><span class="token comment">// Send message</span></span>
                <span class="token class-name"><span class="token class-name">Transport</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">send</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>message<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Email Sent successfully...."</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
               <span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">catch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">MessagingException</span></span> mex<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">{</span></span> mex<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">printStackTrace</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> <span class="token punctuation"><span class="token punctuation">}</span></span>

     <span class="token punctuation"><span class="token punctuation">}</span></span>

<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre><strong>На виході :</strong> Ти можеш скомпілювати та запустити цю програму для надсилання простого електронного листа з Java-програми: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java">$ javac <span class="token class-name"><span class="token class-name">EmailSender</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java
$ java <span class="token class-name"><span class="token class-name">EmailSender</span></span></code></pre> Sent email successfully.... Як ти можеш бачити, дуже просто надсилати листи з Java-програми. Як тільки ти створив об'єкт <code class=" language-none">MimeMessage</code>, тобі потрібно додати одержувачів, які можуть бути вказані в полях <code class=" language-none">TO</code>, <code class=" language-none">CC</code>, <code class=" language-none">BCC</code>. Завершивши з одержувачами потрібно вказати тему листа, і, нарешті, сам зміст листа викликавши метод <code class=" language-none">message.setText()</code>; Якщо ти хочеш зробити множинну розсилку, тоді наступний метод може бути використаний для вказівки одержувачів: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">addRecipients</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Message<span class="token punctuation"><span class="token punctuation">.</span></span>RecipientType</span></span> type<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">Address</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> addresses<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">throws</span></span> <span class="token class-name"><span class="token class-name">MessagingException</span></span></code></pre> Ти можеш додати людей у ​​поле <code class=" language-none">TO</code>використовуючи <code class=" language-none">Message.RecipientType.TO</code>, в поле <code class=" language-none">CC</code>використовуючи <code class=" language-none">Message.RecipientType.CC</code>, і в <code class=" language-none">BCC</code>- <code class=" language-none">Message.RecipientType.BCC</code>. 
<h2>Помилки та винятки</h2>Коли багато Java-програмістів вперше починають писати програму для надсилання електронного листа, вони натикаються на помилку, тому що більшість з них думає, що mail.jar і activation.jar буде достатньо для відправки листа з Java-додатка, що не так, особливо якщо ти відправляєш имейл через локальний SMTP сервер у Linux. Якщо ти запускаєш цю програму тільки з mail.jar та activation.jar у твоєму CLASSPATH, ти найімовірніше отримаєш цю помилку. 
<h2>Exception 1:</h2>
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>sun<span class="token punctuation"><span class="token punctuation">.</span></span>mail<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>MailConnectException</span></span><span class="token operator"><span class="token operator">:</span></span> <span class="token class-name"><span class="token class-name">Couldn</span></span>'t connect <span class="token keyword"><span class="token keyword">to</span></span> <span class="token namespace"><span class="token namespace">host</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> port<span class="token operator"><span class="token operator">:</span></span> localhost<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">25</span></span><span class="token punctuation"><span class="token punctuation">;</span></span> timeout <span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        nested exception is<span class="token operator"><span class="token operator">:</span></span>
            <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>net<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>ConnectException</span></span><span class="token operator"><span class="token operator">:</span></span> <span class="token class-name"><span class="token class-name">Connection</span></span> refused<span class="token operator"><span class="token operator">:</span></span> connect
            at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>sun<span class="token punctuation"><span class="token punctuation">.</span></span>mail<span class="token punctuation"><span class="token punctuation">.</span></span>smtp<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>SMTPTransport</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">openServer</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">SMTPTransport</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">1984</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
            at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>sun<span class="token punctuation"><span class="token punctuation">.</span></span>mail<span class="token punctuation"><span class="token punctuation">.</span></span>smtp<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>SMTPTransport</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">protocolConnect</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">SMTPTransport</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">656</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
            at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">javax<span class="token punctuation"><span class="token punctuation">.</span></span>mail<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>Service</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">connect</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Service</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">345</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
            at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">javax<span class="token punctuation"><span class="token punctuation">.</span></span>mail<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>Service</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">connect</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Service</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">226</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
            at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">javax<span class="token punctuation"><span class="token punctuation">.</span></span>mail<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>Service</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">connect</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Service</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">175</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
            at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">javax<span class="token punctuation"><span class="token punctuation">.</span></span>mail<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>Transport</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">send0</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Transport</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">253</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
            at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">javax<span class="token punctuation"><span class="token punctuation">.</span></span>mail<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>Transport</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">send</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Transport</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">124</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
            at <span class="token class-name"><span class="token class-name">Testing</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Testing</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">62</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
        <span class="token class-name"><span class="token class-name">Caused</span></span> by<span class="token operator"><span class="token operator">:</span></span> <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>net<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>ConnectException</span></span><span class="token operator"><span class="token operator">:</span></span> <span class="token class-name"><span class="token class-name">Connection</span></span> refused<span class="token operator"><span class="token operator">:</span></span> connect
            at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>net<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>DualStackPlainSocketImpl</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">connect0</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Native</span></span> <span class="token class-name"><span class="token class-name">Method</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
            at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>net<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>DualStackPlainSocketImpl</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">socketConnect</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">DualStackPlainSocketImpl</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">79</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
            at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>net<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>AbstractPlainSocketImpl</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">doConnect</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">AbstractPlainSocketImpl</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">339</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
            at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>net<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>AbstractPlainSocketImpl</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">connectToAddress</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">AbstractPlainSocketImpl</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">200</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
            at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>net<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>AbstractPlainSocketImpl</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">connect</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">AbstractPlainSocketImpl</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">182</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
            at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>net<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>PlainSocketImpl</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">connect</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">PlainSocketImpl</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">172</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
            at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>net<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>SocksSocketImpl</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">connect</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">SocksSocketImpl</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">392</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
            at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>net<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>Socket</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">connect</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Socket</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">579</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>net<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>Socket</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">connect</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Socket</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">528</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
            at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>sun<span class="token punctuation"><span class="token punctuation">.</span></span>mail<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>SocketFetcher</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">createSocket</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">SocketFetcher</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">301</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
            at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>sun<span class="token punctuation"><span class="token punctuation">.</span></span>mail<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>SocketFetcher</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getSocket</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">SocketFetcher</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">229</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
            at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>sun<span class="token punctuation"><span class="token punctuation">.</span></span>mail<span class="token punctuation"><span class="token punctuation">.</span></span>smtp<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>SMTPTransport</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">openServer</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">SMTPTransport</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">1950</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
       <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token punctuation"><span class="token punctuation">.</span></span> <span class="token number"><span class="token number">7</span></span> more</code></pre> Хоча рішення цієї помилки дуже просте, вона може заплутати вас. <code class=" language-none">java.net.ConnectException: Connection refused: connect</code>зазвичай вилітає, коли не працює сервер або невірно вказаний порт, яким ти з'єднуєшся. <strong>Рішення:</strong> крім mail-1.4.5.jar, тобі так само потрібні smtp-1.4.4.jar та activation-1.1.jar. 
<h2>Exception 2:</h2>Це інша помилка, яка називається <code class=" language-none">NoClassDefFoundError</code>, яка зазвичай відноситься до відсутнього JAR файлу в Classpath 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">Exception</span></span> in thread <span class="token string"><span class="token string">"main"</span></span> <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>lang<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>NoClassDefFoundError</span></span><span class="token operator"><span class="token operator">:</span></span> javax<span class="token operator"><span class="token operator">/</span></span>mail<span class="token operator"><span class="token operator">/</span></span><span class="token class-name"><span class="token class-name">MessagingException</span></span>
           at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>lang<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>Class</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getDeclaredMethods0</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Native</span></span> <span class="token class-name"><span class="token class-name">Method</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
           at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>lang<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>Class</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">privateGetDeclaredMethods</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Class</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">2521</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
           at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>lang<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>Class</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getMethod0</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Class</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">2764</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
           at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>lang<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>Class</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getMethod</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Class</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">1653</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
           at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">sun<span class="token punctuation"><span class="token punctuation">.</span></span>launcher<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>LauncherHelper</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getMainMethod</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">LauncherHelper</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">494</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
           at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">sun<span class="token punctuation"><span class="token punctuation">.</span></span>launcher<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>LauncherHelper</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">checkAndLoadMain</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">LauncherHelper</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">486</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
<span class="token class-name"><span class="token class-name">Caused</span></span> by<span class="token operator"><span class="token operator">:</span></span> <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>lang<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>ClassNotFoundException</span></span><span class="token operator"><span class="token operator">:</span></span> <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">javax<span class="token punctuation"><span class="token punctuation">.</span></span>mail<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>MessagingException</span></span>
           at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>net<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>URLClassLoader</span></span>$<span class="token number"><span class="token number">1.</span></span><span class="token function"><span class="token function">run</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">URLClassLoader</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">366</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
           at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>net<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>URLClassLoader</span></span>$<span class="token number"><span class="token number">1.</span></span><span class="token function"><span class="token function">run</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">URLClassLoader</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">355</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
           at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>security<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>AccessController</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">doPrivileged</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Native</span></span> <span class="token class-name"><span class="token class-name">Method</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
           at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>net<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>URLClassLoader</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">findClass</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">URLClassLoader</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">354</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
           at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>lang<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>ClassLoader</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">loadClass</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">ClassLoader</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">424</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
           at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">sun<span class="token punctuation"><span class="token punctuation">.</span></span>misc<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>Launcher</span></span>$<span class="token class-name"><span class="token class-name">AppClassLoader</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">loadClass</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Launcher</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">308</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
           at <span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>lang<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>ClassLoader</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">loadClass</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">ClassLoader</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>java<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">357</span></span><span class="token punctuation"><span class="token punctuation">)</span></span></code></pre><strong>Рішення:</strong> Мені вдалося вирішити мою проблему, вона сталася через некоректний Classpath. Незважаючи на те, що у мене були всі три необхідні JAR, файл Java класу для програми в одній директорії і я запускав програму звідти, Java не змогла цього зрозуміти. Я спробував запровадити наступні команди і програма чудово заробила: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java">java <span class="token operator"><span class="token operator">-</span></span>cp mail<span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">1.4</span></span><span class="token number"><span class="token number">.5</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>jar<span class="token operator"><span class="token operator">:</span></span>smtp<span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">1.4</span></span><span class="token number"><span class="token number">.4</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>jar<span class="token operator"><span class="token operator">:</span></span>activation<span class="token operator"><span class="token operator">-</span></span><span class="token number"><span class="token number">1.1</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>jar<span class="token operator"><span class="token operator">:</span></span><span class="token punctuation"><span class="token punctuation">.</span></span> <span class="token class-name"><span class="token class-name">JavaMailSender</span></span></code></pre> Sent email successfully.... Будь ласка, зверніть увагу, що поточна директорія відзначена точкою в кінці аргументу Classpath. Так як я запускав програму в Linux, я використовував двокрапку (:) замість крапки з комою (;) (як у Windows). Ось і все про те, як відправити імейл із Java-додатку використовуючи поштове API. Тобі може здатися це дуже простим, тому що не потрібно нічого більше, окрім трьох JAR файлів. Набагато простіше, якщо ти використовуєш Gradle чи Maven для керування залежностями. У наступних туторіалах ми побачимо складніші приклади Java Mail API для надсилання листів із вкладеннями, з картинками та красиво відформатованих листів для надсилання звітів та таблиць. Переклад статті: <a href="https://javarevisited.blogspot.com/2014/08/how-to-send-email-from-java-program-example.html" rel="nofollow" target="_blank">How to Send Email from Java Program with Example</a>