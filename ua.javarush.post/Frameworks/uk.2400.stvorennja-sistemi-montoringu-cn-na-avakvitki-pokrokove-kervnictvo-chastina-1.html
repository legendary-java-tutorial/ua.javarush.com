Створення системи моніторингу цін на авіаквитки: покрокове керівництво [Частина 1]
<p>----------------------------------------</p>
Всім привіт, JavaRush спільнота! Сьогодні поговоримо про те, як крок за кроком написати Spring Boot додаток для моніторингу цін на авіаквитки. Стаття розрахована на людей, які мають уявлення про: Очікувана поведінка: Почати потрібно з того,
<p>----------------------------------------</p>
<h3>Зміст:</h3>
<ul>
 <li><a href="https://codegym.cc/groups/posts/2400#topic1">План дій для досягнення мети</a></li>
 <li><a href="https://codegym.cc/groups/posts/2400#topic2">Досліджуємо Skyscanner API</a></li>
 <li><a href="https://codegym.cc/groups/posts/2400#topic3">Створюємо каркас програми на основі Spring Boot</a></li>
 <li><a href="https://codegym.cc/groups/posts/2400#topic4">Пишемо у проекті клієнт для запитів на Skyscanner Flight Search API</a></li>
 <li><a href="https://codegym.cc/groups/posts/2400#topic5">Створюємо клієнт сервіс для Localisation запиту</a></li>
</ul><img data-id="42e72fa6-7024-4b85-9ea2-a3129b5b75bf" data-max-width="850" alt="Створення системи моніторингу цін на авіаквитки: покрокове керівництво [Частина 1] - 1" src="https://cdn.javarush.com/images/article/42e72fa6-7024-4b85-9ea2-a3129b5b75bf/800.jpeg" style="width: 850px;">Всім привіт, CodeGym спільнота! Сьогодні поговоримо про те, як крок за кроком написати Spring Boot додаток для моніторингу цін на авіаквитки. Стаття розрахована на людей, які мають уявлення про: 
<ul>
 <li>REST і те, як будуються REST ендпоінти;</li>
 <li>реляційних баз даних;</li>
 <li>роботі maven (зокрема, що таке dependency-залежність);</li>
 <li>JSON об'єкт;</li>
 <li>принципи логування.</li>
</ul>Очікувана поведінка: 
<ol>
 <li>Можна вибрати переліт на дату і відстежувати ціну на нього. Користувач ідентифікується за email-адресаою. Як тільки оформляється підписка на зміну ціни, користувач отримує повідомлення на пошту.</li>
 <li>Кожні 30 хвабон (це проміжок налаштовується через application.properties) перераховується мінімальна ціна за переліт для всіх підписок. Якщо якась стала нижчою, користувач отримає повідомлення на пошту.</li>
 <li>Усі передплати зі застарілою датою перельоту видаляються.</li>
 <li>Через REST API можна: 
  <ul>
   <li>створити передплату;</li>
   <li>редагувати;</li>
   <li>отримати всі передплати по email;</li>
   <li>видалити передплату.</li>
  </ul></li>
</ol>
<h2 id="topic1">План дій для досягнення мети</h2>Почати потрібно з того, що інформацію про перельоти потрібно звідкись брати. Зазвичай сайти надають відкритий API REST, за допомогою якого можна отримати інформацію. 
<div class="table-container">
 <table class="table table--striped">
  <tbody>
   <tr>
    <td>
     <p>API (application programming interface) - це інтерфейс, за допомогою якого можна взаємодіяти з програмою. З цього можна перекинути місток на те, що таке REST API.</p>
     <p>REST API — це інтерфейс із REST запитів, за допомогою якого можна спілкуватися з веб-програмою.</p></td>
   </tr>
  </tbody>
 </table>
</div>Для цього будемо використовувати <a href="https://www.skyscanner.com/" rel="nofollow" target="_blank">Skyscanner</a> , а точніше, API (на сайті <a href="https://english.api.rakuten.net/skyscanner/api/skyscanner-flight-search/endpoints" rel="nofollow" target="_blank">Rakuten API</a> ). Далі потрібно вибрати правильну framework як базовий фундамент. Найпопулярніший і найпопулярніший - це екосистема Spring і вінець їх творіння - Spring Boot. Можна зайти на їх сайт, а можна прочитати <a href="https://habr.com/ru/post/435144/" rel="nofollow" target="_blank">статейку на хабрі</a> . Щоб зберігати підписки користувачів будемо використовувати вбудовану базу даних <a href="https://www.h2database.com/html/main.html" rel="nofollow" target="_blank">H2</a> . Для читання з JSON до класів і назад будемо використовувати Jackson Project ( <a href="https://codegym.cc/groups/posts/579-vvedenie-v-jackson-framework" target="_blank">ось і посилання на нашому ресурсі</a> ). Для передачі повідомлень користувачам використовуватимемо <strong>spring-boot-starter-mail</strong> Для того, щоб у додатку із заданою періодичністю виконувався перерахунок мінімальної ціни, будемо використовувати<strong>Spring Scheduler</strong> . Для створення REST API будемо використовувати <strong>spring-boot-starter-web</strong> . Щоб не писати <a href="https://habr.com/ru/post/142356/" rel="nofollow" target="_blank">borrowed code</a> (гетери, сеттери, перевизначати equals and hashcode, toString() для об'єктів), будемо використовувати <a href="https://projectlombok.org/" rel="nofollow" target="_blank">Project Lombok</a> . Щоб помацати та подивитися REST API, скористаємося Swagger 2 і одразу Swagger UI (user interface) для відстеження в режимі реального часу. Ось як це виглядає зараз: <img data-id="399cf843-5869-4abc-8375-bdc24c2fa1f6" data-max-width="850" alt="Створення системи моніторингу цін на авіаквитки: покрокове керівництво [Частина 1] - 2" src="https://cdn.javarush.com/images/article/399cf843-5869-4abc-8375-bdc24c2fa1f6/800.jpeg" style="width: 850px;">де є 4 rest запити, які відповідають створенню, редагування, отримання та видалення передплат. 
<h2 id="topic2">Досліджуємо Skyscanner API</h2>Перейдемо за посиланням на <a href="https://english.api.rakuten.net/" rel="nofollow" target="_blank">rakuten api</a> . Спочатку потрібно зареєструватися <img data-id="accebe0a-9540-4c0c-9dd1-191ca5c1be20" data-max-width="850" alt="Створення системи моніторингу цін на авіаквитки: покрокове керівництво [Частина 1] - 3" src="https://cdn.javarush.com/images/article/accebe0a-9540-4c0c-9dd1-191ca5c1be20/800.jpeg" style="width: 850px;">Все це потрібно, щоб отримати унікальний ключ до використання їх сайту та робити запити на публічні API, які викладені на ньому. Один з таких api і є потрібний нам <a href="https://english.api.rakuten.net/skyscanner/api/skyscanner-flight-search" rel="nofollow" target="_blank">Skyscanner Flight Search</a> . Тепер розберемося як це працює. Знайдемо запит GET List Places. На малюнку показано, що потрібно заповнити дані і почати <strong>Test Endpoint</strong> , в результаті чого отримуємо відповідь у вигляді об'єкта JSON праворуч: <img data-id="52997b32-0383-4688-9b95-d432e8fc226f" data-max-width="1024" alt="Створення системи моніторингу цін на авіаквитки: покрокове керівництво [Частина 1] - 4" src="https://cdn.javarush.com/images/article/52997b32-0383-4688-9b95-d432e8fc226f/1024.jpeg" style="width: 1024px;">причому запит буде створюватися так: 
<pre class=" language-none" tabindex="0"><code class=" language-none">
https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com/apiservices/autosuggest/v1.0/{country}/{currency}/{locale}/?query={query}</code></pre> і всі параметри будуть підставлені до цієї формули, отримаємо: 
<pre class=" language-none" tabindex="0"><code class=" language-none">
https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com/apiservices/autosuggest/v1.0/UK/GBP/en-GB/?query=Stockholm</code></pre> і до цих запитів будуть передаватися два заголовки: 
<pre class=" language-none" tabindex="0"><code class=" language-none">
.header("x-rapidapi-host", "skyscanner-skyscanner-flight-search-v1.p.rapidapi.com")
.header("x-rapidapi-key", "sing-up-for-key"),</code></pre> де <code class=" language-none">sign-up-for-key</code>видається після реєстрації. Нам для відстеження падіння ціни буде потрібен <strong>Browse Quotes</strong> ендпоінт. Знайдіть його самі :) <a href="https://codegym.cc/welcome" target="_blank"><img id="click_banner1_articles" data-id="87bb06cf-9f63-4113-8496-417001e94fd8" data-max-width="1080" alt="Створення системи моніторингу цін на авіаквитки: покрокове керівництво [Частина 1] - 5" src="https://cdn.javarush.com/images/article/87bb06cf-9f63-4113-8496-417001e94fd8/1080.jpeg" style="width: 1080px;"></a>
<h2 id="topic3">Створюємо каркас програми на основі Spring Boot</h2>Щоб швидко та зручно створити проект зі Spring Boot, можна скористатися <a href="https://start.spring.io/" rel="nofollow" target="_blank">Spring Initializr</a> . Вибираємо наступні опції: 
<ol>
 <li>Maven project</li>
 <li>Java</li>
 <li>2.1.10</li>
 <li>group - який вважаєте за потрібне, наприклад com.codegym</li>
 <li>artifact — так само, наприклад flights-monitoring</li>
 <li>у пошуку dependency шукаємо такі: 
  <ul>
   <li>Spring Web</li>
   <li>Java Mail Sender</li>
   <li>Spring Data Jpa</li>
   <li>H2 Database</li>
  </ul></li>
</ol>І далі натискаємо <strong>Generate</strong> . Все: готовий проект завантажується як архів. Якщо щось не вийде, можна скористатися посиланням, де я <a href="https://start.spring.io/#!type=maven-project&amp;language=java&amp;platformVersion=2.1.10.RELEASE&amp;packaging=jar&amp;jvmVersion=1.8&amp;groupId=com.codegym&amp;artifactId=flights-monitoring&amp;name=flights-monitoring&amp;description=Demo%20project%20for%20Spring%20Boot&amp;packageName=com.codegym.flights-monitoring&amp;dependencies=web,mail,data-jpa,h2" rel="nofollow" target="_blank">зберіг потрібний проект</a> . Звичайно, краще самому це зробити і зрозуміти, як це працює. Додаток складатиметься з трьох шарів: 
<ul>
 <li>CONTROLLER – вхід до програми. Тут буде описано REST API</li>
 <li>SERVICE – шар бізнес-логіки. Вся логіка роботи додаток буде описано тут.</li>
 <li>REPOSITORY – шар роботи з базою даних.</li>
</ul>Також окремим пакетом будуть лежати класи, що належать до клієнта для Skyscanner Flight Search API. 
<h2 id="topic4">Пишемо у проекті клієнт для запитів на Skyscanner Flight Search API</h2>Skyscanner люб'язно надали <a href="https://rapidapi.com/blog/skyscanner-api-overview/java/" rel="nofollow" target="_blank">статтю</a> на тему, як користуватися їх API (ми не будемо створювати сесію з активним запитом). Що означає "писати клієнт"? Нам потрібно створити запит на певну URL-адресау з певними параметрами та заготовити DTO (data transfer object) для даних, що передаються назад до нас. На сайті є чотири групи запитів: 
<ol>
 <li>Live Flight Search - не будемо розглядати як непотрібний на даний момент.</li>
 <li>Places – напишемо.</li>
 <li>Browse Flight Prices – скористаємося одним запитом, де можна взяти всю інформацію.</li>
 <li>Localisation - додамо його, що знати які підтримуються дані.</li>
</ol>
<h2 id="topic5">Створюємо клієнт сервіс для Localisation запиту:</h2>План простий як парена ріпа: створюємо запит, дивимося які параметри, дивимося, яка відповідь. Там два запити List markers та Currencies. Почнемо з Currencies. На малюнку видно, що це запит без додаткових полів: він потрібен, щоб отримати інформацію про підтримувані валюти: <img data-id="7b7d5113-12b9-4708-8647-9f4de7d3a35c" data-max-width="1024" alt="Створення системи моніторингу цін на авіаквитки: покрокове керівництво [Частина 1] - 6" src="https://cdn.javarush.com/images/article/7b7d5113-12b9-4708-8647-9f4de7d3a35c/1024.jpeg" style="width: 1024px;">Відповідь у вигляді об'єкта JSON, в якому колекція одних і тих же об'єктів, наприклад: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token punctuation"><span class="token punctuation">{</span></span>
<span class="token string"><span class="token string">"Code"</span></span><span class="token operator"><span class="token operator">:</span></span><span class="token string"><span class="token string">"LYD"</span></span>
<span class="token string"><span class="token string">"Symbol"</span></span><span class="token operator"><span class="token operator">:</span></span><span class="token string"><span class="token string">"د.ل.‏"</span></span>
<span class="token string"><span class="token string">"ThousandsSeparator"</span></span><span class="token operator"><span class="token operator">:</span></span><span class="token string"><span class="token string">","</span></span>
<span class="token string"><span class="token string">"DecimalSeparator"</span></span><span class="token operator"><span class="token operator">:</span></span><span class="token string"><span class="token string">"."</span></span>
<span class="token string"><span class="token string">"SymbolOnLeft"</span></span><span class="token operator"><span class="token operator">:</span></span><span class="token boolean"><span class="token boolean">true</span></span>
<span class="token string"><span class="token string">"SpaceBetweenAmountAndSymbol"</span></span><span class="token operator"><span class="token operator">:</span></span><span class="token boolean"><span class="token boolean">false</span></span>
<span class="token string"><span class="token string">"RoundingCoefficient"</span></span><span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">0</span></span>
<span class="token string"><span class="token string">"DecimalDigits"</span></span><span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">3</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Створимо CurrencyDto для цього об'єкта: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>fasterxml<span class="token punctuation"><span class="token punctuation">.</span></span>jackson<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">lombok<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Data</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">/**
* Data transfer object for Currency.
*/</span></span>
<span class="token annotation punctuation"><span class="token annotation punctuation">@Data</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">CurrencyDto</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Code"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> code<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Symbol"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> symbol<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"ThousandsSeparator"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> thousandsSeparator<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"DecimalSeparator"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> decimalSeparator<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"SymbolOnLeft"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">boolean</span></span> symbolOnLeft<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"SpaceBetweenAmountAndSymbol"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">boolean</span></span> spaceBetweenAmountAndSymbol<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"RoundingCoefficient"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">int</span></span> roundingCoefficient<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"DecimalDigits"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">int</span></span> decimalDigits<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Де: 
<ul>
 <li>@Data - анотація з <a href="https://projectlombok.org/features/Data" rel="nofollow" target="_blank">Lombok проекту</a> і генерує всі гетери, сетери, перевизначає toString(), equals() та hashCode() методи. Чим покращує читабельність коду та прискорює час написання <a href="https://ru.wikipedia.org/wiki/POJO" rel="nofollow" target="_blank">POJO</a> об'єктів;</li>
 <li>@JsonProperty("Code") - це інструкція з Jackson Project, яка говорить, яке поле буде присвоюватися цій змінній. Тобто поле в JSON, що дорівнює Code, присвоюватиметься змінній <strong>code</strong> .</li>
</ul>Офіційна <a href="https://blog.rapidapi.com/skyscanner-api-overview/java/" rel="nofollow" target="_blank">стаття від Skyscanner</a> пропонує використовувати для REST запитів бібліотеку <strong>UniRest</strong> . Тому напишемо ще один сервіс, який реалізовуватиме запити через REST. Це буде <strong>UniRestService</strong> . Для цього додамо в maven нову залежність: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>dependency<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
  <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>groupId<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>com<span class="token punctuation"><span class="token punctuation">.</span></span>mashape<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>groupId<span class="token operator"><span class="token operator">&gt;</span></span>
  <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>artifactId<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>unirest<span class="token operator"><span class="token operator">-</span></span>java<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>artifactId<span class="token operator"><span class="token operator">&gt;</span></span>
  <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>version<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token number"><span class="token number">1.4</span></span><span class="token number"><span class="token number">.9</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>version<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>dependency<span class="token operator"><span class="token operator">&gt;</span></span></code></pre> Далі напишемо сервіс, який виконуватиме REST запити. Зрозуміло, для кожного клієнта/сервісу ми будемо створювати interface та його реалізацію: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>mashape<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token punctuation"><span class="token punctuation">.</span></span>http<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">HttpResponse</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>mashape<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token punctuation"><span class="token punctuation">.</span></span>http<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">JsonNode</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">/**
* Service, which is manipulating with Rest calls.
*/</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">UniRestService</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token comment"><span class="token comment">/**
   * Create GET request based on provided {@param path} with needed headers.
   *
   * @param path provided path with all the needed data
   * @return {@link HttpResponse&lt;jsonnode&gt;} response object.
   */</span></span>
   <span class="token class-name"><span class="token class-name">HttpResponse</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>jsonnode<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> path<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> І його реалізація: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>exception<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">FlightClientException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>service<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UniRestService</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>mashape<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token punctuation"><span class="token punctuation">.</span></span>http<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">HttpResponse</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>mashape<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token punctuation"><span class="token punctuation">.</span></span>http<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">JsonNode</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>mashape<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token punctuation"><span class="token punctuation">.</span></span>http<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Unirest</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>mashape<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token punctuation"><span class="token punctuation">.</span></span>http<span class="token punctuation"><span class="token punctuation">.</span></span>exceptions<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UnirestException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">lombok<span class="token punctuation"><span class="token punctuation">.</span></span>extern<span class="token punctuation"><span class="token punctuation">.</span></span>slf4j<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Slf4j</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>beans<span class="token punctuation"><span class="token punctuation">.</span></span>factory<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Value</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>stereotype<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Service</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">/**
* {@inheritDoc}
*/</span></span>
<span class="token annotation punctuation"><span class="token annotation punctuation">@Slf4j</span></span>
<span class="token annotation punctuation"><span class="token annotation punctuation">@Service</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">UniRestServiceImpl</span></span> <span class="token keyword"><span class="token keyword">implements</span></span> <span class="token class-name"><span class="token class-name">UniRestService</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> HOST <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> PLACES_FORMAT <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"/apiservices/autosuggest/v1.0/%s/%s/%s/?query=%s"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> CURRENCIES_FORMAT <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"/apiservices/reference/v1.0/currencies"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> COUNTRIES_FORMAT <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"/apiservices/reference/v1.0/countries/%s"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> PLACES_KEY <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Places"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> CURRENCIES_KEY <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Currencies"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> COUNTRIES_KEY <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Countries"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@Value</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"${x.rapid.api.key}"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> xRapidApiKey<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token comment"><span class="token comment">/**
    * {@inheritDoc}
    */</span></span>
   <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">HttpResponse</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>jsonnode<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> path<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token class-name"><span class="token class-name">HttpResponse</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>jsonnode<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> response <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token keyword"><span class="token keyword">try</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
           response <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Unirest</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>HOST <span class="token operator"><span class="token operator">+</span></span> path<span class="token punctuation"><span class="token punctuation">)</span></span>
                   <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">header</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"x-rapidapi-host"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"skyscanner-skyscanner-flight-search-v1.p.rapidapi.com"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
                   <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">header</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"x-rapidapi-key"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> xRapidApiKey<span class="token punctuation"><span class="token punctuation">)</span></span>
                   <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">asJson</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">catch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">UnirestException</span></span> e<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
           <span class="token keyword"><span class="token keyword">throw</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">FlightClientException</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">format</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Request failed, path=%s"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> HOST <span class="token operator"><span class="token operator">+</span></span> path<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> e<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span>

       log<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">info</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Response from Get request, on path={}, statusCode={}, response={}"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> path<span class="token punctuation"><span class="token punctuation">,</span></span> response<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getStatus</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> response<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getBody</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">toString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> response<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Суть його в тому, що всі запити, що нас цікавлять, створюються для GET реквестів, і цей сервіс приймає вже готовий сформований запит, додає йому необхідні заголовки виду: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">header</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"x-rapidapi-host"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"skyscanner-skyscanner-flight-search-v1.p.rapidapi.com"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">header</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"x-rapidapi-key"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> xRapidApiKey<span class="token punctuation"><span class="token punctuation">)</span></span></code></pre> Щоб взяти дані з пропертей, використовується інструкція @Value, як показано нижче: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token annotation punctuation"><span class="token annotation punctuation">@Value</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"${x.rapid.api.key}"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
<span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> xRapidApiKey<span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Вона говорить про те, що application.properties лежатиме проперти з ім'ям x.rapid.api.key, яку потрібно ін'єктувати в цю змінну. Ми позбавляємося захардкоджених значень та виводимо визначення цієї змінної з програмного коду. Більш того, коли я публікую цю програму на GitHub я не додаю значення цієї проперті. Це робиться з міркувань безпеки. Написали сервіс, який працюватиме із REST запитами, тепер настав час сервісу для Localisation. Ми ж будуємо додаток виходячи з ООП, тому створюємо інтерфейс <strong>LocalisationClient</strong> та його реалізацію <strong>LocalisationClientImpl</strong> : 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>dto<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">CountryDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>dto<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">CurrencyDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>io<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">IOException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">/**
* Client for SkyScanner localisation.
*/</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">LocalisationClient</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token comment"><span class="token comment">/**
    * Retrieve the market countries that SkyScanner flight search API support. Most suppliers (airlines,
    * travel agents and car hire dealers) set their fares based on the market (or country of purchase).
    * It is therefore necessary to specify the market country in every query.
    *
    * @param locale locale of the response.
    *
    * @return the collection of the {@link CountryDto} objects.
    *
    * @throws IOException
    */</span></span>
   <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">CountryDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">retrieveCountries</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> locale<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token comment"><span class="token comment">/**
    * Retrieve the currencies that we ScyScanner flight search API.
    *
    * @return the collection of the {@link CurrencyDto} objects.
    *
    * @throws IOException
    */</span></span>
   <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">CurrencyDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">retrieveCurrencies</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> та реалізація LocalisationClientImpl 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>service<span class="token punctuation"><span class="token punctuation">.</span></span>impl<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UniRestServiceImpl</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>COUNTRIES_FORMAT<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>service<span class="token punctuation"><span class="token punctuation">.</span></span>impl<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UniRestServiceImpl</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>COUNTRIES_KEY<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>service<span class="token punctuation"><span class="token punctuation">.</span></span>impl<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UniRestServiceImpl</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>CURRENCIES_FORMAT<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>service<span class="token punctuation"><span class="token punctuation">.</span></span>impl<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UniRestServiceImpl</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>CURRENCIES_KEY<span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>fasterxml<span class="token punctuation"><span class="token punctuation">.</span></span>jackson<span class="token punctuation"><span class="token punctuation">.</span></span>core<span class="token punctuation"><span class="token punctuation">.</span></span>type<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">TypeReference</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>fasterxml<span class="token punctuation"><span class="token punctuation">.</span></span>jackson<span class="token punctuation"><span class="token punctuation">.</span></span>databind<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">ObjectMapper</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>dto<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">CountryDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>dto<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">CurrencyDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>service<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">LocalisationClient</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>service<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UniRestService</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>mashape<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token punctuation"><span class="token punctuation">.</span></span>http<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">HttpResponse</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>mashape<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token punctuation"><span class="token punctuation">.</span></span>http<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">JsonNode</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>mashape<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token punctuation"><span class="token punctuation">.</span></span>http<span class="token punctuation"><span class="token punctuation">.</span></span>exceptions<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UnirestException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>io<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">IOException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>apache<span class="token punctuation"><span class="token punctuation">.</span></span>http<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">HttpStatus</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>beans<span class="token punctuation"><span class="token punctuation">.</span></span>factory<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Autowired</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>stereotype<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Component</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">/**
* {@inheritDoc}
*/</span></span>
<span class="token annotation punctuation"><span class="token annotation punctuation">@Component</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">LocalisationClientImpl</span></span> <span class="token keyword"><span class="token keyword">implements</span></span> <span class="token class-name"><span class="token class-name">LocalisationClient</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@Autowired</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">UniRestService</span></span> uniRestService<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@Autowired</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">ObjectMapper</span></span> objectMapper<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token comment"><span class="token comment">/**
    * {@inheritDoc}
    */</span></span>
   <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">CountryDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">retrieveCountries</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> locale<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">throws</span></span> <span class="token class-name"><span class="token class-name">IOException</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token class-name"><span class="token class-name">HttpResponse</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">JsonNode</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> response <span class="token operator"><span class="token operator">=</span></span> uniRestService<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">format</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>COUNTRIES_FORMAT<span class="token punctuation"><span class="token punctuation">,</span></span> locale<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

       <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>response<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getStatus</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">!=</span></span> <span class="token class-name"><span class="token class-name">HttpStatus</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>SC_OK<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
           <span class="token keyword"><span class="token keyword">return</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span>

       <span class="token class-name"><span class="token class-name">String</span></span> jsonList <span class="token operator"><span class="token operator">=</span></span> response<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getBody</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>COUNTRIES_KEY<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">toString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

       <span class="token keyword"><span class="token keyword">return</span></span> objectMapper<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">readValue</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>jsonList<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">TypeReference</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">CountryDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>

   <span class="token comment"><span class="token comment">/**
    * {@inheritDoc}
    */</span></span>
   <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">CurrencyDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">retrieveCurrencies</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">throws</span></span> <span class="token class-name"><span class="token class-name">IOException</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">UnirestException</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

       <span class="token class-name"><span class="token class-name">HttpResponse</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">JsonNode</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> response <span class="token operator"><span class="token operator">=</span></span> uniRestService<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>CURRENCIES_FORMAT<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>response<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getStatus</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">!=</span></span> <span class="token class-name"><span class="token class-name">HttpStatus</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>SC_OK<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
           <span class="token keyword"><span class="token keyword">return</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span>

       <span class="token class-name"><span class="token class-name">String</span></span> jsonList <span class="token operator"><span class="token operator">=</span></span> response<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getBody</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>CURRENCIES_KEY<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">toString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

       <span class="token keyword"><span class="token keyword">return</span></span> objectMapper<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">readValue</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>jsonList<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">TypeReference</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">CurrencyDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> де 
<ul>
 <li>@Autowired - це інструкція, яка говорить про те, що потрібно ін'єктувати об'єкт у цей клас і використовувати його без створення, тобто без операції new Object;</li>
 <li>@Component - анотація, яка говорить, що цей об'єкт потрібно додати до Application Context, щоб надалі його можна було ін'єктувати за допомогою анотації @Autowired;</li>
 <li>ObjectMapper objectMapper — об'єкт з Jackson Project, який перекладає все це в Java об'єкти.</li>
 <li>CurrencyDTO та CountryDto:</li>
</ul>
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>fasterxml<span class="token punctuation"><span class="token punctuation">.</span></span>jackson<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">lombok<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Data</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">/**
* Data transfer object for Currency.
*/</span></span>
<span class="token annotation punctuation"><span class="token annotation punctuation">@Data</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">CurrencyDto</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Code"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> code<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Symbol"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> symbol<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"ThousandsSeparator"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> thousandsSeparator<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"DecimalSeparator"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> decimalSeparator<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"SymbolOnLeft"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">boolean</span></span> symbolOnLeft<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"SpaceBetweenAmountAndSymbol"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">boolean</span></span> spaceBetweenAmountAndSymbol<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"RoundingCoefficient"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">int</span></span> roundingCoefficient<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"DecimalDigits"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">int</span></span> decimalDigits<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span>
	и
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>fasterxml<span class="token punctuation"><span class="token punctuation">.</span></span>jackson<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">lombok<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Data</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">/**
* Data transfer object for Country.
*/</span></span>
<span class="token annotation punctuation"><span class="token annotation punctuation">@Data</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">CountryDto</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Code"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> code<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Name"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> name<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Щоб ін'єктувати ObjectMapper у будь-яку частину проекту, я додав створення та додавання його до ApplicationContext через конфігураційний клас. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>fasterxml<span class="token punctuation"><span class="token punctuation">.</span></span>jackson<span class="token punctuation"><span class="token punctuation">.</span></span>databind<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">ObjectMapper</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>fasterxml<span class="token punctuation"><span class="token punctuation">.</span></span>jackson<span class="token punctuation"><span class="token punctuation">.</span></span>datatype<span class="token punctuation"><span class="token punctuation">.</span></span>jsr310<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">JavaTimeModule</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>context<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Bean</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>context<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Configuration</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">/**
* {@link Configuration} class.
*/</span></span>
<span class="token annotation punctuation"><span class="token annotation punctuation">@Configuration</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Config</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@Bean</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">ObjectMapper</span></span> <span class="token function"><span class="token function">objectMapper</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token class-name"><span class="token class-name">ObjectMapper</span></span> objectMapper <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ObjectMapper</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       objectMapper<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">registerModule</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">JavaTimeModule</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> objectMapper<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Інструкція @Configuration говорить Spring'у, що у цьому класі будуть якісь зміни. І саме для цього я додав ObjectMapper. За образом і подобою додаємо PlacesClient і PlacesClientImpl: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>dto<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">PlaceDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>dto<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">PlacesDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>mashape<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token punctuation"><span class="token punctuation">.</span></span>http<span class="token punctuation"><span class="token punctuation">.</span></span>exceptions<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UnirestException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>io<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">IOException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">/**
* SkyScanner client.
*/</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">PlacesClient</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token comment"><span class="token comment">/**
    * Get a list of places that match a query string based on arguments.
    *
    * @param query the code of the city.
    * @param country the code of the country.
    * @param currency the code of the currency.
    * @param locale the code of the locale.
    * @return the collection of the {@link PlaceDto} objects.
    */</span></span>
   <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">PlacesDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">retrieveListPlaces</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> query<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> country<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> currency<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> locale<span class="token punctuation"><span class="token punctuation">)</span></span>
           <span class="token keyword"><span class="token keyword">throws</span></span> <span class="token class-name"><span class="token class-name">IOException</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">UnirestException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> and 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>service<span class="token punctuation"><span class="token punctuation">.</span></span>impl<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UniRestServiceImpl</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>PLACES_FORMAT<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>service<span class="token punctuation"><span class="token punctuation">.</span></span>impl<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UniRestServiceImpl</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>PLACES_KEY<span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>fasterxml<span class="token punctuation"><span class="token punctuation">.</span></span>jackson<span class="token punctuation"><span class="token punctuation">.</span></span>core<span class="token punctuation"><span class="token punctuation">.</span></span>type<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">TypeReference</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>fasterxml<span class="token punctuation"><span class="token punctuation">.</span></span>jackson<span class="token punctuation"><span class="token punctuation">.</span></span>databind<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">ObjectMapper</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>dto<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">PlacesDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>service<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">PlacesClient</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>service<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UniRestService</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>mashape<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token punctuation"><span class="token punctuation">.</span></span>http<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">HttpResponse</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>mashape<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token punctuation"><span class="token punctuation">.</span></span>http<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">JsonNode</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>mashape<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token punctuation"><span class="token punctuation">.</span></span>http<span class="token punctuation"><span class="token punctuation">.</span></span>exceptions<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UnirestException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>io<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">IOException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>apache<span class="token punctuation"><span class="token punctuation">.</span></span>http<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">HttpStatus</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>beans<span class="token punctuation"><span class="token punctuation">.</span></span>factory<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Autowired</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>stereotype<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Service</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">/**
* {@inheritDoc}
*/</span></span>
<span class="token annotation punctuation"><span class="token annotation punctuation">@Service</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">PlacesClientImpl</span></span> <span class="token keyword"><span class="token keyword">implements</span></span> <span class="token class-name"><span class="token class-name">PlacesClient</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@Autowired</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">UniRestService</span></span> uniRestService<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@Autowired</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">ObjectMapper</span></span> objectMapper<span class="token punctuation"><span class="token punctuation">;</span></span>


   <span class="token comment"><span class="token comment">/**
    * {@inheritDoc}
    */</span></span>
   <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">PlacesDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">retrieveListPlaces</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> query<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> country<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> currency<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> locale<span class="token punctuation"><span class="token punctuation">)</span></span>
           <span class="token keyword"><span class="token keyword">throws</span></span> <span class="token class-name"><span class="token class-name">IOException</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">UnirestException</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token class-name"><span class="token class-name">HttpResponse</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">JsonNode</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> response <span class="token operator"><span class="token operator">=</span></span> uniRestService
               <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">format</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>PLACES_FORMAT<span class="token punctuation"><span class="token punctuation">,</span></span> country<span class="token punctuation"><span class="token punctuation">,</span></span> currency<span class="token punctuation"><span class="token punctuation">,</span></span> locale<span class="token punctuation"><span class="token punctuation">,</span></span> query<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

       <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>response<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getStatus</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">!=</span></span> <span class="token class-name"><span class="token class-name">HttpStatus</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>SC_OK<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
           <span class="token keyword"><span class="token keyword">return</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span>

       <span class="token class-name"><span class="token class-name">String</span></span> jsonList <span class="token operator"><span class="token operator">=</span></span> response<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getBody</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>PLACES_KEY<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">toString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

       <span class="token keyword"><span class="token keyword">return</span></span> objectMapper<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">readValue</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>jsonList<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">TypeReference</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">PlacesDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> де PlacesDto має вигляд: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>fasterxml<span class="token punctuation"><span class="token punctuation">.</span></span>jackson<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>service<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">PlacesClient</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">lombok<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Data</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">/**
* Using for {@link PlacesClient}.
*/</span></span>
<span class="token annotation punctuation"><span class="token annotation punctuation">@Data</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">PlacesDto</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"PlaceId"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> placeId<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"PlaceName"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> placeName<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"CountryId"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> countryId<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"RegionId"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> regionId<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"CityId"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> cityId<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"CountryName"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> countryName<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> І нарешті клієнт сервіс, який за потрібними даними повертатиме мінімальну ціну на переліт і всю необхідну інформацію: FlightPriceClient та FlightPriceClientImpl. Реалізовуватимемо лише один запит browseQuotes. FlightPriceClient: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>dto<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">FlightPricesDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">/**
* Browse flight prices.
*/</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">FlightPricesClient</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token comment"><span class="token comment">/**
    * Browse quotes for current flight based on provided arguments. One-way ticket.
    *
    * @param country the country from
    * @param currency the currency to get price
    * @param locale locale for the response
    * @param originPlace origin place
    * @param destinationPlace destination place
    * @param outboundPartialDate outbound date
    * @return {@link FlightPricesDto} object.
    */</span></span>
   <span class="token class-name"><span class="token class-name">FlightPricesDto</span></span> <span class="token function"><span class="token function">browseQuotes</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> country<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> currency<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> locale<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> originPlace<span class="token punctuation"><span class="token punctuation">,</span></span>
           <span class="token class-name"><span class="token class-name">String</span></span> destinationPlace<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> outboundPartialDate<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token comment"><span class="token comment">/**
    * Browse quotes for current flight based on provided arguments. Round trip ticket.
    *
    * @param country the country from
    * @param currency the currency to get price
    * @param locale locale for the response
    * @param originPlace origin place
    * @param destinationPlace destination place
    * @param outboundPartialDate outbound date
    * @param inboundPartialDate inbound date
    * @return {@link FlightPricesDto} object.
    */</span></span>
   <span class="token class-name"><span class="token class-name">FlightPricesDto</span></span> <span class="token function"><span class="token function">browseQuotes</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> country<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> currency<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> locale<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> originPlace<span class="token punctuation"><span class="token punctuation">,</span></span>
           <span class="token class-name"><span class="token class-name">String</span></span> destinationPlace<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> outboundPartialDate<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> inboundPartialDate<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> FlightPriceClientImpl 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>service<span class="token punctuation"><span class="token punctuation">.</span></span>impl<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UniRestServiceImpl</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>CURRENCIES_KEY<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>service<span class="token punctuation"><span class="token punctuation">.</span></span>impl<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UniRestServiceImpl</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>PLACES_KEY<span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>fasterxml<span class="token punctuation"><span class="token punctuation">.</span></span>jackson<span class="token punctuation"><span class="token punctuation">.</span></span>core<span class="token punctuation"><span class="token punctuation">.</span></span>type<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">TypeReference</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>fasterxml<span class="token punctuation"><span class="token punctuation">.</span></span>jackson<span class="token punctuation"><span class="token punctuation">.</span></span>databind<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">ObjectMapper</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>dto<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">CarrierDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>dto<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">CurrencyDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>dto<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">FlightPricesDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>dto<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">PlaceDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>dto<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">QuoteDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>dto<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">ValidationErrorDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>service<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">FlightPricesClient</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>service<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UniRestService</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>exception<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">FlightClientException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>mashape<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token punctuation"><span class="token punctuation">.</span></span>http<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">HttpResponse</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>mashape<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token punctuation"><span class="token punctuation">.</span></span>http<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">JsonNode</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>io<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">IOException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>apache<span class="token punctuation"><span class="token punctuation">.</span></span>http<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">HttpStatus</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>beans<span class="token punctuation"><span class="token punctuation">.</span></span>factory<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Autowired</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>stereotype<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Service</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">/**
* {@inheritDoc}
*/</span></span>
<span class="token annotation punctuation"><span class="token annotation punctuation">@Service</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">FlightPricesClientImpl</span></span> <span class="token keyword"><span class="token keyword">implements</span></span> <span class="token class-name"><span class="token class-name">FlightPricesClient</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> BROWSE_QUOTES_FORMAT <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"/apiservices/browsequotes/v1.0/%s/%s/%s/%s/%s/%s"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> OPTIONAL_BROWSE_QUOTES_FORMAT <span class="token operator"><span class="token operator">=</span></span> BROWSE_QUOTES_FORMAT <span class="token operator"><span class="token operator">+</span></span> <span class="token string"><span class="token string">"?inboundpartialdate=%s"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> QUOTES_KEY <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Quotes"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> ROUTES_KEY <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Routes"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> DATES_KEY <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Dates"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> CARRIERS_KEY <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Carriers"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> VALIDATIONS_KEY <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"ValidationErrors"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@Autowired</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">UniRestService</span></span> uniRestService<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@Autowired</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">ObjectMapper</span></span> objectMapper<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token comment"><span class="token comment">/**
    * {@inheritDoc}
    */</span></span>
   <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">FlightPricesDto</span></span> <span class="token function"><span class="token function">browseQuotes</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> country<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> currency<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> locale<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> originPlace<span class="token punctuation"><span class="token punctuation">,</span></span>
           <span class="token class-name"><span class="token class-name">String</span></span> destinationPlace<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> outboundPartialDate<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

       <span class="token class-name"><span class="token class-name">HttpResponse</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">JsonNode</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> response <span class="token operator"><span class="token operator">=</span></span> uniRestService<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span>
               <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">format</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>BROWSE_QUOTES_FORMAT<span class="token punctuation"><span class="token punctuation">,</span></span> country<span class="token punctuation"><span class="token punctuation">,</span></span> currency<span class="token punctuation"><span class="token punctuation">,</span></span> locale<span class="token punctuation"><span class="token punctuation">,</span></span> originPlace<span class="token punctuation"><span class="token punctuation">,</span></span> destinationPlace<span class="token punctuation"><span class="token punctuation">,</span></span>
                       outboundPartialDate<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> <span class="token function"><span class="token function">mapToObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>response<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">FlightPricesDto</span></span> <span class="token function"><span class="token function">browseQuotes</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> country<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> currency<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> locale<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> originPlace<span class="token punctuation"><span class="token punctuation">,</span></span>
           <span class="token class-name"><span class="token class-name">String</span></span> destinationPlace<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> outboundPartialDate<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> inboundPartialDate<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token class-name"><span class="token class-name">HttpResponse</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">JsonNode</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> response <span class="token operator"><span class="token operator">=</span></span> uniRestService<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span>
               <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">format</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>OPTIONAL_BROWSE_QUOTES_FORMAT<span class="token punctuation"><span class="token punctuation">,</span></span> country<span class="token punctuation"><span class="token punctuation">,</span></span> currency<span class="token punctuation"><span class="token punctuation">,</span></span> locale<span class="token punctuation"><span class="token punctuation">,</span></span> originPlace<span class="token punctuation"><span class="token punctuation">,</span></span> destinationPlace<span class="token punctuation"><span class="token punctuation">,</span></span>
                       outboundPartialDate<span class="token punctuation"><span class="token punctuation">,</span></span> inboundPartialDate<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> <span class="token function"><span class="token function">mapToObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>response<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>

   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">FlightPricesDto</span></span> <span class="token function"><span class="token function">mapToObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">HttpResponse</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">JsonNode</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> response<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>response<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getStatus</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">==</span></span> <span class="token class-name"><span class="token class-name">HttpStatus</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>SC_OK<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
           <span class="token class-name"><span class="token class-name">FlightPricesDto</span></span> flightPricesDto <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">FlightPricesDto</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
           flightPricesDto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setQuotas</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token function"><span class="token function">readValue</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>response<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getBody</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>QUOTES_KEY<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">toString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
                   <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">TypeReference</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">QuoteDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                   <span class="token punctuation"><span class="token punctuation">}</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
           flightPricesDto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setCarriers</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token function"><span class="token function">readValue</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>response<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getBody</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>CARRIERS_KEY<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">toString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
                   <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">TypeReference</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">CarrierDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                   <span class="token punctuation"><span class="token punctuation">}</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
           flightPricesDto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setCurrencies</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token function"><span class="token function">readValue</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>response<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getBody</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>CURRENCIES_KEY<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">toString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
                   <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">TypeReference</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">CurrencyDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                   <span class="token punctuation"><span class="token punctuation">}</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
           flightPricesDto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setPlaces</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token function"><span class="token function">readValue</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>response<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getBody</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>PLACES_KEY<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">toString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
                   <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">TypeReference</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">PlaceDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                   <span class="token punctuation"><span class="token punctuation">}</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
           <span class="token keyword"><span class="token keyword">return</span></span> flightPricesDto<span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span>
       <span class="token keyword"><span class="token keyword">throw</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">FlightClientException</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">format</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"There are validation errors. statusCode = %s"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> response<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getStatus</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
               <span class="token function"><span class="token function">readValue</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>response<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getBody</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>VALIDATIONS_KEY<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">toString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
                       <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">TypeReference</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">ValidationErrorDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                       <span class="token punctuation"><span class="token punctuation">}</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>

   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">T</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">T</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">readValue</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> resultAsString<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">TypeReference</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">T</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> valueTypeRef<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">T</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> list<span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token keyword"><span class="token keyword">try</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
           list <span class="token operator"><span class="token operator">=</span></span> objectMapper<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">readValue</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>resultAsString<span class="token punctuation"><span class="token punctuation">,</span></span> valueTypeRef<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">catch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">IOException</span></span> e<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
           <span class="token keyword"><span class="token keyword">throw</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">FlightClientException</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Object Mapping failure."</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> e<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> list<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> де FlightClientException має вигляд: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>flightsmonitoring<span class="token punctuation"><span class="token punctuation">.</span></span>client<span class="token punctuation"><span class="token punctuation">.</span></span>dto<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">ValidationErrorDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">/**
* A {@link RuntimeException} that is thrown in case of an flight monitoring failures.
*/</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">FlightClientException</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">RuntimeException</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">FlightClientException</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> message<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">super</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>message<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">FlightClientException</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> message<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">Throwable</span></span> throwable<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">super</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>message<span class="token punctuation"><span class="token punctuation">,</span></span> throwable<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">FlightClientException</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> message<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">ValidationErrorDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> errors<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">super</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>message<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>validationErrorDtos <span class="token operator"><span class="token operator">=</span></span> errors<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>

   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">ValidationErrorDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> validationErrorDtos<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> У результаті за даними із PlacesCl