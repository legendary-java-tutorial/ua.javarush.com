Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 3)
<p>----------------------------------------</p>
Добридень. У цій статті я хотів би поділитися своїм першим знайомством з такими речами як Maven, Spring, Hibernate, MySQL та Tomcat у процесі створення простого CRUD програми. Це третя частина з чотирьох. іншими незнайомими словами. Це трет
<p>----------------------------------------</p>
Добридень. У цій статті я хотів би поділитися своїм першим знайомством з такими речами як Maven, Spring, Hibernate, MySQL та Tomcat у процесі створення простого CRUD програми. Це третя частина з чотирьох. іншими незнайомими словами. <img data-id="7c9fbe88-e26f-4586-b7c0-8969ac1d6b09" data-max-width="850" alt="Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 3) - 1" src="https://cdn.javarush.com/images/article/7c9fbe88-e26f-4586-b7c0-8969ac1d6b09/800.jpeg" style="width: 850px;">Це третя частина статті "Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток". Попередні частини можна побачити, перейшовши за посиланнями: 
<ul>
 <li><a href="https://codegym.cc/groups/posts/2253-znakomstvo-s-maven-spring-mysql-hibernate-i-pervoe-crud-prilozhenie-chastjh-1" target="_blank" rel="nofollow">Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 1)</a></li>
 <li><a href="https://codegym.cc/groups/posts/2252-znakomstvo-s-maven-spring-mysql-hibernate-i-pervoe-crud-prilozhenie-chastjh-2" target="_blank" rel="nofollow">Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 2)</a></li>
</ul>
<h3>Зміст:</h3>
<ul>
 <li><a href="https://codegym.cc/groups/posts/2251#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D0%B8-%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B1%D0%B0%D0%B7%D1%8B-%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85" rel="nofollow">Створення та підключення бази даних</a></li>
 <li><a href="https://codegym.cc/groups/posts/2251#ORM-%D0%B8-JPA" rel="nofollow">ORM та JPA</a></li>
 <li><a href="https://codegym.cc/groups/posts/2251#Entity" rel="nofollow">Entity</a></li>
 <li><a href="https://codegym.cc/groups/posts/2251#%D0%A1%D0%B2%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0-Hibernate" rel="nofollow">Властивості Hibernate</a></li>
 <li><a href="https://codegym.cc/groups/posts/2251#%D0%9A%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D1%8F-Hibernate" rel="nofollow">Конфігурація Hibernate</a></li>
 <li><a href="https://codegym.cc/groups/posts/2251#%D0%A1%D0%BB%D0%BE%D0%B9-%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B0-%D0%BA-%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D0%BC" rel="nofollow">Шар доступу до даних</a></li>
</ul>
<h2 id="створення-и-подключение-базы-данных">Створення та підключення бази даних</h2>Ну що ж, настав час зайнятися базою даних. Перш ніж підключати <strong>Hibernate</strong> і думати як воно все повинно там працювати, спочатку розберемося з базою даних, тобто. створимо її, підключимо, зробимо та заповнимо табличку. Використовувати ми будемо СУБД (Система Управління Базами Даних) <strong>MySQL</strong> (зрозуміло потрібно спочатку завантажити та встановити). <strong>SQL</strong> (Structured Query Language – мова структурованих запитів) – декларативна мова програмування, що використовується для створення, модифікації та управління даними в реляційній базі даних. У таких базах дані зберігаються як таблиць. Яким чином додаток спілкується з базою даних (передача SQL запитів у БД та повернення результатів). Для цього Java має таку штуку як <strong>JDBC (Java DataBase Connectivity)</strong>, Яка, попросту кажучи, являє собою набір інтерфейсів і класів для роботи з базами даних. Щоб взаємодіяти з БД необхідно створити з'єднання, для цього в пакеті <code class=" language-none">java.sql</code>є клас <code class=" language-none">Connection</code>. Існує кілька способів встановлення з'єднання, наприклад, можна використовувати метод <code class=" language-none">getConnection</code>класу <code class=" language-none">DriverManager</code>. Однак взаємодія з БД здійснюється не безпосередньо, адже баз даних багато, і вони є різними. Так що для кожної з них існує свій JDBC Driver За допомогою цього драйвера і встановлюється з'єднання з базою. Тому перш за все, щоб потім на це не відволікатися, встановимо драйвер <strong>MySQL</strong> . Додамо до <code class=" language-none">pom.xml</code>наступної залежності: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>dependency<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
    <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>groupId<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>mysql<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>groupId<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>artifactId<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>mysql<span class="token operator"><span class="token operator">-</span></span>connector<span class="token operator"><span class="token operator">-</span></span>java<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>artifactId<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>version<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token number"><span class="token number">8.0</span></span><span class="token number"><span class="token number">.11</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>version<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>dependency<span class="token operator"><span class="token operator">&gt;</span></span></code></pre> Тепер створимо базу даних. <em>View -&gt; Tool Windows -&gt; Database</em> - відкриється панель бази даних. <em>New (зелений +) -&gt; Data Source -&gt; MySQL</em> - відкриється вікно, в якому потрібно вказати ім'я користувача та пароль, ми задавали їх при встановленні MySQL (для прикладу я використовував root і root). Порт (для MySQL за промовчанням 3306), ім'я і т.д. залишаємо як є. Можна перевірити з'єднання кнопкою " <em>Test Connection</em> ". <img data-id="eb55246c-ef67-4688-8dbd-7cd082800b4f" data-max-width="850" alt="Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 3) - 2" src="https://cdn.javarush.com/images/article/eb55246c-ef67-4688-8dbd-7cd082800b4f/800.jpeg" style="width: 850px;">Тиснемо <em>ОК</em> і ось ми підключабося до сервера MySQL. Далі створимо базу даних. Для цього можна в консолі, що відкрилася, написати скрипт: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java">CREATE DATABASE test</code></pre> Тиснемо <em>Execute</em> і база даних готова, тепер її можна підключити, для цього повертаємося в Data Source Properties і в поле Database вводимо ім'я бази (test), потім знову вводимо ім'я користувача з паролем і тиснемо ОК. Тепер потрібно зробити таблицю. Можна використовувати графічні інструменти, але для першого разу, мабуть, варто написати ручками скрипт, подивитися хоч як воно виглядає: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">USE</span></span> test<span class="token punctuation"><span class="token punctuation">;</span></span>

CREATE <span class="token class-name"><span class="token class-name">TABLE</span></span> films
<span class="token punctuation"><span class="token punctuation">(</span></span>
  id <span class="token keyword"><span class="token keyword">int</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">10</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> PRIMARY <span class="token class-name"><span class="token class-name">KEY</span></span> AUTO_INCREMENT<span class="token punctuation"><span class="token punctuation">,</span></span>
  title <span class="token function"><span class="token function">VARCHAR</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">100</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token class-name"><span class="token class-name">NOT</span></span> NULL<span class="token punctuation"><span class="token punctuation">,</span></span>
  year <span class="token keyword"><span class="token keyword">int</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">4</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
  genre <span class="token function"><span class="token function">VARCHAR</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">20</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
  watched BIT DEFAULT <span class="token boolean"><span class="token boolean">false</span></span>  <span class="token class-name"><span class="token class-name">NOT</span></span> NULL
<span class="token punctuation"><span class="token punctuation">)</span></span>
COLLATE<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">'utf8_general_ci'</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
CREATE UNIQUE INDEX films_title_uindex <span class="token class-name"><span class="token class-name">ON</span></span> films <span class="token punctuation"><span class="token punctuation">(</span></span>title<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

INSERT INTO `films` <span class="token punctuation"><span class="token punctuation">(</span></span>`title`<span class="token punctuation"><span class="token punctuation">,</span></span>`year`<span class="token punctuation"><span class="token punctuation">,</span></span>`genre`<span class="token punctuation"><span class="token punctuation">,</span></span> watched<span class="token punctuation"><span class="token punctuation">)</span></span>
VALUES
  <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Inception"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">2010</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"sci-fi"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
  <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"The Lord of the Rings: The Fellowship of the Ring"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">2001</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"fantasy"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
  <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Tag"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">2018</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"comedy"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
  <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Gunfight at the O.K. Corral"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">1957</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"western"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
  <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Die Hard"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">1988</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"action"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Створюється таблиця з назвою <code class=" language-none">films</code>зі стовпцями <code class=" language-none">id</code>і <code class=" language-none">title</code>т.д. Для кожного шпальти вказується тип (у дужках максимальний розмір виведення). 
<ul>
 <li><strong><code class=" language-none">PRIMARY KEY</code></strong>- Це первинний ключ, служить для однозначної ідентифікації запису в таблиці (що має на увазі унікальність)</li>
 <li><strong><code class=" language-none">AUTO_INCREMENT</code></strong>— значення буде генеруватися автоматично (саме воно буде ненульовим, так що це можна не вказувати)</li>
 <li><strong><code class=" language-none">NOT NULL</code></strong>- тут теж все очевидно, не може бути порожнім</li>
 <li><strong><code class=" language-none">DEFAULT</code></strong>— встановити значення за замовчуванням</li>
 <li><strong><code class=" language-none">COLLATE</code></strong>- кодування</li>
 <li><strong><code class=" language-none">CREATE UNIQUE INDEX</code></strong>- зробити поле унікальним</li>
 <li><strong><code class=" language-none">INSERT INTO</code></strong>— додати запис до таблиці</li>
</ul>В результаті вийшла така табличка: <img data-id="802cab24-6052-4a17-b983-199ebae33af4" data-max-width="850" alt="" src="https://cdn.javarush.com/images/article/802cab24-6052-4a17-b983-199ebae33af4/800.jpeg" style="width: 850px;">Мабуть, варто спробувати підключитися до неї, поки що просто так, окремо від нашого веб-додатку. Раптом якісь косяки виникнуть із цим, тоді одразу розберемося. А то пізніше <strong>Hibernate</strong> підключатимемо, робити щось, налаштовуватимемо, колупатимемо, і якщо там десь накосячим, то хоч будемо знати що проблема не тут. Ну і щоб перевірити з'єднання зробимо спосіб <code class=" language-none">main</code>, тимчасово. Його, в принципі, куди завгодно можна засунути, хоч у клас контролера, хоч моделі чи конфігурації, не має значення, потрібно просто переконатися з його допомогою що все нормально зі з'єднанням і можна його видаляти. Але щоб було акуратніше створимо для нього окремий клас <code class=" language-none">Main</code>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">testgroup<span class="token punctuation"><span class="token punctuation">.</span></span>filmography</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>sql<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Connection</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>sql<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">DriverManager</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>sql<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">SQLException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Main</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">String</span></span> url <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"jdbc:mysql://localhost:3306/test"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">String</span></span> username <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"root"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">String</span></span> password <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"root"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Connecting..."</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

        <span class="token keyword"><span class="token keyword">try</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Connection</span></span> connection <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">DriverManager</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getConnection</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>url<span class="token punctuation"><span class="token punctuation">,</span></span> username<span class="token punctuation"><span class="token punctuation">,</span></span> password<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Connection successful!"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">catch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">SQLException</span></span> e<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Connection failed!"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            e<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">printStackTrace</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Тут все просто, задаємо параметри підключення до нашої БД та намагаємося створити з'єднання. Запускаємо цей<code class=" language-none">main</code>і дивимось. Отже, у мене вискочив виняток, якісь проблеми з часовим поясом і ще якесь попередження щодо SSL. Погулявши просторами інтернету можна з'ясувати, що це досить поширена проблема, причому при використанні різних версій драйвера (mysql-connector-java) може сваритися по-різному. Наприклад, досвідченим шляхом я з'ясував, що при використанні версії 5.1.47 винятків через часовий пояс немає, з'єднання нормально створюється, але все одно висякує попередження SSL. Ще з якимись версіями начебто було, що й з приводу SSL був виняток, а не просто попередження. Ну гаразд, не суть. Можна окремо спробувати розібратися з цим питанням, але зараз у це не поглиблюватимемося. Вирішується це все досить просто, потрібно вказати в <em>URL</em> додаткові параметри, а саме<code class=" language-none">serverTimezone</code>, якщо проблема з часовим поясом, і <code class=" language-none">useSSL</code>, якщо проблема з SSL: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">String</span></span> url <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"jdbc:mysql://localhost:3306/test<strong>?serverTimezone=Europe/Minsk&amp;useSSL=false</strong>"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Тепер ми задали часовий пояс і відключабо SSL. Знову запускаємо <code class=" language-none">main</code>і вуаля – Connection successful! Ну що ж, добре, як створювати з'єднання розібралися. Клас <code class=" language-none">Main</code>своє завдання у принципі виконав, можна його видаляти. 
<h2 id="ORM-и-JPA">ORM та JPA</h2>По-хорошому, для кращого розуміння, починати ознайомлення з базами даних краще по порядку, від початку, без будь-яких там гібернейтів та іншого. Тому тут не зайвим буде знайти якісь гайди і спочатку спробувати попрацювати за допомогою класів JDBC, ручками писати SQL-запити ну і таке інше. Ну а тут мабуть одразу перейдемо до <strong>ORM</strong> моделі. Що це означає. Про це звичайно знову ж таки бажано почитати окремо, але я спробую коротко описати. <strong>ORM</strong>(Object-Relational Mapping або об'єктно-реляційне відображення) - це технологія для відображення об'єктів у структурі реляційних баз даних, тобто. щоб представити наш джава-об'єкт у вигляді рядка таблиці. Завдяки ORM можна не дбати про написання SQL-скриптів і зосередитися на роботі з об'єктами. Як цим скористатися. Java має ще одну чудову штуку, JPA (Java Persistence API), яка реалізує ORM концепцію. JPA - це така специфікація, вона визначає вимоги до об'єктів, у ній визначені різні інтерфейси та інструкції для роботи з БД. JPA є власне описом, стандартом. Тому є безліч конкретних реалізацій, однією з яких (причому однією з найпопулярніших) є Hibernate, в цьому, власне, і полягає суть цього фреймворку. Hibernate - реалізація специфікації JPA, призначена для розв'язання задач об'єктно-реляційного відображення (ORM). Потрібно підключити всю цю справу до нашого проекту. Крім того, для того, щоб наш Spring не стояв собі осторонь і теж брав участь у всій цій движусі з базами даних, необхідно підключити ще пару модулів, т.к. все, що ми отримали від залежності<em>spring-webmvc</em> для цього вже мало. Нам ще знадобиться <em>spring-jdbc</em> , для роботи з базою даних, <em>spring-tx</em> , для підтримки транзакцій, та <em>spring-orm</em> , для роботи з Hibernate. Додамо залежності в <code class=" language-none">pom.xml</code>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>dependency<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
    <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>groupId<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>groupId<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>artifactId<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>spring<span class="token operator"><span class="token operator">-</span></span>orm<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>artifactId<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>version<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token number"><span class="token number">5.1</span></span><span class="token number"><span class="token number">.1</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>RELEASE<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>version<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>dependency<span class="token operator"><span class="token operator">&gt;</span></span>

<span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>dependency<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
    <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>groupId<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>org<span class="token punctuation"><span class="token punctuation">.</span></span>hibernate<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>groupId<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>artifactId<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>hibernate<span class="token operator"><span class="token operator">-</span></span>core<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>artifactId<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>version<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token number"><span class="token number">5.3</span></span><span class="token number"><span class="token number">.7</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>Final<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>version<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>dependency<span class="token operator"><span class="token operator">&gt;</span></span></code></pre> Достатньо цих двох залежностей. <code class=" language-none">javax.persistence-api</code>під'їде разом з <em>hibernate-core</em> , а <em>spring-jdbc</em> і <em>spring-tx</em> разом зі <em>spring-orm</em> . 
<h2 id="Entity">Entity</h2>Отже, хочемо, щоб об'єкти класу <code class=" language-none">Film</code>могли бути збережені у базі даних. Для цього клас повинен задовольняти низку умов. У JPA при цьому є таке поняття як <em>Сутність (Entity)</em> . Клас-сутність це звичайний <em>POJO</em> клас, з приватними полями та гетерами та сеттерами для них. У нього обов'язково має бути не приватний конструктор без параметрів (або конструктор за замовчуванням), і він повинен мати первинний ключ, тобто. що однозначно ідентифікувати кожен запис цього класу в БД. Про всі вимоги до такого класу можна почитати окремо. Зробимо наш клас <code class=" language-none">Film</code>сутністю за допомогою JPA анотацій: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">testgroup<span class="token punctuation"><span class="token punctuation">.</span></span>filmography<span class="token punctuation"><span class="token punctuation">.</span></span>model</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">javax<span class="token punctuation"><span class="token punctuation">.</span></span>persistence<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token operator"><span class="token operator">*</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token annotation punctuation"><span class="token annotation punctuation">@Entity</span></span>
<span class="token annotation punctuation"><span class="token annotation punctuation">@Table</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>name <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"films"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Film</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Id</span></span>
    <span class="token annotation punctuation"><span class="token annotation punctuation">@Column</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>name <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"id"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token annotation punctuation"><span class="token annotation punctuation">@GeneratedValue</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>strategy <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">GenerationType</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>IDENTITY<span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">int</span></span> id<span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Column</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>name <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"title"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> title<span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Column</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>name <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"year"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">int</span></span> year<span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Column</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>name <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"genre"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> genre<span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Column</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>name <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"watched"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">boolean</span></span> watched<span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token comment"><span class="token comment">// + getters and setters</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre>
<ul>
 <li><strong><code class=" language-none">@Entity</code></strong>- Вказує на те, що даний клас є сутністю.</li>
 <li><strong><code class=" language-none">@Table</code></strong>- Вказує на конкретну таблицю для відображення цієї сутності.</li>
 <li><strong><code class=" language-none">@Id</code></strong>- Вказує, що це поле є первинним ключем, тобто. ця властивість буде використовуватися для ідентифікації кожного унікального запису.</li>
 <li><strong><code class=" language-none">@Column</code></strong>- пов'язує поле зі стовпцем таблиці. Якщо імена поля та стовпця таблиці збігаються, можна не вказувати.</li>
 <li><strong><code class=" language-none">@GeneratedValue</code></strong>- Властивість буде генеруватися автоматично, в дужках можна вказати яким чином. Не будемо зараз розбиратися, як саме працюють різні стратегії. Досить знати, що в даному випадку кожне нове значення збільшуватиметься на 1 від попереднього.</li>
</ul>Можна для кожної властивості ще додатково вказати багато чого ще, наприклад, що має бути не нульове, або унікальне, вказати значення за замовчуванням, максимальний розмір і т.д. Це знадобиться, якщо потрібно згенерувати таблицю на підставі цього класу, з Hibernate є така можливість. Але ми таблицю вже самі створабо і всі властивості налаштували, тож обійдемося без цього. <mark>Невелике зауваження.</mark>У документації Hibernate застосовувати інструкції рекомендується не до полів, а до гетер. Однак різниця між цими підходами досить тонка і в нашому додатку це ніяк не вплине. Крім того, більшість людей все одно ставлять інструкції над полями. Тому, залишимо так, виглядає обережніше. 
<h2 id="Свойства-Hibernate">Властивості Hibernate</h2>Ну що ж, приступимо до налаштування нашого Hibernate. І насамперед винесемо деяку інформацію, таку як ім'я користувача та пароль, url і ще дещо в окремий файл. Можна звичайно вказувати їх звичайним рядком прямо в класі, як ми робабо це, коли перевіряли з'єднання ( <code class=" language-none">String username = "root";</code>і потім передавали це в метод для створення з'єднання). Але все ж таки правильніше зберігати такі статичні дані в якому-небудь <code class=" language-none">property</code>файлі. І якщо, наприклад, потрібно змінити базу даних, тоді не доведеться лазити по всіх класах і шукати де це використовується, достатньо буде один раз змінити значення в цьому файлі. Створимо файл <em>db.properties</em> у директорії <em>resources</em> : 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java">jdbc<span class="token punctuation"><span class="token punctuation">.</span></span>driverClassName<span class="token operator"><span class="token operator">=</span></span><span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>mysql<span class="token punctuation"><span class="token punctuation">.</span></span>cj<span class="token punctuation"><span class="token punctuation">.</span></span>jdbc<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>Driver</span></span>
jdbc<span class="token punctuation"><span class="token punctuation">.</span></span>url<span class="token operator"><span class="token operator">=</span></span>jdbc<span class="token operator"><span class="token operator">:</span></span>mysql<span class="token operator"><span class="token operator">:</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token operator"><span class="token operator">/</span></span>localhost<span class="token operator"><span class="token operator">:</span></span><span class="token number"><span class="token number">3306</span></span><span class="token operator"><span class="token operator">/</span></span>test<span class="token operator"><span class="token operator">?</span></span>serverTimezone<span class="token operator"><span class="token operator">=</span></span><span class="token class-name"><span class="token class-name">Europe</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token class-name"><span class="token class-name">Minsk</span></span><span class="token operator"><span class="token operator">&amp;</span></span>useSSL<span class="token operator"><span class="token operator">=</span></span><span class="token boolean"><span class="token boolean">false</span></span>
jdbc<span class="token punctuation"><span class="token punctuation">.</span></span>username<span class="token operator"><span class="token operator">=</span></span>root
jdbc<span class="token punctuation"><span class="token punctuation">.</span></span>password<span class="token operator"><span class="token operator">=</span></span>root

hibernate<span class="token punctuation"><span class="token punctuation">.</span></span>dialect<span class="token operator"><span class="token operator">=</span></span><span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>hibernate<span class="token punctuation"><span class="token punctuation">.</span></span>dialect<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>MySQL8Dialect</span></span>
hibernate<span class="token punctuation"><span class="token punctuation">.</span></span>show_sql<span class="token operator"><span class="token operator">=</span></span><span class="token boolean"><span class="token boolean">true</span></span></code></pre> Ну згори все зрозуміло, параметри підключення до бд, тобто. ім'я класу драйвера, урл, ім'я користувача та пароль. <code class=" language-none"><strong>hibernate.dialect</strong></code>— ця властивість потрібна для того, щоб вказати Hibernate, який саме варіант мови SQL використовується. Справа в тому, що в кожній СУБД для того, щоб розширити можливості, додати якийсь функціонал чи щось оптимізувати, зазвичай трохи модернізують мову. Через війну виходить, що з кожної СУБД свій SQL діалект. Це як з англійською, наче мова одна, але в Австралії, США чи Британії вона буде трохи відрізнятися, і якісь слова можуть мати різне значення. І для того, щоб не було жодних проблем з розумінням, потрібно прямо повідомити Hibernate з чим саме він має мати справу. <code class=" language-none"><strong>hibernate.show_sql</strong></code>— завдяки цій властивості консолі відображатимуться запити до БД. Це не обов'язково, але з цією штукою хоч можна глянути, що відбувається, а то інакше може здатися, що Hibernate якусь магію творить. Ну, воно звичайно не зовсім зрозуміло буде виводити, краще для цього якийсь логер використовувати, але це якось іншим разом, поки і так зійде. 
<h2 id="Конфигурация-Hibernate">Конфігурація Hibernate</h2>Перейдемо до конфігурації. Створимо в пакеті <code class=" language-none">config</code>клас <code class=" language-none">HibernateConfig</code>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">testgroup<span class="token punctuation"><span class="token punctuation">.</span></span>filmography<span class="token punctuation"><span class="token punctuation">.</span></span>config</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>beans<span class="token punctuation"><span class="token punctuation">.</span></span>factory<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Autowired</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>context<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Bean</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>context<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">ComponentScan</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>context<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Configuration</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>context<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">PropertySource</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>core<span class="token punctuation"><span class="token punctuation">.</span></span>env<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Environment</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>jdbc<span class="token punctuation"><span class="token punctuation">.</span></span>datasource<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">DriverManagerDataSource</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>orm<span class="token punctuation"><span class="token punctuation">.</span></span>hibernate5<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">HibernateTransactionManager</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>orm<span class="token punctuation"><span class="token punctuation">.</span></span>hibernate5<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">LocalSessionFactoryBean</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>transaction<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">EnableTransactionManagement</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">javax<span class="token punctuation"><span class="token punctuation">.</span></span>sql<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">DataSource</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Properties</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token annotation punctuation"><span class="token annotation punctuation">@Configuration</span></span>
<span class="token annotation punctuation"><span class="token annotation punctuation">@ComponentScan</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>basePackages <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">" testgroup.filmography"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
<span class="token annotation punctuation"><span class="token annotation punctuation">@EnableTransactionManagement</span></span>
<span class="token annotation punctuation"><span class="token annotation punctuation">@PropertySource</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>value <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"classpath:db.properties"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">HibernateConfig</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">Environment</span></span> environment<span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Autowired</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">setEnvironment</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Environment</span></span> environment<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>environment <span class="token operator"><span class="token operator">=</span></span> environment<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">Properties</span></span> <span class="token function"><span class="token function">hibernateProperties</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">Properties</span></span> properties <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Properties</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        properties<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">put</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"hibernate.dialect"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> environment<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getRequiredProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"hibernate.dialect"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        properties<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">put</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"hibernate.show_sql"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> environment<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getRequiredProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"hibernate.show_sql"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> properties<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Bean</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">DataSource</span></span> <span class="token function"><span class="token function">dataSource</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">DriverManagerDataSource</span></span> dataSource <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">DriverManagerDataSource</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        dataSource<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setDriverClassName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>environment<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getRequiredProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"jdbc.driverClassName"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        dataSource<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setUrl</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>environment<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getRequiredProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"jdbc.url"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        dataSource<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setUsername</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>environment<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getRequiredProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"jdbc.username"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        dataSource<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setPassword</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>environment<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getRequiredProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"jdbc.password"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> dataSource<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Bean</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">LocalSessionFactoryBean</span></span> <span class="token function"><span class="token function">sessionFactory</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">LocalSessionFactoryBean</span></span> sessionFactory <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">LocalSessionFactoryBean</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        sessionFactory<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setDataSource</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token function"><span class="token function">dataSource</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        sessionFactory<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setPackagesToScan</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"testgroup.filmography.model"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        sessionFactory<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setHibernateProperties</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token function"><span class="token function">hibernateProperties</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> sessionFactory<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Bean</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">HibernateTransactionManager</span></span> <span class="token function"><span class="token function">transactionManager</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">HibernateTransactionManager</span></span> transactionManager <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">HibernateTransactionManager</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        transactionManager<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setSessionFactory</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token function"><span class="token function">sessionFactory</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> transactionManager<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Тут досить багато нового, тому краще за кожним пунктом додатково пошукати інформацію в різних джерелах. Тут же коротко пройдемося. 
<ul>
 <li>З <strong><code class=" language-none">@Configuration</code></strong>і <strong><code class=" language-none">@ComponentScan</code></strong>вже розібралися коли робабо клас <code class=" language-none">WebConfig</code>.</li>
 <li><strong><code class=" language-none">@EnableTransactionManagement</code></strong>- дозволяє використовувати <code class=" language-none">TransactionManager</code>для керування транзакціями. Hibernate працює з БД з допомогою транзакцій, вони необхідні щоб якийсь набір операцій виконувався як єдине ціле, тобто. якщо в методі виникнуть проблеми з якоюсь однією операцією, тоді не виконаються і всі інші, щоб не було як у класичному прикладі з переказом грошей, коли операція зняття грошей з одного рахунку відбулася, а операція запису на інший не спрацювала, в результаті гроші зникли.</li>
 <li><strong><code class=" language-none">@PropertySource</code></strong>- Підключення файлу властивостей, який ми нещодавно створювали.</li>
 <li><strong><code class=" language-none">Environment</code></strong>— щоб отримати властивості з <code class=" language-none">property</code>файлу.</li>
 <li><strong><code class=" language-none">hibernateProperties</code></strong>— цей метод потрібен, щоб представити властивості Hibernate у вигляді об'єкта Properties</li>
 <li><strong><code class=" language-none">DataSource</code></strong>використовується для створення з'єднання з БД. Це альтернатива <em>DriverManager</em> , яку ми використовували раніше, коли створювали для перевірки підключення метод <code class=" language-none">main</code>. У документації сказано, що <code class=" language-none">DataSource</code>використовувати краще. Так і вчинимо, звичайно не забувши почитати в інтернеті в чому різниця і переваги. Зокрема, однією з переваг є можливість створення пулу з'єднань Database Connection Pool (DBCP).</li>
 <li><strong><code class=" language-none">sessionFactory</code></strong>- Для створення сесій, за допомогою яких здійснюються операції з об'єктами-сутностями. Тут ми встановлюємо джерело даних, властивості Hibernate і в якому пакеті потрібно шукати класи-сутності.</li>
 <li><strong><code class=" language-none">transactionManager</code></strong>- Для налаштування менеджера транзакцій.</li>
</ul>Невелике зауваження щодо <code class=" language-none">DataSource</code>. У документації сказано, що використовувати стандартну реалізацію, зокрема <code class=" language-none">DriverManagerDataSource</code>, не рекомендується, т.к. це лише заміна нормального пулу з'єднань і загалом підходить тільки для тестів та всього такого. Для нормальної програми краще використовувати якусь DBCP бібліотеку. Ну, для нашого застосування звичайно вистачить і того, що є, але для повноти картини, мабуть, все-таки використовуємо іншу реалізацію, як радять. Додамо до <code class=" language-none">pom.xml</code>наступної залежності: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>dependency<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
            <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>groupId<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>org<span class="token punctuation"><span class="token punctuation">.</span></span>apache<span class="token punctuation"><span class="token punctuation">.</span></span>tomcat<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>groupId<span class="token operator"><span class="token operator">&gt;</span></span>
            <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>artifactId<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>tomcat<span class="token operator"><span class="token operator">-</span></span>dbcp<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>artifactId<span class="token operator"><span class="token operator">&gt;</span></span>
            <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>version<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token number"><span class="token number">9.0</span></span><span class="token number"><span class="token number">.10</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>version<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>dependency<span class="token operator"><span class="token operator">&gt;</span></span></code></pre> І в методі <code class=" language-none">dataSource</code>класу <code class=" language-none">HibernateConfig</code>замінимо <code class=" language-none">DriverManagerDataSource</code>на <code class=" language-none">BasicDataSource</code>з пакета <code class=" language-none">org.apache.tomcat.dbcp.dbcp2</code>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java"><span class="token class-name"><span class="token class-name">BasicDataSource</span></span> dataSource <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">BasicDataSource</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Ну начебто все, конфігурація готова, залишилося додати її до нашого <em>AppInitializer</em> : 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">protected</span></span> <span class="token class-name"><span class="token class-name">Class</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token operator"><span class="token operator">?</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> <span class="token function"><span class="token function">getRootConfigClasses</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Class</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span><span class="token punctuation"><span class="token punctuation">{</span></span><span class="token class-name"><span class="token class-name">HibernateConfig</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token punctuation"><span class="token punctuation">}</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span></code></pre>
<h2 id="Слой-доступа-к-данным">Шар доступу до даних</h2>Настав час зайнятися нарешті нашим DAO. Переходимо до класу <code class=" language-none">FilmDAOImpl</code>і насамперед видаляємо звідти пробний список, він нам більше не потрібен. Додаємо фабрику сесій і працюватимемо через неї. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">SessionFactory</span></span> sessionFactory<span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Autowired</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">setSessionFactory</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">SessionFactory</span></span> sessionFactory<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>sessionFactory <span class="token operator"><span class="token operator">=</span></span> sessionFactory<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Для початку зробимо метод для відображення сторінки зі списком фільмів, в ньому ми будемо отримувати сесію та робити запит до бд (витягувати усі записи та формувати список): 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Film</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">allFilms</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">Session</span></span> session <span class="token operator"><span class="token operator">=</span></span> sessionFactory<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getCurrentSession</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> session<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">createQuery</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"from Film"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">list</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Тут є два моменти. По-перше, висвітлилося попередження. Це з тим, що хочемо отримати параметризований <code class=" language-none">List&lt;Film&gt;</code>, але метод повертає просто <code class=" language-none">List</code>, оскільки під час компіляції невідомо який тип поверне запит. Отже, ідея нас попереджає, що ми робимо небезпечне перетворення, внаслідок чого можуть виникнути неприємності. Є кілька правильніших способів як це зробити, щоб такого питання не виникало. Можна знайти інформацію в інтернеті. Але зараз не будемо з цим морочитися. Справа в тому, що ми точно знаємо який тип буде повернутий, так що ніяких проблем тут не виникне, можна просто не звертати на попередження увагу. Але, щоб очі не мозолило, можна повісити над способом інструкцію<code class=" language-none">@SupressWarning("unchecked")</code>. Цим ми як би скажемо компілятору, мовляв, дякую, друже, за занепокоєння, але я знаю, що роблю і тримаю все під контролем, тому можеш розслабитися і не турбуватися на рахунок цього методу. По-друге, ідея підкреслює червоним" <code class=" language-none">from Film</code>. Просто це HQL (Hibernate Query Language) запит та ідея не розуміє, правильно там все чи є помилка. Можна зайти в налаштування ідеї та вручну все відрегулювати (шукаємо в інтернеті, якщо цікаво). Або можна просто додати підтримку Hibernate фреймворку, для цього тиснемо правою кнопкою за проектом, вибираємо <em>Add Framework Support</em> , ставимо галочку для <em>Hibernate</em> і тиснемо ОК. Після цього швидше за все в класі-сутності ( <code class=" language-none">Film</code>) теж багато всього підкреслить червоним, наприклад там, де анотація <code class=" language-none">@Table(name = "films")</code>видасть попередження<em>Cannot resolve table 'films'</em> . Тут знову ж таки нічого страшного, це не помилка проекту, все скомпілюється і працюватиме. Ідея підкреслює, бо нічого не знає про нашу базу. Щоб це виправити, зробимо інтеграцію ідеї з БД. <em>View</em> -&gt; <em>Tool Windows</em> -&gt; <em>Persistense</em> (відкриється вкладка) -&gt; <em>права кнопка миші вибираємо Assign Data Sources</em> -&gt; <em>у Data Source вказуємо з'єднання з БД</em> і <em>тиснемо ОК</em> . <img data-id="405085ea-a1df-410d-a53a-20d0af6b187f" data-max-width="850" alt="Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 3) - 3" src="https://cdn.javarush.com/images/article/405085ea-a1df-410d-a53a-20d0af6b187f/800.jpeg" style="width: 850px;">Коли це все виправабо, залишилося ще дещо. Переходимо до рівня вище, у сервіс. У класі <code class=" language-none">FilmServiceImpl</code>позначаємо метод <code class=" language-none">allFilms</code>spring анотацією<code class=" language-none">@Transactional</code>яка вкаже на те, що метод повинен виконуватися в транзакції (без цього Hibernate працювати відмовиться): 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token annotation punctuation"><span class="token annotation punctuation">@Transactional</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Film</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">allFilms</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">return</span></span> filmDAO<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">allFilms</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Так, тут все готово, в контролері начебто нічого чіпати не треба. Ну що ж, схоже настав момент істини, тиснемо <em>Run</em> і дивимося, що вийде. <img data-id="e459debd-1973-4671-b065-9a92fb419e5e" data-max-width="850" alt="Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 3) - 4" src="https://cdn.javarush.com/images/article/e459debd-1973-4671-b065-9a92fb419e5e/800.jpeg" style="width: 850px;">І ось вона наша табличка, і цього разу отримана не зі списку, який ми самі зробабо прямо в класі, а з бази даних. Чудово, схоже, все працює. Тепер таким же чином робимо всі інші CRUD операції за допомогою способів сесії. У результаті клас виглядає так: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">testgroup<span class="token punctuation"><span class="token punctuation">.</span></span>filmography<span class="token punctuation"><span class="token punctuation">.</span></span>dao</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>hibernate<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Session</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>hibernate<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">SessionFactory</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>beans<span class="token punctuation"><span class="token punctuation">.</span></span>factory<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Autowired</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>stereotype<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Repository</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">testgroup<span class="token punctuation"><span class="token punctuation">.</span></span>filmography<span class="token punctuation"><span class="token punctuation">.</span></span>model<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Film</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token annotation punctuation"><span class="token annotation punctuation">@Repository</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">FilmDAOImpl</span></span> <span class="token keyword"><span class="token keyword">implements</span></span> <span class="token class-name"><span class="token class-name">FilmDAO</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">SessionFactory</span></span> sessionFactory<span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Autowired</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">setSessionFactory</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">SessionFactory</span></span> sessionFactory<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>sessionFactory <span class="token operator"><span class="token operator">=</span></span> sessionFactory<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token annotation punctuation"><span class="token annotation punctuation">@SuppressWarnings</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"unchecked"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Film</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">allFilms</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">Session</span></span> session <span class="token operator"><span class="token operator">=</span></span> sessionFactory<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getCurrentSession</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> session<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">createQuery</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"from Film"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">list</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Film</span></span> film<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">Session</span></span> session <span class="token operator"><span class="token operator">=</span></span> sessionFactory<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getCurrentSession</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        session<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">persist</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>film<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">delete</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Film</span></span> film<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">Session</span></span> session <span class="token operator"><span class="token operator">=</span></span> sessionFactory<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getCurrentSession</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        session<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">delete</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>film<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">edit</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Film</span></span> film<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">Session</span></span> session <span class="token operator"><span class="token operator">=</span></span> sessionFactory<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getCurrentSession</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        session<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">update</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>film<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Film</span></span> <span class="token function"><span class="token function">getById</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span> id<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">Session</span></span> session <span class="token operator"><span class="token operator">=</span></span> sessionFactory<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getCurrentSession</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> session<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Film</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> id<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Тепер залишилося тільки не забути зайти в сервіс та повісити на методи інструкцію <code class=" language-none">@Transactional</code>. Ось і все готове. Можна тепер запустити та перевірити. Натискати посилання та кнопки, спробувати додати/видалити/змінити записи. Якщо все зроблено правильно має працювати. Тепер це вже повноцінний CRUD додаток з використаними Hibernate, Spring, MySQL. Далі буде... <a href="https://codegym.cc/groups/posts/2253-znakomstvo-s-maven-spring-mysql-hibernate-i-pervoe-crud-prilozhenie-chastjh-1" target="_blank" rel="nofollow">Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 1) </a> <a href="https://codegym.cc/groups/posts/2252-znakomstvo-s-maven-spring-mysql-hibernate-i-pervoe-crud-prilozhenie-chastjh-2" target="_blank" rel="nofollow">Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 2)</a> Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 3) <a href="https://codegym.cc/groups/posts/2250-znakomstvo-s-maven-spring-mysql-hibernate-i-pervoe-crud-prilozhenie-chastjh-4" target="_blank" rel="nofollow">Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 4)</a>