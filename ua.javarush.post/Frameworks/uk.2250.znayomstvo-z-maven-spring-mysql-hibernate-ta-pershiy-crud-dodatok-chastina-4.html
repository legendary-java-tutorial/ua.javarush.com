Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 4)
<p>----------------------------------------</p>
Добридень. У цій статті я хотів би поділитися своїм першим знайомством з такими речами як Maven, Spring, Hibernate, MySQL та Tomcat у процесі створення простого CRUD програми. Це остання частина. Стаття розрахована насамперед на тих, хто вж
<p>----------------------------------------</p>
Добридень. У цій статті я хотів би поділитися своїм першим знайомством з такими речами як Maven, Spring, Hibernate, MySQL та Tomcat у процесі створення простого CRUD програми. Це остання частина. Стаття розрахована насамперед на тих, хто вже пройшов тут 30-40 рівнів, але за межі чистої джави поки не вибирався і тільки починає (або збирається починати) виходити у відкритий світ із усіма цими технологіями, фреймворками та іншими незнайомими словами. <img data-id="847ea948-d0b5-4476-8a22-5320bc34c646" data-max-width="850" alt="" src="https://cdn.javarush.com/images/article/847ea948-d0b5-4476-8a22-5320bc34c646/800.jpeg" style="width: 850px;">Це заключна четверта частина статті "Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток". Попередні частини можна побачити, перейшовши за посиланнями: 
<ul>
 <li><a href="https://codegym.cc/groups/posts/2253-znakomstvo-s-maven-spring-mysql-hibernate-i-pervoe-crud-prilozhenie-chastjh-1" target="_blank" rel="nofollow">Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 1)</a></li>
 <li><a href="https://codegym.cc/groups/posts/2252-znakomstvo-s-maven-spring-mysql-hibernate-i-pervoe-crud-prilozhenie-chastjh-2" target="_blank" rel="nofollow">Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 2)</a></li>
 <li><a href="https://codegym.cc/groups/posts/2251-znakomstvo-s-maven-spring-mysql-hibernate-i-pervoe-crud-prilozhenie-chastjh-3" target="_blank" rel="nofollow">Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 3)</a></li>
</ul>
<h3>Зміст:</h3>
<ul>
 <li><a href="https://codegym.cc/groups/posts/2250#%D0%9E%D1%84%D0%BE%D1%80%D0%BC%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B8-%D0%B2%D0%B5%D0%B1-%D1%80%D0%B5%D1%81%D1%83%D1%80%D1%81%D1%8B">Оформлення та веб-ресурси</a></li>
 <li><a href="https://codegym.cc/groups/posts/2250#%D0%A0%D0%B0%D0%B7%D0%B1%D0%B8%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BD%D0%B0-%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86%D1%8B">Розбиття на сторінки</a></li>
 <li><a href="https://codegym.cc/groups/posts/2250#%D0%97%D0%B0%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5">Висновок</a></li>
</ul>
<h2 id="Оформление-и-веб-ресурсы">Оформлення та веб-ресурси</h2>Наш додаток працює, ось тільки без сліз на нього не подивишся, нудні написи, негарні посилання, порожнє біле тло. Потрібно це виправити та додати різних красивостей. Як це зробити. Ну, по-перше, можна просто погратися зі сторінками і наробити будь-якої всячини за допомогою можливостей <strong>HTML</strong> . Але якщо одним тільки HTML намагатиметься змінювати фони, кольори, розміри, розташування елементів і т.д. і т.п. то в результаті можна зі сторінки такий бардак зробити, що потім уже нічого там не розбереш. Та й до того ж HTML можливості для оформлення досить обмежені. Краще використовувати для цього <strong>CSS</strong> (Cascading Style Sheets – каскадні таблиці стилів). Тоді все, що стосується оформлення, можна зібрати в одному місці, а потім застосовувати це до потрібного елементу сторінки. CSS код можна писати прямо на<strong>jsp</strong> сторінці у спеціальному тегу, але набагато зручніше винести це в окремий файл, а потім просто застосувати до потрібних сторінок. Для розміщення файлів зі стилями та інших статичних веб-ресурсів створимо окрему директорію всередині <strong>webapp</strong> . Щоб не плутати веб-ресурси зі звичайними ресурсами (де у нас лежить <strong>db.properties</strong> ), назвемо цю директорію просто <strong>res</strong> і туди поміщатимемо всі CSS файли, картинки і т.п: 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-max-width="177" alt="Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 4) - 1" src="https://cdn.javarush.com/images/article/82388163-3a81-4dc9-b5b4-ab52934ae550/original.jpeg">
 </div>
</div>Щоб використовувати ці файли, нам потрібно вказати їх розташування в конфігурації. Ідемо в наш клас <code class=" language-none">WebConfig</code>. Раніше ми використовували анотацію <code class=" language-none">@EnableWebMvc</code>, щоб нічого не налаштовувати, а просто використовувати дефолтну конфігурацію. Але тепер виникла потреба дещо налаштувати. І тому використовуємо інтерфейс <code class=" language-none">WebMvcConfigurer</code>, який дозволяє перевизначати методи конфігурації. Т.о. ми можемо використовувати конфігурацію за замовчуванням, але деякі моменти налаштувати під себе. У разі нам потрібен спосіб <code class=" language-none">addResourceHandlers</code>, з допомогою якого вкажемо розташування статичних веб-ресурсів. Про всяк випадок весь клас цілком виглядає так: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">testgroup<span class="token punctuation"><span class="token punctuation">.</span></span>filmography<span class="token punctuation"><span class="token punctuation">.</span></span>config</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>context<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Bean</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>context<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">ComponentScan</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>context<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Configuration</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>web<span class="token punctuation"><span class="token punctuation">.</span></span>servlet<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">ViewResolver</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>web<span class="token punctuation"><span class="token punctuation">.</span></span>servlet<span class="token punctuation"><span class="token punctuation">.</span></span>config<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">EnableWebMvc</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>web<span class="token punctuation"><span class="token punctuation">.</span></span>servlet<span class="token punctuation"><span class="token punctuation">.</span></span>config<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">ResourceHandlerRegistry</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>web<span class="token punctuation"><span class="token punctuation">.</span></span>servlet<span class="token punctuation"><span class="token punctuation">.</span></span>config<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">WebMvcConfigurer</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>springframework<span class="token punctuation"><span class="token punctuation">.</span></span>web<span class="token punctuation"><span class="token punctuation">.</span></span>servlet<span class="token punctuation"><span class="token punctuation">.</span></span>view<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">InternalResourceViewResolver</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token annotation punctuation"><span class="token annotation punctuation">@Configuration</span></span>
<span class="token annotation punctuation"><span class="token annotation punctuation">@EnableWebMvc</span></span>
<span class="token annotation punctuation"><span class="token annotation punctuation">@ComponentScan</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>basePackages <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"testgroup.filmography"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">WebConfig</span></span> <span class="token keyword"><span class="token keyword"></span></span><strong><span class="token keyword"><span class="token keyword">implements</span></span> <span class="token class-name"><span class="token class-name">WebMvcConfigurer</span></span></strong><span class="token class-name"></span><span class="token class-name"></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation"></span></span><strong><span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">addResourceHandlers</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">ResourceHandlerRegistry</span></span> registry<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        registry<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">addResourceHandler</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"/res/**"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">addResourceLocations</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"/res/"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span></strong><span class="token punctuation"></span><span class="token punctuation"></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Bean</span></span>
    <span class="token class-name"><span class="token class-name">ViewResolver</span></span> <span class="token function"><span class="token function">viewResolver</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">InternalResourceViewResolver</span></span> viewResolver <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">InternalResourceViewResolver</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        viewResolver<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setPrefix</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"/WEB-INF/pages/"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        viewResolver<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setSuffix</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">".jsp"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> viewResolver<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Тепер щоб використовувати наш CSS на сторінці потрібно зробити на нього посилання всередині тега <code class=" language-none">head</code>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class="  language-java"><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>head<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>link href<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"&lt;c:url value="</span></span><span class="token operator"><span class="token operator">/</span></span>res<span class="token operator"><span class="token operator">/</span></span>style<span class="token punctuation"><span class="token punctuation">.</span></span>css<span class="token string"><span class="token string">"/&gt;"</span></span> rel<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"stylesheet"</span></span> type<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"text/css"</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>head<span class="token operator"><span class="token operator">&gt;</span></span></code></pre> Достатньо додати цей рядок і зробити, наприклад, ось такий простенький CSS файл: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java">table <span class="token punctuation"><span class="token punctuation">{</span></span>
    border<span class="token operator"><span class="token operator">-</span></span>spacing<span class="token operator"><span class="token operator">:</span></span> <span class="token number"><span class="token number">0</span></span> <span class="token number"><span class="token number">10</span></span>px<span class="token punctuation"><span class="token punctuation">;</span></span>
    font<span class="token operator"><span class="token operator">:</span></span>  bold <span class="token number"><span class="token number">100</span></span><span class="token operator"><span class="token operator">%</span></span> <span class="token class-name"><span class="token class-name">Georgia</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> serif<span class="token punctuation"><span class="token punctuation">;</span></span>
    margin<span class="token operator"><span class="token operator">:</span></span> <span class="token number"><span class="token number">40</span></span>px auto<span class="token punctuation"><span class="token punctuation">;</span></span>
    text<span class="token operator"><span class="token operator">-</span></span>shadow<span class="token operator"><span class="token operator">:</span></span> <span class="token number"><span class="token number">5</span></span>px <span class="token number"><span class="token number">5</span></span>px <span class="token number"><span class="token number">5</span></span>px #<span class="token number"><span class="token number">3F</span></span><span class="token number"><span class="token number">3F</span></span><span class="token number"><span class="token number">7F</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    background<span class="token operator"><span class="token operator">:</span></span> #B1B9D9<span class="token punctuation"><span class="token punctuation">;</span></span>
    text<span class="token operator"><span class="token operator">-</span></span>align<span class="token operator"><span class="token operator">:</span></span> center<span class="token punctuation"><span class="token punctuation">;</span></span>
    vertical<span class="token operator"><span class="token operator">-</span></span>align<span class="token operator"><span class="token operator">:</span></span> middle<span class="token punctuation"><span class="token punctuation">;</span></span>
    width<span class="token operator"><span class="token operator">:</span></span> <span class="token number"><span class="token number">50</span></span><span class="token operator"><span class="token operator">%</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    border<span class="token operator"><span class="token operator">:</span></span> <span class="token number"><span class="token number">10</span></span>px solid blue<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> І це вже повністю змінить нашу таблицю (дурне звичайно виглядати, але це так, для прикладу): <img data-id="4c1a8673-97dc-4b23-b0a8-3647e7845580" data-max-width="850" alt="Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 4) - 2" src="https://cdn.javarush.com/images/article/4c1a8673-97dc-4b23-b0a8-3647e7845580/800.jpeg" style="width: 850px;">Ну думаю немає потреби докладно розповідати про CSS, тут все досить просто. На просторах інтернету можна знайти безліч вже готових варіантів оформлення таблиць та форм. Але краще зробити оформлення самостійно, тут не потрібно бути дизайнером, це ж все-таки не якийсь складний сайт. Навіть кілька годин після першого знайомства вистачить, щоб зробити досить гарне та акуратне оформлення такої простої сторінки. До того ж в інтернеті повно уроків, прикладів, є спеціальні сайти, де одночасно на одному екрані можна редагувати HTML, CSS і відразу бачити як це все виглядає. Небагато практики і можна творити справжнє мистецтво. Правда тут теж не варто дуже захоплюватися (якщо звичайно немає планів стати дизайнером), а то оформлення це така штука, тут можна застрягти дуже довго. Я якраз почав розбиратися з CSS щось безпосередньо завис. Все хотів спробувати, кожну властивість щось крутив, колупав, експериментував, брав сторінки яких-небудь сайтів і переробляв їх до невпізнання. Я, напевно, тиждень розважався з цією іграшкою, більше нічого не роблячи, поки мене не відпустило :) Ну а так взагалі звичайно не варто перестаратися і робити незрозуміле строкате диво-юдо, треба робити простенько і зі смаком. Єдине варто зазначити. Потрібно розуміти, що потрібно робити простенько та зі смаком. Єдине варто зазначити. Потрібно розуміти, що потрібно робити простенько та зі смаком. Єдине варто зазначити. Потрібно розуміти, що<strong>CSS – це опис оформлення</strong> , а <strong>HTML – це розмітка</strong> . Не варто намагатися абсолютно все зробити через CSS, деякі моменти буде зробити дуже складно, а деякі просто неможливо, коли в HTML це робиться парою зайвих рядків, а то й зовсім якимось одним атрибутом у тезі. Потрібно їх комбінувати, будь-які кольори, фони, шрифти робити в CSS, а якщо, наприклад, потрібно об'єднати пару осередків таблиці, простіше використовувати засоби HTML. Ну ось наприклад що у мене вдалося зробити зі сторінками за пару-трійку годин колупання з CSS і HTML (не буду тут вже розписувати, яку кашу я навернув щоб цього досягти, в кінці буде посилання на гітхаб цього проекту там можна буде подивитися): <img data-id="0fe85c8f-a785-4edb-b1b4-5447f134cfd2" data-max-width="850" alt="Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 4) - 3" src="https://cdn.javarush.com/images/article/0fe85c8f-a785-4edb-b1b4-5447f134cfd2/800.jpeg" style="width: 850px;">Не знаю звичайно, наскільки грамотно я там все зробив, але враховуючи, що я вперше побачив CSS за тиждень до цього, думаю цілком придатно вийшло. 
<h2 id="Разбиение-на-сторінки">Розбиття на сторінки</h2>Зараз все працює, виглядає начебто непогано, але в таблиці поки що лише кілька записів. А якщо в ній буде сотня фільмів, або тисяча, не дуже зручно промотувати такий довжелезний список. Набагато зручніше, коли список виводиться сторінками, штук по 10 записів, наприклад. Тому зараз і спробуємо реалізувати розбиття списку на сторінки (іноді це ще називають "пейджинг" або "пагінація")<em> .</em>)). Зробити це можна по-різному. Наприклад, можна передавати повний список на jsp сторінку і там вже формувати табличку на потрібну кількість записів. Або можна, скажімо, у сервісі витягувати із загального списку потрібні записи, а потім цей міні-список відправляти на jsp сторінку для відображення. Але найкраще, звичайно, робити це на рівні бази даних. Ідея в тому, щоб не брати з бази повний список і потім розбивати його на шматки, а спочатку діставати з бази потрібний шматок, не торкаючись іншого. Адже навіщо нам витягувати з бази всі сотні чи тисячі записів одразу, якщо потрібна нам знаходиться в першій десятці, краще витягнемо лише одну цю десятку. Ідемо до <strong>DAO</strong> і додамо для методу <code class=" language-none">allFilms</code>параметр<code class=" language-none">int page</code>, який буде відповідати за номер сторінки (у сервісі, природно, робимо те саме). І трохи змінимо реалізацію цього методу, якщо раніше ми витягували весь список, то тепер витягуватимемо лише частину. З цим нам допоможуть методи <code class=" language-none">setFirstResult</code>(з якого рядка таблиці почати) і <code class=" language-none">setMaxResults</code>(скільки записів вивести): 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token annotation punctuation"><span class="token annotation punctuation">@SuppressWarnings</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"unchecked"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Film</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">allFilms</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span> page<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token class-name"><span class="token class-name">Session</span></span> session <span class="token operator"><span class="token operator">=</span></span> sessionFactory<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getCurrentSession</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">return</span></span> session<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">createQuery</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"from Film"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function"></span></span><strong><span class="token function"><span class="token function">setFirstResult</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">10</span></span> <span class="token operator"><span class="token operator">*</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>page <span class="token operator"><span class="token operator">-</span></span> <span class="token number"><span class="token number">1</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setMaxResults</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">10</span></span><span class="token punctuation"><span class="token punctuation">)</span></span></strong><span class="token punctuation"></span><span class="token punctuation"><span class="token punctuation"></span><span class="token punctuation">.</span></span><span class="token function"><span class="token function">list</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Тобто. якщо це 1-а сторінка, виводимо максимум 10 записів, починаючи з 0-ої, якщо це 5 сторінка, то 10 записів починаючи з 40-ї (не забуваємо, що нумерація в базі починається з 0). А ще додатково створимо метод, який повертатиме кількість записів у таблиці. Нам це знадобиться для того, щоб знати кількість всіх сторінок і сформувати для них посилання на нашій сторінці jsp: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">int</span></span> <span class="token function"><span class="token function">filmsCount</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
     <span class="token class-name"><span class="token class-name">Session</span></span> session <span class="token operator"><span class="token operator">=</span></span> sessionFactory<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getCurrentSession</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
     <span class="token keyword"><span class="token keyword">return</span></span> session<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">createQuery</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"select count(*) from Film"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">Number</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getSingleResult</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">intValue</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
 <span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> За допомогою такого запиту ми отримаємо кількість усіх записів у таблиці (у вигляді <code class=" language-none">int</code>значення), не витягуючи при цьому самі записи. Тепер йдемо в контролер і попрацюємо над методом, який повертає головну сторінку зі списком фільмів: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token annotation punctuation"><span class="token annotation punctuation">@RequestMapping</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>value <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"/"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> method <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">RequestMethod</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>GET<span class="token punctuation"><span class="token punctuation">)</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">ModelAndView</span></span> <span class="token function"><span class="token function">allFilms</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token annotation punctuation"><span class="token annotation punctuation">@RequestParam</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>defaultValue <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"1"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">int</span></span> page<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token class-name"><span class="token class-name">List</span></span><span class="token operator"><span class="token operator">&amp;</span></span>ltFilm<span class="token operator"><span class="token operator">&gt;</span></span> films <span class="token operator"><span class="token operator">=</span></span> filmService<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">allFilms</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>page<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">int</span></span> filmsCount <span class="token operator"><span class="token operator">=</span></span> filmService<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">filmsCount</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">int</span></span> pagesCount <span class="token operator"><span class="token operator">=</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>filmsCount <span class="token operator"><span class="token operator">+</span></span> <span class="token number"><span class="token number">9</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token number"><span class="token number">10</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token class-name"><span class="token class-name">ModelAndView</span></span> modelAndView <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ModelAndView</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    modelAndView<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setViewName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"films"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    modelAndView<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">addObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"page"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> page<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    modelAndView<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">addObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"filmsList"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> films<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    modelAndView<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">addObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"filmsCount"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> filmsCount<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    modelAndView<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">addObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"pagesCount"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> pagesCount<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">return</span></span> modelAndView<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Тут з'явилася нова анотація <code class=" language-none">@RequestParam</code>, яка вказує, що це значення ми отримуємо з параметра запиту. Тепер, якщо ми перейдемо на адресау з параметром, наприклад <em>http://localhost:8080/ <strong>?page=4</strong></em> , то отримаємо, відповідно, 4 сторінку. Встановлюємо значення за промовчанням " <strong>1</strong> ", щоб під час запуску програми, коли ми переходимо на адресау без параметра <em>http://localhost:8080/</em>, ми отримували першу сторінку. У способі ми отримуємо кількість всіх записів, потім таким ось нехитрим методом обчислюємо кількість сторінок. Тобто. якщо у нас 10 записів, це 1 сторінка, а якщо 11, то це вже 2. Ну і передаємо в модель усю цю справу. Кількість сторінок потрібно знати, щоб сформувати для них усіх посилання в циклі, а кількість фільмів нехай буде про всяк випадок, якщо, наприклад, захочеться вивести цю інформацію десь на сторінці. Тепер залишилося тільки зайти в <strong>films.jsp</strong> і додати посилання на кожну сторінку за допомогою такої конструкції: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token operator"><span class="token operator">&lt;</span></span>c<span class="token operator"><span class="token operator">:</span></span>forEach begin<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"1"</span></span> end<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"${pagesCount}"</span></span> step<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"1"</span></span> varStatus<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"i"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>c<span class="token operator"><span class="token operator">:</span></span>url value<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"/"</span></span> <span class="token keyword"><span class="token keyword">var</span></span><span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"url"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
        <span class="token operator"><span class="token operator">&lt;</span></span>c<span class="token operator"><span class="token operator">:</span></span>param name<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"page"</span></span> value<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"${i.index}"</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>c<span class="token operator"><span class="token operator">:</span></span>url<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>a href<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"${url}"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>$<span class="token punctuation"><span class="token punctuation">{</span></span>i<span class="token punctuation"><span class="token punctuation">.</span></span>index<span class="token punctuation"><span class="token punctuation">}</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>a<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>c<span class="token operator"><span class="token operator">:</span></span>forEach<span class="token operator"><span class="token operator">&gt;</span></span></code></pre> Створюємо посилання за лічильником 1, 2, 3, ... та встановлюємо параметр за значенням індексу. 
<div class="table-container">
 <table class="table table--striped">
  <tbody>
   <tr>
    <td>
     <p>До речі так само, як і з розбиттям на сторінки, можна додати й інші фішки, наприклад сортування, фільтрацію, пошук. Просто передаємо в метод DAO різні параметри і формуємо за допомогою відповідний запит до бд, щоб витягнути потрібні записи, у потрібному порядку.</p></td>
   </tr>
  </tbody>
 </table>
</div>Зробимо ще один маленький штрих. Повертаємось у контролер. У методах додавання, редагування та видалення після виконання операції ми робимо перенаправлення на головну сторінку <em>"redirect:/"</em> . Т.о. якщо ми будемо десь на 50-й сторінці і натиснемо редагувати запис, то після виконання ми перейдемо на адресау " <strong>/</strong> ", тобто. повернемося на 1 сторінку. Це не дуже зручно, хотілося б повернутися туди ж, звідки й прийшли. Вирішимо це дуже просто. Створимо в класі <code class=" language-none">FilmController</code>змінну екземпляру<code class=" language-none">int page</code>
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">int</span></span> page<span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Усередині методу <code class=" language-none">allFilms</code>будемо надавати цій змінній значення параметра <code class=" language-none">page</code>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>page <span class="token operator"><span class="token operator">=</span></span> page<span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Т.о. щоразу, коли виконується цей метод (тобто коли ми переміщаємося сторінками), змінну записуватиметься значення поточної сторінки. А потім ми використовуємо це значення в наших методах, щоб перенаправити назад на цю сторінку. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java">modelAndView<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setViewName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"redirect:/?page="</span></span> <span class="token operator"><span class="token operator">+</span></span> <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>page<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre>
<h2 id="Заключение">Висновок</h2>На цьому, мабуть, і скінчимо. Вийшов повноцінний CRUD додаток. Воно, звичайно, далеко від ідеалу (дуже далеко), але його можна оптимізувати і доопрацювати, виправити косяки і додати функціональності. Можна використовувати вбудовані методи для crud операцій; прикрутити фільтрацію, пошук, сортування; додати інші пов'язані таблиці; реалізувати підтримку різних користувачів з авторизацією та автентифікацією тощо. і т.п. Простір для фантазії безмежний, так що дерзайте. <a href="https://github.com/maxsouldrake/Filmography" target="_blank" rel="nofollow">Посилання на github цього проекту</a> . Дякую за увагу. <em>PS Це моя перша у житті спроба написати статтю, так що не судіть суворо :). Перепрошую, що не додав різних посилань на корисні ресурси, на жаль, все ніяк не можу виробити звичку зберігати посилання на джерела, звідки черпаю інформацію. Ну і, звичайно ж, вибачаюсь за багато літер, стислість не мій талант, сподіваюся хтось зможе це подужати. </em> <em><strong>Посилання на всі частини</strong></em>
<ul>
 <li><a href="https://codegym.cc/groups/posts/2253-znakomstvo-s-maven-spring-mysql-hibernate-i-pervoe-crud-prilozhenie-chastjh-1" target="_blank" rel="nofollow">Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 1)</a></li>
 <li><a href="https://codegym.cc/groups/posts/2252-znakomstvo-s-maven-spring-mysql-hibernate-i-pervoe-crud-prilozhenie-chastjh-2" target="_blank" rel="nofollow">Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 2)</a></li>
 <li><a href="https://codegym.cc/groups/posts/2251-znakomstvo-s-maven-spring-mysql-hibernate-i-pervoe-crud-prilozhenie-chastjh-3" target="_blank" rel="nofollow">Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 3)</a></li>
 <li>Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 4)</li>
</ul>