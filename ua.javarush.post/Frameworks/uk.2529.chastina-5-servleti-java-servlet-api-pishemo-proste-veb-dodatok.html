Частина 5. Сервлети, Java servlet API. Пишемо просте веб-додаток
<p>----------------------------------------</p>
Цей матеріал - частина циклу "Введення в Enterprise-розробку". Попередні статті: Ти вже вмієш писати Java-додатки, які виводять текст на консоль, але ще до ладу не знаєш, як створити свій перший веб-додаток? Добре, влаштовуйся зручніше. У ц
<p>----------------------------------------</p>
Цей матеріал - частина циклу "Введення в Enterprise-розробку". Попередні статті: 
<ul>
 <li><a href="https://codegym.cc/groups/posts/2514-vvedenie-v-enterprise-razrabotku" target="_blank">про мережу</a> ;</li>
 <li><a href="https://codegym.cc/groups/posts/2519-chastjh-2-pogovorim-nemnogo-ob-arkhitekture-po" target="_blank">про архітектуру ПЗ</a> ;</li>
 <li><a href="https://codegym.cc/groups/posts/2521-chastjh-3-protokolih-httphttps" target="_blank">про протоколи HTTP/HTTPS</a> ;</li>
 <li><a href="https://codegym.cc/groups/posts/2523-chastjh-4osnovih-maven" target="_blank">про основи Maven</a> .</li>
</ul><img data-max-width="850" alt="Частина 5. Сервлети, Java servlet API.  Пишемо просте веб-додаток - 1" src="https://cdn.javarush.com/images/article/4503fc13-8fec-4de0-b1c8-374c978e2f54/original.jpeg">Ти вже вмієш писати Java-додатки, які виводять текст на консоль, але ще до ладу не знаєш, як створити свій перший веб-додаток? Добре, влаштовуйся зручніше. У цій статті ми познайомимося з сервлетами і напишемо програму, якою ти зможеш похвалитися перед друзями, не відправляючи їм джарник і не змушуючи їх качати джаву. Напишемо <span class="text-bold">веб-додаток</span> . Якщо ти ще не знайомий з підходами, які використовуються у веб-програмуванні, раджу почати читання з першої статті циклу " <a href="https://codegym.cc/groups/posts/2514-vvedenie-v-enterprise-razrabotku" target="_blank">Введення в Enterprise-розробку</a> ". 
<h2>Що таке сервлет</h2>Спочатку розберемося, що таке сервлет і чому ти так часто чуєш про нього. <span class="text-bold">Java Servlet API</span> - стандартизований API, призначений для реалізації на сервері та роботі з клієнтом за схемою запит-відповідь. <span class="text-bold">Сервлет</span> – це клас, який вміє отримувати запити від клієнта та повертати йому відповіді. Так, сервлети Java — саме ті елементи, за допомогою яких будується клієнт-серверна архітектура. Якщо пам'ятаєш, про неї ми вже говорабо в одній із статей циклу. Не будемо ходити навкруги: давай відразу напишемо трохи коду. 
<h2>Що потрібно для створення веб-програми</h2>Для комфортної роботи з сервлетами Java тобі знадобиться Intellij IDEA Ultimate Edition. Вона платна, але можна активувати 30 днів пробного періоду або ж скористатися early access версією — вона завжди безкоштовна. Також установи сервер нашої програми - Apache Tomcat. Tomcat – це контейнер сервлетів: саме він обробляє вхідні запити ззовні та передає їх нашому додатку. Завантажити Tomcat можна за <a href="https://tomcat.apache.org/download-90.cgi" rel="nofollow" target="_blank">цим посиланням</a> . 
<div class="email-subscription">
 <iframe frameborder="0" src="https://secure.esputnik.com.ua/4Q0Ef6d2SOs" width="100%" height="200" scrolling="no" data-savepage-key="0-2"></iframe>
</div>
<h2>Створюємо перший веб-додаток</h2>Якщо все готово, створимо Maven-проект. Якщо ти не знайомий з Мавеном, зверни увагу на <a href="https://codegym.cc/groups/posts/2523-chastjh-4osnovih-maven" target="_blank">попередню статтю</a> . Ну що почнемо! 
<ol>
 <li>
  <p>У pom.xml додамо залежність javax.servlet-api та встановимо packaging war:</p>
  <pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>project xmlns<span class="token operator">=</span><span class="token string">"http://maven.apache.org/POM/4.0.0"</span>
        xmlns<span class="token operator">:</span>xsi<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/XMLSchema-instance"</span>
 xsi<span class="token operator">:</span>schemaLocation<span class="token operator">=</span><span class="token string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span class="token operator">&gt;</span>
   <span class="token generics"><span class="token punctuation">&lt;</span>modelVersion<span class="token punctuation">&gt;</span></span><span class="token number">4.0</span><span class="token number">.0</span><span class="token operator">&lt;</span><span class="token operator">/</span>modelVersion<span class="token operator">&gt;</span>

   <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>example<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
   <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>servlets<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
   <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.0</span><span class="token operator">-</span>SNAPSHOT<span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
   <span class="token generics"><span class="token punctuation">&lt;</span>packaging<span class="token punctuation">&gt;</span></span>war<span class="token operator">&lt;</span><span class="token operator">/</span>packaging<span class="token operator">&gt;</span>

   <span class="token generics"><span class="token punctuation">&lt;</span>dependencies<span class="token punctuation">&gt;</span></span>
       <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
           <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>javax<span class="token punctuation">.</span>servlet<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
           <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>javax<span class="token punctuation">.</span>servlet<span class="token operator">-</span>api<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
           <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">4.0</span><span class="token number">.1</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>dependencies<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>project<span class="token operator">&gt;</span></code></pre>
  <p>Клас простого сервлету:</p>
  <pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">PrintWriter</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>

   <span class="token annotation punctuation">@Override</span>
   <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
       resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">PrintWriter</span> printWriter <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       printWriter<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"Hello!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       printWriter<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></li>
 <li>
  <p>Для запуску програми потрібно створити конфігурацію Tomcat:</p><img data-max-width="850" alt="Частина 5. Сервлети, Java servlet API.  Пишемо просте веб-додаток - 2" src="https://cdn.javarush.com/images/article/fc3f7404-cafa-47e4-8d83-d41a1b1be931/original.jpeg"> <img data-max-width="850" alt="Частина 5. Сервлети, Java servlet API.  Пишемо просте веб-додаток - 3" src="https://cdn.javarush.com/images/article/a0076f9e-869b-4020-ae01-fa2098a84968/original.jpeg">
  <p></p></li>
 <li>
  <p>Далі вказуємо, яку версію Tomcat ми будемо використовувати, URL, яким можна звертатися до сервера і порт. У тебе має вийти приблизно так:</p><img data-max-width="850" alt="Частина 5. Сервлети, Java servlet API.  Пишемо просте веб-додаток - 4" src="https://cdn.javarush.com/images/article/c264a5fe-1820-4661-a3b8-8caa49ad4979/original.jpeg"></li>
 <li>
  <p>Залишилося вказати артефакт (зібраний проект у jar-архів), який розгорнеться у контейнері. Можна натиснути кнопку <span class="text-bold">Fix</span> і вибрати <span class="text-bold">war exploded</span> : це означає, що після перескладання проекту артефакт автоматично поміщатиметься в контейнер сервлетів. <img data-max-width="300" alt="Частина 5. Сервлети, Java servlet API.  Пишемо просте веб-додаток - 5" src="https://cdn.javarush.com/images/article/cefcbb77-8aba-4ee5-a0e3-bf88523bd531/original.jpeg"></p></li>
 <li>
  <p><span class="text-bold">Application context</span> за промовчанням встановлений <span class="text-bold">servlets_war_exploded</span> , а це означає, що до додатку потрібно звертатися за адресаою: <a href="http://localhost:8080/servlets_war_exploded" rel="nofollow" target="_blank">http://localhost:8080/servlets_war_exploded</a> .</p>
  <p>Навіщо нам зайвий текст? Видалимо непотрібне. Тепер адресаа програми у нас така: <a href="http://localhost:8080/servlets_war_exploded" rel="nofollow" target="_blank">http://localhost:8080</a> .</p><img data-max-width="800" data-id="36a496dd-ab8a-4ac8-86c4-33a9307206f7" class="img-fluid" alt="Частина 5. Сервлети, Java servlet API.  Пишемо просте веб-додаток - 6" src="https://cdn.javarush.com/images/article/36a496dd-ab8a-4ac8-86c4-33a9307206f7/800.jpeg" style="width: 800px;">
  <p></p></li>
 <li>
  <p>Натискаємо ОК. Бачимо, що у нас з'явилася можливість запуску програми:</p><img data-max-width="300" alt="Частина 5. Сервлети, Java servlet API.  Пишемо просте веб-додаток - 7" src="https://cdn.javarush.com/images/article/23f3bfa2-e6ad-4ab7-98a6-753d9144bac6/original.jpeg">
  <p>Тепер при запуску програми повинен відкритися браузер і видати 404 помилку. Це логічно, адже за адресаою <a href="http://localhost:8080/servlets_war_exploded" rel="nofollow" target="_blank">http://localhost:8080/</a> повинен бути сервлет з мапінгом “/”, а у нашого єдиного сервлету мапінг <span class="text-green">"/hello"</span> .</p></li>
 <li>
  <p>Звертаємось до нього за адресаою <a href="http://localhost:8080/hello" rel="nofollow" target="_blank">http://localhost:8080/hello</a> , і отримуємо очікувану відповідь - рядок "Hello"!</p></li>
</ol><a href="https://codegym.cc/welcome" target="_blank"><img id="click_banner1_articles" data-id="533419d2-9803-4c1d-ba20-d14b9682c411" data-max-width="1080" alt="Частина 5. Сервлети, Java servlet API.  Пишемо просте веб-додаток - 8" src="https://cdn.javarush.com/images/article/533419d2-9803-4c1d-ba20-d14b9682c411/1080.jpeg" style="width: 1080px;"></a><span class="text-bold">Якщо все працює, то давай розберемо код. </span> Щоб <span class="text-bold">зі звичайного класу зробити http-сервлет</span> , його потрібно успадкувати від класу HttpServlet. Над класом вказуємо інструкцію @WebServlet(), у якій прив'язуємо (мапім) сервлет до конкретного шляху (“/hello”). Ця інструкція з'явилася тільки в Java Servlet API 3.0, тому в інтернеті дуже багато прикладів, де мапінг сервлетів відбувається через XML-файл. Нині це не обов'язково. Щоб <span class="text-bold">обробляти GET-запити</span> , перевизначаємо метод doGet(). Зверніть увагу на аргументи методу - HttpServletRequest та HttpServletResponse. З об'єкта HttpServletRequest ми можемо взяти всю необхідну інформацію про запит, у HttpServletResponse можемо записати нашу відповідь та встановити необхідні заголовки. 
<h2>Робота з параметрами та сесією</h2>Удосконалимо наш сервлет, щоб він міг обробляти параметри запиту та працювати з сесією: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSession</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">PrintWriter</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>

   <span class="token annotation punctuation">@Override</span>
   <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
       <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">Integer</span> visitCounter <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"visitCounter"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>visitCounter <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           visitCounter <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
           visitCounter<span class="token operator">++</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
       session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"visitCounter"</span><span class="token punctuation">,</span> visitCounter<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">String</span> username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">PrintWriter</span> printWriter <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>username <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           printWriter<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"Hello, Anonymous"</span> <span class="token operator">+</span> <span class="token string">"&lt;br&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
           printWriter<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"Hello, "</span> <span class="token operator">+</span> username <span class="token operator">+</span> <span class="token string">"&lt;br&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
       printWriter<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"Page was visited "</span> <span class="token operator">+</span> visitCounter <span class="token operator">+</span> <span class="token string">" times."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       printWriter<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> Зараз сервлет працює з сесією, збільшуючи лічильник visitCounter при кожному відвідуванні сторінки. Якщо атрибут visitCounter ще не створений (при першому відвідуванні сторінки), метод getAttribute() поверне null, тому необхідно проводити перевірку на null. Те саме стосується параметрів запиту. Якщо користувач не передав параметр username, його значення буде null. У такому разі вітаємо користувача як анонімного. Щоб передати параметр GET-запиту, використовуються path-variables, тобто потрібно звернутися за посиланням <a href="http://localhost:8080/hello?username=Pavel" rel="nofollow" target="_blank">http://localhost:8080/hello?username=Pavel</a> . Детальніше про http-запити можна почитати у <a href="https://codegym.cc/groups/posts/2521-chastjh-3-protokolih-httphttps" target="_blank">попередній статті</a>циклу. Тепер наша програма має мінімальну логіку, але трохи дратує 404-а помилка в root-шляху. Щоб виправити її, створимо ще один сервлет і замапи його на початкову сторінку @WebServlet("/"). Завдання цього сервлета – перенаправляти запити на шлях “/hello”. Зробити це можна двома способами: за допомогою forward чи redirect. Мабуть варто розібратися, в чому між ними різниця. <span class="text-bold">forward</span> - делегує обробку запиту іншому сервлет на сервері, клієнт при цьому не задіюється. Для цього до методу doGet() нового сервлета потрібно додати такий код: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class=" language-java"><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> У цьому коді ми звертаємося до контексту сервлетів, з нього дістаємо диспетчер запитів потрібного сервлету та просимо його опрацювати конкретний запит із зазначеними параметрами (req, resp). <span class="text-bold">redirect</span> — повертає клієнту адресау, яким потрібно звернутися для обробки його запиту. Більшість браузерів переходять на передане посилання автоматично. Для реалізації редиректу потрібно додати цей код: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class=" language-java">resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> Ми в HttpServletResponse викликаємо метод redirect() і передаємо йому адресау, на яку клієнту потрібно звернутися. Важлива деталь: http-параметри потрібно додати в кінці повного шляху редиректу, що не дуже зручно. У нашій ситуації краще використовувати forward, а буває так, що краще - redirect. Якщо розумітимеш різницю в їхній роботі, не помабошся з вибором. Код нового сервлета виглядає так: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IndexServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>

   <span class="token annotation punctuation">@Override</span>
   <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
<span class="token comment">//        getServletContext().getRequestDispatcher("/hello").forward(req, resp);</span>
       resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h2>Підсумок</h2>Твоє перше веб-додаток готове. У наступній статті ти дізнаєшся, як його розгорнути без використання Intellij IDEA. Ми написали програму, яка обробляє лише GET-запити. Інші http-методи обробляються аналогічним чином – перевизначаючи відповідні методи батьківського класу. Використовуючи такі прості сервлети, можна будувати складні багатофункціональні веб-програми. Звичайно, використовуючи великі фреймворки типу Spring, це робити набагато простіше. Але якщо дуже хочеться докладніше вникнути у всі можливості сервлетів, можеш почитати <a href="https://javaee.github.io/servlet-spec/downloads/servlet-4.0/servlet-4_0_FINAL.pdf" rel="nofollow" target="_blank">офіційну специфікацію</a> . <a href="https://codegym.cc/groups/posts/2533-chastjh-6-konteynerih-servletov" target="_blank">Частина 6. Контейнери сервлетів </a> <a href="https://codegym.cc/groups/posts/2536-chastjh-7-znakomstvo-s-patternom-mvc-model-view-controller" target="_blank">Частина 7. Знайомство з патерном MVC (Model-View-Controller) </a> <a href="https://codegym.cc/groups/posts/2537-chastjh-8-pishem-neboljhshoe-prilozhenie-na-spring-boot" target="_blank">Частина 8. Пишемо невелику програму на spring-boot</a>