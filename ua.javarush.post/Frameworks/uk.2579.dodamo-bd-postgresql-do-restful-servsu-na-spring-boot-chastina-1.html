Додаємо БД PostgreSQL до RESTful сервісу на Spring Boot. Частина 1
<p>----------------------------------------</p>
Почну з того, що мені дуже сподобався цикл статей від під назвою "Огляд REST". Ось посилання на ці статті: Загалом, я вирішив взяти на себе сміливість і трохи доповнити їх. А саме, розповісти як створити базу даних та підключити її до цієї 
<p>----------------------------------------</p>
Почну з того, що мені дуже сподобався цикл статей від <a href="https://codegym.cc/users/1293665" target="_blank" rel="nofollow">Еллеонори Керрі</a> під назвою "Огляд REST". Ось посилання на ці статті: 
<ul>
 <li><a href="https://codegym.cc/groups/posts/2486-obzor-rest-chastjh-1-chto-takoe-rest" target="_blank" rel="nofollow">Огляд REST. Частина 1: що таке</a></li>
 <li><a href="https://codegym.cc/groups/posts/2487-obzor-rest-chastjh-2-kommunikacija-mezhdu-klientom-i-serverom-" target="_blank" rel="nofollow">Огляд REST. Частина 2: комунікація між клієнтом та сервером</a></li>
 <li><a href="https://codegym.cc/groups/posts/2488-obzor-rest-chastjh-3-sozdanie-restful-servisa-na-spring-boot" target="_blank" rel="nofollow">Огляд REST. Частина 3: створення RESTful сервісу на Spring Boot</a></li>
</ul><img alt="Додаємо БД PostgreSQL до RESTful сервісу на Spring Boot.  Частина 1 - 1" border="0" src="https://codegym-com.translate.goog/images/article/1bab8b6e-a2cc-4a40-93ae-ccaafcc81e39/original.png">Загалом, я вирішив взяти на себе сміливість і трохи доповнити їх. А саме, розповісти як створити базу даних та підключити її до цієї програми. З чого почати? Напевно, з самої бази даних. Я вирішив використовувати <span>PostgreSQL</span> , тому що мені сподобався дружній інтерфейс її адмінки. Для початку нам потрібно завантажити установник PostgreSQL, наприклад, звідси: <a href="https://www.enterprisedb.com/downloads/postgres-postgresql-downloads" target="_blank" rel="nofollow">PostgreSQL Database Download</a> Повний процес установки я описувати не буду, т.к. він може відрізнятися залежно від ОС. Однак зазначу, що в процесі вам потрібно придумати пароль адміністратора для дефолтної ролі (облікового запису) <span>postgres</span> і ввести його двічі. Для простоти я встановив пароль <span>123</span> . Звичайно, в реальних проектах необхідно вигадати щось складніше. <img alt="Додаємо БД PostgreSQL до RESTful сервісу на Spring Boot.  Частина 1 - 2" src="https://codegym-com.translate.goog/images/article/3b02a24a-079f-4e23-9245-2571bfa34a78/original.png">Далі програма установки пропонує вибрати порт, я залишив його значення за промовчанням. <img alt="Додаємо БД PostgreSQL до RESTful сервісу на Spring Boot.  Частина 1 - 3" src="https://codegym-com.translate.goog/images/article/e67312ba-1234-4b22-8d8b-41fd4e6a1715/original.png"><span>Locale</span> також залишив за замовчуванням. <img alt="Додаємо БД PostgreSQL до RESTful сервісу на Spring Boot.  Частина 1 - 4" src="https://codegym-com.translate.goog/images/article/857bbc16-1b17-42d5-aa7b-83c9d03ecff9/original.png">Встановабо, далі відкриваємо інтерфейс адміністратора <span>pgAdmin</span> . Відкриється браузер з віконцем, де нас попросять ввести створений раніше пароль. <img alt="Додаємо БД PostgreSQL до RESTful сервісу на Spring Boot.  Частина 1 - 5" src="https://codegym-com.translate.goog/images/article/59ceb969-4591-46c2-8527-77b6c134ce75/original.png">Тепер нам потрібно встановити мову інтерфейсу. Для цього натискаємо <span>Configure pgAdmin -&gt; Miscellaneous -&gt; User Language</span> , вибираємо потрібну мову <span>-&gt; Save</span> , і <span>перезавантажуємо сторінку браузера</span> . <img alt="Додаємо БД PostgreSQL до RESTful сервісу на Spring Boot.  Частина 1 - 6" src="https://codegym-com.translate.goog/images/article/5542c356-13fd-4907-a52e-04b8a769ce49/original.png">У верхньому лівому куті сторінки натискаємо <span>Server</span> , з'являється віконце « <span>Підключитися до сервера</span> ». Вводимо пароль ще раз і ставимо галку <span>Save Password</span>, щоб не вводити його щоразу. <img alt="Додаємо БД PostgreSQL до RESTful сервісу на Spring Boot.  Частина 1 - 7" src="https://codegym-com.translate.goog/images/article/fa331eab-4750-4e50-b675-a9d9c42579c2/original.png">Можна було б і надалі використовувати роль адміністратора для всіх баз даних, але краще створимо нову роль, адже у нас може бути багато баз даних та багато програм, які їх використовують. Для цього у лівому верхньому куті тиснемо на <span>PostgreSQL 12 --&gt;</span> ПКМ на <span>Ролі входу/групи --&gt; Створити --&gt; Роль входу/групи</span> <img alt="Додаємо БД PostgreSQL до RESTful сервісу на Spring Boot.  Частина 1 - 8" src="https://codegym-com.translate.goog/images/article/de331482-0c9b-47df-8cd0-3e60a2286c72/original.png"> У спливаючому вікні на вкладці « <span>Загальні</span> » вписуємо ім'я ролі. Я назвав роль <span>root</span> . <img alt="Додаємо БД PostgreSQL до RESTful сервісу на Spring Boot.  Частина 1 - 9" src="https://codegym-com.translate.goog/images/article/cc9afc7e-c897-4f8d-82d3-50a785f4d9fc/original.png">На вкладці « <span>Визначення</span> » створюємо новий пароль, я залишив <span>123</span> просто щоб не заплутатися. <img alt="Додаємо БД PostgreSQL до RESTful сервісу на Spring Boot.  Частина 1 - 10" src="https://codegym-com.translate.goog/images/article/9e8755bf-ef67-48ec-8230-7d9fcaa42598/original.png">Переходимо на вкладку « <span>Права</span> » та відзначаємо всі необхідні пункти. Я встановив усі пункти « <span>ТАК</span>». Натискаємо " <span>Зберегти</span> " <img alt="Додаємо БД PostgreSQL до RESTful сервісу на Spring Boot.  Частина 1 - 11" src="https://codegym-com.translate.goog/images/article/cef886e4-a846-47eb-9d30-bac3d5cbdd73/original.png">Переходимо до створення бази даних. Тиснемо ПКМ на <span>"Бази даних" --&gt; Створити --&gt; База даних</span> <img alt="Додаємо БД PostgreSQL до RESTful сервісу на Spring Boot.  Частина 1 - 12" src="https://codegym-com.translate.goog/images/article/1500f7cc-e5a3-4c11-a308-7b56d2a6f092/original.png"> На вкладці " <span>Загальні</span> " створюємо назву бази даних. Нехай це буде, наприклад, <span>customers</span> . Власником призначаємо <span>root</span> , якого ми створабо на попередньому етапі. <img alt="Додаємо БД PostgreSQL до RESTful сервісу на Spring Boot.  Частина 1 - 13" src="https://codegym-com.translate.goog/images/article/96aee8bb-df7d-4a16-b6b9-fa02a1ecd5b9/original.png">На вкладці " <span>Визначення</span> " перевіряємо, що у нас встановлено кодування <span>UTF8</span> . Натискаємо « <span>Зберегти</span> ». Все, наша база даних створена (поки що пуста). <img alt="Додаємо БД PostgreSQL до RESTful сервісу на Spring Boot.  Частина 1 - 14" src="https://codegym-com.translate.goog/images/article/a5afb34f-a6a1-4aa9-9ca8-24872baefb11/original.png">У цьому можна було б закінчити з pgAdmin, т.к. таблиці ми створюватимемо програмно, але, про всяк випадок, покажу як створити таблицю вручну. Розгортаємо дерево<span>customers --&gt; Схеми --&gt; public</span> . Тиснемо ПКМ <span>Таблиці --&gt; Створити --&gt; Таблиця</span> . <img alt="Додаємо БД PostgreSQL до RESTful сервісу на Spring Boot.  Частина 1 - 15" src="https://codegym-com.translate.goog/images/article/fe41bf80-af33-403f-b3c2-4d8bb0ee3ef0/original.png">Відкриється спливаюче вікно. На вкладці " <span>Загальні</span> " призначаємо ім'я нашої таблиці, наприклад <span>test_table</span> , власником призначаємо <span>root</span> . <img alt="Додаємо БД PostgreSQL до RESTful сервісу на Spring Boot.  Частина 1 - 16" src="https://codegym-com.translate.goog/images/article/fd87e660-5e7b-4eb2-a2e4-1833ceda3b3c/original.png">Переходимо на вкладку " <span>Стовпці</span> ", натискаємо на " <span>+</span> " для створення нового стовпця. Вводимо ім'я “ <span>id</span> ” і тип даних <span>bigserial</span> , що еквівалентно типу <span>Long</span> в Java, але з авто-інкрементом (при додаванні нового запису, <span>id</span> автоматично збільшуватиметься на одиницю). <span>Не NULL</span> відзначаємо як « <span>Так</span>», первинний ключ теж « <span>Так</span> ». <img alt="Додаємо БД PostgreSQL до RESTful сервісу на Spring Boot.  Частина 1 - 17" src="https://codegym-com.translate.goog/images/article/f8401b71-881c-4a7c-ac21-d362850a03da/original.png">Створюємо так само стовпці ” <span>name</span> ”, “ <span>email</span> ” і ” <span>phone</span> ”. Тип даних вибираємо <span>character varying</span> це відповідає типу <span>String</span> , але дозволяє задати максимальну довжину. Задаємо максимальну довжину імені в <span>200</span> символів для заповнення П.І.Б. в одному стовпці. Задаємо максимальну довжину <span>email</span> у <span>254</span> символи. Чому у email така максимальна довжина можна дізнатися <a href="https://stackoverflow.com/questions/386294/what-is-the-maximum-length-of-a-valid-email-address" target="_blank" rel="nofollow">тут</a> . Для телефонного номера виділяємо <span>20</span> символів, цього має вистачити. Трохи про телефонні номери:<a href="https://habr.com/ru/post/279751/" target="_blank" rel="nofollow">Помилки програмістів про телефонні номери</a> (Хабр) <span>Не NULL</span> у всіх стовпцях відзначаємо як « <span>Так</span> », якщо хочемо, щоб ці дані були обов'язковими. Натискаємо « <span>Зберегти</span> ». Все, таблиця створена. <img alt="Додаємо БД PostgreSQL до RESTful сервісу на Spring Boot.  Частина 1 - 18" src="https://codegym-com.translate.goog/images/article/1ec4945c-a216-426f-93e6-117ae343f8c6/original.png">Для видалення тестової таблиці натисніть ПКМ по ній (у дереві) і « <span>видалити</span> », т.к. вона нам більше не потрібна, адже ми створюватимемо таблиці з нашої програми. Закриваємо <span>pgAdmin</span> і переходимо до нашої програми. Відкриваємо IDEA із нашим проектом. Натискаємо <span>Database</span> у правому стовпці інтерфейсу, натискаємо на " <span>+</span> " для додавання нашої БД. Далі <span>Data Source -&gt; PostgreSQL</span> . <img alt="Додаємо БД PostgreSQL до RESTful сервісу на Spring Boot.  Частина 1 - 19" src="https://codegym-com.translate.goog/images/article/0dfec16b-85ba-4ce9-8412-146337cc0ffb/original.png">У спливаючому вікні вписуємо в поле<span>User</span> роль <span>root</span> , яку ми створабо раніше, і наш пароль <span>123</span> у полі <span>password</span> . У полі <span>Database</span> пишемо назву нашої БД <span>customers</span> . Натискаємо кнопку <span>Test Connection</span> і якщо бачимо зелену галку під нею, то все в порядку, і натискаємо кнопку <span>OK</span> . <img alt="Додаємо БД PostgreSQL до RESTful сервісу на Spring Boot.  Частина 1 - 20" src="https://codegym-com.translate.goog/images/article/bc9dacc8-af6e-40b7-85aa-9e2b79858c23/original.png">Все, до БД підключабося, тепер переходимо до файлу <span>pom.xml</span> і додамо залежності. <span>Для роботи з БД ORM</span> : 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
    <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>starter<span class="token operator">-</span>data<span class="token operator">-</span>jpa<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span></code></pre><span>Для створення REST контролера:</span>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
    <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>starter<span class="token operator">-</span>data<span class="token operator">-</span>rest<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span></code></pre><span>Для сервера Tomcat:</span>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
    <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>starter<span class="token operator">-</span>tomcat<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span></code></pre><span>Для PostgreSQL:</span>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
    <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>postgresql<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>postgresql<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">42.2</span><span class="token number">.10</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span></code></pre> Розібралися з pom.xml, перейдемо в папку resources, і заповнимо файл <span>application.properties</span> так: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java">spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>url<span class="token operator">=</span>jdbc<span class="token operator">:</span>postgresql<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">5432</span><span class="token operator">/</span>customers
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>username<span class="token operator">=</span>root
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>password<span class="token operator">=</span><span class="token number">123</span>

spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>driver<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">-</span>name<span class="token operator">=</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>postgresql<span class="token punctuation">.</span></span>Driver</span>
spring<span class="token punctuation">.</span>jpa<span class="token punctuation">.</span>database<span class="token operator">=</span>postgresql
spring<span class="token punctuation">.</span>jpa<span class="token punctuation">.</span>database<span class="token operator">-</span>platform<span class="token operator">=</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>hibernate<span class="token punctuation">.</span>dialect<span class="token punctuation">.</span></span>PostgreSQL10Dialect</span></code></pre> Тут ми прописали URL нашої бази даних, повідомабо логін та пароль для неї, прописали драйвер для PostgreSQL, позначабо, що будемо використовувати тип даних PostgreSQL та прописали діалект для Hibernate. Далі створимо в тій же папці ресурсів нову директорію під назвою <span>database</span> . У цій директорії створимо 2 файли: <span>initDB.sql</span> і <span>populateDB.sql</span> . Перший відповідатиме за створення таблиць, другий за початкове їх заповнення. Відкриємо <span>initDB.sql</span> і побачимо зверху зелену смужку з написом <span>SQL dialect is not configured</span> . Це означає, що ми не вибрали діалект SQL для нашого проекту (а їх є кілька). Натискаємо праворуч на цій же смужці на напис <span>Change dialect to…</span>. У спливаючому віконці тиснемо <span>Project SQL Dialect</span> , і оскільки база даних у нас <span>PostgreSQL</span> , то вибираємо однойменний діалект. Тиснемо <span>ОК</span> <img alt="Додаємо БД PostgreSQL до RESTful сервісу на Spring Boot.  Частина 1 - 21" src="https://codegym-com.translate.goog/images/article/26dca57a-df1f-43cf-b349-c074b4b7f3e8/original.png"> Перейдемо до заповнення наших файлів <span>.sql</span> . Заповнимо спочатку файл <span>initDB.sql</span> : 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java">CREATE TABLE IF NOT <span class="token class-name">EXISTS</span> clients
<span class="token punctuation">(</span>
    id    BIGSERIAL <span class="token class-name">PRIMARY</span> KEY <span class="token punctuation">,</span>
    name  <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token class-name">NOT</span> NULL <span class="token punctuation">,</span>
    email <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">254</span><span class="token punctuation">)</span> <span class="token class-name">NOT</span> NULL <span class="token punctuation">,</span>
    phone <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>  <span class="token class-name">NOT</span> NULL
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> Якщо у вас після заповнення файлу якісь слова окрім <span>clients</span> написані білим шрифтом, то натисніть ПКМ усередині тексту і виберіть ще раз <span>Change Dialect --&gt; PostgreSQL</span> . Як ви напевно вже зрозуміли, це ті самі дані, які ми заповнювали при створенні тестової таблиці вручну. Тут вони оформлені на діалекті PostgreSQL мови SQL. Тепер заповнимо файл <span>populateDB.sql</span> : 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class=" language-java">INSERT INTO clients VALUES
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Vassily Petrov'</span><span class="token punctuation">,</span> <span class="token string">'vpetrov@jr.com'</span><span class="token punctuation">,</span> <span class="token string">'+7 (191) 322-22-33)'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'Pjotr Vasechkin'</span><span class="token punctuation">,</span> <span class="token string">'pvasechkin@jr.com'</span><span class="token punctuation">,</span> <span class="token string">'+7 (191) 223-33-22)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> Якщо назва таблиці <span>clients</span> у вас написана червоними літерами, нічого страшного. Справа в тому, що ми ще не створабо цю таблицю, і IDEA її поки що не дізнається. Для того, щоб створити та заповнити таблицю, нам потрібно повернутися до файлу <span>application.properties</span> і додати туди три наступні рядки: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class=" language-java">spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>initialization<span class="token operator">-</span>mode<span class="token operator">=</span>ALWAYS
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>schema<span class="token operator">=</span>classpath<span class="token operator">*</span><span class="token operator">:</span>database<span class="token operator">/</span>initDB<span class="token punctuation">.</span>sql
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>data<span class="token operator">=</span>classpath<span class="token operator">*</span><span class="token operator">:</span>database<span class="token operator">/</span>populateDB<span class="token punctuation">.</span>sql</code></pre> У цих рядках ми говоримо, що хочемо ініціалізувати БД програмно і вказуємо, які файли потрібно для цього використовувати. Далі переходимо в метод <span>main</span> нашого додатка, і <span>запускаємо його</span> . Після цього йдемо в <span>pgAdmin --&gt; Servers --&gt; PostgreSQL 12 --&gt; Бази даних --&gt; customers --&gt; Схеми --&gt; public</span> , натискаємо ПКМ на " <span>Таблиці</span> ", " <span>Оновити</span> ". Якщо все пройшло успішно, то бачимо створену таблицю <span>clients</span> . Після цього переходимо назад у файл <span>application.properties</span> та закоментуємо рядок. 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class=" language-java">spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>data<span class="token operator">=</span>classpath<span class="token operator">*</span><span class="token operator">:</span>database<span class="token operator">/</span>populateDB<span class="token punctuation">.</span>sql</code></pre> як показано нижче: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java">spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>url<span class="token operator">=</span>jdbc<span class="token operator">:</span>postgresql<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">5432</span><span class="token operator">/</span>customers
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>username<span class="token operator">=</span>root
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>password<span class="token operator">=</span><span class="token number">123</span>

spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>driver<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">-</span>name<span class="token operator">=</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>postgresql<span class="token punctuation">.</span></span>Driver</span>
spring<span class="token punctuation">.</span>jpa<span class="token punctuation">.</span>database<span class="token operator">=</span>postgresql
spring<span class="token punctuation">.</span>jpa<span class="token punctuation">.</span>database<span class="token operator">-</span>platform<span class="token operator">=</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>hibernate<span class="token punctuation">.</span>dialect<span class="token punctuation">.</span></span>PostgreSQL10Dialect</span>

spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>initialization<span class="token operator">-</span>mode<span class="token operator">=</span>ALWAYS
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>schema<span class="token operator">=</span>classpath<span class="token operator">*</span><span class="token operator">:</span>database<span class="token operator">/</span>initDB<span class="token punctuation">.</span>sql
#spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>data<span class="token operator">=</span>classpath<span class="token operator">*</span><span class="token operator">:</span>database<span class="token operator">/</span>populateDB<span class="token punctuation">.</span>sql</code></pre> Якщо ми цього не зробимо, то при наступному запуску програми отримаємо таку помилку: <em>org.postgresql.util.PSQLException: ПОМИЛКА: значення ключа, що повторюється, порушує обмеження унікальності "clients_pkey"</em> . Це відбувається тому, що ми вже заповнені в таблиці поля з <span>id 1</span> і <span>2</span> (ще при першому запуску). У створеній нами таблиці поле <span class="text-bold">id</span> вказане як <span class="text-bold">bigserial</span> , що відповідає типу <span class="text-bold">Long</span> Java. Однак у нашій програмі для цього поля використовується тип <span class="text-bold">Integer</span>. Я вирішив показати використання Long (BIGSERIAL), тому що це більший діапазон ніж Integer. Справа в тому, що в таблицях поле, позначене як Primary Key може використовуватися не тільки для зберігання <span class="text-bold">id</span> користувачів, але і для зберігання індексів різних даних, і кількість таких записів може перевищити максимальне значення Integer. Наприклад, якщо наша програма щомиті робить якісь виміри і записує дані в таблицю. Для того, щоб переписати наші класи під використання типу Long даних, нам необхідно поміняти тип з Integer на Long у всіх класах і методах, де використовується поле <span class="text-bold">id</span> . Ми цього робити не будемо, бо спочатку програма була написана автором під тип <span class="text-bold">id</span>Integer, отже, у цьому є якийсь сенс. Щоб продовжити, ще раз видалімо створену нами таблицю <span class="text-bold">clients</span> з нашої БД, але тепер ми спробуємо зробити це програмно, а не вручну. Для цього закоментуємо наш код у файлі <span class="text-bold">initDB.sql</span> і додамо один рядок: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token operator">--</span> CREATE TABLE IF NOT EXISTS clients
<span class="token operator">--</span> <span class="token punctuation">(</span>
<span class="token operator">--</span>     id    BIGSERIAL <span class="token class-name">PRIMARY</span> KEY <span class="token punctuation">,</span>
<span class="token operator">--</span>     name  <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token class-name">NOT</span> NULL <span class="token punctuation">,</span>
<span class="token operator">--</span>     email <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">254</span><span class="token punctuation">)</span> <span class="token class-name">NOT</span> NULL <span class="token punctuation">,</span>
<span class="token operator">--</span>     phone <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>  NOT NULL
<span class="token operator">--</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
DROP TABLE IF EXISTS clients</code></pre> Запустимо програму, перейдемо в <span class="text-bold">pgAdmin</span> , натиснемо ПКМ на " <span class="text-bold">Таблиці</span> " (у нашій базі даних <span class="text-bold">customers</span> ) <span class="text-bold">-&gt;</span> " <span class="text-bold">Оновити</span> ", і побачимо, що наша таблиця зникла. <span class="text-bold">NB! </span>Будьте обережні за допомогою цієї команди, інакше ви ризикуєте втратити всі дані, які були у вашій таблиці! Повернемося до файлу <span class="text-bold">initDB.sql</span> і перепишемо його наступним чином: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java">CREATE TABLE IF NOT <span class="token class-name">EXISTS</span> clients
<span class="token punctuation">(</span>
    id    SERIAL <span class="token class-name">PRIMARY</span> KEY <span class="token punctuation">,</span>
    name  <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token class-name">NOT</span> NULL <span class="token punctuation">,</span>
    email <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">254</span><span class="token punctuation">)</span> <span class="token class-name">NOT</span> NULL <span class="token punctuation">,</span>
    phone <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token class-name">NOT</span> NULL
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> Тут ми змінабо тип <span class="text-bold">id</span> на <span class="text-bold">SERIAL</span> , що відповідає типу <span class="text-bold">Integer</span> , який ми використовуємо для поля <span class="text-bold">id</span> у нашій програмі. Крім того, було збільшено максимальну довжину поля phone, щоб ми могли вільно використовувати пробіли та спеціальні символи (дужки, тире та ін.) у його написанні. Максимальна кількість цифр у телефонному номері зараз становить 18 цифр (якщо мені не змінює пам'ять). Я встановив розмір 50 символів, щоб вистачило напевно. Перейдемо у файл application.properties, коментуємо рядок: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class=" language-java">spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>data<span class="token operator">=</span>classpath<span class="token operator">*</span><span class="token operator">:</span>database<span class="token operator">/</span>populateDB<span class="token punctuation">.</span>sql</code></pre> Запустимо нашу програму, зайдемо в pgAdmin, перевіримо, що наша таблиця створена, І закоментуємо цей рядок назад. 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class=" language-java">#spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>data<span class="token operator">=</span>classpath<span class="token operator">*</span><span class="token operator">:</span>database<span class="token operator">/</span>populateDB<span class="token punctuation">.</span>sql</code></pre> На цьому першу частину статті мабуть закінчу. <a href="https://codegym.cc/welcome" target="_blank"><img id="click_banner1_articles" data-max-width="1024" data-id="28cd68ac-3129-4047-97ae-c2f1f3548c01" class="img-fluid" alt="Додаємо БД PostgreSQL до RESTful сервісу на Spring Boot.  Частина 1 - 22" src="https://cdn.javarush.com/images/article/28cd68ac-3129-4047-97ae-c2f1f3548c01/1024.jpeg" style="width: 1024px;"></a>Сподіваюся, вона вам сподобається, пишіть коментарі (навіть якщо не сподобалося). У другій частині ми перепишемо наші класи, щоб вони могли працювати з реальними базами даних. Продовження: <a href="https://codegym.cc/groups/posts/2582-dobavljaem-bd-k-restful-servisu-na-spring-boot-chastjh-2" target="_blank" rel="nofollow">Додаємо БД PostgreSQL до RESTful сервісу на Spring Boot. Частина 2</a> UPD Дякуємо модераторам, що поправабо мої картинки та форматування тексту!