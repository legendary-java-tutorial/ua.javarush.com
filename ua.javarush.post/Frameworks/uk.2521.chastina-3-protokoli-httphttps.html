Частина 3. Протоколи HTTP/HTTPS
<p>----------------------------------------</p>
Цей матеріал - частина циклу "Введення в Enterprise-розробку". Попередні статті: Вітання! Сьогодні ми розбиратимемося в протоколах HTTP і HTTPS. Але для початку давай прояснимо один момент: йдеться про протоколи передачі даних по мережі на 
<p>----------------------------------------</p>
Цей матеріал - частина циклу "Введення в Enterprise-розробку". Попередні статті: 
<ul>
 <li><a href="https://codegym.cc/groups/posts/2514-vvedenie-v-enterprise-razrabotku" target="_blank">про мережу</a> ;</li>
 <li><a href="https://codegym.cc/groups/posts/2519-chastjh-2-pogovorim-nemnogo-ob-arkhitekture-po" target="_blank">про архітектуру ПЗ</a> .</li>
</ul>Вітання! Сьогодні ми розбиратимемося в протоколах HTTP і HTTPS. Але для початку давай прояснимо один момент: йдеться про протоколи передачі даних по мережі на прикладному рівні моделі OSI. З моделлю OSI, як ти пам'ятаєш, ми розбиралися в одній із попередніх статей. А якщо не пам'ятаєш - <a href="https://codegym.cc/groups/posts/2514-vvedenie-v-enterprise-razrabotku" target="_blank">ось вона</a> . <img data-max-width="850" alt="Частина 3. Протоколи HTTP/HTTPS - 1" src="https://cdn.javarush.com/images/article/be6a1452-f4ef-4c5e-8261-679fe482a5ba/original.jpeg">
<h2>Що таке протокол передачі даних</h2>Так називають загальноприйняту угоду, завдяки якій розробники різних сервісів надсилають інформацію в єдиному вигляді. Наприклад, використовуючи Google Chrome, ти можеш отримати інформацію з Facebook і Twitter, тому що розробники передають її за допомогою стандартного протоколу HTTP, а твій браузер вміє його обробляти. Єдині правила дуже зручні і самим розробникам серверних частин: існує дуже багато бібліотек, які можуть за тебе перетворити інформацію та надіслати за необхідним протоколом. Спочатку HTTP замислювався як протокол передачі HTML-сторінок. Довгий час так і було, але зараз програмісти часто передають по ньому і рядки, і медіафайли. Загалом цей протокол універсальний і гнучкий, і використовувати його дійсно просто. А як це робити – зараз розберемося. 
<h2><h2="">
  Структура HTTP
 </h2=""></h2>Відразу варто зазначити, що протокол HTTP складається тільки з тексту. А нас найбільше цікавить структура, в якій розташований цей текст. Кожне повідомлення складається із трьох частин: 
<ol>
 <li>Стартовий рядок (Starting line) – визначає службові дані.</li>
 <li>Заголовки (Headers) – опис параметрів повідомлення.</li>
 <li>Тіло повідомлення (Body) – дані повідомлення. Повинні відокремлюватися від заголовків порожнім рядком.</li>
</ol>За HTTP-протоколом можна надіслати запит на сервер (request) та отримати відповідь від сервера (response). Запити та відповіді дещо відрізняються параметрами. 
<h3>Як виглядає простий HTTP-запит</h3>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class=" language-java">GET <span class="token operator">/</span> HTTP<span class="token operator">/</span><span class="token number">1.1</span>
<span class="token class-name">Host</span><span class="token operator">:</span> codegym<span class="token punctuation">.</span>cc
<span class="token class-name">User</span><span class="token operator">-</span><span class="token class-name">Agent</span><span class="token operator">:</span> firefox<span class="token operator">/</span><span class="token number">5.0</span> <span class="token punctuation">(</span><span class="token class-name">Linux</span><span class="token punctuation">;</span> <span class="token class-name">Debian</span> <span class="token number">5.0</span><span class="token number">.8</span><span class="token punctuation">;</span> en<span class="token operator">-</span>US<span class="token punctuation">;</span> rv<span class="token operator">:</span><span class="token number">1.8</span><span class="token number">.1</span><span class="token number">.7</span><span class="token punctuation">)</span></code></pre> У стартовому рядку вказано: 
<ul>
 <li><span class="text-bold">GET</span> – метод запиту;</li>
 <li><span class="text-bold">/</span> - Шлях запиту (path);</li>
 <li><span class="text-bold">HTTP/1.1</span> - версія протоколу передачі даних.</li>
</ul>Потім слідують заголовки: 
<ul>
 <li><span class="text-bold">Host</span> - хост, якому адресаовано запит;</li>
 <li><span class="text-bold">User-Agent</span> – ​​клієнт, який надсилає запит.</li>
</ul>Тіло повідомлення відсутнє. У HTTP-запиті обов'язкові тільки стартовий рядок та заголовок Host. Тепер розберемо все по черзі. HTTP-запит має містити якийсь метод. Усього їх дев'ять: GET, POST, PUT, OPTIONS, HEAD, PATCH, DELETE, TRACE, CONNECT. Найпоширеніші - GET та POST. Цих двох методів спочатку буде достатньо. <span class="text-bold">GET</span> – запитує контент із сервера. Тому запити з методом GET не мають тіла повідомлення. Але при необхідності можна відправити параметри через path у такому форматі: <span class="text-bold"><em>https://cdn.javarush.com/images/article/155cea79-acfd-4968-9361-ad585e939b82/original.pngsend?name1=value1&amp;name2=value2</em></span> Тут: <em>javaru</em> - хост, <em>/ send</em> - шлях запиту, <em>?</em>— роздільник, що позначає, що далі йдуть параметри запиту. Наприкінці перераховуються параметри у форматі ключ = значення, розділені амперсандом. <span class="text-bold">POST</span> – публікує інформацію на сервері. POST-запит може передавати різну інформацію: параметри у форматі ключ = значення, JSON, HTML-код або навіть файли. Вся інформація передається у тілі повідомлення. Наприклад: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java">POST <span class="token operator">/</span>user<span class="token operator">/</span>create<span class="token operator">/</span>json HTTP<span class="token operator">/</span><span class="token number">1.1</span>
<span class="token class-name">Accept</span><span class="token operator">:</span> application<span class="token operator">/</span>json
<span class="token class-name">Content</span><span class="token operator">-</span><span class="token class-name">Type</span><span class="token operator">:</span> application<span class="token operator">/</span>json
<span class="token class-name">Content</span><span class="token operator">-</span><span class="token class-name">Length</span><span class="token operator">:</span> <span class="token number">28</span>
<span class="token class-name">Host</span><span class="token operator">:</span> codegym<span class="token punctuation">.</span>cc

<span class="token punctuation">{</span>
  <span class="token string">"Id"</span><span class="token operator">:</span> <span class="token number">12345</span><span class="token punctuation">,</span>
  <span class="token string">"User"</span><span class="token operator">:</span> <span class="token string">"John"</span>
<span class="token punctuation">}</span></code></pre> Запит надсилається на адресау codegym.cc/user/create/json, версія протоколу - HTTP/1.1. Accept вказує, який формат відповіді клієнт очікує отримати, Content-Type - у якому форматі надсилається тіло повідомлення. Content-Length – кількість символів у тілі. HTTP-запит може містити багато різних заголовків. Докладніше з ними можна ознайомитись <a href="https://tools.ietf.org/html/rfc7231" rel="nofollow" target="_blank">у специфікації протоколу</a> . 
<h2>HTTP-відповіді</h2>Після отримання запиту, сервер його обробляє та надсилає відповідь клієнту: 
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java">HTTP<span class="token operator">/</span><span class="token number">1.1</span> <span class="token number">200</span> OK
<span class="token class-name">Content</span><span class="token operator">-</span><span class="token class-name">Type</span><span class="token operator">:</span> text<span class="token operator">/</span>html<span class="token punctuation">;</span> charset<span class="token operator">=</span>UTF<span class="token operator">-</span><span class="token number">8</span>
<span class="token class-name">Content</span><span class="token operator">-</span><span class="token class-name">Length</span><span class="token operator">:</span> <span class="token number">98</span>

<span class="token generics"><span class="token punctuation">&lt;</span>html<span class="token punctuation">&gt;</span></span>
  <span class="token generics"><span class="token punctuation">&lt;</span>head<span class="token punctuation">&gt;</span></span>
    <span class="token generics"><span class="token punctuation">&lt;</span>title<span class="token punctuation">&gt;</span></span><span class="token class-name">An</span> <span class="token class-name">Example</span> <span class="token class-name">Page</span><span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
  <span class="token generics"><span class="token punctuation">&lt;</span>body<span class="token punctuation">&gt;</span></span>
    <span class="token generics"><span class="token punctuation">&lt;</span>p<span class="token punctuation">&gt;</span></span><span class="token class-name">Hello</span> <span class="token class-name">World</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span></code></pre> Стартовий рядок у респонсі містить версію протоколу (HTTP/1.1), Код статусу (200), Опис статусу (OK). У заголовках тип і довжина контенту. У тілі відповіді HTML-код, який браузер прорисує в HTML-сторінку. 
<h3>Response Status Codes</h3>З тілом повідомлення та заголовками все ясно, а про коди статусів варто сказати кілька слів. <span class="text-bold">Response Status Codes</span> завжди тризначні, і перша цифра коду вказує категорію відповіді: 
<ul>
 <li>1xx – інформаційний. Запит отримано, сервер готовий до продовження;</li>
 <li>2xx – успішний. Запит отриманий, зрозумілий та оброблений;</li>
 <li>3xx - перенаправлення. Наступні дії слід виконати для обробки запиту;</li>
 <li>4xx – помилка клієнта. Запит містить помилки або не відповідає протоколу;</li>
 <li>5xx – помилка сервера. Сервер не зміг обробити запит, хоча був складений правильно;</li>
</ul>Друга та третя цифри в коді деталізують відповідь. Наприклад: 
<ul>
 <li>200 OK - реквест отримано та успішно оброблено;</li>
 <li>201 Created — реквест отримано та успішно опрацьовано, внаслідок чого створено новий ресурс або його екземпляр;</li>
 <li>301 Moved Permanently - запитуваний ресурс був переміщений назавжди, і наступні запити до нього мають відбуватися за новою адресаою;</li>
 <li>307 Temporary Redirect — ресурс тимчасово переміщений. Поки що до нього можна звертатися, використовуючи автоматичну переадресаацію;</li>
 <li>403 Forbidden - запит зрозумілий, але потрібна авторизація;</li>
 <li>404 Not Found - сервер не знайшов ресурс за цією адресаою;</li>
 <li>501 Not Implemented — сервер не підтримує функціональність для відповіді на запит;</li>
 <li>505 HTTP Version Not Supported — сервер не підтримує вказану версію протоколу HTTP.</li>
</ul>До статусу-коду відповіді також надсилається опис статусу, завдяки якому інтуїтивно зрозуміло, що означає конкретний статус. <a href="https://codegym.cc/welcome" target="_blank"><img id="click_banner1_articles" data-id="4e38c98e-fd38-4d07-873d-9e44bd70d28c" data-max-width="1080" alt="Частина 3. Протоколи HTTP/HTTPS - 2" src="https://cdn.javarush.com/images/article/4e38c98e-fd38-4d07-873d-9e44bd70d28c/1080.jpeg" style="width: 1080px;"></a>HTTP-протокол дуже практичний: у ньому передбачено велику кількість хедерів, використовуючи які можна налаштувати гнучке спілкування між клієнтом та сервером. Усі хедери запитів та відповідей, методи запитів та статус-коди відповідей неможливо розглянути в одній статті. За потреби можеш почитати <a href="https://tools.ietf.org/html/rfc7231" rel="nofollow" target="_blank">офіційну специфікацію протоколу</a>яка описує всі нюанси. HTTP-протокол прийнято використовувати на порту 80, тому коли ти бачиш адресау, яка закінчується портом 80, можеш бути впевнений, що до нього потрібно звертатися за HTTP. З розвитком технологій та активним переміщенням персональних даних в інтернеті довелося задуматися про те, як забезпечити додатковий захист інформації, яку клієнт передає серверу. Внаслідок цього з'явився протокол HTTPS. 
<div class="email-subscription">
 <iframe frameborder="0" src="https://secure.esputnik.com.ua/4Q0Ef6d2SOs" width="100%" height="200" scrolling="no" data-savepage-key="0-2"></iframe>
</div>
<h2>У чому різниця між HTTPS і HTTP</h2>HTTPS синтаксично ідентичний протоколу HTTP, тобто використовує самі стартові рядки і заголовки. Єдині відмінності — <span class="text-bold">додаткове шифрування та стандартний порт (443)</span> . HTTPS шифрується між HTTP та TCP, тобто між прикладним та транспортним рівнями. Якщо забув, що це таке, заглянь до <a href="https://codegym.cc/groups/posts/2514-vvedenie-v-enterprise-razrabotku" target="_blank">статті про модель OSI</a> . Сучасний стандарт шифрування – за протоколом TLS. У цю тему ми надто поглиблюватися не будемо, але запам'ятай, що <span class="text-bold">шифрування відбувається перед тим, як інформація потрапляє на транспортний рівень</span>. У HTTPS шифрується абсолютно вся інформація, крім хоста та порту, куди надіслано запит. Для перекладу сервера на використання протоколу HTTPS замість HTTP, нам не потрібно змінювати код сервера. Увімкнення цієї фічі відбувається в контейнерах сервлетів, про які ми поговоримо в наступних статтях. А сьогодні все. Втім, постривай. Щоб помацати запити HTTP, відкрий Google Chrome, натисніть F12, виберіть вкладку Network. Тут будуть відображатися всі реквести та респонси, надіслані/отримані твоїм браузером. <a href="https://codegym.cc/groups/posts/2523-chastjh-4osnovih-maven" target="_blank">Частина 4. Основи Maven </a> <a href="https://codegym.cc/groups/posts/2529-chastjh-5-servletih-pishem-prostoe-veb-prilozhenie" target="_blank">Частина 5. Сервлети. Пишемо просте веб-додаток </a> <a href="https://codegym.cc/groups/posts/2533-chastjh-6-konteynerih-servletov" target="_blank">Частина 6. Контейнери сервлетів </a> <a href="https://codegym.cc/groups/posts/2536-chastjh-7-znakomstvo-s-patternom-mvc-model-view-controller" target="_blank">Частина 7. Знайомство з патерном MVC (Model-View-Controller) </a> <a href="https://codegym.cc/groups/posts/2537-chastjh-8-pishem-neboljhshoe-prilozhenie-na-spring-boot" target="_blank">Частина 8. Пишемо невелику програму на spring-boot</a>