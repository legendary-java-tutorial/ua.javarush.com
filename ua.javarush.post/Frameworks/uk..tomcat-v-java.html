Tomcat в Java
<p>----------------------------------------</p>
У якийсь момент кожен розробник набирає достатньо навичок, і в нього з'являється думка про створення власного проекту, щоб застосувати знання на практиці. Найлегше взятися за веб-проект, оскільки реалізація веб-додатку не скута будь-якими о
<p>----------------------------------------</p>
У якийсь момент кожен розробник набирає достатньо навичок, і в нього з'являється думка про створення власного проекту, щоб застосувати знання на практиці. Найлегше взятися за веб-проект, оскільки реалізація веб-додатку не скута будь-якими обмеженнями, як, наприклад, десктопні програми. Клієнту потрібен лише браузер, і він може взаємодіяти з додатком, не скачуючи будь-яких дистрибутивів. Без реєстрації та смс, як кажуть (хоча це залежить від самого додатку). <img data-id="ae623c58-ed0b-4fd4-b64b-23114600de37" data-max-width="850" alt="Tomcat в Java - 1" src="https://cdn.javarush.com/images/article/ae623c58-ed0b-4fd4-b64b-23114600de37/800.jpeg" style="width: 850px;">Так ось, для того, щоб реалізувати на Java хорошу веб-додаток, не обійтися без інструмента під назвою Tomcat. <strong>Зміст:</strong>
<ul>
 <li><a href="https://codegym.cc/groups/posts/2307#Tomcat_%D0%B2_%D0%BA%D1%83%D1%80%D1%81%D0%B5_Javarush">Tomcat в курсі Javarush</a></li>
 <li><a href="https://codegym.cc/groups/posts/2307#Tomcat_%D1%87%D1%82%D0%BE_%D1%8D%D1%82%D0%BE">Tomcat – що це?</a></li>
 <li><a href="https://codegym.cc/groups/posts/2307#%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D1%8B_Tomcat">Компоненти Tomcat</a></li>
 <ul>
  <li><a href="https://codegym.cc/groups/posts/2307#Catalina">Catalina</a></li>
  <li><a href="https://codegym.cc/groups/posts/2307#Jasper">Jasper</a></li>
  <li><a href="https://codegym.cc/groups/posts/2307#Coyote">Coyote</a></li>
 </ul>
 <li><a href="https://codegym.cc/groups/posts/2307#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_Tomcat">Установка Tomcat</a></li>
 <li><a href="https://codegym.cc/groups/posts/2307#%D0%9A%D0%B0%D0%BA_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D1%82%D1%8C_%D0%B2%D0%B5%D0%B1_%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5">Як створити веб-додаток</a></li>
 <li><a href="https://codegym.cc/groups/posts/2307#%D0%9A%D0%B0%D0%BA_%D0%B2%D1%81%D1%82%D1%80%D0%BE%D0%B8%D1%82%D1%8C_%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B2_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D1%8E%D1%89%D0%B8%D0%B9_%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80">Як вбудувати програму в працюючий сервер</a></li>
 <ul>
  <li><a href="https://codegym.cc/groups/posts/2307#%D0%A4%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%B8_%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80%D0%B0_%D1%81%D0%B5%D1%80%D0%B2%D0%BB%D0%B5%D1%82%D0%BE%D0%B2">Функції контейнера сервлетів</a></li>
  <li><a href="https://codegym.cc/groups/posts/2307#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D1%81%D0%B5%D1%80%D0%B2%D0%BB%D0%B5%D1%82%D0%B0">Установка сервлету</a></li>
 </ul>
 <li><a href="https://codegym.cc/groups/posts/2307#%D0%9F%D0%BE%D0%BB%D1%8C%D0%B7%D0%B0_Tomcat_%D0%B4%D0%BB%D1%8F_%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B8">Користування Tomcat для розробки</a></li>
 <li><a href="https://codegym.cc/groups/posts/2307#%D0%94%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8">Додаткові посилання</a></li>
</ul>
<h2 id="Tomcat_в_курсе_Javarush">Tomcat в курсі Javarush</h2>Tomcat вивчається на 9 рівні квесту Java Collections у курсі CodeGym. За 2 лекції Білаабо розповість, <a href="https://codegym.cc/quests/lectures/questcollections.level09.lecture01" target="_blank">як завантажити та налаштувати Tomcat</a> , а також <a href="https://codegym.cc/quests/lectures/questcollections.level09.lecture02" target="_blank">зібрати перший веб-додаток</a> . 
<h2 id="Tomcat_что_это">Tomcat – що це?</h2>Tomcat — це контейнер сервлетів з відкритим кодом, який також виконує функцію веб-сервера. При першому погляді Tomcat здається досить тяжкою темою, проте це не так. Більшість програм Java запускаються за допомогою командного рядка і виконують деякі дії. Такі програми реалізують одну заздалегідь задану функцію, після чого більше не виконуються. У таких програм, як правило, є метод <code class=" language-none">main</code>, через який їх можна запустити. Веб-програма розрахована на взаємодію з клієнтом. Якщо є запит від клієнта, він обробляється, і користувачеві надсилається відповідь. Якщо ні, програма простоює. Як реалізувати таку логіку в стандартному додатку з огляду на те, що потрібно підтримувати сесії, приймати HTTP-запити та інше? Цикл<code class=" language-none">while-true</code>? Ні, тут потрібне надійне рішення. Для цього існує Tomcat. Фактично він являє собою Java-додаток, який піклується про відкриття порту для взаємодії з клієнтом, настроювання сесій, кількість запитів, довжину заголовка і ще багато операцій. 
<h2 id="Компоненты_Tomcat">Компоненти Tomcat</h2>Tomcat має компоненти, що виконують певні функції, і про них варто знати. Давай розберемося докладніше. 
<h3 id="Catalina">Catalina</h3>Завдяки цьому компоненту у розробників з'являється можливість розгортати свої програми у контейнері. Catalina реалізує специфікацію Servlet API – основну веб-технологію у web-програмуванні Java. Фактично Catalina – це <strong>контейнер сервлетів усередині Tomcat</strong> (докладніше розглянемо це поняття нижче). 
<h3 id="Jasper">Jasper</h3>Завдяки цьому компоненту програміст використовує технологію JSP. Це як HTML-файли, тільки в них вбудований Java код, який може виконуватися в момент відправки сторінки користувачу. Це дозволяє динамічно вбудовувати у сторінку будь-які дані. Jasper перетворює Java код на HTML, а також відстежує зміни та автоматично оновлює їх. 
<h3 id="Coyote">Coyote</h3>Це важливий компонент, який прослуховує запити HTTP від ​​клієнта на певному порту, надає ці дані для обробки в додатку, а також повертає користувачам відповіді. Тобто Coyote реалізує функціонал HTTP-сервера. Ці компоненти структурно можна описати наступною схемою: <img data-id="1774872d-ba75-49d0-8ae2-4b1de2212ece" data-max-width="850" alt="Tomcat в Java - 2" src="https://cdn.javarush.com/images/article/1774872d-ba75-49d0-8ae2-4b1de2212ece/800.jpeg" style="width: 850px;">Тут “на пальцях” показано зразкову схему взаємодії компонентів. Фактично схема роботи Tomcat набагато складніша, проте для базового розуміння цього достатньо. 
<h2 id="Установка_Tomcat">Установка Tomcat</h2>Щоб використовувати Tomcat у Java, його необхідно встановити у систему. Про те, як встановити Tomcat можна прочитати в цій статті, де також розглядаються інші сервери додатків. Отже, маючи працюючий Tomcat, вбудований у IDEA, можна спробувати приготувати свій перший сервлет. 
<h2 id="Как_создать_веб_приложение">Як створити веб-додаток</h2>Щоб створити веб-програму, слід дотримуватися певної структури папок. IntelliJ IDEA в меню створення проекту має функцію генерації веб-додатка. Створивши проект таким чином, можна побачити просту структуру: <img data-id="1639bd83-7ee4-4a82-9463-803e13da263f" data-max-width="500" alt="Tomcat в Java - 3" src="https://cdn.javarush.com/images/article/1639bd83-7ee4-4a82-9463-803e13da263f/256.jpeg" style="width: 500px;">У src, як завжди, — вихідники, а в папці web згенеровані web.xml та index.jsp. web.xml - це інструкція Tomcat, де шукати обробники запитів та інша інформація. index.jsp — головна сторінка веб-програми, куди користувач повинен потрапити в першу чергу (йдеться про конфігурацію за умовчанням). Як перший запуск можна просто відредагувати файл index.jsp: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">%</span></span>@ page contentType<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"text/html;charset=UTF-8"</span></span> language<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"java"</span></span> <span class="token operator"><span class="token operator">%</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>html<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
 <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>head<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
   <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>title<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>$<span class="token class-name"><span class="token class-name">Title</span></span>$<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>title<span class="token operator"><span class="token operator">&gt;</span></span>
 <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>head<span class="token operator"><span class="token operator">&gt;</span></span>
 <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>body<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
   <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>h1<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Hello</span></span> world<span class="token operator"><span class="token operator">!</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>h1<span class="token operator"><span class="token operator">&gt;</span></span>
 <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>body<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>html<span class="token operator"><span class="token operator">&gt;</span></span></code></pre> Якщо Tomcat встановлений безпосередньо в IDEA, можна запустити сервер програми: <img data-id="9c5316e1-1695-4328-8ba3-6e954b21e1f3" data-max-width="500" alt="Tomcat в Java - 4" src="https://cdn.javarush.com/images/article/9c5316e1-1695-4328-8ba3-6e954b21e1f3/256.jpeg" style="width: 500px;">Клієнт отримує у браузер вміст файлу index.jsp, коли переходить на '/', тобто на головну сторінку. А тепер додамо посилання на сторінку, де розташовуватиметься поточний час сервера. Щоб створити свій перший сервлет, потрібно використовувати бібліотеку servlet-api.jar, яка постачається разом із Tomcat (можна знайти в папці lib). Створимо сервлет, який відображатиме на сторінці поточний час сервера. Для цього необхідно створити клас <code class=" language-none">TimeWorker</code>. Розташуємо його в папці src/ru/codegym/tomcat: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">ru<span class="token punctuation"><span class="token punctuation">.</span></span>codegym<span class="token punctuation"><span class="token punctuation">.</span></span>tomcat</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">javax<span class="token punctuation"><span class="token punctuation">.</span></span>servlet<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">ServletException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">javax<span class="token punctuation"><span class="token punctuation">.</span></span>servlet<span class="token punctuation"><span class="token punctuation">.</span></span>http<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">HttpServlet</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">javax<span class="token punctuation"><span class="token punctuation">.</span></span>servlet<span class="token punctuation"><span class="token punctuation">.</span></span>http<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">javax<span class="token punctuation"><span class="token punctuation">.</span></span>servlet<span class="token punctuation"><span class="token punctuation">.</span></span>http<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>io<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">IOException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Date</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">TimeWorker</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">HttpServlet</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
  <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
  <span class="token keyword"><span class="token keyword">protected</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">doGet</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">HttpServletRequest</span></span> req<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">HttpServletResponse</span></span> resp<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">throws</span></span> <span class="token class-name"><span class="token class-name">ServletException</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">IOException</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
     <span class="token class-name"><span class="token class-name">Date</span></span> date <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Date</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
     req<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setAttribute</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"date"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> date<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">toString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
     req<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getRequestDispatcher</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"time.jsp"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">forward</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>req<span class="token punctuation"><span class="token punctuation">,</span></span> resp<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
  <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre><code class=" language-none">TimeWorker</code>успадковується від класу <code class=" language-none">HttpServlet</code>і перевизначає метод <code class=" language-none">doGet</code>. У цей метод ми отримуємо два параметри – <code class=" language-none">request</code>і <code class=" language-none">response</code>. Як приклад <code class=" language-none">request</code>зберігається атрибут з назвою <code class=" language-none">data</code>і містить рядкове представлення поточної дати. Потім викликається <code class=" language-none">requestDispatcher</code>і передаються в нього параметри <code class=" language-none">request</code>і <code class=" language-none">response</code>. Обробник створено. Тепер потрібно надіслати запити саме на нього. Нехай будь-який перехід <code class=" language-none">/time</code>буде вести на сторінку time.jsp. Відкриваємо web.xml, між тегами <code class=" language-none">&lt;web-app&gt;</code>вставляємо наступну конфігурацію: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>servlet<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
   <span class="token operator"><span class="token operator">&lt;</span></span>servlet<span class="token operator"><span class="token operator">-</span></span>name<span class="token operator"><span class="token operator">&gt;</span></span>timeWorker<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>servlet<span class="token operator"><span class="token operator">-</span></span>name<span class="token operator"><span class="token operator">&gt;</span></span>
   <span class="token operator"><span class="token operator">&lt;</span></span>servlet<span class="token operator"><span class="token operator">-</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token operator"><span class="token operator">&gt;</span></span><span class="token class-name"><span class="token namespace"></span><span class="token class-name"><span class="token namespace"><span class="token namespace">ru<span class="token punctuation"><span class="token punctuation">.</span></span>codegym<span class="token punctuation"><span class="token punctuation">.</span></span>tomcat<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span>TimeWorker</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>servlet<span class="token operator"><span class="token operator">-</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
   <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>servlet<span class="token operator"><span class="token operator">&gt;</span></span>

<span class="token operator"><span class="token operator">&lt;</span></span>servlet<span class="token operator"><span class="token operator">-</span></span>mapping<span class="token operator"><span class="token operator">&gt;</span></span>
   <span class="token operator"><span class="token operator">&lt;</span></span>servlet<span class="token operator"><span class="token operator">-</span></span>name<span class="token operator"><span class="token operator">&gt;</span></span>timeWorker<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>servlet<span class="token operator"><span class="token operator">-</span></span>name<span class="token operator"><span class="token operator">&gt;</span></span>
   <span class="token operator"><span class="token operator">&lt;</span></span>url<span class="token operator"><span class="token operator">-</span></span>pattern<span class="token operator"><span class="token operator">&gt;</span></span><span class="token operator"><span class="token operator">/</span></span>time<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>url<span class="token operator"><span class="token operator">-</span></span>pattern<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>servlet<span class="token operator"><span class="token operator">-</span></span>mapping<span class="token operator"><span class="token operator">&gt;</span></span>

<span class="token operator"><span class="token operator">&lt;</span></span>welcome<span class="token operator"><span class="token operator">-</span></span>file<span class="token operator"><span class="token operator">-</span></span>list<span class="token operator"><span class="token operator">&gt;</span></span>
   <span class="token operator"><span class="token operator">&lt;</span></span>welcome<span class="token operator"><span class="token operator">-</span></span>file<span class="token operator"><span class="token operator">&gt;</span></span>index<span class="token punctuation"><span class="token punctuation">.</span></span>jsp<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>welcome<span class="token operator"><span class="token operator">-</span></span>file<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>welcome<span class="token operator"><span class="token operator">-</span></span>file<span class="token operator"><span class="token operator">-</span></span>list<span class="token operator"><span class="token operator">&gt;</span></span></code></pre> Перший тег - <code class=" language-none"><strong>servlet</strong></code>визначає ім'я сервлета і вказує шлях до класу-сервлета, який оброблятиме запити. Другий тег - <code class=" language-none"><strong>servlet-mapping</strong></code>вказує, що сервлет з ім'ям <code class=" language-none">timeWorker</code>буде викликатися тоді, коли надійде запит на<ciode>
 url/time. Третій тег — вказує файл, який буде викликаний під час переходу на . Це необхідно налаштовувати, якщо існує потреба змінити файл за замовчуванням. Тут включено для прикладу. Тепер при переході на викликатиметься метод у класі і віддавати сторінку time.jsp… якої немає. Створимо її поряд з index.jsp: 
 <code class=" language-none"><strong>welcome-file-list</strong></code>
 <code class=" language-none">url /</code>
 <code class=" language-none">/time</code>
 <code class=" language-none">doGet</code>
 <code class=" language-none">TimeWorker</code>
 <pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">%</span></span>@ page contentType<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"text/html;charset=UTF-8"</span></span> language<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"java"</span></span> <span class="token operator"><span class="token operator">%</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>html<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
<span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>head<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
   <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>title<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Hello</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>title<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>head<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>body<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
   <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>h1<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Current</span></span> server time<span class="token operator"><span class="token operator">:</span></span> <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">%=</span></span>request<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getAttribute</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"date"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token operator"><span class="token operator">%</span></span><span class="token operator"><span class="token operator">&gt;</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>h1<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>body<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>html<span class="token operator"><span class="token operator">&gt;</span></span></code></pre> Початок класичний, однак у тегу 
 <code class=" language-none">h1</code>йде звернення до об'єкта 
 <code class=" language-none">request</code>, яке обрамлено 
 <code class=" language-none">&lt;%=</code>і 
 <code class=" language-none">%&gt;</code>. Це теги шаблонизації. Код, укладений у ці теги, викликається до того, як буде відправлений клієнту. Ну а об'єкти 
 <code class=" language-none">request</code>і 
 <code class=" language-none">response</code>доступні у таких тегах у будь-якому jsp-файлі. У цьому прикладі туди буде підставлено поточний час сервера, який передає сервлет 
 <code class=" language-none">TimeWorker</code>. У файл index.jsp для зручності створюємо посилання на 
 <code class=" language-none">/time</code>: 
 <pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">%</span></span>@ page contentType<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"text/html;charset=UTF-8"</span></span> language<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"java"</span></span> <span class="token operator"><span class="token operator">%</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>html<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
 <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>head<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
   <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>title<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>$<span class="token class-name"><span class="token class-name">Title</span></span>$<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>title<span class="token operator"><span class="token operator">&gt;</span></span>
 <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>head<span class="token operator"><span class="token operator">&gt;</span></span>
 <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>body<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
   <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>h1<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Hello</span></span> world<span class="token operator"><span class="token operator">!</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>h1<span class="token operator"><span class="token operator">&gt;</span></span>
   <span class="token operator"><span class="token operator">&lt;</span></span>a href<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"/time"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>Узнать текущее время сервера<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>a<span class="token operator"><span class="token operator">&gt;</span></span>
 <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>body<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>html<span class="token operator"><span class="token operator">&gt;</span></span></code></pre> Запускаємо приклад: 
 <img data-id="84d694e5-2a9d-4c49-9590-fd9f957894c1" data-max-width="500" alt="Tomcat в Java - 5" src="https://cdn.javarush.com/images/article/84d694e5-2a9d-4c49-9590-fd9f957894c1/256.jpeg" style="width: 500px;">Переходимо за посиланням: 
 <img data-id="688ddc30-994b-4dac-8dd9-9ddf242c9516" data-max-width="500" alt="Tomcat в Java - 6" src="https://cdn.javarush.com/images/article/688ddc30-994b-4dac-8dd9-9ddf242c9516/256.jpeg" style="width: 500px;">Добре, все працює. У прикладі ми реалізували перехід з головної сторінки на допоміжну, яку було передано параметр і відображено для користувача. За наявності проблем із запуском сервлетів рекомендую прочитати 
 <a href="https://codegym.cc/groups/posts/1126-problemih-s-zapuskom-servletov" target="_blank">цей пост</a> , де дають поради щодо вирішення цієї проблеми. Для більш повного ознайомлення з сервлетами, рекомендуємо прочитати статті ( 
 <a href="https://codegym.cc/groups/posts/328-sozdanie-prostogo-veb-prilozhenija-na-servletakh-i-jsp-chastjh-1" target="_blank">частина 1</a> , 
 <a href="https://codegym.cc/groups/posts/356-sozdanie-prostogo-veb-prilozhenija-na-servletakh-i-jsp-chastjh-2" target="_blank">частина 2</a> ), де автор докладно розписує створення найпростішого додатку на сервлетах та jsp. 
 <h2 id="Как_встроить_приложение_в_работающий_сервер">Як вбудувати програму в працюючий сервер</h2>Незважаючи на те, що вбудований Tomcat в IDEA — зручна фіча, веб-додаток може бути перенесений на інший сервер та інший контейнер. Розглянемо варіант, коли необхідно вбудувати свою програму в сервер, що вже працює. По-перше, необхідно додатково розібрати 
 <strong>мету та функції контейнера сервлетів</strong> . Програма, яка наведена в прикладі вище, - це веб-додаток. Клас 
 <code class=" language-none">TimeWorker</code>- сервлет. Компоненти виконують виключно обробку запитів. Ці компоненти повинні бути вбудовані в спеціальний контейнер сервлетів. 
 <strong>Мета контейнера сервлетів</strong>- Підтримка сервлетів та забезпечення їх життєвого циклу. Найпростіший приклад роботи Tomcat — сканування певної папки з метою визначити, чи з'явився новий сервлет. Якщо так — ініціалізувати його та підготувати до прийому запитів від клієнтів. Якщо сервлет було оновлено, провести повторну ініціалізацію оновлення компонентів. У разі видалення сервлета — зупинити обробку запитів, видалити сервлет із Tomcat. 
 <h3 id="Функции_контейнера_сервлетов">Функції контейнера сервлетів</h3>
 <ol>
  <li>Обмін даними між сервлетом та клієнтами;</li>
  <li>Організація клієнтських сесій;</li>
  <li>створення програмного середовища для функціонування сервлета;</li>
  <li>Ідентифікація та авторизація клієнтів;</li>
  <li>У більшості випадків - управління метаданими (заголовки, методи та інше).</li>
 </ol>По-друге, необхідно розібратися, 
 <strong>як встановити свій сервлет</strong> . 
 <h3 id="Установка_сервлета">Установка сервлету</h3>Tomcat приймає для обробки веб-програми на Java, які мають розширення .war. Це як jar, тільки web. Файли такого типу поєднують у собі JSP-файли, сервлети, class-файли, статичні ресурси та інше. При установці такого файлу Tomcat відбувається його розпакування, а потім запуск, тому існує сувора вимога до структури файлів у проекті. Якщо проект створено в IDEA, вся структура створена автоматично. Файл war можна створити стандартними засобами IDEA. Для цього необхідно зайти в 
 <em>ProjectStructure</em> -&gt; 
 <em>Artifacts</em> -&gt; Натиснути " 
 <em>+</em> " -&gt; 
 <em>WebApplication: Archive</em> . У полі, що відкрилося, задати ім'я для підсумкового war-файлу, наприклад deployed_war. Нижче необхідно натиснути кнопку 
 <em>Create Manifest…</em> Далі необхідно вказати шлях до папки веб-проекту. У ній буде створено папку META-INF, до якої буде розміщено файл MANIFEST.MF. Далі слід натиснути 
 <em>Apply</em> та 
 <em>Ok</em> . Щоб зібрати проект у war-файл, слід у вкладці 
 <em>Build</em> вибрати опцію 
 <em>Build Artifact</em> : 
 <img data-id="149cecfb-7f9d-407a-bee3-e83e0bbee9ee" data-max-width="500" alt="Tomcat в Java - 7" src="https://cdn.javarush.com/images/article/149cecfb-7f9d-407a-bee3-e83e0bbee9ee/256.jpeg" style="width: 500px;">У полі, що з'явилося, потрібно натиснути на 
 <em>deployed_war</em> . Потім розпочнеться складання проекту та Intellij IDEA створить папку out, в якій з'явиться папка artifacts з ім'ям нашого артефакту. У цій папці лежатиме файл deployed_war.war: 
 <img data-id="19410218-cdc0-4e15-b915-2302b1750b60" data-max-width="500" alt="Tomcat в Java - 8" src="https://cdn.javarush.com/images/article/19410218-cdc0-4e15-b915-2302b1750b60/256.jpeg" style="width: 500px;">Тепер можна деплоїти цей файл у Tomcat. Деплой програми найпростіше виконати з веб-інтерфейсу Tomcat. Просто натисніть 
 <em>кнопку вибору файлу</em>на вкладці Deploy, перейдіть до місцезнаходження файлу WAR і виберіть його, потім натисніть 
 <em>кнопку розгортання</em> . В обох випадках, якщо все піде добре, консоль Tomcat повідомить нам, що розгортання пройшло успішно приблизно таким висновком до консолі: 
 <em><strong>INFO:</strong></em>
 <div class="email-subscription">
  <iframe frameborder="0" src="https://secure.esputnik.com.ua/4Q0Ef6d2SOs" width="100%" height="200" scrolling="no" data-savepage-key="0-2"></iframe>
 </div>
 <h2 id="Польза_Tomcat_для_разработки">Користування Tomcat для розробки</h2>Для розробників контейнери сервлетів мають величезну роль, оскільки вирішують цілий спектр проблем. Для програмування Java Tomcat забезпечує кілька серйозних переваг: 
 <ol>
  <li>
   <p>Найголовніше, Tomcat може виконувати роль повноцінного веб-сервера. Завдяки цьому розгортання додатків відбувається набагато швидше, ніж було раніше. Також Tomcat може виступати в ролі класичного контейнера сервлетів, який можна вбудувати у більший веб-сервер.</p></li>
  <li>
   <p>Tomcat сприяє обміну даними між клієнтом та сервлетом, забезпечує програмний контекст для веб-додатків, бере на себе функції ідентифікації та авторизації клієнтів, створення сесій для кожного з них.</p></li>
  <li>
   <p>Надає дуже зручне керування JSP-сторінками. Фактично веб-сервер може віддавати лише HTML. Jasper, компонент Tomcat, компілює код, що міститься в шаблонних тегах JSP-сторінок до коректного HTML-файлу, який отримує клієнт. Вся логіка шаблонизації знаходиться всередині Tomcat, дозволяючи навіть додавати складні конструктори в класичну форму HTML.</p></li>
 </ol>
 <strong>І наостанок:</strong> дуже часто розробникам-початківцям ставлять питання: чи можливо запустити Java-додаток без 
 <code class=" language-none">main</code>-методу. На перший погляд, якщо дивитися на приклади вище, можна. Наш сервлет було виконано без методу 
 <code class=" language-none">main</code>. Однак, це не так. Tomcat має власний метод 
 <code class=" language-none">main</code>, який викликається при запуску сервера. На таке запитання можна потрапити на співбесіді. 
 <h2 id="Дополнительные_ссылки">Додаткові посилання:</h2>
 <ul>
  <li><a href="https://codegym.cc/groups/posts/2125-veb-prilozhenie-na-java" target="_blank">Веб-додаток на Java</a></li>
  <li><a href="https://codegym.cc/groups/posts/328-sozdanie-prostogo-veb-prilozhenija-na-servletakh-i-jsp-chastjh-1" target="_blank">Створення простого веб-додатку на сервлетах та jsp</a></li>
  <li><a href="https://metanit.com/java/javaee/2.1.php" rel="nofollow" target="_blank">Установка Tomcat (Метаніт)</a></li>
 </ul>
</ciode>