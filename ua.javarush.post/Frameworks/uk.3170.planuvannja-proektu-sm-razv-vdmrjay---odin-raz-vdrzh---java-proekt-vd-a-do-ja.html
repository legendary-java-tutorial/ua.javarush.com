Планування проекту: сім разів відміряй - один раз відріж - "Java-проект від А до Я"
<p>----------------------------------------</p>
Вітаю вас, колеги. Сьогодні ми поговоримо про те, яку підготовчу роботу потрібно провести, перш ніж почати нестримно кодувати. А конкретніше — про планування, створення архітектури програми. Але з чого розпочати? Як збудувати цю архітектуру
<p>----------------------------------------</p>
Вітаю вас, колеги. Сьогодні ми поговоримо про те, яку підготовчу роботу потрібно провести, перш ніж почати нестримно кодувати. А конкретніше — про планування, створення архітектури програми. <img data-max-width="800" data-id="40db04b4-b434-4533-9af1-466a02d20412" alt="Java-проект від А до Я. Планування проекту: сім разів відміряй - один раз відріж - 1" src="https://cdn.javarush.com/images/article/40db04b4-b434-4533-9af1-466a02d20412/800.jpeg" style="width: 800px;">Але з чого розпочати? Як збудувати цю архітектуру? Як і водиться в усьому, треба розпочати від початку. А саме – з ІДЕЇ. Ідеєю нашого проекту було створення корисного телеграм-бота з базовим функціоналом. Повторимо, яким саме: <em><span class="text-bold">"Я, як користувач, хочу мати можливість отримувати повідомлення, коли будуть виходити нові статті в тих групах CodeGym, які мене цікавлять."</span></em> Дотримуючись YAGNI принципу, будуватимемо наш додаток. Це означає, що ми братимемо лише те, що нам потрібно. Ми не створюватимемо функціонал наперед і про запас лише тому, що нам так хочеться і колись це може реально стати в нагоді. Так, ми створюватимемо легкочитаний і розширюваний додаток, але це не означає, що ми зробимо схему бази даних "на виріст". Щоб цей “виріст” не підтримувати, я вирішив, що краще зовсім відмовитиметься від нього. Це допоможе уникнути зайвої підтримки під час розробки та зайвого тестування. Пізніше, коли наш проект вийде в ПРОД (знову англицизм, від скорочення prod - production), ми вже зможемо щось зробити більше. Як тільки визначабося з ідеєю, потрібно трохи <s>попустувати</s>помалювати. А що малювати? Нам знадобиться можливість зберігати дані про підписки на групи різних користувачів. Я знаю, що можна використовувати ідентифікатор користувачів у вигляді ID-шника чату в телеграмі. І є ідея, як власне проходитиме пошук нових статей: шукатимемо у всіх групах, на які є підписки, нові статті та надсилатимемо їх у чати. Виходячи з цього, отримаємо в першому наближенні таке (ось вам розробка без прикрас):<img data-max-width="512" data-id="a0c44786-1795-4cfa-a282-43c096626839" alt="Java-проект від А до Я. Планування проекту: сім разів відміряй - один раз відріж - 2" src="https://cdn.javarush.com/images/article/a0c44786-1795-4cfa-a282-43c096626839/512.jpeg" style="width: 512px;">Я не сподіваюся, що ви розберетеся в моєму почерку: я хочу показати, як саме і з чого починається розробка. Перший етап пройдено: визначабося абияк з тим, що буде. Зверху описані моделі/таблиці у базі даних. Але це чорновий варіант: його можна і потрібно відшліфувати і привести в більш популярний вигляд. Поки шліфував, згадав, що хочеться ще отримувати статистику роботи бота. Додав це. У цьому малюнку більш ніж видно, що як буде влаштовано. Тобто, які будуть таблиці та поля у них, які будуть імена сутностей для таблиць. Вирішено, що їх буде кілька:
<ul>
 <li>User — інформація про користувача телеграми, який буде використовувати наш бот. Як ви бачите, ми зберігаємо тільки чат чату і прапор, активний користувач чи ні. Чому? Тому що наша мета - не зібрати інформацію про користувачів, а принести їм користь;</li>
 <li>GroupSub — тут буде інформація про групу, на яку є передплата та остання стаття, яка була надіслана передплатникам;</li>
 <li>Statistics - для неї не створив схему - зробимо це пізніше. Це не головна мета MVP проекту.</li>
</ul><img data-max-width="512" data-id="c89e7d46-4d7a-4587-927c-8e93da6ac8ca" alt="Java-проект від А до Я. Планування проекту: сім разів відміряй - один раз відріж - 3" src="https://cdn.javarush.com/images/article/c89e7d46-4d7a-4587-927c-8e93da6ac8ca/512.jpeg" style="width: 512px;">Після цього захотілося вже детальніше показати шлях пошуку нових статей. Для цього я скористався BPMN схемою, яку переклав у картинку і отримав ось таке: <img data-max-width="1080" data-id="c7b1f4ec-3364-4fc0-aed6-818ac1af3a39" alt="Java-проект від А до Я. Планування проекту: сім разів відміряй - один раз відріж - 4" src="https://cdn.javarush.com/images/article/c7b1f4ec-3364-4fc0-aed6-818ac1af3a39/1080.jpeg" style="width: 1080px;">Тут уже все більш читабельне і зрозуміле. За цією схемою працюватимемо у пошуку. Таку схему дуже люблять менеджери, тому що вона зрозуміла не тільки програмістам :D Загалом і загалом початок покладено.
<h2>Створюємо репозиторій для роботи</h2>Нарешті можна створити репозиторій для роботи з телеграм-ботом.<img data-max-width="800" data-id="6c035019-bf6e-48c6-ac2a-329e0503cb84" alt="Java-проект від А до Я. Планування проекту: сім разів відміряй - один раз відріж - 5" src="https://cdn.javarush.com/images/article/6c035019-bf6e-48c6-ac2a-329e0503cb84/800.jpeg" style="width: 800px;">
<ol>
 <li>Заповнюємо вже звичні нам пункти — ім'я репозиторію, його короткий опис.</li>
 <li>Додаємо ліцензію - Apache 2.0 (ви можете вибирати ліцензію на свій розсуд).</li>
 <li>Наш проект тепер доступний - ось посилання на нього: <a href="https://github.com/codegymcommunity/codegym-telegrambot" rel="nofollow" target="_blank">CodeGym Telegrambot</a> .</li>
</ol>
<h2>Створюємо проект у репозиторії</h2>Для роботи з проектом добре використовувати інструменти GitHub'a, такі як проект. Що це таке? Це місце, у межах якого можна буде створювати завдання, відстежувати їх виконання, зберігати статус завдання. Визначати, хто виконуватиме їх та інше. Для цього у створеному проекті знайдемо кнопку <span class="text-bold">Projects</span> , і там вже створимо новий: <img data-max-width="800" data-id="5117249b-6785-4d77-8ea3-b3158a4be848" alt="Java-проект від А до Я. Планування проекту: сім разів відміряй - один раз відріж - 6" src="https://cdn.javarush.com/images/article/5117249b-6785-4d77-8ea3-b3158a4be848/800.jpeg" style="width: 800px;">Як бачимо, тут я вказав ім'я проекту, описав його і вибрав шаблон, за яким працюватимемо Automated Kanban. Для нас зараз не так вже й важливо, що це означає. Головне, що у нас буде дошка із завданнями, поділена на колонки, де кожна із колонок буде статусом завдання:
<ol>
 <li>To do - всі завдання, які планується зробити;</li>
 <li>In progress - завдання, над якими йде робота на даний момент;</li>
 <li>Done – завдання, які вже зроблено в рамках цього проекту.</li>
</ol>Таким чином ми знатимемо про статус наших завдань. Які у роботі, які зроблені. Причому це важливо та зручно не лише у випадках, коли є команда, а й коли працюєш сам. Щоб щось з'явилося на дошці, потрібно створити завдання (Issue).
<h2>Пишемо завдання (issue) для проекту</h2>Щоб зрозуміти, які завдання писати, визначимося з тим, що ми маємо в проекті. Нам потрібна програма, яку можна було б запустити легко і швидко, щоб був доступ до бази даних, щоб ми могли керувати схемою бази даних та змінювати її, щоб можна було робити REST запити в CodeGym для отримання даних за статтями. Виходячи з цього, можна вибрати такі технології:
<ul>
 <li>SpringBoot - як каркас для нашої програми,</li>
 <li>Spring Data - для роботи з базою даних,</li>
 <li>Flyway - для роботи з міграціями бази даних,</li>
 <li>MySQL - як БД для проекту,</li>
 <li>Telegrambot StringBoot starter - бібліотека для роботи з телеграм-ботом,</li>
 <li>Unirest - бібліотека для роботи з запитами REST.</li>
</ul>З усього перерахованого вище почнемо створювати завдання.
<h3>Шаблон створення завдань</h3>Будемо створювати завдання за наступним шаблоном:
<ol>
 <li>Ім'я завдання матиме такий вигляд: <span class="text-bold">JRTB-{IssueNumber}:{IssueDescription}</span> , де:
  <ul>
   <li>{IssueNumber} – це порядковий номер завдання. Беремо його на один більше від останнього завдання;</li>
   <li>{IssueDescription} – короткий опис завдання.</li>
  </ul></li>
 <li>У тілі завдання будемо робити її детальніший опис (іноді може збігатися з описом в імені завдання).</li>
 <li>Acceptance Criteria - це перелік вимог, після виконання яких можна вважати, що завдання виконане. Так би мовити, критерії приймання завдання. За ними рев'ювер (від англ. reviewer - рецензент - людина, яка дивиться як виконане завдання) може зрозуміти, чи повністю зроблено завдання чи ні.</li>
</ol>За цим шаблоном створимо наше перше завдання: <img data-max-width="1024" data-id="070e2b4e-9a72-4f97-a847-28b0a1eb5fe3" alt="Java-проект від А до Я. Планування проекту: сім разів відміряй - один раз відріж - 7" src="https://cdn.javarush.com/images/article/070e2b4e-9a72-4f97-a847-28b0a1eb5fe3/1024.jpeg" style="width: 1024px;">Також варто звернути увагу, що при створенні я відразу визначив, до якого проекту підходить це завдання, хто його виконуватиме (assignee) і до якої позначки (label) це завдання відноситься. Далі я просто покажу імена завдань з невеликим описом та посилання на них. Всі вони знаходяться <a href="https://github.com/codegymcommunity/codegym-telegrambot/issues" rel="nofollow" target="_blank">тут</a> . Виконувати завдання ми будемо приблизно в тому самому порядку, що тут зазначено:
<ol>
 <li><a href="https://github.com/codegymcommunity/codegym-telegrambot/issues/12" rel="nofollow" target="_blank">[FEATURE] JRTB-0: create Skeleton Spring boot project</a> – тут усе зрозуміло: потрібно зробити першу частину того, що ми робабо у попередній статті.</li>
 <li><a href="https://github.com/codegymcommunity/codegym-telegrambot/issues/2" rel="nofollow" target="_blank">[FEATURE] JRTB-2: add telegram bot to the project</a> - додаємо порожнього бота, який буде просто відповідати і говорити, що він живий-здоровий.</li>
 <li><a href="https://github.com/codegymcommunity/codegym-telegrambot/issues/3" rel="nofollow" target="_blank">[FEATURE] JRTB-3: Implement Command pattern for telegrambot</a> - налаштуємо правильний підхід до роботи з командами в телеграм-боті. Поки що для кількох команд.</li>
 <li><a href="https://github.com/codegymcommunity/codegym-telegrambot/issues/1" rel="nofollow" target="_blank">[FEATURE] JRTB-1: Add repository layer</a> – це одне з найбільших завдань – тут об'єднано все те, що потрібно зробити для роботи з базою даних.</li>
 <li><a href="https://github.com/codegymcommunity/codegym-telegrambot/issues/5" rel="nofollow" target="_blank">[FEATURE] JRTB-5: As user, I want to add the group to the subscription</a> - це вже перша User Story у розумінні Agile. Тут вже буде реальний вихлоп для наших користувачів: можна буде додавати підписки на групи до бота.</li>
 <li><a href="https://github.com/codegymcommunity/codegym-telegrambot/issues/13" rel="nofollow" target="_blank">[FEATURE] JRTB-12: Implement scheduling for sending notification about new articles</a> - ось тут буде реалізація пошуку нових статей, якщо вони вийшли для кожної групи і відправлені всім користувачам, які підписані на групи.</li>
 <li><a href="https://github.com/codegymcommunity/codegym-telegrambot/issues/6" rel="nofollow" target="_blank">[FEATURE] JRTB-6: As user, I want to see list of group subscriptions</a> — тут все просто: додаємо команду з виведенням списку всіх груп, на які підписаний користувач.</li>
 <li><a href="https://github.com/codegymcommunity/codegym-telegrambot/issues/7" rel="nofollow" target="_blank">[FEATURE] JRTB-7: As a User, I want to remove group subscription from my subscriptions</a> — тут потрібно реалізувати видалення передплати користувача оновлення в групі.</li>
 <li><a href="https://github.com/codegymcommunity/codegym-telegrambot/issues/8" rel="nofollow" target="_blank">[FEATURE] JRTB-8: As a User, I want to set inactive using bot</a> — реалізувати зупинку бота. Тобто все те, що потрібно зробити у нашій системі, щоб робота зупинилася. Додати до обробки команду / stop.</li>
 <li><a href="https://github.com/codegymcommunity/codegym-telegrambot/issues/9" rel="nofollow" target="_blank">[FEATURE] JRTB-9: As a User, I want to start working with bot OR set active if I used it before</a> - додати обробку команди /start. Саме так, як ми цього хочемо.</li>
 <li><a href="https://github.com/codegymcommunity/codegym-telegrambot/issues/10" rel="nofollow" target="_blank">[FEATURE] JRTB-10: As an administrator, I want to see bot statistics</a> - створення збору статистики робота. Додавання можливості адміністраторів.</li>
 <li><a href="https://github.com/codegymcommunity/codegym-telegrambot/issues/11" rel="nofollow" target="_blank">[FEATURE] JRTB-11: Як користувач, я маю на меті documentation для цього телеграма bot</a> - написання документації. Так-так, друзі, без неї нікуди, і що раніше ви навчитеся це робити, тим краще буде для вас))</li>
</ol>Ось це вже схоже на початок проекту. Так би мовити, попрацювали ми архітектором проекту та бізнес-аналітиком.
<h2>Заповнюємо репозиторій</h2>Що ще потрібно зробити ДО того, як ми почнемо кодувати? <em>— Авторе, ну скільки можна додавати цих абзаців, ти що їх, з безодні дістаєш? — Ні, якість роботи проявляється у деталях. І саме вони мають сенс. </em> Тому додамо ще одну деталь. Щоб проект став популярним та зрозумілим для інших розробників, потрібно наповнити його. Що потрібно додати? Повний перелік того, що можна зробити, я описав у статті <a href="https://codegym.cc/groups/posts/2478-optimiziruem-rabotu-so-svoimi-proektami-na-github-znakomstvo-s-github-template-repository" target="_blank">Оптимізуємо роботу зі своїми проектами на GitHub: знайомство з Github Template Repository</a> . Дуже раджу прочитати. Для нас важливо мати чітке версіонування, чітке розуміння того, що ми робимо. Тому я додав RELEASE_NOTES файл, в якому будуть записуватися зміни нашого проекту. Як приклад можна подивитися на <a href="https://github.com/romankh3/image-comparison/blob/master/RELEASE_NOTES.md" rel="nofollow" target="_blank">RELEASE_NOTES з мого проекту</a>(так, чому б не показати те, у що я вкладаю свої сабо та творчість). Там описані зміни щодо кожної нової версії. Також додав шаблони для створення нових завдань, у яких є 4 варіанти:
<ul>
 <li><span class="text-bold">Bug Report –</span> завдання, яке створюють користувачі/тестувальники, що знайшли помилку в роботі. Це дуже важлива річ: вона допомагає керувати виправленням помилок;</li>
 <li><span class="text-bold">Feature request</span> — це завдання додавання нової функціональності. Усі перші завдання на проекті – завдання на feature request;</li>
 <li><span class="text-bold">Improvement request</span> – завдання на покращення роботи програми. Наприклад, зміна тестових відповідей у ​​роботі з ботом. Я не technical writer і можу вигадати не зовсім правильні відповіді. Так якщо буде бажання та вміння - пропонуйте :)</li>
 <li><span class="text-bold">Question</span> - це питання до розробників по роботі програми. Дуже корисна річ. Припустимо, немає розуміння в роботі чи є сумніви у якомусь питанні — можна поставити таким чином питання та отримати відповідь із перших рук.</li>
</ul>Якщо подивитися на гітхаб, то це буде виглядати саме так: <img data-max-width="1080" data-id="4e470739-6d36-43b3-bd9a-db6fe872189a" alt="Java-проект від А до Я. Планування проекту: сім разів відміряй - один раз відріж - 8" src="https://cdn.javarush.com/images/article/4e470739-6d36-43b3-bd9a-db6fe872189a/1080.jpeg" style="width: 1080px;">Також на даний момент ми маємо документ з роботи з CodeGym API для роботи з групами.
<h2>Що далі?</h2>Ну ось виконаємо ми всі ці кроки і що проект закриється? Ні, зовсім ні. Цей проект житиме й надалі. Його розвиватиму я і всі ті учні/випускники CodeGym, які захочуть взяти участь. Які плани на майбутнє? Їх багато. Найперший план - це створення Java-клієнта для CodeGym API. Розробники пообіцяли зробити відкритий доступ до їхнього Swagger'у. Що таке сваггер ми також розберемо. Прикольна та дуже корисна річ. Далі інтегруватимемо CodeGym сайт з телеграм-ботом. Підключимо користувача до робота, щоб синхронізувати передплати. Створимо статистику щодо проходження курсу. І все, що ви захочете як CodeGym Community.
<h2>Висновки</h2>Сьогодні ми поговорабо про закулісну роботу до створення проекту. А точніше, про те, як створити план роботи, без якого можна витратити багато енергії марно. Повторю, початок проекту вже викладено у відкритий доступ <a href="https://github.com/codegymcommunity/codegym-telegrambot" rel="nofollow" target="_blank">тут</a> . Традиційно пропоную підписатися на <a href="https://github.com/romankh3" rel="nofollow" target="_blank">мій обліковий запис</a> на гітхабі. Таким чином ви зможете отримати зміни в проекті до того, як публікується стаття. Вже вважаю, що всі зацікавлені особи зареєструвалися на гітхабі. Так, проект не летить так швидко, як хотілося б. Втім, як і реальні проекти на роботі. У наступній статті я опишу додавання перших завдань. Дякую всім за прочитання і до швидкого!<a href="https://codegym.cc/welcome" target="_blank"><img id="click_banner1_articles" data-max-width="1080" data-id="5736eb4b-2b1c-4ab6-b4cc-b9e2d1cef628" alt="&quot;Java-проект від А до Я&quot;: SpringBoot + Flyway - 26" src="https://cdn.javarush.com/images/article/5736eb4b-2b1c-4ab6-b4cc-b9e2d1cef628/1080.jpeg" style="width: 1080px;"></a>
<h4><a href="https://codegym.cc/groups/posts/2935-java-proekt-ot-a-do-ja-pishem-realjhnihy-proekt-dlja-portfolio#articles" target="_blank">Список всіх матеріалів серії на початку цієї статті.</a></h4>