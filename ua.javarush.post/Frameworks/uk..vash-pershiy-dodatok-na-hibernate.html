Ваш перший додаток на Hibernate
<p>----------------------------------------</p>
У цій статті ви познайомитеся з одним з найбільш популярних enterprise-фреймворків для Java і створіть свій перший додаток на Hibernate. Ніколи не чули про Hibernate? Може, чули про нього, але не користувалися? Чи намагалися розпочати, але 
<p>----------------------------------------</p>
У цій статті ви познайомитеся з одним з найбільш популярних enterprise-фреймворків для Java і створіть свій перший додаток на Hibernate. Ніколи не чули про Hibernate? Може, чули про нього, але не користувалися? Чи намагалися розпочати, але не вийшло? У всіх трьох випадках - ласкаво просимо під кат:) <img data-max-width="800" data-id="2d110611-52c1-44c9-9fc8-519d636b8f4f" class="img-fluid" alt="Ваш перший додаток на Hibernate - 1" src="https://cdn.javarush.com/images/article/2d110611-52c1-44c9-9fc8-519d636b8f4f/800.jpeg" style="width: 800px;">Всім привіт! У цій статті я розповім про основні особливості фреймворку Hibernate і допоможу вам написати свій перший міні-додаток. Для цього нам знадобляться: 
<ol>
 <li>Intellij Idea Ultimate Edition; <br>
   Качаємо з <a href="https://www.jetbrains.com/idea/" target="_blank" rel="nofollow">офіційного сайту</a> та активуємо 30-денну пробну версію.</li>
 <li>PostgeSQL - одна з найпопулярніших сучасних систем управління базами даних (СУБД);</li>
 <li>Maven (вже зашитий в IDEA);</li>
 <li>Трошки терпіння.</li>
</ol><!--На всякий случай я выложил код програми на <a href="https://github.com/jd2050/PracticeRoom2/tree/codegym" target="_blank" rel="nofollow">github</a> (ветка codegym)-->Стаття орієнтована насамперед тих, хто ніколи не працював з даною технологією, тому кількість коду була максимально зменшена. Почнемо! 
<h2>Що таке Hibernate?</h2>Це одна з найбільш популярних реалізацій ORM-моделі. Об'єктно-реляційна модель описує відносини між програмними об'єктами та записами у БД. Звичайно, функціонал Hibernate дуже широкий, але ми зупинимося на найпростіших функціях. Наша мета: створити CRUD-додаток (Create,Read,Update,Delete), який вмітиме: 
<ol>
 <li>Створювати користувачів (User), а також шукати їх у базі даних за ID, оновлювати їх у базі, а також видаляти з бази.</li>
 <li>Надавати користувачам об'єкти автомобілів (Auto). Створювати, редагувати, знаходити та видаляти автомобілі з бази даних.</li>
 <li>Крім того, додаток повинен автоматично видаляти "безхазяйні" автомобілі з БД. Тобто. при видаленні користувача, всі його автомобілі також повинні бути видалені з БД.</li>
</ol>Структура нашого проекту буде такою: <img data-max-width="425" alt="Ваш перший додаток на Hibernate - 2" src="https://cdn.javarush.com/images/article/3e1bf54f-8e8c-4ed7-9bbe-72697e210ead/original.jpeg">Як бачите, нічого складного. 6 класів + 1 файл із конфігами. Для початку створимо новий maven-проект в Intellij Idea. File -&gt; New Project. З пропонованих типів проектів вибирайте Maven і переходьте далі. <img data-max-width="512" data-id="2dcbc8aa-57ea-4b41-82fc-5a368b048775" class="img-fluid" alt="Ваш перший додаток на Hibernate - 3" src="https://cdn.javarush.com/images/article/2dcbc8aa-57ea-4b41-82fc-5a368b048775/512.jpeg" style="width: 512px;">Apache Maven — фреймворк для автоматизації складання проектів на основі опису їхньої структури у файлух мовою POM. Вся структура вашого проекту буде описана у файлі pom.xml, який IDEA сама створить у корені вашого проекту. У налаштуваннях проекту потрібно буде вказати параметри Maven - groupId і artifactId. Зазвичай у проектах групивизначається назва організації або підрозділу, туди записують доменне ім'я організації або сайту проекту. У свою чергу artifactId – назва проекту. Для groupdId можете вказати<code class=" language-none">com.вашНикнейм.codegym</code>На роботу програми це ніяк не вплине. Для artifactId виберіть будь-яку назву проекту, що вам сподобалася. Version також можете залишити без змін. <img data-max-width="512" data-id="0aba8341-eddc-4d4f-b3e1-2dbb621f659a" class="img-fluid" alt="Ваш перший додаток на Hibernate - 4" src="https://cdn.javarush.com/images/article/0aba8341-eddc-4d4f-b3e1-2dbb621f659a/512.jpeg" style="width: 512px;">На останньому екрані просто підтвердьте введені дані. <img data-max-width="512" data-id="b1a09443-6064-47e8-85c8-de74415cb9a7" class="img-fluid" alt="Ваш перший додаток на Hibernate - 5" src="https://cdn.javarush.com/images/article/b1a09443-6064-47e8-85c8-de74415cb9a7/512.jpeg" style="width: 512px;">Отже, проект ми створабо, залишилося всього нічого - написати код і змусити його працювати :) Перш за все, якщо ми хочемо створити додаток, що працюють з базою даних - нам безумовно не обійтися без бази даних! Качаємо PostgreSQL <a href="https://www.postgresql.org/download/" target="_blank" rel="nofollow">звідси</a>(Я використовую 9 версію). PostgreSQL має створений за замовчуванням користувач 'postgres', пароль для нього вам потрібно буде придумати при установці. Не забувайте пароль, він нам знадобиться згодом! (Взагалі, користуватися дефолтною БД у додатках - bad practice, але з метою скоротити обсяг геморою зі створенням своєї БД обійдемося їй). Якщо ви не товаришуєте з командним рядком та SQL-запитами, є хороша новина. Intellij IDEA надає цілком придатний інтерфейс користувача для роботи з БД. Виглядає він так:<img data-max-width="800" data-id="9d022e52-3681-4f3e-be31-4310ad12e5be" class="img-fluid" alt="Ваш перший додаток на Hibernate - 6" src="https://cdn.javarush.com/images/article/9d022e52-3681-4f3e-be31-4310ad12e5be/800.jpeg" style="width: 800px;">(Знаходиться на правій бічній панелі IDEA, вкладка Database) Для створення підключення натисніть "+", виберіть нашого провайдера (PostgeSQL). Заповніть поля з користувачем, іменем БД (і те й інше – postgres) та введіть пароль, який задали під час встановлення PostgreSQL. При необхідності – завантажте драйвер Postgres, це можна зробити на цій самій сторінці. Натисніть "Test Connection", щоб перевірити, чи з'єднання з БД встановлено. Якщо бачите напис "Successful" - їдемо далі. Тепер створимо потрібні таблиці. Усього їх буде дві - users і autos. Параметри для таблиці users: <img data-max-width="750" alt="Ваш перший додаток на Hibernate - 7" src="https://cdn.javarush.com/images/article/0626275a-4632-47c3-8683-bc96c742143f/original.jpeg">Зверніть увагу, що id є первинним ключем (Primary Key). Якщо не знаєте, що таке первинний ключ в SQL - гугл, це важливо. Налаштування для таблиці autos: <img data-max-width="750" alt="Ваш перший додаток на Hibernate - 8" src="https://cdn.javarush.com/images/article/93e0f1cb-cd51-40b0-8b2c-1f6115b92749/original.jpeg">Для автомобілів потрібно налаштувати Foreign Key — зовнішній ключ. Він буде пов'язувати наші таблиці. Раджу почитати про нього докладніше; якщо говорити дуже просто - він посилається на зовнішню таблицю, у разі на users. Якщо машина належить користувачеві з id=1, то полі user_id таблиці autos в неї буде 1. Так ми у нашому додатку пов'язуємо користувачів зі своїми автомобілями. У нашій таблиці autos роль зовнішнього ключа виконуватиме поле user_id. Воно буде посилатися на поле ID таблиці users. <img data-max-width="750" alt="Ваш перший додаток на Hibernate - 9" src="https://cdn.javarush.com/images/article/1d5a8142-0448-4c44-97d1-1d1909161f75/original.jpeg">Таким чином, ми створабо базу даних із двома таблицями. Залишилося зрозуміти, як керувати з Java-коду. Почнемо ми з файлу pom.xml, в якому нам необхідно підключити необхідні бібліотеки (на мові Maven вони називаються dependencies - "залежності"). Усі бібліотеки зберігаються у центральному репозиторії Maven. Ті з них, які ви вкажете в pom.xml, ви можете використовувати у проекті. Ваш pom.xml повинен мати такий вигляд: <img data-max-width="800" class="img-fluid" alt="Ваш перший додаток на Hibernate - 10" src="https://codegym-com.translate.goog/images/article/ee21e4c4-7479-4b3f-aae8-07d08856a946/original.jpeg">Нічого складного, як бачите. Ми додали всього 2 залежності - для використання PostgreSQL та Hibernate. 
<div class="email-subscription">
 <iframe frameborder="0" src="https://secure.esputnik.com.ua/4Q0Ef6d2SOs" width="100%" height="200" scrolling="no" data-savepage-key="0-2"></iframe>
</div> Тепер перейдемо до Java-коду. Створіть усі необхідні пакети та класи проекту. Для початку, нам знадобляться моделі даних – класи <code class=" language-none">User</code>та <code class=" language-none">Auto</code>. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">models</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">javax<span class="token punctuation"><span class="token punctuation">.</span></span>persistence<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token operator"><span class="token operator">*</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">ArrayList</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token annotation punctuation"><span class="token annotation punctuation">@Entity</span></span>
<span class="token annotation punctuation"><span class="token annotation punctuation">@Table</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>name <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"users"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">User</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Id</span></span>
    <span class="token annotation punctuation"><span class="token annotation punctuation">@GeneratedValue</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>strategy <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">GenerationType</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>IDENTITY<span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">int</span></span> id<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token annotation punctuation"><span class="token annotation punctuation">@Column</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>name <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"name"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> name<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token comment"><span class="token comment">//Можна не вказувати Column name, якщо воно збігається з назвою стовпця в таблиці</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">int</span></span> age<span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@OneToMany</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>mappedBy <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"user"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> cascade <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">CascadeType</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>ALL<span class="token punctuation"><span class="token punctuation">,</span></span> orphanRemoval <span class="token operator"><span class="token operator">=</span></span> <span class="token boolean"><span class="token boolean">true</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Auto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> autos<span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> name<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token keyword"><span class="token keyword">int</span></span> age<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>name <span class="token operator"><span class="token operator">=</span></span> name<span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>age <span class="token operator"><span class="token operator">=</span></span> age<span class="token punctuation"><span class="token punctuation">;</span></span>
        autos <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ArrayList</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">addAuto</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Auto</span></span> auto<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        auto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setUser</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        autos<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>auto<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">removeAuto</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Auto</span></span> auto<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        autos<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">remove</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>auto<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">int</span></span> <span class="token function"><span class="token function">getId</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> id<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">String</span></span> <span class="token function"><span class="token function">getName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> name<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">setName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> name<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>name <span class="token operator"><span class="token operator">=</span></span> name<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">int</span></span> <span class="token function"><span class="token function">getAge</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> age<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">setAge</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span> age<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>age <span class="token operator"><span class="token operator">=</span></span> age<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Auto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">getAutos</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> autos<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">setAutos</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Auto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> autos<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>autos <span class="token operator"><span class="token operator">=</span></span> autos<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">String</span></span> <span class="token function"><span class="token function">toString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> <span class="token string"><span class="token string">"models.User{"</span></span> <span class="token operator"><span class="token operator">+</span></span>
                <span class="token string"><span class="token string">"id="</span></span> <span class="token operator"><span class="token operator">+</span></span> id <span class="token operator"><span class="token operator">+</span></span>
                <span class="token string"><span class="token string">", name='"</span></span> <span class="token operator"><span class="token operator">+</span></span> name <span class="token operator"><span class="token operator">+</span></span> <span class="token string"><span class="token string">'\''</span></span> <span class="token operator"><span class="token operator">+</span></span>
                <span class="token string"><span class="token string">", age="</span></span> <span class="token operator"><span class="token operator">+</span></span> age <span class="token operator"><span class="token operator">+</span></span>
                <span class="token string"><span class="token string">'}'</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre>
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">models</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">javax<span class="token punctuation"><span class="token punctuation">.</span></span>persistence<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token operator"><span class="token operator">*</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token annotation punctuation"><span class="token annotation punctuation">@Entity</span></span>
<span class="token annotation punctuation"><span class="token annotation punctuation">@Table</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>name <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"autos"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Auto</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Id</span></span>
    <span class="token annotation punctuation"><span class="token annotation punctuation">@GeneratedValue</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>strategy <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">GenerationType</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>IDENTITY<span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">int</span></span> id<span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Column</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>name <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"model"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> model<span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token comment"><span class="token comment">//Можна не вказувати Column name, якщо воно збігається з назвою стовпця в таблиці</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> color<span class="token punctuation"><span class="token punctuation">;</span></span>


    <span class="token annotation punctuation"><span class="token annotation punctuation">@ManyToOne</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>fetch <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">FetchType</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>LAZY<span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token annotation punctuation"><span class="token annotation punctuation">@JoinColumn</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>name <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"user_id"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">User</span></span> user<span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Auto</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Auto</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> model<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> color<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>model <span class="token operator"><span class="token operator">=</span></span> model<span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>color <span class="token operator"><span class="token operator">=</span></span> color<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">int</span></span> <span class="token function"><span class="token function">getId</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> id<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">String</span></span> <span class="token function"><span class="token function">getModel</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> model<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">setModel</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> model<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>model <span class="token operator"><span class="token operator">=</span></span> model<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">String</span></span> <span class="token function"><span class="token function">getColor</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> color<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">setColor</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> color<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>color <span class="token operator"><span class="token operator">=</span></span> color<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">User</span></span> <span class="token function"><span class="token function">getUser</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> user<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">setUser</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">User</span></span> user<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>user <span class="token operator"><span class="token operator">=</span></span> user<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">String</span></span> <span class="token function"><span class="token function">toString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> color <span class="token operator"><span class="token operator">+</span></span> <span class="token string"><span class="token string">" "</span></span> <span class="token operator"><span class="token operator">+</span></span> model<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Як бачите, класи забезпечені купою поки що незрозумілих анотацій. Почнемо з ними розбиратися. Головна для нас інструкція - @Entity (сутність). Прочитайте в ній у Вікіпедії і запам'ятайте все, це - основа основ. Ця інструкція дозволяє Java-об'єктам вашого класу бути пов'язаними з БД. Щоб клас міг бути сутністю, щодо нього пред'являються такі вимоги: 
<ul>
 <li>Повинен мати порожній конструктор ( <code class=" language-none">public</code>або <code class=" language-none">protected</code>);</li>
 <li>Не може бути вкладеним, інтерфейсом або <code class=" language-none">enum</code>;</li>
 <li>Не може бути <code class=" language-none">final</code>і не може містити <code class=" language-none">final</code>полів/властивостей;</li>
 <li>Має містити хоча б одне @Id-поле.</li>
</ul>Перевірте ваші entity-класи, ці пункти – дуже популярне місце для "пострілу собі в ногу". Дуже легко щось забути. При цьому entity може: 
<ul>
 <li>утримувати непусті конструктори;</li>
 <li>успадковуватися і бути успадкованим;</li>
 <li>Утримувати інші методи та реалізовувати інтерфейси.</li>
</ul>Як бачите, клас <code class=" language-none">User</code>багато в чому схожий на таблицю користувачів. Є поля <code class=" language-none">id</code>, <code class=" language-none">name</code>,<code class=" language-none">age</code>. Розташовані над ними анотації пояснення особливо не потребують: і так зрозуміло, що @Id - це вказівка, що поле є ідентифікатором об'єктів цього класу. Анотація @Table над класом вказує як називається таблиця, у якому записуються об'єкти. Зверніть увагу на коментар над полем age: якщо ім'я поля в класі та таблиці збігається - можна не додавати інструкцію @Column, буде працювати і так. Що стосується зазначеного у дужках "strategy = GenerationType.IDENTITY": є кілька стратегій генерації ID. Можете погуглити, але в рамках нашої програми можна не морочитися. Головне, що id для наших об'єктів генеруватимуться автоматично, тому для id відсутній сеттер, і в конструкторі ми його теж не задаємо. Проте, чимось клас<code class=" language-none">User</code>таки виділяється. Має список машин! Над списком висить інструкція @OneToMany. Вона означає, що одному об'єкту класу user може відповідати кілька машин. Налаштування "mappedBY" вказує на поле user класу <code class=" language-none">Auto</code>. Таким чином машини та користувачі пов'язані між собою. Налаштування orphanRemoval цілком добре перекладається з англійської - "видаляти сиріт". Якщо ми видалимо користувача з БД - всі пов'язані з ним автомобілі також будуть видалені. У свою чергу у класі<code class=" language-none">Auto</code>ви побачите поле user з анотацією @ManyToOne (багатьом Auto може відповідати один User) та анотацію @JoinColumn. Вона вказує, через який стовпець у таблиці autos відбувається зв'язок із таблицею users (той самий зовнішній ключ, про який ми говорабо раніше). Після створення моделі даних настав час навчити нашу програму виконувати з цими даними операції в БД. Почнемо з утилітного класу HibernateSessionFactoryUtil. Він має лише одне завдання — створювати для нашого додатку фабрику сесій для роботи з БД (привіт, патерн "Фабрика!"). Більше він нічого не вміє. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">utils</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">models<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Auto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">models<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>hibernate<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">SessionFactory</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>hibernate<span class="token punctuation"><span class="token punctuation">.</span></span>boot<span class="token punctuation"><span class="token punctuation">.</span></span>registry<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">StandardServiceRegistryBuilder</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>hibernate<span class="token punctuation"><span class="token punctuation">.</span></span>cfg<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Configuration</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">HibernateSessionFactoryUtil</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token class-name"><span class="token class-name">SessionFactory</span></span> sessionFactory<span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">HibernateSessionFactoryUtil</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span><span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token class-name"><span class="token class-name">SessionFactory</span></span> <span class="token function"><span class="token function">getSessionFactory</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>sessionFactory <span class="token operator"><span class="token operator">==</span></span> <span class="token keyword"><span class="token keyword">null</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
            <span class="token keyword"><span class="token keyword">try</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                <span class="token class-name"><span class="token class-name">Configuration</span></span> configuration <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Configuration</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">configure</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                configuration<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">addAnnotatedClass</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                configuration<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">addAnnotatedClass</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Auto</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                <span class="token class-name"><span class="token class-name">StandardServiceRegistryBuilder</span></span> builder <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">StandardServiceRegistryBuilder</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">applySettings</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>configuration<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getProperties</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
                sessionFactory <span class="token operator"><span class="token operator">=</span></span> configuration<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">buildSessionFactory</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>builder<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">build</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

            <span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">catch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Exception</span></span> e<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                <span class="token class-name"><span class="token class-name">System</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>out<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">println</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Виняток!"</span></span> <span class="token operator"><span class="token operator">+</span></span> e<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
            <span class="token punctuation"><span class="token punctuation">}</span></span>
        <span class="token punctuation"><span class="token punctuation">}</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> sessionFactory<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> У цьому вся класі ми створюємо новий об'єкт конфігурацій Configuration, і передаємо йому ті класи, які має сприймати як сутності — <code class=" language-none">User</code>і <code class=" language-none">Auto</code>. Зверніть увагу на метод <code class=" language-none">configuration.getProperties()</code>. Які ще properties? Звідки? Properties — це параметри для роботи hibernate, зазначені у спеціальному файлі hibernate.cfg.xml. <img data-max-width="750" alt="Ваш перший додаток на Hibernate - 11" src="https://cdn.javarush.com/images/article/ce810a70-3a1d-4670-ac9f-c99fe1463270/original.jpeg">Hibernate.cfg.xml зачитується тут: <code class=" language-none">new Configuration().configure();</code> У ньому, як бачите, немає нічого особливого - параметри з'єднання з базою даних, і спеціальний параметр show_sql. Він потрібен для того, щоб усі sql-запити, які hibernate буде виконувати до нашої БД, виводабося в консоль. Таким чином, ви будете бачити, що конкретно робить Hibernate в кожний момент часу і позбавитеся від ефекту "магії". Далі нам знадобиться клас<code class=" language-none">UserDAO</code>. (По-доброму, програмувати потрібно через інтерфейси — створити інтерфейс <code class=" language-none">UserDAO</code>та окремо його реалізацію <code class=" language-none">UserDAOImpl</code>, але для скорочення обсягу коду я опущу це. Не робіть так у реальних проектах!). DAO (data access object) - один з найпоширеніших патернів проектування, "Доступ до даних". Його сенс простий — створити у додатку шар, який відповідає лише доступ до даних, і більше нізащо. Дістати дані з БД, оновити дані, видалити дані і все. Почитайте про DAO докладніше, у роботі користуватиметеся ними постійно. Що ж вміє наш клас <code class=" language-none">UserDao</code>? Власне, як і всі DAO, він уміє лише працювати з даними. Знайти користувача по id, оновити його дані, видалити його, витягнути з БД перелік всіх користувачів чи зберегти в БД нового користувача — ось його функционал. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">dao</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">models<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Auto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">models<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>hibernate<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Session</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>hibernate<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Transaction</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">utils<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">HibernateSessionFactoryUtil</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">UserDao</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">User</span></span> <span class="token function"><span class="token function">findById</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span> id<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> <span class="token class-name"><span class="token class-name">HibernateSessionFactoryUtil</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getSessionFactory</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">openSession</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> id<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">save</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">User</span></span> user<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">Session</span></span> session <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">HibernateSessionFactoryUtil</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getSessionFactory</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">openSession</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">Transaction</span></span> tx1 <span class="token operator"><span class="token operator">=</span></span> session<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">beginTransaction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        session<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">save</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>user<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        tx1<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">commit</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        session<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">close</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">update</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">User</span></span> user<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">Session</span></span> session <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">HibernateSessionFactoryUtil</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getSessionFactory</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">openSession</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">Transaction</span></span> tx1 <span class="token operator"><span class="token operator">=</span></span> session<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">beginTransaction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        session<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">update</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>user<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        tx1<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">commit</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        session<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">close</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">delete</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">User</span></span> user<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">Session</span></span> session <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">HibernateSessionFactoryUtil</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getSessionFactory</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">openSession</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">Transaction</span></span> tx1 <span class="token operator"><span class="token operator">=</span></span> session<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">beginTransaction</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        session<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">delete</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>user<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        tx1<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">commit</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        session<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">close</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Auto</span></span> <span class="token function"><span class="token function">findAutoById</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span> id<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> <span class="token class-name"><span class="token class-name">HibernateSessionFactoryUtil</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getSessionFactory</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">openSession</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Auto</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token keyword"><span class="token keyword">class</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> id<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">findAll</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> users <span class="token operator"><span class="token operator">=</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">)</span></span>  <span class="token class-name"><span class="token class-name">HibernateSessionFactoryUtil</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getSessionFactory</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">openSession</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">createQuery</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"From User"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">list</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> users<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Методи <code class=" language-none">UserDao</code>схожі один на одного. У більшості з них ми отримуємо об'єкт <a href="https://docs.jboss.org/hibernate/orm/3.5/javadocs/org/hibernate/Session.html" target="_blank" rel="nofollow">Session</a> (сесія з'єднання з нашою БД) за допомогою нашої Фабрики Сесій, створюємо в рамках цієї сесії одиночну транзакцію, виконуємо необхідні перетворення даних, зберігаємо результат транзакції в БД та закриваємо сесію. Самі методи також, як бачите, досить прості. Саме DAO - "серце" нашої програми. Однак ми не будемо створювати DAO безпосередньо і викликати його методи в нашому методі <code class=" language-none">main()</code>. Вся логіка буде переміщена до класу <code class=" language-none">UserService</code>. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">services</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">dao<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UserDao</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">models<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Auto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">models<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">UserService</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">UserDao</span></span> usersDao <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">UserDao</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">UserService</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">User</span></span> <span class="token function"><span class="token function">findUser</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span> id<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> usersDao<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">findById</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>id<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">saveUser</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">User</span></span> user<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        usersDao<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">save</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>user<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">deleteUser</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">User</span></span> user<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        usersDao<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">delete</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>user<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">updateUser</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">User</span></span> user<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        usersDao<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">update</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>user<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">findAllUsers</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> usersDao<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">findAll</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Auto</span></span> <span class="token function"><span class="token function">findAutoById</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span> id<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> usersDao<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">findAutoById</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>id<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>


<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Service - шар даних у додатку, що відповідає за виконання бізнес-логіки. Якщо ваша програма має виконати якусь бізнес-логіку, вона робить це через сервіси. Сервіс містить у собі <code class=" language-none">UserDao</code>, і у методах викликає методи DAO. Це може здатися вам дублюванням функцій (чому б просто не викликати методи з dao-об'єкта), але при великій кількості об'єктів і складній логіці розбиття програми на шари дає величезні переваги (це good practice, запам'ятайте цю інформацію на майбутнє і почитайте про "шари додатку "). У нас у сервісі логіка проста, а в реальних проектах методи сервісів будуть містити куди більше одного рядка коду:) Тепер у нас є все, що потрібно для роботи програми! <a href="https://codegym.cc/welcome" target="_blank"><img id="click_banner1_articles" data-max-width="1024" data-id="391739ad-49f7-4305-a700-6bfa154852a0" class="img-fluid" alt="Ваш перший додаток на Hibernate - 12" src="https://cdn.javarush.com/images/article/391739ad-49f7-4305-a700-6bfa154852a0/1024.jpeg" style="width: 1024px;"></a>Давайте створимо у методі<code class=" language-none">main()</code>користувача, машини йому, зв'яжемо їх друг з одним і збережемо в БД. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">models<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Auto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">models<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">services<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UserService</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>sql<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">SQLException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Main</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">throws</span></span> <span class="token class-name"><span class="token class-name">SQLException</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

        <span class="token class-name"><span class="token class-name">UserService</span></span> userService <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">UserService</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">User</span></span> user <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Masha"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span><span class="token number"><span class="token number">26</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        userService<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">saveUser</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>user<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">Auto</span></span> ferrari <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Auto</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Ferrari"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"red"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        ferrari<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setUser</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>user<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        user<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">addAuto</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>ferrari<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">Auto</span></span> ford <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Auto</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Ford"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"black"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        ford<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setUser</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>user<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        user<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">addAuto</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>ford<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        userService<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">updateUser</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>user<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Як бачите, у таблиці users з'явився свій запис, а таблиці autos — свої. <img data-max-width="750" alt="Ваш перший додаток на Hibernate - 13" src="https://cdn.javarush.com/images/article/169acb91-2cde-4bf4-b728-46174b703e0b/original.jpeg"><img data-max-width="750" alt="Ваш перший додаток на Hibernate - 14" src="https://cdn.javarush.com/images/article/ad5007f0-684d-4ac2-a7a5-96ac4fe85626/original.jpeg">Спробуймо перейменувати нашого користувача. Очистимо таблицю users та виконаємо код 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">models<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Auto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">models<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">services<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UserService</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>sql<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">SQLException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Main</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">throws</span></span> <span class="token class-name"><span class="token class-name">SQLException</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

        <span class="token class-name"><span class="token class-name">UserService</span></span> userService <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">UserService</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">User</span></span> user <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Masha"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span><span class="token number"><span class="token number">26</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        userService<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">saveUser</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>user<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">Auto</span></span> ferrari <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Auto</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Ferrari"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"red"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        user<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">addAuto</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>ferrari<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">Auto</span></span> ford <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Auto</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Ford"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"black"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        ford<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setUser</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>user<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        user<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">addAuto</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>ford<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        userService<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">updateUser</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>user<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        user<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Sasha"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        userService<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">updateUser</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>user<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Працює! <img data-max-width="750" alt="Ваш перший додаток на Hibernate - 15" src="https://cdn.javarush.com/images/article/c71435d6-b917-4e58-b166-907864ea4e41/original.jpeg">А якщо видалити користувача? Очистимо таблицю users (autos очиститься сама) та виконаємо код 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">models<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Auto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">models<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">services<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UserService</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>sql<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">SQLException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">Main</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">main</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">[</span></span><span class="token punctuation"><span class="token punctuation">]</span></span> args<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">throws</span></span> <span class="token class-name"><span class="token class-name">SQLException</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

        <span class="token class-name"><span class="token class-name">UserService</span></span> userService <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">UserService</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">User</span></span> user <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">User</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Masha"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span><span class="token number"><span class="token number">26</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        userService<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">saveUser</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>user<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">Auto</span></span> ferrari <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Auto</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Ferrari"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"red"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        user<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">addAuto</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>ferrari<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">Auto</span></span> ford <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Auto</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Ford"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token string"><span class="token string">"black"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        ford<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setUser</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>user<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        user<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">addAuto</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>ford<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        userService<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">updateUser</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>user<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        user<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Sasha"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        userService<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">updateUser</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>user<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        userService<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">deleteUser</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>user<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> І наші таблиці абсолютно порожні (зверніть увагу на консоль, туди виведуть усі запити, які виконав Hibernate). Ви можете "грати" з додатком і спробувати всі його функції. Наприклад, створіть користувача з машинами, збережіть його в БД, подивіться який ID йому присвоєно, і спробуйте в методі <code class=" language-none">main()</code>"витягнути" користувача з БД з цього id і вивести в консоль список його машин. Звичайно, ми побачабо лише невелику частину функціональності Hibernate. Його можливості дуже широкі, і він давно є одним із промислових стандартів Java-розробки. Якщо ви хочете вивчити його у всіх подробицях – можу рекомендувати книгу "Java Persistence API та Hibernate", <a href="https://codegym.cc/groups/posts/498-hibernate-dlja-chaynikov-obzor-knigi-java-persistence-api-i-hibernate" target="_blank" rel="nofollow">огляд</a>на яку я робив в одній із минулих статей. Сподіваюся, ця стаття була корисною для читачів. Якщо у вас будуть питання - задавайте їх у коментарях, з радістю відповім :) Також не забувайте підтримати автора у конкурсі, поставивши "Подобається". А краще - "Дуже подобається" :) Успіхів у навчанні!