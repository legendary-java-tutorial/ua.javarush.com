Гайд зі створення клієнта для Skyscanner API та його публікації в jCenter та Maven Central [Частина 1]
<p>----------------------------------------</p>
Ідея як окремої бібліотеки в той момент, коли я писав статтю Створення системи моніторингу цін на : ). Навіщо це потрібно? Наприклад, щоб можна було просто додати її як залежність до проекту, не думати, як і що потрібно робити, а просто вик
<p>----------------------------------------</p>
<h2>Зміст:</h2>
<ul>
 <li><a href="https://codegym.cc/groups/posts/2430#topic1">План дій</a></li>
 <li><a href="https://codegym.cc/groups/posts/2430#topic2">Частина перша: пишемо Skyscanner API клієнт</a>
  <ul>
   <li><a href="https://codegym.cc/groups/posts/2430#topic2_1">Крок 1: створюємо порожній проект на основі Gradle</a></li>
   <li><a href="https://codegym.cc/groups/posts/2430#topic2_2">Крок 2: додаємо необхідні залежності</a></li>
   <li><a href="https://codegym.cc/groups/posts/2430#topic2_3">Крок 3: пишемо UniRestUnit та пакет з DTO об'єктами</a></li>
   <li><a href="https://codegym.cc/groups/posts/2430#topic2_4">Крок 4: Описуємо інтерфейси та реалізації для клієнта</a></li>
  </ul></li>
</ul><a href="https://codegym.cc/groups/posts/2431-gayd-po-sozdaniju-klienta-dlja-skyscanner-api-i-ego-publikacii-v-jcenver-i-maven-central-chastj" target="_blank"></a>Ідея <a href="https://codegym.cc/groups/posts/2431-gayd-po-sozdaniju-klienta-dlja-skyscanner-api-i-ego-publikacii-v-jcenver-i-maven-central-chastj" target="_blank">розробки клієнта</a> як окремої бібліотеки <a href="https://codegym.cc/s/2185" target="_blank">прийшла</a> в той момент, коли я писав статтю Створення системи моніторингу цін на <a href="https://codegym.cc/groups/posts/2400-sozdanie-sistemih-monitoringa-cen-na-aviabiletih-poshagovoe-rukovodstvo" target="_blank">авіаквитки</a> : <span class="text-bold">покрокове керівництво </span><a href="https://codegym.cc/s/2186" target="_blank">частина 3</a> ). Навіщо це потрібно? Наприклад, щоб можна було просто додати її як залежність до проекту, не думати, як і що потрібно робити, а просто використовувати створений API. Для статті потрібно мати уявлення про те, що таке: <a href="https://codegym.cc/groups/posts/2400-sozdanie-sistemih-monitoringa-cen-na-aviabiletih-poshagovoe-rukovodstvo" target="_blank"></a><a href="https://codegym.cc/s/2185" target="_blank"></a><a href="https://codegym.cc/s/2186" target="_blank"></a><img data-max-width="850" alt="Гайд зі створення клієнта для Skyscanner API та його публікації в jCenter та Maven Central [Частина 1] - 1" src="https://cdn.javarush.com/images/article/575f0255-9527-45cb-bed7-d4592a3e3583/original.jpeg">
<ul>
 <li>система збирання проектів Gradle. Минулого разу ми використали Maven, цього разу для публікації візьмемо Gradle. Для швидкого ознайомлення вистачить і <a href="https://habr.com/ru/company/redmadrobot/blog/275515/" rel="nofollow" target="_blank">цієї статті</a> .</li>
 <li>groupId, artifactId, version. Це для опублікування клієнта.</li>
</ul>
<h2 id="topic1">План дій</h2>Skyscanner API має чотири групи запитів:
<ul>
 <li>Live Flight Search</li>
 <li>Places</li>
 <li>Browse Flight Prices</li>
 <li>Localisation</li>
</ul>Так ось ідея полягає в тому, щоб написати клієнт із чотирма інтерфейсами для роботи з цими групами, який вимагає лише передати токен для роботи з Rapid API та необхідні дані для запиту, а клієнт сам піклується про все інше. Користь від цього проекту реально відчутна, тому що після пошуку я не знайшов жодної реалізації клієнта для цього API (є два клієнти на GitHub, але вони використовують API, якого вже немає, тому навіть вони не валідні на цей момент). Як знайти та отримати дані для клієнта я докладно описав у статті, а саме – <a href="https://codegym.cc/groups/posts/2400-sozdanie-sistemih-monitoringa-cen-na-aviabiletih-poshagovoe-rukovodstvo#topic2" target="_blank">тут</a> . Це перша частина, яку потрібно зробити. Друга частина не менш важлива - <span class="text-bold">опублікувати клієнт у Maven Central та JCenter. </span>Я вже стикався з цим, і скажу вам, що це не очевидна річ. Адже ми хочемо щось таке:<span class="text-bold">git push mavenCentral</span> , але насправді це не так. Тому друга частина буде саме про це - публікації клієнта в наймасштабніші <span class="text-bold">сховища Maven Central</span> і <span class="text-bold">JCenter</span> . Підсумком статті буде використання клієнта для проекту з моніторингу цін на авіаквитки. Якщо поведінка не зміниться після додавання клієнта, все зроблено правильно, і можна буде рухатися далі в напрямку версії 1.0-RELEASE. 
<h2 id="topic2">Частина перша: пишемо Skyscanner API клієнт</h2>
<h3 id="topic2_1">Крок 1: створюємо порожній проект на основі Gradle</h3>Через Intellij IDEA створюємо проект <span class="text-bold">gradle . </span>Вибираємо <span class="text-bold">Create New Project</span> : <img data-max-width="850" alt="Гайд зі створення клієнта для Skyscanner API та його публікації в jCenter та Maven Central [Частина 1] - 2" src="https://cdn.javarush.com/images/article/aed1c9e8-c187-4177-afa1-72be405adab1/original.jpeg">Переходимо в <span class="text-bold">Gradle</span> і тиснемо <span class="text-bold">Next</span> : <img data-max-width="850" alt="Гайд зі створення клієнта для Skyscanner API та його публікації в jCenter та Maven Central [Частина 1] - 3" src="https://cdn.javarush.com/images/article/e9042c9a-045d-451d-a57f-db569b85e9e9/original.jpeg">Вибираємо назву <span class="text-bold">skyscanner-flight-search-api-client</span> , відкриваємо <span class="text-bold">Artifact Coordinates</span> та groupId, artifactId та version: <img data-max-width="850" alt="Гайд зі створення клієнта для Skyscanner API та його публікації в jCenter та Maven Central [Частина 1] - 4" src="https://cdn.javarush.com/images/article/abed787d-e2d6-4d08-8493-2aa75803000b/original.jpeg">Причому ось що потрібно мати на увазі: 
<ul>
 <li>GroupId: можна уявити як ідентифікатор облікового запису, організації або package name, під яким поширюється бібліотека чи кілька бібліотек. GROUP_ID має бути у форматі Reverse FQDN;</li>
 <li>ArtifactId: назва бібліотеки або в термінології Maven назва "артефакту";</li>
 <li>Version: рекомендується використовувати патерн виду xyz, але допустиме використання будь-яких рядкових значень.</li>
</ul><em><span class="text-bold">Примітка:</span> при виборі GROUP_ID слід мати на увазі, що ви повинні належати вибраному домену. Інакше виникнуть проблеми при його реєстрації в Sonatype. </em> З цього випливає, що потрібно вибирати GroupId таким, щоб це був ваш домен, наприклад, як мій<span class="text-bold"> com.github.romankh3</span> - обліковий запис на GitHub. Далі, перевикористовуємо безліч коду з невеликими змінами з<span class="text-bold"> flights-monitoring</span> , на основі якого була створена стаття (<a href="https://codegym.cc/groups/posts/2400-sozdanie-sistemih-monitoringa-cen-na-aviabiletih-poshagovoe-rukovodstvo" target="_blank"> Створення системи моніторингу цін на авіаквитки: покрокове керівництво</a> ). 
<h3 id="topic2_2">Крок 2: додаємо необхідні залежності</h3>Під час написання клієнта виявилося, що бібліотека Unirest переїхала в гітхаб і продовжує розвиватися, але вже під іншим groupId. Так що тепер додаємо в <span class="text-bold">build.gradle</span> наступну залежність до блоку dependencies: 
<pre class=" language-none" tabindex="0"><code class=" language-none">
compile 'com.konghq:unirest-java:3.2.00'</code></pre> також нам для роботи знадобиться вже відомий за минулою статтею <a href="https://projectlombok.org/" rel="nofollow" target="_blank">Lombok Project</a> . Додаємо його так, щоб він працював при рантаймі: 
<pre class=" language-none" tabindex="0"><code class=" language-none">
runtime 'org.projectlombok:lombok:1.18.10'</code></pre> Далі, для роботи з JSON файлуми, також використовуватимемо <a href="https://github.com/FasterXML/jackson" rel="nofollow" target="_blank">Jackson Project</a> . Він має не одну залежність, нам потрібні анотації та databind: 
<pre class=" language-none" tabindex="0"><code class=" language-none">
compile 'com.fasterxml.jackson.core:jackson-annotations:2.10.0'
compile 'com.fasterxml.jackson.core:jackson-databind:2.10.0'</code></pre> І, звичайно, для тестування не забудемо додати JUnit та Mockito. <span class="text-bold">TestCompile</span> означає, що залежність буде видно лише для тестів. Як у maven<code class=" language-none">&lt;scope&gt;test&lt;/scope&gt;</code>
<pre class=" language-none" tabindex="0"><code class=" language-none">
testCompile 'junit:junit:4.12'
testCompile 'org.mockito:mockito-core:2.26.0'</code></pre> Ну ось, ми підготували всі необхідні залежності, тепер можна перейти до коду. 
<h3 id="topic2_3">Крок 3: пишемо UniRestUnit та пакет з DTO об'єктами</h3>Для надсилання запитів REST ми створюємо <span class="text-bold">UniRestUtil</span> зі статичними методами для запитів. Ця версія 0.1, і у неї будуть тільки ті запити, які вже реалізовані в попередній статті, тому буде один метод, <code class=" language-none">get</code>який приймає необхідний для роботи з ключом Rapidapi і <span class="text-bold">String path</span> . Він буде сформований саме так, як необхідно для запиту. path створений у тому, щоб зробити цей спосіб універсальним. У ході написання клієнта було перероблено майже всі класи, внесено зміни. Власне, сам UniRestUtil: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>fasterxml<span class="token punctuation"><span class="token punctuation">.</span></span>jackson<span class="token punctuation"><span class="token punctuation">.</span></span>core<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">JsonProcessingException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>fasterxml<span class="token punctuation"><span class="token punctuation">.</span></span>jackson<span class="token punctuation"><span class="token punctuation">.</span></span>core<span class="token punctuation"><span class="token punctuation">.</span></span>type<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">TypeReference</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>fasterxml<span class="token punctuation"><span class="token punctuation">.</span></span>jackson<span class="token punctuation"><span class="token punctuation">.</span></span>databind<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">ObjectMapper</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span>exception<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">FlightSearchApiClientException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span>model<span class="token punctuation"><span class="token punctuation">.</span></span>validation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">ValidationErrorDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">kong<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">HttpResponse</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">kong<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">JsonNode</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">kong<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Unirest</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">kong<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UnirestException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">org<span class="token punctuation"><span class="token punctuation">.</span></span>apache<span class="token punctuation"><span class="token punctuation">.</span></span>http<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">HttpStatus</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">/**
* Unit with static methods for using Unirest library.
*
* @author Roman Beskrovnyi
* @since 0.1
*/</span></span>
<span class="token keyword"><span class="token keyword">final</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">UniRestUtil</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> HOST <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"skyscanner-skyscanner-flight-search-v1.p.rapidapi.com"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> PLACES_FORMAT <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"/apiservices/autosuggest/v1.0/%s/%s/%s/?query=%s"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> CURRENCIES_FORMAT <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"/apiservices/reference/v1.0/currencies"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> COUNTRIES_FORMAT <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"/apiservices/reference/v1.0/countries/%s"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> VALIDATIONS_KEY <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"ValidationErrors"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> PLACES_KEY <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Places"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> CURRENCIES_KEY <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Currencies"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> COUNTRIES_KEY <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Countries"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token class-name"><span class="token class-name">ObjectMapper</span></span> objectMapper <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ObjectMapper</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>


   <span class="token keyword"><span class="token keyword">static</span></span> <span class="token class-name"><span class="token class-name">HttpResponse</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">JsonNode</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> xRapidApiKey<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> path<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token class-name"><span class="token class-name">HttpResponse</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">JsonNode</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> response<span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token keyword"><span class="token keyword">try</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
           response <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">Unirest</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"https://"</span></span> <span class="token operator"><span class="token operator">+</span></span> HOST <span class="token operator"><span class="token operator">+</span></span> path<span class="token punctuation"><span class="token punctuation">)</span></span>
                   <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">header</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"x-rapidapi-host"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> HOST<span class="token punctuation"><span class="token punctuation">)</span></span>
                   <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">header</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"x-rapidapi-key"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> xRapidApiKey<span class="token punctuation"><span class="token punctuation">)</span></span>
                   <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">asJson</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

           <span class="token keyword"><span class="token keyword">if</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span>response<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getStatus</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">!=</span></span> <span class="token class-name"><span class="token class-name">HttpStatus</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>SC_OK<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
               <span class="token keyword"><span class="token keyword">throw</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">FlightSearchApiClientException</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>
                       <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">format</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"There are validation errors. statusCode = %s"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> response<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getStatus</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
                       <span class="token function"><span class="token function">readValueWrapper</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>response<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getBody</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>VALIDATIONS_KEY<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">toString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
                               <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">TypeReference</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>list<span class="token punctuation"><span class="token punctuation">&lt;</span></span>validationerrordto<span class="token punctuation"><span class="token punctuation">&gt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                               <span class="token punctuation"><span class="token punctuation">}</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
           <span class="token punctuation"><span class="token punctuation">}</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">catch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">UnirestException</span></span> e<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
           <span class="token keyword"><span class="token keyword">throw</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">FlightSearchApiClientException</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">format</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Request failed, path=%s"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> HOST <span class="token operator"><span class="token operator">+</span></span> path<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> e<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span>

       <span class="token keyword"><span class="token keyword">return</span></span> response<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>

   <span class="token keyword"><span class="token keyword">static</span></span> <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">T</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token class-name"><span class="token class-name">T</span></span> <span class="token function"><span class="token function">readValueWrapper</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> content<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">TypeReference</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">T</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> valueTypeRef<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">try</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
           <span class="token keyword"><span class="token keyword">return</span></span> objectMapper<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">readValue</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>content<span class="token punctuation"><span class="token punctuation">,</span></span> valueTypeRef<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span> <span class="token keyword"><span class="token keyword">catch</span></span> <span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">JsonProcessingException</span></span> e<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
           <span class="token keyword"><span class="token keyword">throw</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">FlightSearchApiClientException</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Object Mapping failure."</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> e<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Тут можна помітити, що я зробив оболонку для checked винятків за допомогою свого RuntimeException. Робиться це для того, щоб виключення checked не засмічували кодову базу у користувачів клієнта, а якщо і відбудеться виняткова ситуація, RuntimeException передасть всю інформацію користувачеві клієнта. Для цього я створив метод <code class=" language-none">readValueWrapper</code>, який виконує описану вище поведінку для читання з JSON POJO. Також за допомогою ідентифікаторів доступу були інкапсульовані класи, до яких не потрібен доступ ззовні, тому UniRestUtil стоїть package-private ідентифікатор. Власне, ось сам RuntimeException: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span>model<span class="token punctuation"><span class="token punctuation">.</span></span>validation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">ValidationErrorDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">/**
* A {@link RuntimeException} that is thrown in case of an flight monitoring failures.
*
* @author Roman Beskrovnyi
* @since 0.1
*/</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">FlightSearchApiClientException</span></span> <span class="token keyword"><span class="token keyword">extends</span></span> <span class="token class-name"><span class="token class-name">RuntimeException</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">ValidationErrorDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> validationErrorDtos<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token comment"><span class="token comment">/**
    * Constructs a new {@link FlightSearchApiClientException} with the specified detail message and cause.
    * Note that the detail message associated with cause is not automatically incorporated in this {@link
    * FlightSearchApiClientException}'s detail message.
    *
    * @param message the detail message (which is saved for later retrieval by the Throwable.getMessage() method).
    * @param throwable the cause (which is saved for later retrieval by the Throwable.getCause() method).
    * (A null value is permitted, and indicates that the cause is nonexistent or unknown.)
    */</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">FlightSearchApiClientException</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> message<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">Throwable</span></span> throwable<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">super</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>message<span class="token punctuation"><span class="token punctuation">,</span></span> throwable<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>

   <span class="token comment"><span class="token comment">/**
    * Constructs a new {@link FlightSearchApiClientException} with specified collection of the
    * {@link ValidationErrorDto} objects.
    *
    * @param message the detail message (which is saved for later retrieval by the Throwable.getMessage() method).
    * @param errors the collection of the {@link ValidationErrorDto} which contain errors from Skyscanner API.
    */</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">FlightSearchApiClientException</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> message<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">ValidationErrorDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> errors<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token keyword"><span class="token keyword">super</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>message<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>validationErrorDtos <span class="token operator"><span class="token operator">=</span></span> errors<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Найбільшим пакетом буде пакет <span class="text-bold">model</span> , який зберігає всі DTO (data transfer object) об'єкти. Як ті, які будуть потрібні для створення запиту, так і ті, які повертатимуть значення. Для більшої ясності та структури, дтошки будуть поділені на групи, в яких вони використовуються. Чому? Тому що об'єкт Place має різні поля та імена полів у різних групах. Тому є <span class="text-bold">BrowsePlaceDto</span> і <span class="text-bold">PlacesPlaceDto</span> , і, відповідно, вони розділені як показано на малюнку нижче: <img data-max-width="850" alt="Гайд зі створення клієнта для Skyscanner API та його публікації в jCenter та Maven Central [Частина 1] - 5" src="https://cdn.javarush.com/images/article/d7eae698-e54c-41df-b72c-24991e302a1b/original.jpeg">Щоб не вабовати на вас всі ці класи, я опишу два типи, а на інші дам <a href="https://github.com/romankh3/skyscanner-flight-api-client/tree/master/src/main/java/com/github/romankh3/skyscannerflightapiclient/v1/model" rel="nofollow" target="_blank">посилання на GitHub</a>. Перший тип DTO – Search, тобто ті, які використовуються для пошуку через клієнт. На них накладається валідація полів та вказується, які з них необхідні та які опціональні. Розглянемо <span class="text-bold">BrowseSearchDto</span> : 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>time<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">LocalDate</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">lombok<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Builder</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">lombok<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Getter</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">lombok<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">NonNull</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">/**
* DTO object for search in Browse Flight Search calls.
*
* @since 0.1
* @author Roman Beskrovnyi
*/</span></span>
<span class="token annotation punctuation"><span class="token annotation punctuation">@Getter</span></span>
<span class="token annotation punctuation"><span class="token annotation punctuation">@Builder</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>builderMethodName <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"hiddenBuilder"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">BrowseSearchDto</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@NonNull</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> country<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@NonNull</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> currency<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@NonNull</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> locale<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@NonNull</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> originPlace<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@NonNull</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> destinationPlace<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@NonNull</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">LocalDate</span></span> outboundPartialDate<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">LocalDate</span></span> inboundPartialDate<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Тут використовуються три анотації з Project Lombok: 
<ul>
 <li>@ Getter - генерує гетери для всіх полів;</li>
 <li>@Builder - генерує всі дані, необхідні для використання патерну <a href="https://ru.wikipedia.org/wiki/%D0%A1%D1%82%D1%80%D0%BE%D0%B8%D1%82%D0%B5%D0%BB%D1%8C_(%D1%88%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD_%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F)#Java" rel="nofollow" target="_blank">Builder</a> . Виявилося, що @Builder'e немає гетерів, тому окремо додав @Getter;</li>
 <li>@NotNull — каже Lombok, що ці поля повинні мати значення під час створення об'єкта. Це зроблено тому, що в пошуку ці поля є обов'язковими, і анотація валідує їх при створенні. Просто та швидко. Варто також зазначити, що поле <span class="text-bold">восновномупартійномуДаті</span> не має цієї анотації, оскільки воно опціональне в цьому запиті. Це можна побачити тут:</li>
</ul><img data-max-width="850" alt="Гайд зі створення клієнта для Skyscanner API та його публікації в jCenter та Maven Central [Частина 1] - 6" src="https://cdn.javarush.com/images/article/762076a5-302b-41c0-894e-4f76acfd2d35/original.jpeg">Другий тип DTO — це результат, що повертає. Їхня особливість полягає в тому, що потрібно додати інструкцію для Jackson Project. Нижче наведено CountryDto: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>fasterxml<span class="token punctuation"><span class="token punctuation">.</span></span>jackson<span class="token punctuation"><span class="token punctuation">.</span></span>annotation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">lombok<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Data</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">/**
* Data transfer object for Country.
*
* @since 0.1
* @author Roman Beskrovnyi
*/</span></span>
<span class="token annotation punctuation"><span class="token annotation punctuation">@Data</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">CountryDto</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Code"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> code<span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@JsonProperty</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Name"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span>
   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">String</span></span> name<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Де: 
<ul>
 <li>@Data — інструкція з <a href="https://projectlombok.org/features/Data" rel="nofollow" target="_blank">Lombok проекту</a> , яка генерує всі гетери, сеттери, перевизначає <code class=" language-none">toString()</code>, <code class=" language-none">equals()</code>і <code class=" language-none">hashCode()</code>методи. Цим вона покращує читабельність коду та прискорює час написання <a href="https://ru.wikipedia.org/wiki/POJO" rel="nofollow" target="_blank">POJO</a> об'єктів;</li>
 <li>@JsonProperty("Code") - це інструкція з Jackson Project, яка говорить, яке поле буде присвоюватися цій змінній. Тобто поле в JSON, що дорівнює Code, присвоюватиметься змінній code.</li>
</ul><a href="https://codegym.cc/welcome" target="_blank"><img id="click_banner1_articles" data-max-width="1024" data-id="e8aaa29c-e869-4e20-94e0-25f509f6a6b2" class="img-fluid" alt="Гайд зі створення клієнта для Skyscanner API та його публікації в jCenter та Maven Central [Частина 1] - 7" src="https://cdn.javarush.com/images/article/e8aaa29c-e869-4e20-94e0-25f509f6a6b2/1024.jpeg" style="width: 1024px;"></a>
<h3 id="topic2_4">Крок 4: Описуємо інтерфейси та реалізації для клієнта</h3><span class="text-bold">PlacesClient</span> : 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span>model<span class="token punctuation"><span class="token punctuation">.</span></span>place<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">PlaceSearchDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span>model<span class="token punctuation"><span class="token punctuation">.</span></span>place<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">PlacesPlaceDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">/**
* Get a list of places that match a query string.
*
* @author Roman Beskrovnyi
* @since 0.1
*/</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">PlacesClient</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token comment"><span class="token comment">/**
    * Get a list of places that match a query string based on arguments.
    *
    * @param xRapidApiKey key for getting access to rapid api.
    * @param placeSearchDto {@link PlacesPlaceDto} object for search places
    * @return the collection of the {@link PlacesPlaceDto} objects.
    */</span></span>
   <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">PlacesPlaceDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">retrieveListPlaces</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> xRapidApiKey<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">PlaceSearchDto</span></span> placeSearchDto<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> І реалізація <span class="text-bold">PlacesClientImpl</span> : 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UniRestUtil</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>PLACES_FORMAT<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UniRestUtil</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>PLACES_KEY<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UniRestUtil</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>get<span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>fasterxml<span class="token punctuation"><span class="token punctuation">.</span></span>jackson<span class="token punctuation"><span class="token punctuation">.</span></span>core<span class="token punctuation"><span class="token punctuation">.</span></span>type<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">TypeReference</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span>model<span class="token punctuation"><span class="token punctuation">.</span></span>place<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">PlaceSearchDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span>model<span class="token punctuation"><span class="token punctuation">.</span></span>place<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">PlacesPlaceDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">kong<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">HttpResponse</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">kong<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">JsonNode</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">/**
* {@inheritDoc}
*/</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">PlacesClientImpl</span></span> <span class="token keyword"><span class="token keyword">implements</span></span> <span class="token class-name"><span class="token class-name">PlacesClient</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token comment"><span class="token comment">/**
    * {@inheritDoc}
    */</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">PlacesPlaceDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">retrieveListPlaces</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> xRapidApiKey<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">PlaceSearchDto</span></span> placeSearchDto<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token class-name"><span class="token class-name">HttpResponse</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">JsonNode</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> response <span class="token operator"><span class="token operator">=</span></span> <span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>xRapidApiKey<span class="token punctuation"><span class="token punctuation">,</span></span>
               <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">format</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>PLACES_FORMAT<span class="token punctuation"><span class="token punctuation">,</span></span> placeSearchDto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getCountry</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> placeSearchDto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getCurrency</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
                       placeSearchDto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getLocale</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> placeSearchDto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getPlaceName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

       <span class="token class-name"><span class="token class-name">String</span></span> jsonList <span class="token operator"><span class="token operator">=</span></span> response<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getBody</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>PLACES_KEY<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">toString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

       <span class="token keyword"><span class="token keyword">return</span></span> <span class="token class-name"><span class="token class-name">UniRestUtil</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">readValueWrapper</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>jsonList<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">TypeReference</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">PlacesPlaceDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre><span class="text-bold">LocalisationClient:</span>
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span>exception<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">FlightSearchApiClientException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span>model<span class="token punctuation"><span class="token punctuation">.</span></span>localisation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">CountryDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span>model<span class="token punctuation"><span class="token punctuation">.</span></span>localisation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">CurrencyDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">/**
* Retrieve the market countries that we support. Most suppliers (airlines, travel agents and car hire dealers) set
* their fares based on the market (or country of purchase). It is therefore necessary to specify the market country in
* every query.
*
* @author Roman Beskrovnyi
* @since 0.1
*/</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">LocalisationClient</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token comment"><span class="token comment">/**
    * Retrieve the market countries that SkyScanner flight search API support. Most suppliers (airlines,
    * travel agents and car hire dealers) set their fares based on the market (or country of purchase).
    * It is therefore necessary to specify the market country in every query.
    *
    * @param locale locale of the response.
    * @return the collection of the {@link CountryDto} objects.
    */</span></span>
   <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>countrydto<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">retrieveCountries</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> locale<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> xRapidApiKey<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">throws</span></span> <span class="token class-name"><span class="token class-name">FlightSearchApiClientException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token comment"><span class="token comment">/**
    * Retrieve the currencies that we ScyScanner flight search API.
    *
    * @return the collection of the {@link CurrencyDto} objects.
    */</span></span>
   <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>currencydto<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">retrieveCurrencies</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> xRapidApiKey<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">throws</span></span> <span class="token class-name"><span class="token class-name">FlightSearchApiClientException</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> І реалізація <span class="text-bold">LocalisationClientImpl</span>
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UniRestUtil</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>COUNTRIES_FORMAT<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UniRestUtil</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>COUNTRIES_KEY<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UniRestUtil</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>CURRENCIES_FORMAT<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UniRestUtil</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>CURRENCIES_KEY<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UniRestUtil</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>get<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UniRestUtil</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>readValueWrapper<span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>fasterxml<span class="token punctuation"><span class="token punctuation">.</span></span>jackson<span class="token punctuation"><span class="token punctuation">.</span></span>core<span class="token punctuation"><span class="token punctuation">.</span></span>type<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">TypeReference</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span>model<span class="token punctuation"><span class="token punctuation">.</span></span>localisation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">CountryDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span>model<span class="token punctuation"><span class="token punctuation">.</span></span>localisation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">CurrencyDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">kong<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">HttpResponse</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">kong<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">JsonNode</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">/**
* {@inheritDoc}
*/</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">LocalisationClientImpl</span></span> <span class="token keyword"><span class="token keyword">implements</span></span> <span class="token class-name"><span class="token class-name">LocalisationClient</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token comment"><span class="token comment">/**
    * {@inheritDoc}
    */</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">CountryDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">retrieveCountries</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> locale<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span> xRapidApiKey<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token class-name"><span class="token class-name">HttpResponse</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">JsonNode</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> response <span class="token operator"><span class="token operator">=</span></span> <span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>xRapidApiKey<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">format</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>COUNTRIES_FORMAT<span class="token punctuation"><span class="token punctuation">,</span></span> locale<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token class-name"><span class="token class-name">String</span></span> jsonList <span class="token operator"><span class="token operator">=</span></span> response<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getBody</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>COUNTRIES_KEY<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">toString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> <span class="token function"><span class="token function">readValueWrapper</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>jsonList<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">TypeReference</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">CountryDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>

   <span class="token comment"><span class="token comment">/**
    * {@inheritDoc}
    */</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">CurrencyDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">retrieveCurrencies</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> xRapidApiKey<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token class-name"><span class="token class-name">HttpResponse</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">JsonNode</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> response <span class="token operator"><span class="token operator">=</span></span> <span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>xRapidApiKey<span class="token punctuation"><span class="token punctuation">,</span></span> CURRENCIES_FORMAT<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token class-name"><span class="token class-name">String</span></span> jsonList <span class="token operator"><span class="token operator">=</span></span> response<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getBody</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>CURRENCIES_KEY<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">toString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> <span class="token function"><span class="token function">readValueWrapper</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>jsonList<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">TypeReference</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">CurrencyDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token punctuation"><span class="token punctuation">}</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre><span class="text-bold">BrowseFlightPricesClient:</span>
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span>model<span class="token punctuation"><span class="token punctuation">.</span></span>browse<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">BrowseFlightPricesResponseDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span>model<span class="token punctuation"><span class="token punctuation">.</span></span>browse<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">BrowseSearchDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">/**
* Retrieve the market countries that Skyscanner support. Most suppliers (airlines, travel agents and car hire dealers)
* set their fares based on the market (or country of purchase). It is therefore necessary to specify the market country
* in every query.
*
* @author Roman Beskrovnyi
* @since 0.1
*/</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">BrowseFlightPricesClient</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token comment"><span class="token comment">/**
    * Retrieve the cheapest quotes from our cache prices.
    *
    * @param xRapidApiKey key for getting access to rapid api.
    * @param searchDto {@link BrowseSearchDto} object for search.
    * @return {@link BrowseFlightPricesResponseDto} object with all the data related to provided search dto.
    */</span></span>
   <span class="token class-name"><span class="token class-name">BrowseFlightPricesResponseDto</span></span> <span class="token function"><span class="token function">browseQuotes</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> xRapidApiKey<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">BrowseSearchDto</span></span> searchDto<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> І реалізація BrowseFlightPricesClientImpl: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">import</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UniRestUtil</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>CURRENCIES_KEY<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UniRestUtil</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>PLACES_KEY<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UniRestUtil</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>get<span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">UniRestUtil</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>readValueWrapper<span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>fasterxml<span class="token punctuation"><span class="token punctuation">.</span></span>jackson<span class="token punctuation"><span class="token punctuation">.</span></span>core<span class="token punctuation"><span class="token punctuation">.</span></span>type<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">TypeReference</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span>model<span class="token punctuation"><span class="token punctuation">.</span></span>browse<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">BrowseFlightPricesResponseDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span>model<span class="token punctuation"><span class="token punctuation">.</span></span>browse<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">BrowsePlaceDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span>model<span class="token punctuation"><span class="token punctuation">.</span></span>browse<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">BrowseSearchDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span>model<span class="token punctuation"><span class="token punctuation">.</span></span>browse<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">CarrierDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span>model<span class="token punctuation"><span class="token punctuation">.</span></span>browse<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">QuoteDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">com<span class="token punctuation"><span class="token punctuation">.</span></span>github<span class="token punctuation"><span class="token punctuation">.</span></span>romankh3<span class="token punctuation"><span class="token punctuation">.</span></span>skyscanner<span class="token punctuation"><span class="token punctuation">.</span></span>api<span class="token punctuation"><span class="token punctuation">.</span></span>flightsearchclient<span class="token punctuation"><span class="token punctuation">.</span></span>v1<span class="token punctuation"><span class="token punctuation">.</span></span>model<span class="token punctuation"><span class="token punctuation">.</span></span>localisation<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">CurrencyDto</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">kong<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">HttpResponse</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">kong<span class="token punctuation"><span class="token punctuation">.</span></span>unirest<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">JsonNode</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token comment"><span class="token comment">/**
* {@inheritDoc}
*/</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">BrowseFlightPricesClientImpl</span></span> <span class="token keyword"><span class="token keyword">implements</span></span> <span class="token class-name"><span class="token class-name">BrowseFlightPricesClient</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> BROWSE_QUOTES_FORMAT <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"/apiservices/browsequotes/v1.0/%s/%s/%s/%s/%s/%s"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> OPTIONAL_BROWSE_QUOTES_FORMAT <span class="token operator"><span class="token operator">=</span></span> BROWSE_QUOTES_FORMAT <span class="token operator"><span class="token operator">+</span></span> <span class="token string"><span class="token string">"?inboundpartialdate=%s"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> QUOTES_KEY <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Quotes"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> ROUTES_KEY <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Routes"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> DATES_KEY <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Dates"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">String</span></span> CARRIERS_KEY <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"Carriers"</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

   <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
   <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">BrowseFlightPricesResponseDto</span></span> <span class="token function"><span class="token function">browseQuotes</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">String</span></span> xRapidApiKey<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">BrowseSearchDto</span></span> searchDto<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token class-name"><span class="token class-name">HttpResponse</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">JsonNode</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> response <span class="token operator"><span class="token operator">=</span></span> searchDto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getInboundPartialDate</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">==</span></span> <span class="token keyword"><span class="token keyword">null</span></span> <span class="token operator"><span class="token operator">?</span></span>
               <span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>xRapidApiKey<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span>
                       <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">format</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>BROWSE_QUOTES_FORMAT<span class="token punctuation"><span class="token punctuation">,</span></span> searchDto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getCountry</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> searchDto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getCurrency</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
                               searchDto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getLocale</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> searchDto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getOriginPlace</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> searchDto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getDestinationPlace</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
                               searchDto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getOutboundPartialDate</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token operator"><span class="token operator">:</span></span>
               <span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>xRapidApiKey<span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">String</span></span>
                       <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">format</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>OPTIONAL_BROWSE_QUOTES_FORMAT<span class="token punctuation"><span class="token punctuation">,</span></span> searchDto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getCountry</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> searchDto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getCurrency</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
                               searchDto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getLocale</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> searchDto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getOriginPlace</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> searchDto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getDestinationPlace</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
                               searchDto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getOutboundPartialDate</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> searchDto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getInboundPartialDate</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

       <span class="token keyword"><span class="token keyword">return</span></span> <span class="token function"><span class="token function">mapToObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>response<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>

   <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">BrowseFlightPricesResponseDto</span></span> <span class="token function"><span class="token function">mapToObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">HttpResponse</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>jsonnode<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> response<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
       <span class="token class-name"><span class="token class-name">BrowseFlightPricesResponseDto</span></span> flightPricesDto <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">BrowseFlightPricesResponseDto</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       flightPricesDto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setQuotas</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token function"><span class="token function">readValueWrapper</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>response<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getBody</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>QUOTES_KEY<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">toString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
               <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">TypeReference</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">QuoteDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
               <span class="token punctuation"><span class="token punctuation">}</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       flightPricesDto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setCarriers</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token function"><span class="token function">readValueWrapper</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>response<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getBody</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>CARRIERS_KEY<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">toString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
               <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">TypeReference</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">CarrierDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
               <span class="token punctuation"><span class="token punctuation">}</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       flightPricesDto
               <span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setCurrencies</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token function"><span class="token function">readValueWrapper</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>response<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getBody</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>CURRENCIES_KEY<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">toString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
                       <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">TypeReference</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">CurrencyDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
                       <span class="token punctuation"><span class="token punctuation">}</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       flightPricesDto<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setPlaces</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token function"><span class="token function">readValueWrapper</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>response<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getBody</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>PLACES_KEY<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">toString</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span>
               <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">TypeReference</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">BrowsePlaceDto</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
               <span class="token punctuation"><span class="token punctuation">}</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
       <span class="token keyword"><span class="token keyword">return</span></span> flightPricesDto<span class="token punctuation"><span class="token punctuation">;</span></span>
   <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> На цьому робота нам над клієнтом закінчена, <a href="https://github.com/romankh3/skyscanner-flight-api-client" rel="nofollow" target="_blank">проект зберігається на GitHub</a> . <a href="https://codegym.cc/groups/posts/2431-gayd-po-sozdaniju-klienta-dlja-skyscanner-api-i-ego-publikacii-v-jcenver-i-maven-central-chastj" target="_blank">Гайд зі створення клієнта для Skyscanner API та його публікації в jCenver та Maven Central [Частина 2]</a>