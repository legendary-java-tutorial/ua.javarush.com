Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 2)
<p>----------------------------------------</p>
Добридень. У цій статті я хотів би поділитися своїм першим знайомством з такими речами як Maven, Spring, Hibernate, MySQL та Tomcat у процесі створення простого CRUD програми. Це друга частина з чотирьох. іншими незнайомими словами. Це друг
<p>----------------------------------------</p>
Добридень. У цій статті я хотів би поділитися своїм першим знайомством з такими речами як Maven, Spring, Hibernate, MySQL та Tomcat у процесі створення простого CRUD програми. Це друга частина з чотирьох. іншими незнайомими словами. <img data-id="794c70dd-f48a-4296-928f-67358130d4b0" data-max-width="850" alt="" src="https://cdn.javarush.com/images/article/794c70dd-f48a-4296-928f-67358130d4b0/800.jpeg" style="width: 850px;">Це друга частина статті "Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток". Першу частину можна побачити, перейшовши за цим посиланням: <a href="https://codegym.cc/groups/posts/2253-znakomstvo-s-maven-spring-mysql-hibernate-i-pervoe-crud-prilozhenie-chastjh-1" target="_blank" rel="nofollow">Знайомство з Maven, Spring, MySQL, Hibernate і перший CRUD додаток (частина 1)</a>
<h3>Зміст:</h3>
<ul>
 <li><a href="https://codegym.cc/groups/posts/2252#Data-Access-Object">Data Access Object</a></li>
 <li><a href="https://codegym.cc/groups/posts/2252#Service">Service</a></li>
 <li><a href="https://codegym.cc/groups/posts/2252#%D0%9A%D0%BE%D0%BD%D1%82%D1%80%D0%BE%D0%BB%D0%BB%D0%B5%D1%80-%D0%B8-%D0%BF%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F">Контролер та уявлення</a></li>
 <li><a href="https://codegym.cc/groups/posts/2252#Repository-%D0%B8-Service-%D0%BA%D0%B0%D0%BA-%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D1%8B-Spring">Repository та Service як компоненти Spring</a></li>
</ul>Ну що ж, рухатимемося далі, спробуємо тепер начарувати ціле сховище фільмів. У нашому маленькому і простенькому додатку, звичайно, можна просто тупо запиляти всю логіку прямо в контролері, але, як уже зазначалося, краще відразу вчитися робити все правильно. Тому зрозуміємо кілька шарів. У нас буде <strong>DAO</strong> , що відповідає за роботу з даними, <strong>Service</strong> , де буде будь-яка інша логіка, та і <strong>Controller</strong> буде тільки обробляти запити і викликати необхідні методи сервісу. 
<h2 id="Data-Access-Object">Data Access Object</h2><strong>Data Access Object (DAO)</strong> – це такий патерн проектування. Сенс у тому, щоб створити спеціальний прошарок, який відповідатиме виключно за доступ до даних (робота з базою даних або іншим механізмом зберігання). У пакеті <code class=" language-none">dao</code>створимо інтерфейс, <code class=" language-none">FilmDAO</code>в якому будуть такі методи, як додати, видалити і т.д. Я їх назвав трохи інакше, але вони відповідають основним <strong>CRUD</strong> операціям ( <strong>C</strong> reate, <strong>R</strong> ead, <strong>U</strong> pdate, <strong>D</strong> elete). 
<div class="table-container">
 <table class="table table--striped">
  <tbody>
   <tr>
    <td>
     <p>Тут варто відзначити, що крім DAO існує ще й такий підхід як Repository, вони, як дуже схожі, обидва використовуються для роботи з даними. Я поки що не розібрався, які у цих підходів особливості та яка між ними різниця. Тому я, можливо, тут помиляюся і це слід називати саме репозиторієм, а не дао, а може це взагалі щось середнє. Але в більшості прикладів, які я бачив та вивчав, це називають саме DAO, так що і я, мабуть, назву так само. При цьому, можливо, десь далі текстом вживу слово репозиторій. У будь-якому випадку, якщо я з цим десь не прав, прошу мене пробачити.</p></td>
   </tr>
  </tbody>
 </table>
</div>
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">testgroup<span class="token punctuation"><span class="token punctuation">.</span></span>filmography<span class="token punctuation"><span class="token punctuation">.</span></span>dao</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">testgroup<span class="token punctuation"><span class="token punctuation">.</span></span>filmography<span class="token punctuation"><span class="token punctuation">.</span></span>model<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Film</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">FilmDAO</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Film</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">allFilms</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Film</span></span> film<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">delete</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Film</span></span> film<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">edit</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Film</span></span> film<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token class-name"><span class="token class-name">Film</span></span> <span class="token function"><span class="token function">getById</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span> id<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Тепер нам потрібна його реалізація. Підключати базу даних поки не будемо, все ще страшнувато. Щоб потренуватися і звикнути для початку, імітуємо сховище в пам'яті, створимо список з кількома фільмами. Для зберігання списку будемо використовувати не <code class=" language-none">List</code>, а <code class=" language-none">Map</code>щоб було зручно отримувати конкретний фільм за його <code class=" language-none">id</code>, не перебираючи для цього весь список. Для генерації <code class=" language-none">id</code>використовуємо <em>AtomicInteger</em> . Створимо клас <code class=" language-none">FilmDAOImpl</code>, реалізуємо всі методи та заповнимо карту. Щось на зразок цього. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">testgroup<span class="token punctuation"><span class="token punctuation">.</span></span>filmography<span class="token punctuation"><span class="token punctuation">.</span></span>dao</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">testgroup<span class="token punctuation"><span class="token punctuation">.</span></span>filmography<span class="token punctuation"><span class="token punctuation">.</span></span>model<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Film</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token operator"><span class="token operator">*</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">FilmDAOImpl</span></span> <span class="token keyword"><span class="token keyword">implements</span></span> <span class="token class-name"><span class="token class-name">FilmDAO</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token keyword"><span class="token keyword">final</span></span> <span class="token class-name"><span class="token class-name">AtomicInteger</span></span> AUTO_ID <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">AtomicInteger</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">0</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token keyword"><span class="token keyword">static</span></span> <span class="token class-name"><span class="token class-name">Map</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Integer</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> <span class="token class-name"><span class="token class-name">Film</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> films <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">HashMap</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token keyword"><span class="token keyword">static</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">Film</span></span> film1 <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">Film</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        film1<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setId</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>AUTO_ID<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getAndIncrement</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        film1<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setTitle</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"Inception"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        film1<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setYear</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token number"><span class="token number">2010</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        film1<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setGenre</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"sci-fi"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        film1<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setWatched</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token boolean"><span class="token boolean">true</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        films<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">put</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>film1<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getId</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> film1<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

        <span class="token comment"><span class="token comment">// + film2, film3, film4, ...</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Film</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">allFilms</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ArrayList</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token punctuation"><span class="token punctuation">(</span></span>films<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">values</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Film</span></span> film<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        film<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setId</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>AUTO_ID<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getAndIncrement</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        films<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">put</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>film<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getId</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> film<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">delete</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Film</span></span> film<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        films<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">remove</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>film<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getId</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">edit</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Film</span></span> film<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        films<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">put</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>film<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getId</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> film<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Film</span></span> <span class="token function"><span class="token function">getById</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span> id<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> films<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">get</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>id<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre>
<h2 id="Service">Service</h2>Тепер додамо сервісний шар. У принципі, в даному прикладі цілком можна обійтися і без нього, обмежившись DAO, додаток буде дуже простий і якоїсь складної логіки в сервісі не планується. Але раптом потім у майбутньому захочеться додати у проект усіляких складнощів та цікавостей, тому для повноти картини таки буде. Поки що в ньому просто викликатимуться методи з DAO. У пакеті <code class=" language-none">service</code>створимо інтерфейс <code class=" language-none">FilmService</code>. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">testgroup<span class="token punctuation"><span class="token punctuation">.</span></span>filmography<span class="token punctuation"><span class="token punctuation">.</span></span>service</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">testgroup<span class="token punctuation"><span class="token punctuation">.</span></span>filmography<span class="token punctuation"><span class="token punctuation">.</span></span>model<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Film</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">interface</span></span> <span class="token class-name"><span class="token class-name">FilmService</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Film</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">allFilms</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Film</span></span> film<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">delete</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Film</span></span> film<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">edit</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Film</span></span> film<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token class-name"><span class="token class-name">Film</span></span> <span class="token function"><span class="token function">getById</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span> id<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> І його реалізація: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">package</span></span> <span class="token namespace"><span class="token namespace">testgroup<span class="token punctuation"><span class="token punctuation">.</span></span>filmography<span class="token punctuation"><span class="token punctuation">.</span></span>service</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">testgroup<span class="token punctuation"><span class="token punctuation">.</span></span>filmography<span class="token punctuation"><span class="token punctuation">.</span></span>dao<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">FilmDAO</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">testgroup<span class="token punctuation"><span class="token punctuation">.</span></span>filmography<span class="token punctuation"><span class="token punctuation">.</span></span>dao<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">FilmDAOImpl</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">testgroup<span class="token punctuation"><span class="token punctuation">.</span></span>filmography<span class="token punctuation"><span class="token punctuation">.</span></span>model<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Film</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">import</span></span> <span class="token namespace"><span class="token namespace">java<span class="token punctuation"><span class="token punctuation">.</span></span>util<span class="token punctuation"><span class="token punctuation">.</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">List</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">FilmServiceImpl</span></span> <span class="token keyword"><span class="token keyword">implements</span></span> <span class="token class-name"><span class="token class-name">FilmService</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">FilmDAO</span></span> filmDAO <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">FilmDAOImpl</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Film</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> <span class="token function"><span class="token function">allFilms</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> filmDAO<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">allFilms</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Film</span></span> film<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        filmDAO<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>film<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">delete</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Film</span></span> film<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        filmDAO<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">delete</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>film<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">edit</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">Film</span></span> film<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        filmDAO<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">edit</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>film<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Override</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">Film</span></span> <span class="token function"><span class="token function">getById</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token keyword"><span class="token keyword">int</span></span> id<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> filmDAO<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getById</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>id<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span>
<span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Структура проекту тепер виглядає так: 
<div class="row justify-content-center jr-image-wrap">
 <div class="col-12 col-sm-10 col-md-8">
  <img data-id="2c402ef5-3c3a-48bd-b992-b52a6ebce893" data-max-width="315" alt="Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 2) - 1" src="https://cdn.javarush.com/images/article/2c402ef5-3c3a-48bd-b992-b52a6ebce893/256.jpeg" style="width: 315px;">
 </div>
</div>
<h2 id="Контроллер-и-представления">Контролер та уявлення</h2>Попрацюємо тепер над методами контролера та наповненням сторінок. При заповненні сторінок нам знадобляться деякі прийоми. Наприклад, щоб вивести список фільмів потрібен цикл, якщо, припустимо, хочемо міняти якийсь напис, залежно від параметрів, потрібні умови і т.д. Формат JSP (JavaServer Pages) дозволяє використовувати вставки java-коду, з якими це можна реалізувати. Але використовувати на сторінці java-код упереміш з HTML-кодом не хочеться. Це було б, як мінімум, дуже негарно. На щастя, для вирішення цієї проблеми існує така чудова штука, як <strong>JSTL</strong> (JavaServer Pages Standard Tag Library) або Стандартна Бібліотека Тегів JSP. Вона дозволяє використовувати в наших jsp-сторінках цілу купу додаткових тегів для різних потреб. Підключимо її в <code class=" language-none">pom.xml</code>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>dependency<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
      <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>groupId<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>jstl<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>groupId<span class="token operator"><span class="token operator">&gt;</span></span>
      <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>artifactId<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>jstl<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>artifactId<span class="token operator"><span class="token operator">&gt;</span></span>
      <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>version<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token number"><span class="token number">1.2</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>version<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>dependency<span class="token operator"><span class="token operator">&gt;</span></span></code></pre> Тепер займемося контролером. Насамперед приберемо звідти створення об'єкта <code class=" language-none">Film</code>, це робилося для проби і більше нам не потрібно. Додамо туди сервіс і викликатимемо його методи. 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">FilmController</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">FilmService</span></span> filmService <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">FilmServiceImpl</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Ну і відповідно зробимо методи для кожного випадку додати, видалити і т.д. Спочатку метод для відображення головної сторінки зі списком фільмів: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token annotation punctuation"><span class="token annotation punctuation">@RequestMapping</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>method <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">RequestMethod</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>GET<span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">ModelAndView</span></span> <span class="token function"><span class="token function">allFilms</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">List</span></span><span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span><span class="token class-name"><span class="token class-name">Film</span></span><span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span> films <span class="token operator"><span class="token operator">=</span></span> filmService<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">allFilms</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">ModelAndView</span></span> modelAndView <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ModelAndView</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        modelAndView<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setViewName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"films"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        modelAndView<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">addObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"filmsList"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> films<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> modelAndView<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Тут нічого нового. Отримуємо список фільмів із сервісу та додаємо його в модель. Тепер зробимо головну сторінку, <code class=" language-none">films.jsp</code>яку повертає цей метод: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">%</span></span>@ page contentType<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"text/html;charset=UTF-8"</span></span> language<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"java"</span></span> <span class="token operator"><span class="token operator">%</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">%</span></span>@ taglib prefix<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"c"</span></span> uri<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"http://java.sun.com/jsp/jstl/core"</span></span> <span class="token operator"><span class="token operator">%</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>html<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
<span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>head<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
<span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>title<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>FILMS<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>title<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>head<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>body<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>

<span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>h2<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Films</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>h2<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>table<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
    <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>tr<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
        <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>th<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>id<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>th<span class="token operator"><span class="token operator">&gt;</span></span>
        <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>th<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>title<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>th<span class="token operator"><span class="token operator">&gt;</span></span>
        <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>th<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>year<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>th<span class="token operator"><span class="token operator">&gt;</span></span>
        <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>th<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>genre<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>th<span class="token operator"><span class="token operator">&gt;</span></span>
        <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>th<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>watched<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>th<span class="token operator"><span class="token operator">&gt;</span></span>
        <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>th<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>action<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>th<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>tr<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>c<span class="token operator"><span class="token operator">:</span></span>forEach <span class="token keyword"><span class="token keyword">var</span></span><span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"film"</span></span> items<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"${filmsList}"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
        <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>tr<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
            <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>td<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>$<span class="token punctuation"><span class="token punctuation">{</span></span>film<span class="token punctuation"><span class="token punctuation">.</span></span>id<span class="token punctuation"><span class="token punctuation">}</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>td<span class="token operator"><span class="token operator">&gt;</span></span>
            <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>td<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>$<span class="token punctuation"><span class="token punctuation">{</span></span>film<span class="token punctuation"><span class="token punctuation">.</span></span>title<span class="token punctuation"><span class="token punctuation">}</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>td<span class="token operator"><span class="token operator">&gt;</span></span>
            <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>td<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>$<span class="token punctuation"><span class="token punctuation">{</span></span>film<span class="token punctuation"><span class="token punctuation">.</span></span>year<span class="token punctuation"><span class="token punctuation">}</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>td<span class="token operator"><span class="token operator">&gt;</span></span>
            <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>td<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>$<span class="token punctuation"><span class="token punctuation">{</span></span>film<span class="token punctuation"><span class="token punctuation">.</span></span>genre<span class="token punctuation"><span class="token punctuation">}</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>td<span class="token operator"><span class="token operator">&gt;</span></span>
            <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>td<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>$<span class="token punctuation"><span class="token punctuation">{</span></span>film<span class="token punctuation"><span class="token punctuation">.</span></span>watched<span class="token punctuation"><span class="token punctuation">}</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>td<span class="token operator"><span class="token operator">&gt;</span></span>
            <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>td<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
                <span class="token operator"><span class="token operator">&lt;</span></span>a href<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"/edit/${film.id}"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>edit<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>a<span class="token operator"><span class="token operator">&gt;</span></span>
                <span class="token operator"><span class="token operator">&lt;</span></span>a href<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"/delete/${film.id}"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>delete<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>a<span class="token operator"><span class="token operator">&gt;</span></span>
            <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>td<span class="token operator"><span class="token operator">&gt;</span></span>
        <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>tr<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>c<span class="token operator"><span class="token operator">:</span></span>forEach<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>table<span class="token operator"><span class="token operator">&gt;</span></span>

<span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>h2<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Add</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>h2<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span>c<span class="token operator"><span class="token operator">:</span></span>url value<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"/add"</span></span> <span class="token keyword"><span class="token keyword">var</span></span><span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"add"</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span>a href<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"${add}"</span></span><span class="token operator"><span class="token operator">&gt;</span></span><span class="token class-name"><span class="token class-name">Add</span></span> <span class="token keyword"><span class="token keyword">new</span></span> film<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>a<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>body<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>html<span class="token operator"><span class="token operator">&gt;</span></span></code></pre> Розглянемо цю сторінку докладніше, що тут взагалі до чого. - тут підключається JSTL core, яка включає основні теги створення циклів, умов і <em><strong>т.д.</strong></em>
<ul>
 <li><code class=" language-none"><strong>&lt;table&gt;</strong></code>- Тег для створення таблиці.</li>
 <li><code class=" language-none"><strong>&lt;tr&gt;</strong></code>- Рядок таблиці</li>
 <li><code class=" language-none"><strong>&lt;th&gt;</strong></code>- Заголовок стовпця</li>
 <li><code class=" language-none"><strong>&lt;td&gt;</strong></code>- осередок таблиці</li>
</ul>Спочатку робимо рядок-шапку таблиці з назвами стовпців. Потім <code class=" language-none">&lt;c:forEach var="film" items="${filmsList}"&gt;</code>- в циклі (який ми взяли з JSTL core) пробігаємося по всіх елементах переданого списку ( <code class=" language-none">filmsList</code>), для кожного елемента ( <code class=" language-none">film</code>) створюємо новий рядок і в кожну комірку записуємо відповідне значення. Тут є момент, запис ніби <code class=" language-none">film.id</code>треба розуміти як <code class=" language-none">film.getId()</code>, тобто. не безпосередньо до поля звернення, саме геттер викликається. В останньому стовпці ( <code class=" language-none">action</code>) робимо посилання для видалення та редагування (відповідні методи зараз зробимо). Ну й унизу посилання на метод додавання нового фільму. Ось як це виглядає: <img data-id="f3aff555-6b40-4567-a1fe-5276215e54ed" data-max-width="850" alt="" src="https://cdn.javarush.com/images/article/f3aff555-6b40-4567-a1fe-5276215e54ed/800.jpeg" style="width: 850px;">Далі займемося методом, який повертатиме сторінку редагування конкретного фільму: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token annotation punctuation"><span class="token annotation punctuation">@RequestMapping</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>value <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"/edit/{id}"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> method <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">RequestMethod</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>GET<span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">ModelAndView</span></span> <span class="token function"><span class="token function">editPage</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token annotation punctuation"><span class="token annotation punctuation">@PathVariable</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"id"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">int</span></span> id<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">Film</span></span> film <span class="token operator"><span class="token operator">=</span></span> filmService<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getById</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>id<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">ModelAndView</span></span> modelAndView <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ModelAndView</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        modelAndView<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setViewName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"editPage"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        modelAndView<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">addObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"film"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> film<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> modelAndView<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Тут з'явилося дещо нове - це інструкція <code class=" language-none">@PathVariable</code>. Вона вказує на те, що цей параметр ( <code class=" language-none">int id</code>) Виходить з адресаного рядка. Щоб вказати місце цього параметра в адресаному рядку використовується конструкція <code class=" language-none">{id}</code>(до речі, якщо ім'я змінної збігається, як у даному випадку, то в дужках це можна не вказувати, а просто написати <code class=" language-none">@PathVariable int id</code>). Отже, на головній сторінці ми зробабо посилання для кожного фільму із зазначенням <code class=" language-none">id</code>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java"><span class="token operator"><span class="token operator">&lt;</span></span>a href<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"/edit/${film.id}"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>edit<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>a<span class="token operator"><span class="token operator">&gt;</span></span></code></pre> Потім це значення присвоюється параметр методу і далі по ньому ми через сервіс з репозиторію отримуємо конкретний фільм і додаємо його в модель. Це був метод для отримання сторінки редагування, тепер потрібен метод для редагування: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token annotation punctuation"><span class="token annotation punctuation">@RequestMapping</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>value <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"/edit"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> method <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">RequestMethod</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>POST<span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">ModelAndView</span></span> <span class="token function"><span class="token function">editFilm</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token annotation punctuation"><span class="token annotation punctuation">@ModelAttribute</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"film"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token class-name"><span class="token class-name">Film</span></span> film<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">ModelAndView</span></span> modelAndView <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ModelAndView</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        modelAndView<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setViewName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"redirect:/"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        filmService<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">edit</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>film<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> modelAndView<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> У методі <code class=" language-none">editPage</code>ми додали модель атрибут: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java">modelAndView<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">addObject</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"film"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> filmService<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getById</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>id<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> І тепер за допомогою анотації <code class=" language-none">@ModelAttribute</code>ми отримуємо цей атрибут і можемо змінити його. Метод запиту <code class=" language-none">POST</code>тому, що тут ми передаватимемо дані. " <code class=" language-none">redirect:/</code>" означає, що після виконання цього методу ми будемо перенаправлені на адресау " <code class=" language-none">/</code>", тобто. запуститься спосіб <code class=" language-none">allFilms</code>і ми повернемося на головну сторінку. Тепер зробимо саму сторінку <code class=" language-none">editPage.jsp</code>: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">%</span></span>@ page contentType<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"text/html;charset=UTF-8"</span></span> language<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"java"</span></span> <span class="token operator"><span class="token operator">%</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">%</span></span>@ taglib prefix<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"c"</span></span> uri<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"http://java.sun.com/jsp/jstl/core"</span></span> <span class="token operator"><span class="token operator">%</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>html<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
<span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>head<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
    <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>title<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Edit</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>title<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>head<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>body<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
<span class="token operator"><span class="token operator">&lt;</span></span>c<span class="token operator"><span class="token operator">:</span></span>url value<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"/edit"</span></span> <span class="token keyword"><span class="token keyword">var</span></span><span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"var"</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span>form action<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"${var}"</span></span> method<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"POST"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>input type<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"hidden"</span></span> name<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"id"</span></span> value<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"${film.id}"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>label <span class="token keyword"><span class="token keyword">for</span></span><span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"title"</span></span><span class="token operator"><span class="token operator">&gt;</span></span><span class="token class-name"><span class="token class-name">Title</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>label<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>input type<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"text"</span></span> name<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"title"</span></span> id<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"title"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>label <span class="token keyword"><span class="token keyword">for</span></span><span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"year"</span></span><span class="token operator"><span class="token operator">&gt;</span></span><span class="token class-name"><span class="token class-name">Year</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>label<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>input type<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"text"</span></span> name<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"year"</span></span> id<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"year"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>label <span class="token keyword"><span class="token keyword">for</span></span><span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"genre"</span></span><span class="token operator"><span class="token operator">&gt;</span></span><span class="token class-name"><span class="token class-name">Genre</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>label<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>input type<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"text"</span></span> name<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"genre"</span></span> id<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"genre"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>label <span class="token keyword"><span class="token keyword">for</span></span><span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"watched"</span></span><span class="token operator"><span class="token operator">&gt;</span></span><span class="token class-name"><span class="token class-name">Watched</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>label<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>input type<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"text"</span></span> name<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"watched"</span></span> id<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"watched"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>input type<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"submit"</span></span> value<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"Edit film"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>form<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>body<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>html<span class="token operator"><span class="token operator">&gt;</span></span></code></pre>
<ul>
 <li><code class=" language-none"><strong>&lt;form&gt;</strong></code>— форма для збору та відправлення даних, із зазначенням хто їх оброблятиме ( <code class=" language-none"><strong>/edit</strong></code>)</li>
 <li><code class=" language-none"><strong>&lt;input&gt;</strong></code>- Елементи інтерфейсу для взаємодії з користувачем (кнопки, поля введення і т.д.)</li>
 <li><code class=" language-none"><strong>&lt;label&gt;</strong></code>- Текстова мітка</li>
</ul>Отже, при натисканні кнопки <code class=" language-none">&lt;input type="submit" value="Edit film"&gt;</code>дані форми будуть відправлені на сервер (спеціально додано невидиме поле зі значенням <code class=" language-none">id</code>, щоб сервер знав який саме запис в БД потрібно оновити). У методі <code class=" language-none">editFilm</code>вони будуть присвоєні відповідним полям атрибуту <code class=" language-none">film</code>. Потім ми повернемось на головну сторінку із оновленим списком. Виглядає сторінка редагування так: <img data-id="b8f6f6fc-b97c-48a4-91ef-17d935d3471e" data-max-width="850" alt="" src="https://cdn.javarush.com/images/article/b8f6f6fc-b97c-48a4-91ef-17d935d3471e/800.jpeg" style="width: 850px;">Тепер займемося додаванням нових фільмів до списку. Для цього також знадобиться форма для введення та надсилання даних. Можна зробити форму на головній сторінці або можна зробити окрему сторінку на кшталт <code class=" language-none">editPage.jsp</code>. Але, з іншого боку, форма для додавання буде точно така ж, як і для редагування, тобто. 4 поля для введення та кнопка відправки. То навіщо тоді створювати нову сторінку, знову використовуємо<code class=" language-none">editPage.jsp</code>. Метод для отримання сторінки: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token annotation punctuation"><span class="token annotation punctuation">@RequestMapping</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>value <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"/add"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> method <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">RequestMethod</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>GET<span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">ModelAndView</span></span> <span class="token function"><span class="token function">addPage</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">ModelAndView</span></span> modelAndView <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ModelAndView</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        modelAndView<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setViewName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"editPage"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> modelAndView<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> У методі <code class=" language-none">editPage</code>ми додатково передавали атрибут, щоб потім змінити його, а тут ми просто отримуємо сторінку. І метод додавання: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token annotation punctuation"><span class="token annotation punctuation">@RequestMapping</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>value <span class="token operator"><span class="token operator">=</span></span> <span class="token string"><span class="token string">"/add"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> method <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">RequestMethod</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>POST<span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">ModelAndView</span></span> <span class="token function"><span class="token function">addFilm</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token annotation punctuation"><span class="token annotation punctuation">@ModelAttribute</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"film"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token class-name"><span class="token class-name">Film</span></span> film<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">ModelAndView</span></span> modelAndView <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ModelAndView</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        modelAndView<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setViewName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"redirect:/"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        filmService<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">add</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>film<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> modelAndView<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Оскільки атрибут ми сюди не передавали, тут буде створено новий об'єкт <code class=" language-none">Film</code>. Ну а так тут, в принципі, нічого нового. Варто також звернути увагу, що у нас обидва методи доступні на адресау " <code class=" language-none">/add</code>". Це можливо завдяки тому, що вони реагують різні типи запиту. Переходячи за посиланням на головній сторінці, ми робимо GET-запит, що приводить нас у метод <code class=" language-none">addPage</code>. А коли на сторінці додавання ми тиснемо кнопку надсилання даних, робиться POST-запит, за це вже відповідає метод <code class=" language-none">addFilm</code>. Для додавання нового фільму ми вирішабо використати ту саму сторінку, що й для редагування. Але там дані відправляються на адресау " <code class=" language-none">/edit</code>": 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token operator"><span class="token operator">&lt;</span></span>c<span class="token operator"><span class="token operator">:</span></span>url value<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"/edit"</span></span> <span class="token keyword"><span class="token keyword">var</span></span><span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"var"</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span>form action<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"${var}"</span></span> method<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"POST"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>input type<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"submit"</span></span> value<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"Edit film"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>form<span class="token operator"><span class="token operator">&gt;</span></span></code></pre> Нам потрібно трохи підправити сторінку, щоб вона поводилася по-різному для додавання та редагування. Для вирішення цього питання скористаємося умовами з тієї ж бібліотеки JSTL core: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">%</span></span>@ page contentType<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"text/html;charset=UTF-8"</span></span> language<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"java"</span></span> <span class="token operator"><span class="token operator">%</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">%</span></span>@ taglib prefix<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"c"</span></span> uri<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"http://java.sun.com/jsp/jstl/core"</span></span> <span class="token operator"><span class="token operator">%</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>html<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
<span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>head<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>c<span class="token operator"><span class="token operator">:</span></span><span class="token keyword"><span class="token keyword">if</span></span> test<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"${empty film.title}"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
        <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>title<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Add</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>title<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>c<span class="token operator"><span class="token operator">:</span></span><span class="token keyword"><span class="token keyword">if</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>c<span class="token operator"><span class="token operator">:</span></span><span class="token keyword"><span class="token keyword">if</span></span> test<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"${!empty film.title}"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
        <span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>title<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span><span class="token class-name"><span class="token class-name">Edit</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>title<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>c<span class="token operator"><span class="token operator">:</span></span><span class="token keyword"><span class="token keyword">if</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>head<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token generics"><span class="token punctuation"></span><span class="token generics"><span class="token punctuation"><span class="token punctuation">&lt;</span></span>body<span class="token punctuation"><span class="token punctuation">&gt;</span></span></span><span class="token punctuation"></span></span>
<span class="token operator"><span class="token operator">&lt;</span></span>c<span class="token operator"><span class="token operator">:</span></span><span class="token keyword"><span class="token keyword">if</span></span> test<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"${empty film.title}"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>c<span class="token operator"><span class="token operator">:</span></span>url value<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"/add"</span></span> <span class="token keyword"><span class="token keyword">var</span></span><span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"var"</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>c<span class="token operator"><span class="token operator">:</span></span><span class="token keyword"><span class="token keyword">if</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span>c<span class="token operator"><span class="token operator">:</span></span><span class="token keyword"><span class="token keyword">if</span></span> test<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"${!empty film.title}"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>c<span class="token operator"><span class="token operator">:</span></span>url value<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"/edit"</span></span> <span class="token keyword"><span class="token keyword">var</span></span><span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"var"</span></span><span class="token operator"><span class="token operator">/</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>c<span class="token operator"><span class="token operator">:</span></span><span class="token keyword"><span class="token keyword">if</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span>form action<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"${var}"</span></span> method<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"POST"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>c<span class="token operator"><span class="token operator">:</span></span><span class="token keyword"><span class="token keyword">if</span></span> test<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"${!empty film.title}"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
        <span class="token operator"><span class="token operator">&lt;</span></span>input type<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"hidden"</span></span> name<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"id"</span></span> value<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"${film.id}"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>c<span class="token operator"><span class="token operator">:</span></span><span class="token keyword"><span class="token keyword">if</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>label <span class="token keyword"><span class="token keyword">for</span></span><span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"title"</span></span><span class="token operator"><span class="token operator">&gt;</span></span><span class="token class-name"><span class="token class-name">Title</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>label<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>input type<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"text"</span></span> name<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"title"</span></span> id<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"title"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>label <span class="token keyword"><span class="token keyword">for</span></span><span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"year"</span></span><span class="token operator"><span class="token operator">&gt;</span></span><span class="token class-name"><span class="token class-name">Year</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>label<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>input type<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"text"</span></span> name<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"year"</span></span> id<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"year"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>label <span class="token keyword"><span class="token keyword">for</span></span><span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"genre"</span></span><span class="token operator"><span class="token operator">&gt;</span></span><span class="token class-name"><span class="token class-name">Genre</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>label<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>input type<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"text"</span></span> name<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"genre"</span></span> id<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"genre"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>label <span class="token keyword"><span class="token keyword">for</span></span><span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"watched"</span></span><span class="token operator"><span class="token operator">&gt;</span></span><span class="token class-name"><span class="token class-name">Watched</span></span><span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>label<span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>input type<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"text"</span></span> name<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"watched"</span></span> id<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"watched"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>c<span class="token operator"><span class="token operator">:</span></span><span class="token keyword"><span class="token keyword">if</span></span> test<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"${empty film.title}"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
        <span class="token operator"><span class="token operator">&lt;</span></span>input type<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"submit"</span></span> value<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"Add new film"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>c<span class="token operator"><span class="token operator">:</span></span><span class="token keyword"><span class="token keyword">if</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span>c<span class="token operator"><span class="token operator">:</span></span><span class="token keyword"><span class="token keyword">if</span></span> test<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"${!empty film.title}"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
        <span class="token operator"><span class="token operator">&lt;</span></span>input type<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"submit"</span></span> value<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"Edit film"</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
    <span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>c<span class="token operator"><span class="token operator">:</span></span><span class="token keyword"><span class="token keyword">if</span></span><span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>form<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>body<span class="token operator"><span class="token operator">&gt;</span></span>
<span class="token operator"><span class="token operator">&lt;</span></span><span class="token operator"><span class="token operator">/</span></span>html<span class="token operator"><span class="token operator">&gt;</span></span></code></pre> Тобто. ми просто перевіряємо поле <code class=" language-none">film.title</code>. Якщо воно порожнє, це новий фільм, ми повинні заповнити для нього всі дані і додати до списку. Якщо це поле не порожнє, це фільм зі списку і його потрібно просто змінити. Т.о. отримуємо два варіанти нашої сторінки: <img data-id="f7e79949-4682-49ad-b407-15d3662158e3" data-max-width="850" alt="" src="https://cdn.javarush.com/images/article/f7e79949-4682-49ad-b407-15d3662158e3/800.jpeg" style="width: 850px;">Ну і останній метод контролера для видалення фільму зі списку: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token annotation punctuation"><span class="token annotation punctuation">@RequestMapping</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>value<span class="token operator"><span class="token operator">=</span></span><span class="token string"><span class="token string">"/delete/{id}"</span></span><span class="token punctuation"><span class="token punctuation">,</span></span> method <span class="token operator"><span class="token operator">=</span></span> <span class="token class-name"><span class="token class-name">RequestMethod</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>GET<span class="token punctuation"><span class="token punctuation">)</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token class-name"><span class="token class-name">ModelAndView</span></span> <span class="token function"><span class="token function">deleteFilm</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token annotation punctuation"><span class="token annotation punctuation">@PathVariable</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"id"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token keyword"><span class="token keyword">int</span></span> id<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token class-name"><span class="token class-name">ModelAndView</span></span> modelAndView <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">ModelAndView</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        modelAndView<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">setViewName</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token string"><span class="token string">"redirect:/"</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token class-name"><span class="token class-name">Film</span></span> film <span class="token operator"><span class="token operator">=</span></span> filmService<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">getById</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>id<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        filmService<span class="token punctuation"><span class="token punctuation">.</span></span><span class="token function"><span class="token function">delete</span></span><span class="token punctuation"><span class="token punctuation">(</span></span>film<span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span>
        <span class="token keyword"><span class="token keyword">return</span></span> modelAndView<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> Думаю, немає потреби тут щось коментувати, це вже розглянули. Посилання на цю адресау на головній сторінці ми вже зробабо. Ну що ж, тут ніби все готове, можна ще раз запустити і подивитися, як все працює. 
<h2 id="Repository-и-Service-як-компоненты-Spring">Repository та Service як компоненти Spring</h2>Зробимо ще одну невелику поправку. Справа в тому, що зараз наші сховища та сервіс – це просто класи, і щоб їх використовувати доводиться самим створювати об'єкт класу ( <code class=" language-none">new FilmServiceImpl()</code>). Але ж у нас не просто так підключений <strong>Spring</strong> , так нехай він сам цю справу і контролює. Щоб віддати наші класи під управління Spring'а, потрібно зазначити, що вони є компонентами. Для цього відзначимо їх спеціальними інструкціями: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token annotation punctuation"><span class="token annotation punctuation">@Repository</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">FilmDAOImpl</span></span> <span class="token keyword"><span class="token keyword">implements</span></span> <span class="token class-name"><span class="token class-name">FilmDAO</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span></code></pre>
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token annotation punctuation"><span class="token annotation punctuation">@Service</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">FilmServiceImpl</span></span> <span class="token keyword"><span class="token keyword">implements</span></span> <span class="token class-name"><span class="token class-name">FilmService</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span></code></pre> Анотації <code class=" language-none">@Repository</code>і <code class=" language-none">@Service</code>, як і <code class=" language-none">@Controller</code>є похідними від <code class=" language-none">@Component</code>. У чому конкретні особливості та відмінності цих трьох анотацій і чим вони відрізняються від простого компонента, варто почитати окремо в документації чи гайдах. Поки ж достатньо знати, що ці інструкції повідомляють Spring про те, що ці класи є репозиторієм та сервісом відповідно. І тепер нам не потрібно самим створювати конкретні об'єкти цих класів: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class="  language-java"><span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">FilmService</span></span> filmService <span class="token operator"><span class="token operator">=</span></span> <span class="token keyword"><span class="token keyword">new</span></span> <span class="token class-name"><span class="token class-name">FilmServiceImpl</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token punctuation"><span class="token punctuation">)</span></span><span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Натомість можна позначити поле спеціальною анотацією і Spring сам підбере відповідну реалізацію: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class="  language-java"><span class="token annotation punctuation"><span class="token annotation punctuation">@Autowired</span></span>
<span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">FilmService</span></span> filmService<span class="token punctuation"><span class="token punctuation">;</span></span></code></pre> Анотація <code class=" language-none">@Autowired</code>(автозв'язування) повідомляє Spring про те, що він має покопатися у себе в контексті і підставити сюди відповідний бін. Дуже зручно. Якщо раніше ми використовували інтерфейси, щоб не турбуватися щодо конкретної реалізації методів, то тепер нам не потрібно турбуватися навіть щодо реалізації самого інтерфейсу і навіть знати її назву. Ідея підказує, що використовувати автозв'язування на полі не рекомендується, краще використовувати конструктор чи сетер. Докладніше про це почитаємо в документації. Для нас, в принципі, це не важливо, можна сміливо залишати так. Але якщо вже ідея просить, то поважимо, щоб все було красиво і без будь-яких жовтих попереджень. У класі контролера створимо сетер і позначимо інструкцією його: 
<pre class=" line-numbers  language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class="  language-java"><span class="token annotation punctuation"><span class="token annotation punctuation">@Controller</span></span>
<span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">class</span></span> <span class="token class-name"><span class="token class-name">FilmController</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>

    <span class="token keyword"><span class="token keyword">private</span></span> <span class="token class-name"><span class="token class-name">FilmService</span></span> filmService<span class="token punctuation"><span class="token punctuation">;</span></span>

    <span class="token annotation punctuation"><span class="token annotation punctuation">@Autowired</span></span>
    <span class="token keyword"><span class="token keyword">public</span></span> <span class="token keyword"><span class="token keyword">void</span></span> <span class="token function"><span class="token function">setFilmService</span></span><span class="token punctuation"><span class="token punctuation">(</span></span><span class="token class-name"><span class="token class-name">FilmService</span></span> filmService<span class="token punctuation"><span class="token punctuation">)</span></span> <span class="token punctuation"><span class="token punctuation">{</span></span>
        <span class="token keyword"><span class="token keyword">this</span></span><span class="token punctuation"><span class="token punctuation">.</span></span>filmService <span class="token operator"><span class="token operator">=</span></span> filmService<span class="token punctuation"><span class="token punctuation">;</span></span>
    <span class="token punctuation"><span class="token punctuation">}</span></span></code></pre> І аналогічно робимо сетер для <code class=" language-none">FilmDAO</code>в класі <code class=" language-none">FilmServiceImpl</code>. <em><strong>Далі буде...</strong></em> <a href="https://codegym.cc/groups/posts/2253-znakomstvo-s-maven-spring-mysql-hibernate-i-pervoe-crud-prilozhenie-chastjh-1" target="_blank" rel="nofollow"> Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 1)</a> Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 2) <a href="https://codegym.cc/groups/posts/2251-znakomstvo-s-maven-spring-mysql-hibernate-i-pervoe-crud-prilozhenie-chastjh-3" target="_blank" rel="nofollow">Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 3) </a> <a href="https://codegym.cc/groups/posts/2250-znakomstvo-s-maven-spring-mysql-hibernate-i-pervoe-crud-prilozhenie-chastjh-4" target="_blank" rel="nofollow">Знайомство з Maven, Spring, MySQL, Hibernate та перший CRUD додаток (частина 4)</a>