<h2>1. Перетворення даних</h2>
<p>Також клас <code>Stream&lt;T&gt;</code>має метод, який дозволяє перетворити дані з одного типу в інший. Цей метод називається <code><span class="text-red">map</span>()</code>.</p>
<p>Він теж повертає потік <code>Stream&lt;R&gt;</code>, але з елементами нового типу. В якості параметра метод <code><span class="text-red">map</span>()</code>потрібно передати функцію, яка перетворює один тип даних в інший.</p>
<p>Приклади:</p>
<div class="lesson-example">
 <pre class=" language-java" tabindex="0"><code class=" language-java"><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="text-viola">stream</span> <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="text-yellow">stream2</span> <span class="token operator">=</span> <span class="text-viola">stream</span><span class="token punctuation">.</span><span class="token function"><span class="text-red">map</span></span><span class="token punctuation">(</span><span class="token punctuation"></span><span class="code"><span class="token punctuation">(</span><span class="text-neon">x</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="text-neon">x</span><span class="token punctuation">)</span></span><span class="token punctuation"></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
 <div class="lesson-example-caption">
  Перетворюємо потік <code>Integer</code>на потік<code>String</code>
 </div>
</div>
<p>Функція, яку передали метод <code><span class="text-red">map</span>()</code>як параметр, приймає число <code class="text-neon">x</code>, а як результат повертає рядок. Можна, до речі, записати цей код коротше:</p>
<div class="lesson-example">
 <pre class=" language-java" tabindex="0"><code class=" language-java"><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="text-viola">stream</span> <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="text-yellow">stream2</span> <span class="token operator">=</span> <span class="text-viola">stream</span><span class="token punctuation">.</span><span class="token function"><span class="text-red">map</span></span><span class="token punctuation">(</span><span class="token class-name"></span><span class="code"><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">valueOf</span></span><span class="token function"></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
 <div class="lesson-example-caption">
  Перетворюємо потік <code>Integer</code>на потік<code>String</code>
 </div>
</div>
<p><strong>Перетворення рядка на число</strong></p>
<p>Аналогічно можна написати код і для перетворення рядка в число теж нічого складного:</p>
<div class="lesson-example">
 <pre class=" language-java" tabindex="0"><code class=" language-java"><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="text-user">stream</span> <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="text-yellow">stream2</span> <span class="token operator">=</span> <span class="text-user">stream</span><span class="token punctuation">.</span><span class="token function"><span class="text-red">map</span></span><span class="token punctuation">(</span><span class="token class-name"></span><span class="code text-neon"><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">valueOf</span></span><span class="token function"></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="text-viola">stream3</span> <span class="token operator">=</span> <span class="text-green">stream2</span><span class="token punctuation">.</span><span class="token function"><span class="text-red">map</span></span><span class="token punctuation">(</span><span class="token class-name"></span><span class="code text-neon"><span class="token class-name">Integer</span><span class="token operator">::</span><span class="token function">parseInt</span></span><span class="token function"></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
 <div class="lesson-example-caption">
  Перетворюємо потік <code>String</code>на потік<code>Integer</code>
 </div>
</div>
<p><strong>Перетворення рядка на<code>URI</code></strong></p>
<p>Операції з перетворення даних можуть бути великими та важкими. Допустимо, ми хочемо перетворити колекцію рядків на об'єкти URI. Це дуже легко зробити, адже URI приймає рядок як параметр конструктора</p>
<div class="lesson-example">
 <pre class=" language-java" tabindex="0"><code class=" language-java"><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name"><span class="text-orange">String</span></span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name"><span class="text-orange">String</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"https://google.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"https://linkedin.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"https://yandex.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span>URI<span class="token punctuation">&gt;</span></span> <span class="text-green">stream</span> <span class="token operator">=</span> <span class="text-user">list<span class="token punctuation">.</span><span class="token function">stream</span></span><span class="token function"></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function"><span class="text-red">map</span></span><span class="token punctuation">(</span> <span class="text-orange">URI<span class="token operator">::</span><span class="token keyword">new</span></span><span class="token keyword"></span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
 <div class="lesson-example-caption">
  Перетворюємо потік <code>String</code>на потік<code>URI</code>
 </div>
</div>
<p>Ми створабо колекцію, записали до неї 3 посилання на сайти в інтернеті. Потім отримали у колекції об'єкт <code>Stream&lt;String&gt;</code>і в нього об'єкт <code>Stream&lt;URI&gt;</code>. А метод map передали посилання на метод, який буде використовуватися для перетворення з String в URI.</p>
<p>Цей метод (конструктор) повинен приймати як параметр тип <code>String</code>. Все начебто ідеально...</p>
<hr>
<h2>2. Винятки</h2>
<p>Код вище має працювати, але він не працюватиме — програма не скомпілюється. І не тому, що ми зробабо помилку, а тому, що її зробабо розробники Java.</p>
<p>Колись давно їм спала на думку чудова ідея — додати в конструктор(!) класу <code class="text-user">URI</code>checked-виняток <code><span class="text-red">URISyntaxException</span></code>. А такі винятки потрібно обов'язково загортати у <code>try-catch</code>.</p>
<p>Тому останній рядок нашого коду виглядатиме ось так:</p>
<pre class=" language-java" tabindex="0"><code class=" language-java"><span class="token class-name"><span class="text-viola">Stream</span></span><span class="token generics"><span class="token punctuation">&lt;</span><span class="code text-user">URI</span><span class="token punctuation">&gt;</span></span> <span class="text-viola">stream</span> <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function"><span class="text-red">map</span></span><span class="token punctuation">(</span><span class="text-neon">str</span> <span class="token operator">-&gt;</span>
<span class="token punctuation">{</span>
  <span class="token keyword">try</span>
  <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token function"><span class="code text-user">URI</span></span><span class="token punctuation">(</span><span class="text-neon">str</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name"><span class="code"><span class="text-red">URISyntaxException</span></span></span> e<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
     e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Що вам сказати? Потрібно двічі подумати, перш ніж використовувати <span class="term">checked-виключення</span> . І тричі, перш ніж використовувати їх у конструкторі.</p>
<hr>