Робота з ArrayList
<p>----------------------------------------</p>
Як влаштовано ArrayList. ArrayList — найпоширеніший клас у Java для зберігання елементів. Як же влаштовано цей ArayList і чому він так усім подобається? Будова ArrayList проста й геніальна за своєю сутністю. Усередині кожного об'єкта ArrayList є два поля: Масив зі списком елементів Змінна
<p>----------------------------------------</p>
<h2>1. Як влаштовано <code>ArrayList</code></h2>
<p><code>ArrayList</code> — найпоширеніший клас у Java для зберігання елементів. Як же влаштовано цей <code>ArayList</code> і чому він так усім подобається?</p>
<p>Будова <code>ArrayList</code> проста й геніальна за своєю сутністю. Усередині кожного об'єкта <code>ArrayList</code> є два поля:</p>
<ul>
    <li>Масив зі списком елементів</li>
    <li>Змінна <code>size</code>, яка зберігає кількість елементів списку</li>
</ul>
<p>Усередині об'єкта <code>ArrayList</code> міститься звичайнісінький масив! Але не тільки. Там є ще змінна <strong>size</strong>, яка зберігає довжину списку. От як це працює.</p>
<p>Початкова довжина масиву всередині списку — 10 елементів. А змінна <code>size</code> дорівнює 0.</p>
<p>Якщо в список додати елемент, його буде збережено в 0-ву комірку масиву, а <code>size</code> збільшиться до 1.</p>
<p>Якщо додати ще один елемент, його буде збережено в 1-шу комірку, а <code>size</code> знову збільшиться на 1 і тепер дорівнюватиме двом.</p>
<p>Якщо при спробі додавання чергового елемента до списку в масиві вже немає місця, у методі <code>add()</code> відбувається от що:</p>
<ol>
    <li><strong>Створюється новий масив</strong>, у півтора раза довший за попередній.</li>
    <li>У нього <strong>копіюються всі елементи</strong> з наявного масиву.</li>
    <li>В об'єкті <code>ArrayList</code> замість старого масиву <strong>зберігається посилання на новий</strong>.</li>
    <li>В 11-ту комірку нового масиву <strong>записується переданий елемент</strong>.</li>
    <li><strong>size</strong><strong> збільшується на 1</strong> і тепер дорівнюватиме 11.</li>
</ol>
<p>Аналогічні дії відбуваються під час додавання (вставлення) елемента в середину списку. Наявні елементи зсуваються на 1 праворуч, і у вільну комірку масиву записується потрібний елемент.</p>
<p>Основні сценарії використання списку ми зараз розглянемо.</p>
<hr>
<h2>2. Додавання елемента до <code>ArrayList</code></h2>
<p>Розгляньмо, що відбувається всередині списку, коли до нього додають елементи. Одразу після створення об'єкта ArrayList ми маємо в пам'яті приблизно таку картину:</p>
<img data-max-width="1024" data-id="748dd44f-db39-4d0e-8f05-3a4e9e1c7e67" src="https://cdn.javarush.com/images/article/748dd44f-db39-4d0e-8f05-3a4e9e1c7e67/1024.jpeg" alt="">
<p>Маємо об'єкт типу <code>ArrayList</code>, усередині якого є два поля (дві змінні): масив (<code>data</code>) і кількість елементів (<code>size</code>). <code>data</code> зберігає посилання на контейнер (масив) із 10 елементів.</p>
<p>Якщо ми вирішимо додати в масив число 5, отримаємо таку картину:</p>
<img data-max-width="1024" data-id="e531a560-61a4-4dd7-bd0b-7d9bb6e64ebd" src="https://cdn.javarush.com/images/article/e531a560-61a4-4dd7-bd0b-7d9bb6e64ebd/1024.jpeg" alt="">
<p>У масиві тепер зберігається елемент 5, а змінна <code>size == 1</code>.</p>
<p>Якщо зараз викликати метод <code>size()</code> для нашого об'єкта <code>ArrayList</code>, отримаємо в результаті кількість елементів списку — 1. <span class="text-green">Кількість елементів списку — це не розмір масиву.</span></p>
<p>Ані справжній розмір масиву, ані сам масив ніколи не будуть доступні (їх не буде видно) поза об'єктом <code>ArrayList</code>. Це внутрішні дані <code>ArrayList</code>, і вони завжди ними залишаться.</p>
<p>Додаймо до списку ще 7 чисел: 10, 20, 30, 40, 50, 60, 70.</p>
<p>Наразі картина в пам'яті виявиться вже такою:</p>
<img data-max-width="1024" data-id="de3eeb1c-17b6-4cc9-9a20-3d5e8378a435" src="https://cdn.javarush.com/images/article/de3eeb1c-17b6-4cc9-9a20-3d5e8378a435/1024.jpeg" alt="">
<p>Якщо зараз викликати метод <code>size()</code>, він поверне число 8 — нову кількість елементів у списку. До розміру масиву воно не має жодного стосунку.</p>
<div class="lesson-note lesson-note--important">
    <div class="lesson-note__container">
        <div class="lesson-note__head">Важливо!</div>
        <div class="lesson-note__content">
            <p>На цьому малюнку є одна неточність.</p>
            <p>Клас <code>ArrayList</code> не може зберігати примітивні типи, тому замість типу <code>int</code> він використовує тип (клас-обгортку) <code>Integer</code>. Контейнер зберігає не значення 5–70, а посилання на об'єкти типу <code>Integer</code>. Усі порожні комірки контейнера зберігають <code>null</code>.</p>
        </div>
    </div>
</div>
<hr>
<div class="task-widget-container" showCover="true" taskKey="ua.javarush.task.pro.task12.task1212"></div>
<hr>
<h2>3. Збільшення довжини списку</h2>
<p>Розгляньмо, що відбувається всередині списку, коли в його масиві закінчуються вільні комірки.</p>
<p>Припустімо, у нас був список із 10 елементів:</p>
<img data-max-width="1024" data-id="0281ca8c-bc75-4af5-9e48-36eedd587d0a" src="https://cdn.javarush.com/images/article/0281ca8c-bc75-4af5-9e48-36eedd587d0a/1024.jpeg" alt="">
<p>Ми вирішили додати до нього число <strong>100</strong>. От що в цьому разі відбудеться в методі <code>add()</code>:</p>
<p>Крок 1 — створення нового масиву:</p>
<img data-max-width="1024" data-id="8051b4db-77e1-4adf-a7bd-e3814ef27262" src="https://cdn.javarush.com/images/article/8051b4db-77e1-4adf-a7bd-e3814ef27262/1024.jpeg" alt="">
<p>Крок 2 — копіювання всіх елементів зі старого масиву в новий:</p>
<img data-max-width="1024" data-id="12b04ba8-a94b-45ca-94f9-0a340d89b939" src="https://cdn.javarush.com/images/article/12b04ba8-a94b-45ca-94f9-0a340d89b939/1024.jpeg" alt="">
<p>Крок 3 — заміна масиву (змінення посилання на масив усередині об'єкта <code>ArrayList</code>):</p>
<img data-max-width="1024" data-id="69c86b8b-53e7-4f7a-8796-62e2791d5d4a" src="https://cdn.javarush.com/images/article/69c86b8b-53e7-4f7a-8796-62e2791d5d4a/1024.jpeg" alt="">
<p>Крок 4 — додавання нового числа, заради чого ми так старалися:</p>
<img data-max-width="1024" data-id="0e793fb8-4bb8-4213-97a6-961c48a2a0ca" src="https://cdn.javarush.com/images/article/0e793fb8-4bb8-4213-97a6-961c48a2a0ca/1024.jpeg" alt="">