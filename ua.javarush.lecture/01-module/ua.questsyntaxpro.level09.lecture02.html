Екранування символів
<p>----------------------------------------</p>
Чому виникла потреба в екрануванні символів? Колись давно ви дізналися, що для того щоб записати в коді рядок символів, потрібно взяти цей рядок у подвійні лапки: це буде рядковий літерал. А що робити, коли потрібно написати рядковий літерал з лапками всередині? Рядок, який містить лапки, — що
<p>----------------------------------------</p>
<h2>1. Чому виникла потреба в екрануванні символів?</h2>
    <p>Колись давно ви дізналися, що для того щоб записати в коді рядок символів, потрібно взяти цей рядок у подвійні лапки: це буде <span class="term">рядковий літерал</span>.</p>
    <p>А що робити, коли потрібно написати рядковий літерал з лапками всередині? Рядок, який містить лапки, — що може бути простішим?</p>
    <p>Припустімо, ми хочемо вивести текст <code>Фільм "Друзі" номіновано на "Оскар"</code>. Як це зробити?</p>
    <table>
        <tbody>
        <tr>
            <th>Код</th>
            <th>Примітки</th>
        </tr>
        <tr>
            <td>
                <pre class="language-java"><code>String s = <span class="text-green">"Фільм "Друзі" номіновано на "Оскар"";</span></code></pre>
            </td>
            <td><span class="text-red">Цей варіант не працюватиме!</span></td>
        </tr>
        </tbody>
    </table>
    <p>Річ у тім, що на думку компілятора тут записано зовсім інший код:</p>
    <table>
        <tbody>
        <tr>
            <th>Код</th>
            <th>Примітки</th>
        </tr>
        <tr>
            <td>
                <pre class="language-java"><code>String s = "Фільм "Друзі" номіновано на "Оскар"";</code></pre>
            </td>
            <td><span class="text-red">Цей варіант не працюватиме!</span></td>
        </tr>
        </tbody>
    </table>
    <p>Коли компілятор зустріне подвійні лапки в коді, він вважатиме їх початком рядкового літерала, а наступні подвійні лапки — закінченням цього рядкового літерала.</p>
    <p>То як же записати подвійні лапки всередині літерала?</p>
    <hr>
    <h2>2. Екранування символів</h2>
    <p>Спосіб є — він має назву <span class="term">екранування символів</span>. Потрібно просто додати перед лапками всередині рядка тексту символ <code>\</code> (<span class="term">обернена скісна риска</span>, або <span class="term">обернений слеш</span>, або <span class="term">бекслеш</span>, від англ. <span class="term">backslash</span>).</p>
    <p>Отакий вигляд має правильно записаний рядковий літерал:</p>
    <table>
        <tbody>
        <tr>
            <th>Код</th>
            <th>Примітки</th>
        </tr>
        <tr>
            <td>
                <pre class="language-java"><code>String s = "Фільм <span class="token keyword">\"</span>Друзі<span class="token keyword">\"</span> номіновано на <span class="token keyword">\"</span>Оскар<span class="token keyword">\"</span>";</code></pre>
            </td>
            <td><span class="text-green">Це працюватиме!</span></td>
        </tr>
        </tbody>
    </table>
    <p>Компілятор усе зрозуміє правильно й не вважатиме лапки після <span class="term">оберненої скісної риски</span> звичайними лапками.</p>
    <p>До того ж, якщо потрібно вивести цей рядок на екран, лапки з <span class="term">оберненою скісною рискою</span> будуть оброблені правильно, і на екран буде виведено напис без обернених скісних рисок: <code>Фільм "Друзі" номіновано на "Оскар"</code></p>
    <p>Ще один важливий момент. Лапки з оберненою скісною рискою перед ними — це один символ: ми просто користуємося таким хитрим способом запису, щоб компілятор міг правильно розпізнати рядкові літерали в коді. Лапки можна присвоїти змінній <code>char</code>:</p>
    <table>
        <tbody>
        <tr>
            <th>Код</th>
            <th>Примітки</th>
        </tr>
        <tr>
            <td>
                <pre class="language-java"><code>char c = '<span class="token keyword">\"</span>';</code></pre>
            </td>
            <td><code><span class="token keyword">\"</span></code> — це один символ, а не два</td>
        </tr>
        <tr>
            <td>
                <pre class="language-java"><code>char c = '<span class="text-neon">"</span>';</code></pre>
            </td>
            <td>так теж можна: <span class="text-neon">подвійна лапка</span> між одинарними лапками</td>
        </tr>
        </tbody>
    </table>
    <hr>
    <h2>3. Типові ситуації під час екранування символів</h2>
    <p><img data-id="58a9336a-ea2a-4606-9ece-2229a8f3e2f4" src="https://cdn.javarush.com/images/article/58a9336a-ea2a-4606-9ece-2229a8f3e2f4/original.png" alt="Типові ситуації під час екранування символів"/></p>
    <p>Крім подвійних лапок, є ще багато символів, які компілятор обробляє в особливий спосіб. Наприклад, переведення рядка.</p>
    <p>Як додати в літерал переведення рядка? Для цього теж є спеціальна комбінація:</p>
    <div class="lesson-example lesson-example--center">
        <pre class="lecture-code lecture-code--present language-java text-center"><code><span class="token keyword">\n</span></code></pre>
        <div class="lesson-example-caption">Символ переведення рядка</div>
    </div>
    <p>Якщо ви хочете вставити в рядковий літерал переведення рядка, потрібно просто додати пару символів — <code>\n</code>.</p>
    <p>Приклад:</p>
    <table>
        <tbody>
        <tr>
            <th>Код</th>
            <th>Виведення на екран</th>
        </tr>
        <tr>
            <td>
                <pre class="language-java"><code>System.out.println("З повагою<span class="token keyword">\n</span>Анонім");
            &nbsp;</code></pre>
            </td>
            <td><pre><code>З повагою
Анонім
</code></pre>
            </td>
        </tr>
        </tbody>
    </table>
    <p>Загалом таких комбінацій 8: їх також називають <span class="term">escape-послідовностями</span>. От їх перелік:</p>
    <table>
        <tbody>
        <tr>
            <th class="text-center">Код</th>
            <th>Опис</th>
        </tr>
        <tr>
            <td class="text-center"><code>\t</code></td>
            <td>Вставити символ <span class="text-red">табуляції</span></td>
        </tr>
        <tr>
            <td class="text-center"><code>\b</code></td>
            <td>Вставити символ <span class="text-red">повернення на один символ</span></td>
        </tr>
        <tr>
            <td class="text-center"><code>\n</code></td>
            <td>Вставити символ <span class="text-red">нового рядка</span></td>
        </tr>
        <tr>
            <td class="text-center"><code>\r</code></td>
            <td>Вставити символ <span class="text-red">повернення каретки</span></td>
        </tr>
        <tr>
            <td class="text-center"><code>\f</code></td>
            <td>Вставити символ <span class="text-red">прогону сторінки</span></td>
        </tr>
        <tr>
            <td class="text-center"><code>\'</code></td>
            <td>Вставити <span class="text-red">одинарну лапку</span></td>
        </tr>
        <tr>
            <td class="text-center"><code>\"</code></td>
            <td>Вставити <span class="text-red">подвійну лапку</span></td>
        </tr>
        <tr>
            <td class="text-center"><code>\\</code></td>
            <td>Вставити <span class="text-red">обернений слеш</span></td>
        </tr>
        </tbody>
    </table>
    <p>З двома з них ви вже познайомилися, а що означають інші 6?</p>
    <p><strong>Символ табуляції — <code>\t</code></strong></p>
    <p>Цей символ у тексті еквівалентний натисненню на клавіатурі клавіші <code>Tab</code> під час набору тексту. Він зсуває текст, який іде після нього, для вирівнювання.</p>
    <p>Приклад:</p>
    <table>
        <tbody>
        <tr>
            <th>Код</th>
            <th>Виведення на екран</th>
        </tr>
        <tr>
            <td>
<pre class="language-java"><code>System.out.println("0<span class="token keyword">\t</span>1<span class="token keyword">\t</span>2<span class="token keyword">\t</span>3");
System.out.println("0<span class="token keyword">\t</span>10<span class="token keyword">\t</span>20<span class="token keyword">\t</span>30");
System.out.println("0<span class="token keyword">\t</span>100<span class="token keyword">\t</span>200<span class="token keyword">\t</span>300");</code></pre>
            </td>
            <td>
<pre><code>0       1        2        3
0       10       20       30
0       100      200      300</code></pre>
            </td>
        </tr>
        </tbody>
    </table>
    <p><strong>Повернення на один символ назад — <code>\b</code></strong></p>
    <p>Цей символ у тексті еквівалентний натисненню на клавіатурі клавіші <code>Backspace</code> під час набору тексту. Він видаляє останній виведений перед ним символ:</p>
    <table>
        <tbody>
        <tr>
            <th>Код</th>
            <th>Виведення на екран</th>
        </tr>
        <tr>
            <td>
                <pre class="language-java"><code>System.out.println("Привіт<span class="token keyword">\b\b</span> світе!");</code></pre>
            </td>
            <td><pre><code>Прив світе!</code></pre></td>
        </tr>
        </tbody>
    </table>
    <p><strong>Символ повернення каретки — <code>\r</code></strong></p>
    <p>Цей символ переводить курсор на початок поточного рядка, не змінюючи текст. Текст, який буде виведено, зітре той, що є на екрані.</p>
    <p>Приклад:</p>
    <table>
        <tbody>
        <tr>
            <th>Код</th>
            <th>Виведення на екран</th>
        </tr>
        <tr>
            <td>
                <pre class="language-java"><code>System.out.println("Привіт тобі<span class="token keyword">\r</span>світе!");</code></pre>
            </td>
            <td>
                <pre><code>світе! тобі</code></pre>
            </td>
        </tr>
        </tbody>
    </table>
    <p><strong>Символ прогону сторінки — <code>\f</code></strong></p>
    <p>Цей символ дійшов до нас з епохи перших матричних принтерів. Якщо відправити такий символ на друк, то принтер просто проганяє поточну сторінку до кінця, не друкуючи тексту, і встановлює каретку на початок нової сторінки.</p>
    <p>Тепер ми назвали б цю дію «<span class="term">розрив сторінки</span>» або «<span class="term">нова сторінка</span>».</p>
    <p><strong>Обернений слеш – <code>\\</code></strong></p>
    <p>Ну а тут взагалі все просто. Якщо ми використовуємо обернену скісну риску (обернений слеш) в тексті, щоб екранувати символи, то як тоді записати в текстовому рядку символ скісної риски?</p>
    <p>Все просто: щоб додати в текст символ <span class="term">оберненої скісної риски</span>, його потрібно написати двічі.</p>
    <p>Приклад:</p>
    <table>
        <tbody>
        <tr>
            <th>Код</th>
            <th>Виведення на екран</th>
        </tr>
        <tr>
            <td>
                <pre class="language-java"><code>System.out.println("c:<span class="text-red">\p</span>rojects<span class="text-red">\m</span>y<span class="token keyword">\f</span>irst");</code></pre>
            </td>
            <td><span class="text-red">Компілятор сваритиметься на невідомі екрановані символи.</span></td>
        </tr>
        <tr>
            <td>
                <pre class="language-java"><code>System.out.println("c:<span class="token keyword">\\</span>projects<span class="token keyword">\\</span>my<span class="token keyword">\\</span>first");</code></pre>
            </td>
            <td>Отак правильно!</td>
        </tr>
        </tbody>
    </table>
    <hr>
    <div class="task-widget-container" showCover="true" taskKey="ua.javarush.task.pro.task09.task0909"></div>
    <hr>
    <h2>4. Кодування Unicode</h2>
    <p>Як ви вже знаєте, кожному символу, що відображається на екрані, відповідає певний числовий код. Стандартизований набір таких кодів називають <span class="term">кодуванням</span>.</p>
    <p>У давні часи, коли комп'ютери тільки-но винайшли, для кодування всіх символів було достатньо семи бітів (менше одного байта) — перша таблиця кодування містила лише 128 символів. Це кодування має назву <span class="term">ASCII</span>.</p>
    <p><span class="term">ASCII</span> (англ. American Standard Code for Information Interchange) — американська стандартна таблиця кодування друкованих символів і деяких спеціальних кодів.</p>
    <p>Вона містила 33 недруковані керівні символи (що впливають на обробку тексту й пробілів) і 95 друкованих символів: цифри, малі та великі літери латинського алфавіту й розділові знаки.</p>
    <p><img data-id="79996dba-834e-45f2-80b2-d0e94313d71f" src="https://cdn.javarush.com/images/article/79996dba-834e-45f2-80b2-d0e94313d71f/original.png" alt="Кодування Unicode"/></p>
    <p>Внаслідок зростання популярності комп'ютерів кожна країна почала створювати своє кодування. Зазвичай за основу брали кодування ASCII і замінювали рідко використовувані символи на символи національних алфавітів.</p>
    <p>З часом з'явилася ідея створити єдине кодування, яке б містило всі символи всіх світових кодувань.</p>
    <p><img data-max-width="512" data-id="e4c91b78-26da-4f16-aed7-d227d6d0e691" src="https://cdn.javarush.com/images/article/e4c91b78-26da-4f16-aed7-d227d6d0e691/original.png" alt=""></p>
    <p>У 1993 році було створено кодування <span class="term">Unicode</span>, і мова Java була першою мовою програмування, що почала використовувати його як стандарт зберігання тексту. Тепер Unicode — це стандарт усієї ІТ-індустрії.</p>
    <p>Unicode є основним стандартом, але він має кілька форм подання (Unicode transformation format, UTF): UTF-8, UTF-16 і UTF-32 та інші.</p>
    <p>У Java використовується розширений варіант кодування Unicode — UTF-16, де кожен символ кодується 16 бітами (2 байтами). Ця таблиця здатна вмістити до 65 536 символів!</p>
    <p>У цьому кодуванні можна знайти майже всі символи всіх алфавітів світу. Але напам'ять її, природно, ніхто не знає: не можна знати все, але все можна нагуглити.</p>
    <p>Щоб записати в коді програми символ у форматі Unicode, потрібно написати <code>\u</code> + <span class="term">шістнадцятковий&nbsp;код</span>. Наприклад, <code>\u00A9</code></p>
    <table>
        <tbody>
        <tr>
            <th>Код</th>
            <th>Виведення на екран</th>
        </tr>
        <tr>
            <td>
                <pre class="language-java"><code> System.out.println("<span class="token keyword">\u00A9</span> JavaRush");</code></pre>
            </td>
            <td><pre><code>© JavaRush</code></pre></td>
        </tr>
        </tbody>
    </table>
    <hr>
    <div class="task-widget-container" showCover="true" taskKey="ua.javarush.task.pro.task09.task0910"></div>
    <hr>
    <h2>5. Unicode: codepoint</h2>
    <p>640 кілобайт вистачить усім! Або ні. (Цей вислів приписують Біллу Гейтсу).</p>
    <p>Життя — сувора штука, і кодування UTF-16 з часом стало не вистачати. Раптом з'ясувалося, що в Азії є ціла купа мов, а в цих мовах є ціла купа найрізноманітніших літер та ієрогліфів. І всі ці літери та ієрогліфи жодним чином неможливо втиснути у 2 байти.</p>
    <p>І що ж робити? Використовувати <strong>більше байтів</strong>!</p>
    <p>Однак тип char має лише 2 байти, і змінити його розмір на 4 байти не так просто: у світі написано мільярди рядків коду мовою Java, які працюватимуть неправильно, якщо зненацька тип char в Java-машині збільшиться до 4 байтів. Отже, змінювати тип char не можна!</p>
    <p>Натомість є інший спосіб. Згадайте, як ми екранували символи за допомогою префікса у вигляді скісної риски. Ми, по суті, кодували один символ за допомогою декількох символів.</p>
    <p>Розробники Java вирішили використати такий самий підхід.</p>
    <p>Деякі символи, що візуально виглядають як один символ, у рядку кодуються двома <code>char</code>'ами:</p>
    <table>
        <tbody>
        <tr>
            <th>Код</th>
            <th>Виведення на екран</th>
        </tr>
        <tr>
            <td>
                <pre class="language-java"><code>System.out.println("<span class="token keyword">\uD83D\uDD0A</span>");</code></pre>
            </td>
            <td>
                <pre><code>🔊</code></pre>
            </td>
        </tr>
        </tbody>
    </table>
    <p>Тепер ваша програма на Java зможе виводити в консоль навіть смайлики 😎</p>
    <hr>
    <div class="task-widget-container" showCover="true" taskKey="ua.javarush.task.pro.task09.task0911"></div>