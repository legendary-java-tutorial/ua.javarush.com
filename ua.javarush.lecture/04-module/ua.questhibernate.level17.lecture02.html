Нормальні форми бази даних
<p>----------------------------------------</p>
перша нормальна форма
друга нормальна форма
третя нормальна форма
--------------------------------------------</p>
<h2>1. Нормалізація бази даних</h2>
<p>Нормальна форма — властивість відношення в реляційній моделі даних, що
    характеризує його з погляду надмірності, що потенційно призводить до логічно помилкових результатів вибірки або
    зміни даних. Нормальна форма окреслюється сукупністю вимог, яким має задовольняти відношення (таблиць у базі
    даних). </p>
<p>Процес перетворення відношень бази даних до виду, що відповідає нормальним формам, називається
    нормалізацією. Нормалізація призначена для приведення структури БД до виду, що забезпечує <span class="text-green">мінімальну логічну надмірність</span>,
    і не має на меті зменшення або збільшення продуктивності роботи або зменшення чи збільшення фізичного обсягу бази
    даних</span>. </p>
<p>Кінцевою метою нормалізації є зменшення потенційної суперечливості, що зберігається в базі
    даних інформації. Загальне призначення процесу нормалізації полягає в наступному: </p>
<ul>
    <li>виключення деяких типів надмірності;</li>
    <li>усунення деяких аномалій оновлення;</li>
    <li>розробка проекту бази даних, який є досить «якісним» поданням реального світу, інтуїтивно зрозумілий і може бути
        гарною основою для подальшого розширення;</li>
    <li>спрощення процедури застосування необхідних обмежень цілісності.</li>
</ul>
<p>Усунення надмірності здійснюється, як правило, за рахунок декомпозиції відношень таким чином, щоб у кожному
    відношенні зберігалися тільки первинні факти (тобто факти, що не виводяться з інших фактів, що зберігаються). </p>
<p>Включно з фактом, що ідеї нормалізації дуже корисні для проєктування баз даних, вони аж ніяк не є універсальним чи вичерпним
    засобом підвищення якості проєкту БД. Це пов'язано з тим, що існує дуже велика різноманітність можливих помилок та
    недоліків у структурі БД, які нормалізацією не усуваються. </p>
<p>Незважаючи на ці міркування, теорія нормалізації є дуже цінним досягненням реляційної теорії та практики, оскільки вона дає науково суворі та обґрунтовані критерії
    якості проекту БД та формальні методи для вдосконалення цієї якості. Цим теорія нормалізації різко виділяється на
    тлі суто емпіричних підходів до проєктування, які пропонуються в інших моделях даних. Більше того, можна
    стверджувати, що у всій сфері інформаційних технологій практично відсутні методи оцінки та покращення проєктних
    рішень, які можна порівняти з теорією нормалізації реляційних баз даних за рівнем формальної суворості. </p>
<p>Нормалізацію іноді дорікають на тій підставі, що «це просто здоровий глузд», а будь-який компетентний професіонал і
    сам «природним чином» спроєктує повністю нормалізовану БД без необхідності застосовувати теорію залежностей. </p>
<p>Однак, як зазначав професор Крістофер Дейт, <strong>нормалізація точно і є тими принципами здорового глузду, якими
    керується у своїй свідомості зрілий проєктувальник, тобто принципи нормалізації — це формалізований здоровий
    глузд</strong>. Тим часом, ідентифікувати та формалізувати принципи здорового глузду — дуже важке завдання, і успіх
    у його вирішенні є суттєвим досягненням.</p>
<h2>2.Перша нормальна форма</h2>
<p><strong> Перша нормальна форма (1НФ) </strong> — базова нормальна форма відношення у реляційній моделі даних. </p>
<p><span class="text-green">Змінна відношення знаходиться в першій нормальній формі тоді і тільки тоді, коли в будь-якому допустимому значенні цієї змінної кожен кортеж відношення містить лише одне значення для кожного з атрибутів. </span></p>
<p>У реляційній моделі відношення завжди знаходиться в першій нормальній формі за визначенням поняття відношення. </p>
<p>Що ж стосується різних таблиць, то вони можуть не бути правильними уявленнями відношень і, відповідно, можуть не
    перебувати в 1НФ. Відповідно до визначення Крістофера Дейта, для такого випадку таблиця нормалізована (еквівалентно —
    знаходиться в першій нормальній формі) тоді і тільки тоді, коли вона є прямим і вірним представленням якогось відношення.
    Конкретніше, таблиця, що розглядається, має задовольняти наступним п'яти умовам: </p>
<ul>
    <li>Немає упорядкування рядків зверху донизу (іншими словами, порядок рядків не несе в собі жодної інформації).</li>
    <li>Немає впорядкування стовпців зліва направо (іншими словами, порядок стовпців не несе в собі жодної інформації).</li>
    <li>Немає рядків, що повторюються.</li>
    <li>Кожен перетин рядка та стовпця містить рівно одне значення з відповідного домену (і більше нічого).</li>
    <li>Всі стовпці є «звичайними».</li>
</ul>
<p>«Звичайність» всіх стовпців таблиці означає, що в таблиці немає «прихованих» компонентів, які можуть бути
    доступні лише у виклику якогось спеціального оператора замість посилань на імена регулярних стовпців, або які
    призводять до побічних ефектів для рядків або таблиць під час виклику стандартних операторів. </p>
<p>Початкова ненормалізована (тобто не є правильним представленням деякого відношення) таблиця: </p>
<table>
    <tbody>
    <tr>
        <th>Співробітник</th>
        <th>Номер телефону</th>
    </tr>
    <tr>
        <td>Іванов І. І.</td>
        <td><p>283-56-82</p>
            <p>390-57-34</p></td>
    </tr>
    <tr>
        <td>Петров П. П.</td>
        <td>708-62-34</td>
    </tr>
    <tr>
        <td>Сідоров С.С.</td>
        <td></td>
    </tr>
    </tbody>
</table> <p>Таблиця, приведена до 1НФ, є правильним представленням певного відношення: </p>
<table>
    <tbody>
    <tr>
        <th>Співробітник</th>
        <th>Номер телефону</th>
    </tr>
    <tr>
        <td>Іванов І. І.</td>
        <td>283-56-82</td>
    </tr>
    <tr>
        <td>Іванов І. І.</td>
        <td>390-57-34</td>
    </tr>
    <tr>
        <td>Петров П. П.</td>
        <td>708 -62-34</td>
    </tr>
    </tbody>
</table>
<h2>3. Друга нормальна форма </h2>
<p>Змінна відношення знаходиться в другій нормальній формі тоді і тільки
    тоді, коли вона знаходиться в першій нормальній формі та <span class="text-green">кожний неключовий атрибут незвідно залежить від (кожного) її потенційного ключа</span>.</p>
<p>Незвідність означає, що у складі потенційного ключа відсутня менша підмножина атрибутів, від якої можна
    також вивести цю функціональну залежність. Для функціональної залежності, що не наводиться, часто використовується
    еквівалентне поняття «повна функціональна залежність». </p>
<p>Якщо потенційний ключ є простим, тобто складається з єдиного атрибуту, то будь-яка функціональна залежність від нього є незвідною (повною). Якщо потенційний ключ є
    зіставним, то, згідно з визначенням другої нормальної форми, у відношенні не повинно бути неключових атрибутів, що залежать
    від частини зістаавного потенційного ключа. </p>
<p>Приклад приведення ставлення до <strong>другої нормальної форми </strong></p>
<p>Нехай у наступному відношенні первинний ключ утворює пару атрибутів {Філія компанії, Посада}: </p>
<center><strong>R</strong></center>
<table>
    <tbody>
    <tr>
        <th>Філія компанії</th>
        <th>Посада</th>
        <th>Зарплата</th>
        <th>Наявність комп'ютера</th>
    </tr>
    <tr>
        <td>Філія в Черкасах</td>
        <td>Прибиральник</td>
        <td>20000</td>
        <td>Ні</td>
    </tr>
    <tr>
        <td>Філія в Києві</td>
        <td>Програміст</td>
        <td>40000</td>
        <td>Є</td>
    </tr>
    <tr>
        <td>Філія в Черкасах</td>
        <td>Програміст</td>
        <td>25000</td>
        <td>Є</td>
    </tr>
    </tbody>
</table>
<p>Припустимо, що зарплата залежить від філії та посади, а наявність комп'ютера залежить тільки від посади.</p>
<p>Існує функціональна залежність Посада -&gt; Наявність комп'ютера, де ліва частина (детермінант) є лише частиною
    первинного ключа, що порушує умова другої нормальної форми. </p>
<p>Для приведення до 2NF вихідне відношення слід декомпозувати на два відношення: </p>
<center><strong>R1</strong></center>
<table>
    <tbody>
    <tr>
        <th>Філія компанії</th>
        <th>Посада</th>
        <th>Зарплата</th>
    </tr>
    <tr>
        <td>Філія в Черкасах</td>
        <td>Прибиральник</td>
        <td> 20000</td>
    </tr>
    <tr>
        <td>Філія в Києві</td>
        <td>Програміст</td>
        <td>40000</td>
    </tr>
    <tr>
        <td>Філія в Черкасах</td>
        <td>Програміст</td>
        <td>25000</td>
    </tr>
    </tbody>
</table>
<center><strong>R2</strong></center>
<table>
    <tbody>
    <tr>
        <th>Посада</th>
        <th>Наявність комп'ютера</th>
    </tr>
    <tr>
        <td>Прибиральник</td>
        <td>Ні</td>
    </tr>
    <tr>
        <td>Програміст</td>
        <td>Є</td>
    </tr>
    <tr>
        <td>Програміст</td>
        <td>Є</td>
    </tr>
    </tbody>
</table>
<h2>4. Третя нормальна форма (3НФ, 3NF) </h2>
<p>Змінна відношення R знаходиться в 3NF тоді і тільки тоді, коли виконуються такі умови: </p>
<ul>
    <li> <mark class="green">R</mark> знаходиться у другій нормальній формі.</li>
    <li>жоден неключовий атрибут <mark class="green">R</mark> не знаходиться в транзитивній функціональній залежності від потенційного ключа <mark class="green">R</mark>. </li>
</ul>
<p>Пояснення до визначення: </p>
<p>Неключовий атрибут відношення R — це атрибут, який не належить жодному з
    потенційних ключів R. </p>
<p>Функціональна залежність множини атрибутів Z від безлічі атрибутів X (записується X →
    Z, вимовляється «ікс визначає зет») є транзитивною, якщо існує така безліч атрибутів Y, що X → Y і Y → Z. Водночас
    жодна з множин X, Y і Z не є підмножиною іншого, тобто функціональні залежності X → Z, X → Y та Y → Z не є
    тривіальними, а також відсутня функціональна залежність Y → X. </p>
<p>Визначення 3NF, еквівалентне визначенню Кодда, але по-іншому сформульоване, дав Карло Заніоло у 1982 році. Згідно з ним, змінна відношення знаходиться в 3NF
    тоді і тільки тоді, коли для кожної з її функціональних залежностей X → A виконується хоча б одна з наступних
    умов: </p>
<ul>
    <li>Х містить А (тобто X → A — тривіальна функціональна залежність)</li>
    <li>Х — суперключ</li>
    <li>А — ключовий атрибут (тобто А входить до складу потенційного ключа).</li>
</ul>
<p>Визначення Заніоло чітко визначає різницю між 3NF і більш строгою нормальною формою Бойса-Кодда (НФБК): НФБК
    виключає третю умову («А - ключовий атрибут»). </p>
<p>Запам'ятовуване і, за традицією, наочне резюме визначення 3NF Кодда було дано Біллом Кентом: кожен неключовий атрибут «має надавати інформацію про ключ, повний ключ і <strong>ні про що, крім ключа</strong>». </p>
<p>Умова залежності від «повного ключа» неключових атрибутів забезпечує те,
    що відношення знаходиться у другій нормальній формі; а умова залежності їх від «нічого, крім ключа» — те, що вони
    перебувають у третій нормальній формі. </p>
<p>Кріс Дейт говорить про резюме Кента як про «інтуїтивно привабливу характеристику» 3NF, і зауважує, що з невеликою зміною вона може служити і як визначення більш строгої нормальної форми Бойса-Кодда: «кожен атрибут повинен надавати інформацію про ключі, повному ключі і ні про що, крім ключа». </p>
<p>Варіант визначення 3NF Кента є менш суворим, ніж варіант нормальної форми Бойса-Кодда у формулюванні Дейта, оскільки
    перша стверджує лише те, що неключові атрибути залежать від ключів. </p>
<p>Первинні атрибути (які є ключами або їх частинами) зовсім не повинні бути функціонально залежними; кожен з них надає інформацію про ключ наданням самого
    ключа або його частини. Тут слід зазначити, що це правило справедливе тільки для неключових атрибутів, оскільки
    застосування його до всіх атрибутів повністю заборонятиме всі складні альтернативні ключі, оскільки кожен елемент
    такого ключа буде порушувати умову «повного ключа». </p>
<p>Розглянемо як приклад змінну відношення R1: </p>
<center><strong>R1</strong></center>
<table>
    <tbody>
    <tr>
        <th>Співробітник</th>
        <th>Відділ</th>
        <th>Телефон</th>
    </tr>
    <tr>
        <td>Гришин</td>
        <td>Бухгалтерія</td>
        <td>11-22-33</td>
    </tr>
    <tr>
        <td>Васильєв</td>
        <td>Бухгалтерія</td>
        <td>11-22-33</td>
    </tr>
    <tr>
        <td>Петров</td>
        <td>Постачання</td>
        <td>44-55-66</td>
    </tr>
    </tbody>
</table>
<p>Кожен співробітник належить виключно до одного відділу; кожен відділ має єдиний телефон. Атрибут
    Співробітник є первинним ключем. Особистих телефонів співробітників немає, і телефон співробітника залежить виключно
    від відділу. </p>
<p>У прикладі є такі функціональні залежності: Співробітник → Відділ, Відділ → Телефон,
    Співробітник → Телефон. </p>
<p>Змінні відносини R1 перебувають у другій нормальній формі, оскільки кожен атрибут
    має не наведену функціональну залежність від потенційного ключа Співробітник. </p>
<p>Залежність Співробітник → Телефон є транзитивною, отже, відношення не знаходиться в третій нормальній формі.</p>
<p>В результаті поділу R1 виходять два змінні відносини, що знаходяться в 3NF: </p>
<center><strong>R2</strong></center>
<table>
    <tbody>
    <tr>
        <th>Відділ</th>
        <th>Телефон</th>
    </tr>
    <tr>
        <td>Бухгалтерія</td>
        <td>11-22-33</td>
    </tr>
    <tr>
        <td>Постачання</td>
        <td>44-55-66</td>
    </tr>
    </tbody>
</table>
<hr>
<center><strong>R3</strong></center>
<table>
    <tbody>
    <tr>
        <th>Співробітник</th>
        <th>Відділ</th>
    </tr>
    <tr>
        <td>Гришин</td>
        <td>Бухгалтерія</td>
    </tr>
    <tr>
        <td>Васильєв</td>
        <td>Бухгалтерія</td>
    </tr>
    <tr>
        <td>Петров</td>
        <td>Постачання</td>
    </tr>
    </tbody>
</table>
<p>Вихідне відношення R1 в разі необхідності легко виходить в результаті операції з'єднання відносин R2 і
    R3.</p>