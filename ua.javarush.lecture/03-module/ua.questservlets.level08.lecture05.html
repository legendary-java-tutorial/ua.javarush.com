<h2>6.1 Знайомство з VPN</h2>
<p><strong>Virtual Private Network</strong> або <strong>VPN</strong> – це буквально віртуальна приватна мережа. Швидше за все, ти часто чув слово VPN, коли хотіли підмінити країну у браузері телефону чи комп'ютера. Запустив VPN, вибрав країну та готово.</p><img data-max-width="1024" data-id="eb34b361-7688-4879-a34b-207ae47f7f9d" alt="Знайомство з VPN" src="https://cdn.javarush.com/images/article/eb34b361-7688-4879-a34b-207ae47f7f9d/1024.jpeg" style="width: 1024px;">
<p>Хоча VPN до країн, власне, ніякого відношення не має. Справа трохи по-іншому.</p>
<p>Уяви, що ти працюєш в офісі на комп'ютері, і в цьому офісі є різне комп'ютерне обладнання з доступом через мережу: комп'ютери, сервери, принтери, обладнання для відеоконференцій.</p>
<p><strong>Ситуація 1</strong> : твій офіс виріс, ти вирішив переїхати на сусідній поверх. Ти взяв свій комп'ютер, переніс його в іншу кімнату, підключив в іншу розетку і доступ до всіх серверів і комп'ютерів компанії у тебе зберігся.</p>
<p>Швидше за все, ваш комп'ютер звертається тепер до іншого роутера, але всі роутери вашої компанії знають, як спілкуватися один з одним і забезпечують тобі всі переваги знаходження в одній локальній мережі. У тебе немає проблем із доступом до будь-якого обладнання в корпоративній мережі.</p>
<p><strong>Ситуація 2</strong> : почалася пандемія, і ти вирішив працювати з дому. Ти забрав робочий комп'ютер додому, але невдача, доступу до офісних серверів вдома немає. Начебто логічно, адже вони залишабося на офісі в іншому кінці міста. З іншого боку, постає питання: коли ти переніс комп'ютер у першому випадку, то доступ до офісних комп'ютерів у тебе зберігся. Коли ти переніс комп'ютер у другому випадку, то немає доступу. Що змінилося?</p>
<p>У першому випадку всі комп'ютери у твоєму офісі (навіть розташовані на різних поверхах) знаходабося в одній локальній мережі. А у другому випадку – ні. Ваш комп'ютер вдома не підключений до офісної локальної мережі. Відповідно, у тебе немає доступу до внутрішніх ресурсів офісної мережі.</p>
<p>Як усунення цієї проблеми було запропоновано рішення – <strong>віртуальна локальна мережа</strong> (VPN). У тебе в офісі на кожному поверсі стояло по роутеру, які пересилали між собою дані та забезпечували роботу локальної мережі.</p>
<p>Нам потрібно створити два <strong>віртуальні роутери</strong> (у вигляді програм), один у тебе в офісі, другий – будинки, які так само будуть пересилати між собою дані по інтернету в зашифрованому вигляді. І такі програми є: одна з них називається <strong>VPN-сервер</strong> , а друга – <strong>VPN-клієнт</strong> .</p>
<p>VPN-сервер налаштовує системний адміністратор в офісі, а VPN-клієнт зараз є у кожному комп'ютері та/або телефоні.</p>
<p>Ти запускаєш у себе на комп'ютері VPN-клієнт і конєктуєшся з його допомогою до VPN-сервера, таким чином комп'ютер тепер думає, що він знаходиться всередині локальної мережі, в якій розташований VPN-сервер.</p>
<p>Якщо ти тепер запустиш у себе браузер, то всі дані від твого браузера підуть у твій локальний віртуальний роутер (VPN-клієнт), з нього до віртуального роутера компанії (VPN-сервер), а потім уже далі у світ через інтернет-шлюз офісу твоєї компанії.</p>
<p>Зовнішня IP-адресаа твого комп'ютера тепер співпадатиме з публічною IP-адресаою твого офісу. І якщо цей офіс був, наприклад, у Німеччині, то сервер, до якого звертався твій браузер, впевнений, що ти в офісі в Німеччині.</p>
<h2>6.2 Типи VPN</h2>
<p>Мережі VPN діляться за їх цільовими функціями. Можна виділити багато різних, але ось список типових варіантів VPN-рішень:</p>
<h3>Intranet VPN</h3>
<p>Використовується для об'єднання в єдину захищену мережу кількох розподілених філій однієї організації, що обмінюються даними відкритими каналами зв'язку. Це перший варіант, з якого все почалося.</p>
<h3>Remote-access VPN</h3>
<p>Використовується для створення захищеного каналу між сегментом корпоративної мережі (центральним офісом або філією) та одиночним користувачем, який, працюючи вдома, підключається до корпоративних ресурсів із домашнього комп'ютера, корпоративного ноутбука, смартфона чи інтернет-кіоску. Саме цей варіант у тебе, якщо ти працюєш із дому та підключаєшся до офісу через VPN.</p>
<h3>Extranet VPN</h3>
<p>Використовується для мереж, до яких підключаються зовнішні користувачі (наприклад, замовники або клієнти). Рівень довіри до них набагато нижчий, ніж до співробітників компанії, тому потрібне забезпечення спеціальних "рубежів" захисту, що запобігають або обмежують доступ останніх до особливо цінної, конфіденційної інформації.</p>
<h3>Internet VPN</h3>
<p>Використовується провайдерами для надання доступу до інтернету, зазвичай, якщо по одному фізичному каналу підключаються декілька користувачів. Протокол PPPoE став стандартом ADSL-підключень.</p>
<p>L2TP був широко поширений у середині 2000-х років у будинкових мережах: на той час внутрішньомережевий трафік не оплачувався, а зовнішній коштував дорого. Це дозволяло контролювати витрати: коли VPN-з'єднання вимкнено, користувач нічого не платить.</p>
<p>В даний час дротовий інтернет дешевий або безлімітний, а на стороні користувача найчастіше є маршрутизатор, на якому вмикати-вимикати інтернет не так зручно, як на комп'ютері. Тому L2TP-доступ відходить у минуле.</p>
<h3>Client/server VPN</h3>
<p>Також популярний варіант. Він забезпечує захист даних між двома вузлами (не мережами) корпоративної мережі. Особливість цього варіанта в тому, що VPN будується між вузлами, що знаходяться, як правило, в одному сегменті мережі, наприклад, між робочою станцією та сервером. Така необхідність часто виникає у тому випадку, як у однієї фізичної мережі необхідно створити кілька логічних мереж.</p>
<p>Наприклад, коли треба розділити трафік між фінансовим департаментом та відділом кадрів, які звертаються до серверів, що знаходяться в одному фізичному сегменті. Цей варіант схожий на технологію VLAN, але замість розподілу трафіку використовується його шифрування.</p>
<h2>6.3 OpenVPN</h2>
<p>Пам'ятаєте, ми говорабо про віртуальний роутер на стороні офісу, до якого можна скластися за допомогою VPN-клієнтів? Так ось є одне дуже популярне рішення, про яке вам корисно буде дізнатися. Це OpenVPN.</p>
<p><strong>OpenVPN</strong> – це безкоштовна програма, яка реалізує технологію віртуальної приватної мережі (VPN). Вона підтримує два популярні режими роботи: клієнт-сервер і точка-точка, коли потрібно об'єднати дві великі мережі.</p>
<p>Вона підтримує добрий рівень шифрування трафіку між своїми учасниками, а також дозволяє встановлювати з'єднання між комп'ютерами, що знаходяться за NAT і мережевим екраном, без зміни їх налаштувань.</p>
<p>Для забезпечення безпеки керуючого каналу та потоку даних OpenVPN використовує бібліотеку <strong>OpenSSL</strong> . Це дозволяє використовувати весь набір алгоритмів шифрування, доступних у цій бібліотеці.</p>
<p>Також може використовуватися пакетна автентифікація <strong>HMAC</strong> для забезпечення більшої безпеки та апаратне прискорення для покращення продуктивності шифрування. Ця бібліотека використовує OpenSSL, а точніше протоколи <strong>SSLv3/TLSv1.2</strong> .</p>
<p>Є реалізацію цієї програми під всі популярні операційні системи: Solaris, OpenBSD, FreeBSD, NetBSD, GNU/Linux, Apple Mac OS X, QNX, Microsoft Windows, Android, iOS.</p>
<p>OpenVPN пропонує користувачеві <strong>кілька видів аутентифікації</strong> :</p>
<ul>
 <li><strong>Передвстановлений ключ</strong> - найпростіший метод.</li>
 <li><strong>Сертифікатна автентифікація</strong> - найбільш гнучкий метод налаштування.</li>
 <li>За допомогою <strong>логіну</strong> та <strong>пароля</strong> може використовуватися без створення клієнтського сертифіката (серверний сертифікат все одно потрібен).</li>
</ul>
<h3>Технічна інформація</h3>
<p>OpenVPN проводить усі мережеві операції через TCP- або UDP-транспорт. У загальному випадку переважним є UDP, тому що через тунель проходить трафік мережевого рівня і вище OSI, якщо використовується TUN-з'єднання, або трафік канального рівня і вище, якщо використовується TAP.</p>
<p>Це означає, що OpenVPN для клієнта виступає протоколом канального або навіть фізичного рівня, а значить, надійність передачі може забезпечуватися вищими за OSI рівнями, якщо це необхідно.</p>
<p>Зважаючи на те, що ми добре розібрали модель OSI, ви повинні розуміти, про що тут йдеться.</p>
<p>Саме тому протокол UDP за своєю концепцією найбільш близький до OpenVPN, оскільки він, як і протоколи канального та фізичного рівнів, не забезпечує надійності з'єднання, передаючи цю ініціативу вищим рівням. Якщо ж налаштувати тунель на роботу з ТСР, сервер у типовому випадку отримуватиме ТСР-сегменти OpenVPN, які містять інші ТСР-сегменти від клієнта.</p>
<p>Також, що важливо, OpenVPN може працювати через більшу частину проксі-серверів, включаючи HTTP, SOCKS, через NAT і мережеві фільтри. Сервер може бути налаштований на призначення мережевих установок клієнту. Наприклад, IP-адресаа, налаштування маршрутизації та параметри з'єднання. </p>