<h2>Знайомство з CollectionUtils</h2>
<p>Ще один універсальний утилітний клас, який містить багато корисних методів:</p>
<div class="table-container">
 <table>
  <tbody>
   <tr>
    <td width="700"><span class="code text-orange">addAll(Collection&lt;C&gt; collection, C... elements)</span></td>
    <td>Додає всі елементи масиву C до колекції</td>
   </tr>
   <tr>
    <td><span class="code text-orange">addIgnoreNull(Collection&lt;T&gt; collection, T object)</span></td>
    <td>Додає елемент, якщо він не null</td>
   </tr>
   <tr>
    <td><span class="code text-orange">containsAll(Collection&lt;?&gt;coll1, Collection&lt;?&gt;coll2)</span></td>
    <td>Перевіряє, що колекція1 містить усі елементи колекції2</td>
   </tr>
   <tr>
    <td><span class="code text-orange">containsAny(Collection&lt;?&gt;coll1, Collection&lt;?&gt;coll2)</span></td>
    <td>Перевіряє, що колекція1 містить хоча б один елемент із колекції2</td>
   </tr>
   <tr>
    <td><span class="code text-orange">countMatches(Iterable&lt;C&gt; input, Predicate&lt;? super C&gt; predicate)</span></td>
    <td>Підраховує, скільки елементів колекції задовольняють правило.</td>
   </tr>
   <tr>
    <td><span class="code text-orange">disjunction(Iterable&lt;? extends O&gt; a, Iterable&lt;? extends O&gt; b)</span></td>
    <td>Повертає об'єкти, які входять тільки в одну колекцію, але не відразу в обидві</td>
   </tr>
   <tr>
    <td><span class="code text-orange">intersection(Iterable&lt;? extends O&gt; a, Iterable&lt;? extends O&gt; b)</span></td>
    <td>Повертає колекцію об'єктів, які входять відразу в обидві колекції</td>
   </tr>
   <tr>
    <td><span class="code text-orange">union(Iterable&lt;? extends O&gt; a, Iterable&lt;? extends O&gt; b)</span></td>
    <td>Повертає колекцію об'єктів, які входять хоча б до однієї колекції</td>
   </tr>
   <tr>
    <td><span class="code text-orange">emptyCollection()</span></td>
    <td>Повертає спеціальну порожню колекцію</td>
   </tr>
   <tr>
    <td><span class="code text-orange">emptyIfNull(Collection&lt;T&gt; collection)</span></td>
    <td>Повертає порожню колекцію, якщо collection == null</td>
   </tr>
   <tr>
    <td><span class="code text-orange">exists(Iterable&lt;C&gt; input, Predicate&lt;? super C&gt; predicate)</span></td>
    <td>Перевіряє, що у колекції існує елемент, що задовольняє правилу.</td>
   </tr>
   <tr>
    <td><span class="code text-orange">extractSingleton(Collection&lt;E&gt; collection)</span></td>
    <td>Повертає єдиний елемент колекції</td>
   </tr>
   <tr>
    <td><span class="code text-orange">filter(Iterable&lt;T&gt; collection, Predicate&lt;? super T&gt; predicate)</span></td>
    <td>Фільтрує елементи колекції</td>
   </tr>
   <tr>
    <td><span class="code text-orange">find(Iterable&lt;T&gt; collection, Predicate&lt;? super T&gt; predicate)</span></td>
    <td>Шукає елементи колекції</td>
   </tr>
   <tr>
    <td><span class="code text-orange">isEmpty(Collection&lt;?&gt; coll)</span></td>
    <td>Перевіряє, що колекція порожня</td>
   </tr>
   <tr>
    <td><span class="code text-orange">isEqualCollection(Collection&lt;?&gt; a, Collection&lt;?&gt; b)</span></td>
    <td>Порівнює колекції</td>
   </tr>
   <tr>
    <td><span class="code text-orange">isFull(Collection&lt;? extends Object&gt; coll)</span></td>
    <td>Перевіряє, чи можна ще додати елемент до колекції</td>
   </tr>
   <tr>
    <td><span class="code text-orange">isNotEmpty(Collection&lt;?&gt; coll)</span></td>
    <td>Перевірять, що колекція не пуста</td>
   </tr>
   <tr>
    <td><span class="code text-orange">isSubCollection(Collection&lt;?&gt; a, Collection&lt;?&gt; b)</span></td>
    <td>Перевіряє, що колекція B входить до колекції A</td>
   </tr>
   <tr>
    <td><span class="code text-orange">matchAll(Iterable&lt;C&gt; input, Predicate&lt;? super C&gt; predicate)</span></td>
    <td>Перевіряє, що всі елементи колекції задовольняють правилу.</td>
   </tr>
   <tr>
    <td><span class="code text-orange">removeAll(Collection&lt;E&gt; collection, Collection&lt;?&gt; remove)</span></td>
    <td>Видаляє всі елементи колекції</td>
   </tr>
   <tr>
    <td><span class="code text-orange">retainAll(Collection&lt;C&gt; collection, Collection&lt;?&gt; retain)</span></td>
    <td>Повертає колекцію, що містить всі елементи collection, які також містяться в retain</td>
   </tr>
   <tr>
    <td><span class="code text-orange">reverseArray(Object[] array)</span></td>
    <td>Розвертає масив задом на перед</td>
   </tr>
   <tr>
    <td><span class="code text-orange">unmodifiableCollection(Collection&lt;? extends C&gt; collection)</span></td>
    <td>Повертає обгортку над колекцією. Будь-яка спроба модифікувати колекцію кине виняток.</td>
   </tr>
  </tbody>
 </table>
</div>
<p>Розглянемо деякі методи.</p>
<h2>Способи перевірити чи порожня колекція</h2>
<p>Ось як просто визначити, чи колекція є порожньою:</p>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class=" language-java"><span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singleton</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span></code></pre>
<p>Також легко перевірити, що колекція не порожня:</p>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class=" language-java"><span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singleton</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code></pre>
<p>Приклади:</p>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token class-name">User</span> ivan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"Ivan"</span><span class="token punctuation">,</span> <span class="token string">"ivan@email.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">User</span> petr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"Petr"</span><span class="token punctuation">,</span> <span class="token string">"petr@email.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>

users<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>ivan<span class="token punctuation">)</span><span class="token punctuation">;</span>
users<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>petr<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

users <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span></code></pre>
<p><a href="https://www.baeldung.com/apache-commons-collection-utils" target="_blank">A Guide to Apache Commons Collections CollectionUtils</a></p>
<h2>Операції над множинами</h2>
<p>Якщо тобі доводилося стикатися з теорією множин, то ти знаєш, що над множинами існують 4 основні операції: об'єднання, перетин, різниця та диз'юнкція.</p><img data-max-width="800" data-id="33592357-0b07-4f2d-ac05-c336539da1cf" alt="" src="https://cdn.javarush.com/images/article/33592357-0b07-4f2d-ac05-c336539da1cf/800.jpeg" style="width: 800px;">
<p>Для цих операцій у класу <span class="code"><span class="text-green">CollectionUtils <span class="code"><span class="text-green"> </span></span>є 4 методи: </span></span></p>
<ul>
 <li><span class="code text-orange">union()</span></li>
 <li><span class="code text-orange">intersection()</span></li>
 <li><span class="code text-orange">disjunction()</span></li>
 <li><span class="code text-orange">subtract()</span></li>
</ul>
<p>Нижче буде кілька простих прикладів:</p>
<h3>Об'єднання</h3>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> firstList <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token string">"2"</span><span class="token punctuation">,</span> <span class="token string">"3"</span><span class="token punctuation">,</span> <span class="token string">"4"</span><span class="token punctuation">,</span> <span class="token string">"5"</span><span class="token punctuation">,</span> <span class="token string">"6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> secondList <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">,</span> <span class="token string">"3"</span><span class="token punctuation">,</span> <span class="token string">"6"</span><span class="token punctuation">,</span> <span class="token string">"7"</span><span class="token punctuation">,</span> <span class="token string">"8"</span><span class="token punctuation">,</span> <span class="token string">"9"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//об'єднуємо дві множини</span>
<span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">union</span><span class="token punctuation">(</span>firstList<span class="token punctuation">,</span> secondList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">ArrayUtils</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//[1, 2, 3, 4, 5, 6, 7, 8, 9]</span></code></pre>
<h3>Перетин</h3>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> firstList <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token string">"B"</span><span class="token punctuation">,</span> <span class="token string">"C"</span><span class="token punctuation">,</span> <span class="token string">"D"</span><span class="token punctuation">,</span> <span class="token string">"E"</span><span class="token punctuation">,</span> <span class="token string">"F"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> secondList <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"B"</span><span class="token punctuation">,</span> <span class="token string">"D"</span><span class="token punctuation">,</span> <span class="token string">"F"</span><span class="token punctuation">,</span> <span class="token string">"G"</span><span class="token punctuation">,</span> <span class="token string">"H"</span><span class="token punctuation">,</span> <span class="token string">"K"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//перетину двох множин</span>
<span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">intersection</span><span class="token punctuation">(</span>firstList<span class="token punctuation">,</span> secondList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">ArrayUtils</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//[B, D, F]</span></code></pre>
<h3>Диз'юнкція</h3>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> firstList <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token string">"2"</span><span class="token punctuation">,</span> <span class="token string">"3"</span><span class="token punctuation">,</span> <span class="token string">"4"</span><span class="token punctuation">,</span> <span class="token string">"5"</span><span class="token punctuation">,</span> <span class="token string">"6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> secondList <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">,</span> <span class="token string">"3"</span><span class="token punctuation">,</span> <span class="token string">"6"</span><span class="token punctuation">,</span> <span class="token string">"7"</span><span class="token punctuation">,</span> <span class="token string">"8"</span><span class="token punctuation">,</span> <span class="token string">"9"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//диз'юнкція</span>
<span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">disjunction</span><span class="token punctuation">(</span>firstList<span class="token punctuation">,</span> secondList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">ArrayUtils</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[1, 4, 5, 7, 8, 9]</span></code></pre>
<h3>Різниця (відрахування)</h3>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> firstList <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token string">"2"</span><span class="token punctuation">,</span> <span class="token string">"3"</span><span class="token punctuation">,</span> <span class="token string">"4"</span><span class="token punctuation">,</span> <span class="token string">"5"</span><span class="token punctuation">,</span> <span class="token string">"6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> secondList <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">,</span> <span class="token string">"3"</span><span class="token punctuation">,</span> <span class="token string">"6"</span><span class="token punctuation">,</span> <span class="token string">"7"</span><span class="token punctuation">,</span> <span class="token string">"8"</span><span class="token punctuation">,</span> <span class="token string">"9"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Різниця</span>
<span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span>firstList<span class="token punctuation">,</span> secondList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">ArrayUtils</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 4, 5]</span></code></pre>
<h2>Операції над множинами, продовження</h2>
<p>У цьому прикладі показано, як використовувати вищезгадані чотири методи для роботи з двома колекціями:</p>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> firstList <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> secondList <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> union <span class="token operator">=</span> <span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">union</span><span class="token punctuation">(</span>firstList<span class="token punctuation">,</span> secondList<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Об'єднання</span>
<span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> intersection <span class="token operator">=</span> <span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">intersection</span><span class="token punctuation">(</span>firstList<span class="token punctuation">,</span> secondList<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Перетин</span>
<span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> disjunction <span class="token operator">=</span> <span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">disjunction</span><span class="token punctuation">(</span>firstList<span class="token punctuation">,</span> secondList<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Диз'юнкція</span>
<span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> subtract <span class="token operator">=</span> <span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span>firstList<span class="token punctuation">,</span> secondList<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Різниця</span>

<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"firstList: "</span> <span class="token operator">+</span> <span class="token class-name">ArrayUtils</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>firstList<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"secondList: "</span> <span class="token operator">+</span> <span class="token class-name">ArrayUtils</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>secondList<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Об'єднання: "</span> <span class="token operator">+</span> <span class="token class-name">ArrayUtils</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>union<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Перетин: "</span> <span class="token operator">+</span> <span class="token class-name">ArrayUtils</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>intersection<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Диз'юнкція:"</span> <span class="token operator">+</span> <span class="token class-name">ArrayUtils</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>disjunction<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Різниця:"</span> <span class="token operator">+</span> <span class="token class-name">ArrayUtils</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>subtract<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Наш результат:</p>
<pre><code>firstList: {1,2,3,3,4,5}
secondList: {3,4,4,5,6,7}
Об'єднання: {1,2,3,3,4,4,5,6,7}
Перетин: {3,4,5}
Диз'юнкція: {1,2,3,4,6,7}
Різниця: {1,2,3}
</code></pre>
<p>Можеш самостійно поекспериментувати із цими методами.</p>
<h2>Метод unmodifiableCollection()</h2>
<p>Іноді доводиться реалізовувати методи інтерфейсу, які мають повертати колекції внутрішніх даних наших об'єктів. Бо дані внутрішні, ми не хочемо, щоб хтось десь їх змінював.</p>
<p>Або ми отримали десь колекцію, яку не потрібно міняти, але змушені передати її у якийсь сторонній метод. Де гарантія, що він її не змінить?</p>
<p>Для того, щоб спати спокійно, колекцію можна обернути на спеціальний wrapper, який кидатиме виняток при спробі модифікувати колекцію.</p>
<p>Приклад:</p>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> firstCollection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> secondCollection <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableCollection</span><span class="token punctuation">(</span>firstCollection<span class="token punctuation">)</span><span class="token punctuation">;</span>
firstCollection<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
firstCollection<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"from"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
firstCollection<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"codeGym"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//secondCollection.add("have a error");</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>secondCollection<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[hello, from, codeGym]</span></code></pre>
<p>Метод <span class="code text-orange">Collections.unmodifiableCollection()</span> повертає обгортку над переданою колекцією. Якщо викликати в неї методи <span class="code text-orange">get()</span> , <span class="code text-orange">size()</span> , все буде працювати. Проте за виклику методів <span class="code text-orange">add()</span> , <span class="code text-orange">set()</span> , <span class="code text-orange">remove()</span> ти отримаєш виняток.</p>
<pre><code>java.lang.UnsupportedOperationException
at org.apache.commons.collections.collection.UnmodifiableCollection.add(UnmodifiableCollection.java:75)
</code></pre>
<p>Насправді вже зараз метод позначений як deprecated і замість нього рекомендується використовувати <span class="code text-orange">Collections.unmodifiableCollection (Collection &lt;? extends T&gt; c)</span> .</p>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span><code class=" language-java"><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> firstCollection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> secondCollection <span class="token operator">=</span>
<span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableCollection</span><span class="token punctuation">(</span>firstCollection<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>