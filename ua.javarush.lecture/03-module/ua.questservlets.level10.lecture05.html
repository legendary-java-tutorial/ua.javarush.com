<h2>6.1 CookieManager</h2>
<p>Як ти вже знаєш, http-сервер може разом із відповіддю надіслати cookie, і тобі потрібно буде з ними працювати. Або навпаки, http-сервер чекає, що клієнт надішле йому Cookie і тобі потрібно додати їх у твій http-запит. Звичайно, можна зробити це прямо через заголовки (handlers), але HttpClient пропонує тобі зручніший механізм - клас <code>CookieHandler</code>. Отримати його можна за допомогою методу <code>cookieHandler()</code>. Приклад:</p>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class=" language-java"><span class="token class-name">HttpClient</span> <span class="text-red">client</span> <span class="token operator">=</span> <span class="token class-name">HttpClient</span><span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span> URI<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"https://codegym.cc"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">CookieHandler</span> handler <span class="token operator">=</span> <span class="text-red">client</span><span class="token punctuation">.</span><span class="token function"><span class="text-orange">cookieHandler</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>CookieHandler – це абстрактний клас, тому прийнято працювати з його імплементацією CookieManager. У якого у свою чергу всього пара методів, через які можна отримати об'єкт CookieStore. З ним можна надалі працювати:</p>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token class-name">HttpClient</span> <span class="text-red">client</span> <span class="token operator">=</span> <span class="token class-name">HttpClient</span><span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span> URI<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"https://codegym.cc"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">CookieHandler</span> <span class="text-viola">handler</span> <span class="token operator">=</span> <span class="text-red">client</span><span class="token punctuation">.</span><span class="token function">cookieHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"></span><span class="text-user"><span class="token class-name">CookieManager</span> manager</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name"><span class="text-user">CookieManager</span></span><span class="token punctuation">)</span> <span class="text-viola">handler</span><span class="token punctuation">;</span>
<span class="token class-name"></span><span class="text-green"><span class="token class-name">CookieStore</span> store</span> <span class="token operator">=</span> <span class="text-red">manager</span><span class="token punctuation">.</span><span class="token function"><span class="text-orange">getCookieStore</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>CookieStore – це інтерфейс, який має такі методи:</p>
<ul>
 <li><code>add()</code></li>
 <li><code>get()</code></li>
 <li><code>getCookies()</code></li>
 <li><code>remove()</code></li>
 <li><code>removeAll()</code></li>
</ul>
<p>Я не проходитиму по них докладно, ми вже детально розібрали HttpClient. Якщо вам дуже знадобиться, то документацію за класом CookieManager можна знайти за посиланнями:</p>
<p><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/net/CookieManager.html" target="_blank">Class CookieManager</a></p>
<p><a href="https://www.geeksforgeeks.org/java-net-cookiemanager-class-in-java/" target="_blank">CookieManager Class in Java</a></p>
<p><a href="https://spec-zone.ru/RU/Java/Tutorials/networking/cookies/custom.html" target="_blank">Користувальницький CookieManager</a></p>